var xmjd=mstrmojo&&mstrmojo.descriptors;var mstrmojo={descriptors:xmjd||{},meta:{TP:"t",STP:"st"},emptyFn:function(){},tstid:function(B){var A;if(B){if(typeof (B)==="object"){A=B.tstid;}else{A=B;}}return A?'tstid="'+A+'"':"";},getMissingFn:function getMissingFn(){return function(){var C=this.scriptClass,A;try{for(A in this){if(this[A]===arguments.callee){C+="."+A;break;}}}catch(B){}throw new Error("Missing abstract method: "+C);};},now:function now(){return new Date().getTime();},usesFrames:false};(function(){mstrmojo.global=(function(){var F=function(){return this;};return F.call(null);}());mstrmojo.dbg=mstrmojo.emptyFn;mstrmojo.dbg_stack=mstrmojo.emptyFn;mstrmojo.dbg_xhr=mstrmojo.emptyFn;mstrmojo.dbg_profile=mstrmojo.emptyFn;mstrmojo.debugBundles=(function(){return(window.mstrConfig&&(mstrConfig.debugFlags!==undefined)&&((mstrConfig.debugFlags&4)>0));})();mstrmojo.platform={};mstrmojo.prompt={};mstrmojo.settings={};mstrmojo.models={datasets:{},template:{}};mstrmojo.ui={editors:{controls:{}},menus:{},pathbar:{}};mstrmojo.prefs={};mstrmojo.ACL={};mstrmojo.CMS={};mstrmojo.storage={};mstrmojo.maps={};mstrmojo.maps.androidmap={};mstrmojo.maps.jsmap={};mstrmojo.graph={};mstrmojo.IPA={};mstrmojo.IPA.Monitors={};mstrmojo.IPA.Alerts={};mstrmojo.IPA.Environment={};mstrmojo.IPA.Groups={};mstrmojo.IPA.Heartbeat={};mstrmojo.IPA.Managers={};mstrmojo.sm={};mstrmojo.sort={};mstrmojo.ME={};mstrmojo.architect={ui:{editors:{},panels:{},factories:{}},obj:{},menu:{},projectmanagement:{}};mstrmojo.warehouse={ui:{editors:{}},obj:{},dbroles:{},menu:{}};mstrmojo.plugins={};mstrmojo.gmaps={};mstrmojo.DI={controller:{},model:{},ui:{dialogs:{}}};mstrmojo.Refine={};mstrmojo.qb={bigquery:{},es:{},mdx:{},menu:{},thirdParty:{}};mstrmojo.WH={};mstrmojo.fe={};mstrmojo.txEditor={};mstrmojo.condTx={};mstrmojo.threshold={};mstrmojo.express={ui:{}};mstrmojo.rw={model:{},xtab:{}};mstrmojo.util={ui:{}};mstrmojo.android={controllers:{},factories:{},inputControls:{},large:{controllers:{},factories:{},ui:{}},medium:{controllers:{},factories:{},ui:{nativebar:{}}},selectors:{},ui:{},nativedialog:{}};mstrmojo.vi={controllers:{},factories:{},models:{editors:{}},enums:{},ui:{menus:{},editors:{},rw:{selectors:{},xtab:{}},tabs:{},toolbars:{},tutorial:{}},viz:{},util:{}};mstrmojo.onetier={controllers:{},vi:{acl:{},prefs:{model:{}},ui:{tutorial:{}}}};mstrmojo.config={vi:{},onetier:{}};mstrmojo.chart={common:{},enums:{},model:{enums:{}}};mstrmojo.gm={};mstrmojo.heatmap={vi:{}};mstrmojo.netviz={};mstrmojo.imagelayout={};mstrmojo.iphone={};mstrmojo.winphone={};mstrmojo.mstr={search:{}};mstrmojo.mstr.ui={};mstrmojo.gmaps={};mstrmojo.esrimap={};mstrmojo.examples={};mstrmojo.home={controllers:{},models:{},views:{},ui:{}};mstrmojo.err=function D(H){var G=H.name+': "'+H.message+'"';if(mstrmojo.debug){if(H.fileName){G+=" at\n    "+H.fileName;}if(H.hasOwnProperty("lineNumber")){G+=": "+H.lineNumber;}else{if(H.hasOwnProperty("line")&&H.sourceURL){var F=H.sourceURL.split("/");G+="("+F[F.length>1?F.length-1:0]+":"+H.line+")";}}}this.dbg(G);if(mstrmojo.Dialog){mstrmojo.error({longDesc:H.message},null,{title:H.name});}else{window.alert(G);}};mstrmojo.confirm=function B(F){return window.confirm(F);};mstrmojo.alert=function E(F){window.alert(F);};var C=!!(/return true/.test(String(function(){return true;})));mstrmojo.mixin=function A(J,H){if(J){H=H||{};var I=/this\.\_super/;var G=function(N,M){return function L(){var P=this._super;this._super=M;var O=N.apply(this,arguments||[]);this._super=P;return O;};};var F=J.__onmixin__;if(F){delete J.__onmixin__;}var K;for(K in J){if((typeof J[K]==="function")&&(!C||I.test(J[K]))){H[K]=G(J[K],H[K]);}else{H[K]=J[K];}}if(F){J.__onmixin__=F;}}return H;};}());(function(){var $XHR;var $MISSING={};var getApp=function(){return mstrmojo.global.mstrApp||{};},getJsRoot=function(){return getApp().jsRoot||"../javascript/";},getJsBundlesRoot=function(){return getJsRoot()+"bundles/";},getJsMojoRoot=function(){return getApp().jsMojoRoot||"../javascript/mojo/js/source/";},isIE=!!document.all;function getXHR(){$XHR=self.XMLHttpRequest?new XMLHttpRequest():(self.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null);}function encodeParams(params){var x=-1,url=[],p;if(params){for(p in params){if(params.hasOwnProperty(p)){url[++x]=p+"="+encodeURIComponent(params[p]);}}}return url.join("&");}function appendUrlParams(method,baseUrl,params){if(method!=="GET"||!params){return baseUrl;}return baseUrl+"?"+encodeParams(params);}function syncXHR(method,baseUrl,params){var result=null;method=method.toUpperCase();if(!$XHR){getXHR();}if($XHR){try{var m=null,app=window.mstrApp;if(window.microstrategy!==undefined&&microstrategy){m=microstrategy;}params.taskContentType=params.taskContentType||"json";params.taskEnv="xhr";params.xts=mstrmojo.now();params=mstrmojo.addCSRFTokenToTaskParams(params);var ptp=(app&&app.persistTaskParams)||(m&&m.persistParams);if(ptp){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.hash.copy(ptp,params);}$XHR.open(method,appendUrlParams(method,baseUrl,params),false);if(method!=="POST"){params=null;}else{params=encodeParams(params);$XHR.setRequestHeader("Content-type","application/x-www-form-urlencoded");}$XHR.send(params);result=$XHR.responseText||null;}catch(localerr){if(window.console){window.console.log(localerr);}}}return result;}function _jsGet(file,nullCheck){var js=mstrmojo.loadFileSync(file);if(js){try{eval(js);return nullCheck?!!eval(nullCheck):true;}catch(localerr){window.alert("JavaScript compile error:\n\nFile: "+file+"\n\nError: "+localerr.message);}}return false;}mstrmojo.requiresBundle=function reqBundle(bundleName){return _jsGet(getJsBundlesRoot()+bundleName);};mstrmojo.loadFileSync=function loadFileSync(file){var result=null;if(!$XHR){getXHR();}if($XHR){try{$XHR.open("GET",file+((window.mstrConfig&&mstrConfig.webVersion)?"?v="+mstrConfig.webVersion:""),false);$XHR.send(null);result=$XHR.responseText||null;}catch(localerr){}if(!isIE&&$XHR.abort){$XHR.abort();}}return result;};mstrmojo.insertCSSLinks=function insertCSSLinks(files){var css,firsthead;if(files&&files.length>0){firsthead=document.getElementsByTagName("head")[0];files.forEach(function(file){css=document.createElement("link");css.setAttribute("id",file.replace(/[^a-zA-Z0-9]/g,""));css.setAttribute("rel","stylesheet");css.setAttribute("type","text/css");css.setAttribute("href",file);firsthead.appendChild(css);});}};mstrmojo.loader={loaded:{mstrmojo:true,"mstrmojo.loader":true},isLoaded:function isLd(fqcn){var o;try{o=eval(fqcn);}catch(localerr){}if(o){this.loaded[fqcn]=true;}return !!o;},load:function ld(fqcn){if($MISSING[fqcn]){return false;}if(this.loaded[fqcn]||this.isLoaded(fqcn)){return true;}if(_jsGet(this.fqcnToFile(fqcn),fqcn)){this.loaded[fqcn]=true;return true;}$MISSING[fqcn]=true;return false;},fqcnToFile:function fqcnToFile(fqcn){if(fqcn.match(/^mstrmojo\.plugins\./)){var pluginName=fqcn.substring(17,fqcn.indexOf(".",17));fqcn="../"+pluginName+"/javascript/"+getJsMojoRoot()+fqcn.replace("mstrmojo.plugins."+pluginName+".","").replace(/\./gm,"/");}else{if(fqcn.match(/^mstrmojo\./)){fqcn=getJsMojoRoot()+fqcn.replace("mstrmojo.","").replace(/\./gm,"/");}else{fqcn=getJsRoot()+fqcn.replace(/\./gm,"/");}}return fqcn+".js";}};var $LOADER=mstrmojo.loader,isLoaded=$LOADER.loaded;var reqCache={},addPackagesToReqCache=function addPkg(n,ns){var ps=n.split("."),klen=ps.length,k;for(k=1;k<klen;k++){var s=ps.slice(0,k).join(".");if(!reqCache[s]){ns.push(s);reqCache[s]=true;}}},loadInputScripts=function loadInputScripts(ns){var jlen=ns.length,j;for(j=0;j<jlen;j++){if(!$LOADER.load(ns[j])){window.alert("Warning: Javascript class not found:\n"+ns[j]);break;}}};mstrmojo.requiresCls=function reqCls(){var argLen=arguments.length,ns=[],i,len;for(i=0,len=argLen;i<len;i++){var n=arguments[i];if(!n||isLoaded[n]||$MISSING[n]){continue;}else{if(reqCache[n]){loadInputScripts([n]);reqCache[n]=false;continue;}}if(!n.match(/^mstrmojo\.plugins\./)){addPackagesToReqCache(n,ns);}ns.push(n);reqCache[n]=true;}loadInputScripts(ns);return true;};mstrmojo.requiresClsP=function reqClsP(){var argLen=arguments.length,ns=[],pkgName=arguments[0],i,len;addPackagesToReqCache(pkgName,ns);for(i=1,len=argLen;i<len;i++){var n=pkgName+"."+arguments[i];if(!n||isLoaded[n]||$MISSING[n]){continue;}else{if(reqCache[n]){loadInputScripts([n]);reqCache[n]=false;continue;}}if(!n.match(/^mstrmojo\.plugins\./)){ns.push(n);reqCache[n]=true;}}loadInputScripts(ns);return true;};var $DESCRIPTORS=mstrmojo.descriptors,descPrefix="mstrWeb.";function populateDescriptors(ds){if(ds){var dlen=ds.length,di;for(di=0;di<dlen;di++){var d=ds[di];$DESCRIPTORS[d.key]=d.v;}}}mstrmojo.populateDescriptors=populateDescriptors;if(window.mstrConfig!==undefined){populateDescriptors(mstrConfig.mstrDescs&&mstrConfig.mstrDescs.descriptors);mstrConfig.mstrDescs=null;}if(window.mstrApp!==undefined){populateDescriptors(mstrApp.mstrDescs&&mstrApp.mstrDescs.descriptors);}var requestDescriptor=function(prefix,ids){var ns=[],len=ids.length,i;for(i=0;i<len;i++){var k=ids[i];if(k&&!($DESCRIPTORS.hasOwnProperty(prefix+k))){ns.push(k);}}if(ns.length>0){var response=syncXHR("POST",(window.mstrConfig&&mstrConfig.taskURL)||"taskProc",{taskId:"getDescriptors",keys:ns.join(","),prefix:prefix});if(response){var r=eval("("+response+")");populateDescriptors(r&&r.descriptors);}}};mstrmojo.requiresDescsWPrefix=function reqDescP(prefix){var args=[].slice.call(arguments);args[0]=null;requestDescriptor(prefix,args);};mstrmojo.requiresDescs=function reqDesc(){if(window.mstrConfig!==undefined&&!mstrConfig.onMobileDevice){requestDescriptor(descPrefix,arguments);}};mstrmojo.desc=function desc(descID,defText){if(descID!==null&&descID!==undefined){mstrmojo.requiresDescs(descID);if($DESCRIPTORS.hasOwnProperty(descPrefix+descID)){return $DESCRIPTORS[descPrefix+descID];}defText=defText||"No string descriptor found for descID="+descID;}var decDefText="["+defText+"]";$DESCRIPTORS[descPrefix+descID]=decDefText;return decDefText;};mstrmojo.descP=function descP(prefix,descID,defText){mstrmojo.requiresDescsWPrefix(prefix,descID);if($DESCRIPTORS.hasOwnProperty(prefix+descID)){return $DESCRIPTORS[prefix+descID];}defText=defText||"No string descriptor found for descID="+descID;var decDefText="*"+defText+"*";$DESCRIPTORS[prefix+descID]=decDefText;return decDefText;};mstrmojo.provide=function prv(fqcn,cls){isLoaded[fqcn]=!!cls;return cls;};mstrmojo.invalidateCls=function rel(fqcn){reqCache[fqcn]=false;isLoaded[fqcn]=false;eval(fqcn+" = null");};var mx=mstrmojo.mixin;mstrmojo.declare=function declare(SuperCls,mixins,config){function Constr(props){if((!props||!props.dontInit)&&this.init){this.init(props);}}if(SuperCls){Constr.prototype=new SuperCls({dontInit:true});Constr.prototype.constructor=Constr;}var proto=Constr.prototype;var cnt=(mixins&&mixins.length)||0,i;for(i=0;i<cnt;i++){mx(mixins[i],proto);}if(config){mx(config,proto);if(config.scriptClass){isLoaded[config.scriptClass]=true;}}return Constr;};mstrmojo.findAncestor=function findAncestor(src,property,value,limitClass){var ancestor=src&&src.parent;while(ancestor&&(!limitClass||!(ancestor instanceof limitClass))){var targetProperty=ancestor[property];if(targetProperty!==undefined){if(value!==undefined&&value!==null){if(targetProperty===value){return ancestor;}}else{return ancestor;}}ancestor=ancestor.parent;}return null;};mstrmojo.isDescendant=function isDescendant(parent,child){var ancestor;if(!child||!parent){return false;}ancestor=child.parent;while(ancestor){if(ancestor===parent){return true;}ancestor=ancestor.parent;}return false;};mstrmojo.getCSRFToken=function getCSRFToken(url){var tkn=null;try{if(url){if(url.indexOf("validateRandNum=")>=0){return tkn;}if(this.isUrlExternal(url)){return tkn;}}if(window.mstrApp&&mstrApp.validateRandNum){tkn=mstrApp.validateRandNum;}else{if(window.mstrConfig&&mstrConfig.validateRandNum){tkn=mstrConfig.validateRandNum;}else{if(window.microstrategy!==undefined&&microstrategy&&microstrategy.validateRandNum){tkn=microstrategy.validateRandNum;}}}}catch(err){}return tkn;};mstrmojo.addCSRFTokenToURL=function addCSRFTknToURL(url){if(!url){return"";}var tkn=mstrmojo.getCSRFToken(url);if(tkn&&tkn.length>0){if(url.indexOf("?")>-1){url+="&";}else{url+="?";}url+="validateRandNum="+tkn;}return url;};mstrmojo.addCSRFTokenToTaskParams=function addCSRFTknToTaskParams(params){if(params){var tkn=mstrmojo.getCSRFToken();if(tkn&&tkn.length>0){params.validateRandNum=tkn;}}return params;};mstrmojo.getInstance=function getInstance(config){var Clazz=mstrmojo.hash.walk(config.scriptClass,window);if(Clazz){return new Clazz(config);}return null;};mstrmojo.isUrlExternal=function isUrlExternal(url){var curURL=window.location.href;var servletName=window.mstrApp&&mstrApp.name,taskProcName=window.mstrConfig.taskURL&&mstrConfig.taskURL,isSameWebApp=(url.indexOf("?")===0||url.indexOf(servletName)===0||url.indexOf("./"+servletName)===0||url.indexOf(taskProcName)===0||url.indexOf("./"+taskProcName)===0||url.indexOf(curURL)===0||((curURL.indexOf("?")>0)&&(url.indexOf(curURL.substring(0,curURL.indexOf("?")))===0)));return !isSameWebApp;};mstrmojo.resolveFeature=function resolveFeature(feature){var features=mstrApp.features;return features&&features[feature];};mstrmojo.getStyleRoot=function getStyleRoot(){var c=mstrConfig||{},styleRoot=c.styleRoot||"../style";return styleRoot;};}());
/* -- 
    Mojo JavaScript Library
    Copyright (C) 1996-2011 MicroStrategy Incorporated, All rights reserved. Confidential. 
-- */
mstrmojo.loadFileSync=function loadFileSync(B){var A=null;if(window.mstrApp&&window.mstrApp.isLocalFileSystem){var D=[];var C={url:B};D.push(C);mstrmojo._LoadsScript.requiresExternalScripts(D,null,null);return ;}if(!$XHR){getXHR();}if($XHR){try{$XHR.open("GET",B+((window.mstrConfig&&mstrConfig.webVersion)?"?v="+mstrConfig.webVersion:""),false);$XHR.send(null);A=$XHR.responseText||null;}catch(E){}if(!isIE&&$XHR.abort){$XHR.abort();}}return A;};mstrmojo.chart.model.enums.EnumDSSDynamicShortcut={DssDynamicShortcutReserved:0,DssDynamicShortcutAuto:1,DssDynamicShortcutAcrossThenDown:2,DssDynamicShortcutDownThenAcross:3,DssDynamicShortcutColumns:4,DssDynamicShortcutRows:5,DssDynamicShortcutCell:6,DssDynamicShortcutShape:7,DssDynamicShortcutLastOne:8,DssDynamicShortcutRangeEnd:255};mstrmojo.vi.viz.EnumVisualizationTemplates={UNKNOWN_GRAPHMATRIX_TYPE:-1,GRID:0,HEATMAP:1,GOOGLEMAP:2,PIE:3,RING:4,GRAPHMATRIXVERTICALBARSTACKED:6,GRAPHMATRIXVERTICALBARCLUSTERED:7,GRAPHMATRIXVERTICALBARPERCENT:8,GRAPHMATRIXHORIZONTALBARSTACKED:9,GRAPHMATRIXHORIZONTALBARCLUSTERED:10,GRAPHMATRIXHORIZONTALBARPERCENT:11,GRAPHMATRIXVERTICALLINESTACKED:12,GRAPHMATRIXVERTICALLINECLUSTERED:13,GRAPHMATRIXVERTICALLINEPERCENT:14,GRAPHMATRIXHORIZONTALLINESTACKED:15,GRAPHMATRIXHORIZONTALLINECLUSTERED:16,GRAPHMATRIXHORIZONTALLINEPERCENT:17,GRAPHMATRIXSCATTERCIRCLEMM:18,GRAPHMATRIXSCATTERGRIDCIRCLEAA:19,GRAPHMATRIXBUBBLECIRCLEMM:21,GRAPHMATRIXBUBBLEGRIDCIRCLEAA:22,GRAPHMATRIXSCATTERSQUAREAM:23,GRAPHMATRIXSCATTERSQUAREMM:24,GRAPHMATRIXSCATTERGRIDSQUAREAA:25,GRAPHMATRIXBUBBLESQUAREAM:26,GRAPHMATRIXBUBBLESQUAREMM:27,GRAPHMATRIXBUBBLEGRIDSQUAREAA:28,GRAPHHORIZONTALBARCLUSTERED:29,GRAPHMATRIXVERTICALAREASTACKED:30,GRAPHMATRIXVERTICALAREAPERCENT:31,GRAPHMATRIXVERTICALAREACLUSTERED:32,GRAPHMATRIXHORIZONTALAREASTACKED:40,GRAPHMATRIXHORIZONTALAREAPERCENT:41,GRAPHMATRIXHORIZONTALAREACLUSTERED:42,GRAPHHORIZONTALBARDUALAXISCLUSTERED:33,GRAPHHORIZONTALBARDUALAXISABSOLUTE:34,GRAPHHORIZONTALLINEABSOLUTE:35,GRAPHHORIZONTALLINEDUALAXISABSOLUTE:36,GRAPHHORIZONTALAREAABSOLUTE:37,GRAPHHORIZONTALAREADUALAXISABSOLUTE:38,GRAPHVERTICALBARCLUSTERED:39,GRAPHVERTICALBARDUALAXISCLUSTERED:43,GRAPHVERTICALBARDUALAXISABSOLUTE:44,GRAPHVERTICALBARDUALAXISSTACKED:45,GRAPHVERTICALLINEABSOLUTE:46,GRAPHVERTICALLINESTACKED:47,GRAPHVERTICALLINEPERCENT:48,GRAPHVERTICALLINEDUALAXISABSOLUTE:49,GRAPHVERTICALLINEDUALAXISSTACKED:50,GRAPHVERTICALAREAABSOLUTE:51,GRAPHVERTICALAREAPERCENT:52,GRAPHVERTICALAREASTACKED:53,GRAPHVERTICALAREADUALAXISABSOLUTE:54,GRAPHVERTICALAREADUALAXISSTACKED:55,GRAPHCOMBINATIONBARAREA:56,GRAPHCOMBINATIONBARAREADUALAXIS:57,NETWORK:58,IMAGELAYOUT:59,GOOGLEMAPDENSITY:60,GRAPHMATRIXPIE:61,GRAPHMATRIXRING:62,GRAPHHORIZONTALBARABSOLUTE:63,GRAPHHORIZONTALBARPERCENT:64,GRAPHHORIZONTALBARSTACKED:65,GRAPHVERTICALBARABSOLUTE:66,GRAPHVERTICALBARPERCENT:67,GRAPHVERTICALBARSTACKED:68,ESRIMAP:69,GRAPHMATRIXVERTICALBARAUTOMATIC:70,GRAPHMATRIXHORIZONTALBARAUTOMATIC:71,GRAPHMATRIXVERTICALLINEAUTOMATIC:72,GRAPHMATRIXHORIZONTALLINEAUTOMATIC:73,GRAPHMATRIXVERTICALAREAAUTOMATIC:74,GRAPHMATRIXHORIZONTALAREAAUTOMATIC:75};(function(){mstrmojo.requiresDescs(5774,2266,2287,2496,2495,2493,2267,2498,2500,2279,2491,2476,2271,2478,2268,2492,2273,2280,2490,2488,2494,2487,2269,2477,2499,2292,2489,2281,2484,2483,2480,2497,2274,2485,2486,2282,2481,2479,2482,2290,2293);var A=[{n:mstrmojo.desc(5774,"No Fill"),id:"transparent"},{n:mstrmojo.desc(2266,"Black"),id:"#000000"},{n:mstrmojo.desc(2287,"Brown"),id:"#993300"},{n:mstrmojo.desc(2496,"Olive Green"),id:"#333300"},{n:mstrmojo.desc(2495,"Dark Green"),id:"#003300"},{n:mstrmojo.desc(2493,"Dark Teal"),id:"#003366"},{n:mstrmojo.desc(2267,"Dark Blue"),id:"#000080"},{n:mstrmojo.desc(2498,"Indigo"),id:"#333399"},{n:mstrmojo.desc(2500,"Grey-80%"),id:"#333333"},{n:mstrmojo.desc(2279,"Dark Red"),id:"#800000"},{n:mstrmojo.desc(2491,"Orange"),id:"#ff6600"},{n:mstrmojo.desc(2476,"Dark Yellow"),id:"#808000"},{n:mstrmojo.desc(2271,"Green"),id:"#008000"},{n:mstrmojo.desc(2478,"Teal"),id:"#008080"},{n:mstrmojo.desc(2268,"Blue"),id:"#0000ff"},{n:mstrmojo.desc(2492,"Blue-Grey"),id:"#666699"},{n:mstrmojo.desc(2273,"Grey-50%"),id:"#808080"},{n:mstrmojo.desc(2280,"Red"),id:"#ff0000"},{n:mstrmojo.desc(2490,"Light Orange"),id:"#ff9900"},{n:mstrmojo.desc(2488,"Lime"),id:"#99cc00"},{n:mstrmojo.desc(2494,"Sea Green"),id:"#339966"},{n:mstrmojo.desc(2487,"Aqua"),id:"#33cccc"},{n:mstrmojo.desc(2269,"Light Blue"),id:"#3366ff"},{n:mstrmojo.desc(2477,"Violet"),id:"#800080"},{n:mstrmojo.desc(2499,"Grey-40%"),id:"#969696"},{n:mstrmojo.desc(2292,"Pink"),id:"#ff00ff"},{n:mstrmojo.desc(2489,"Gold"),id:"#ffcc00"},{n:mstrmojo.desc(2281,"Yellow"),id:"#ffff00"},{n:mstrmojo.desc(2484,"Bright Green"),id:"#00ff00"},{n:mstrmojo.desc(2483,"Turquoise"),id:"#00ffff"},{n:mstrmojo.desc(2480,"Sky Blue"),id:"#00ccff"},{n:mstrmojo.desc(2497,"Plum"),id:"#993366"},{n:mstrmojo.desc(2274,"Grey-25%"),id:"#c0c0c0"},{n:mstrmojo.desc(2485,"Rose"),id:"#ff99cc"},{n:mstrmojo.desc(2486,"Tan"),id:"#ffcc99"},{n:mstrmojo.desc(2282,"Light Yellow"),id:"#ffff99"},{n:mstrmojo.desc(2481,"Light Green"),id:"#ccffcc"},{n:mstrmojo.desc(2479,"Light Turquoise"),id:"#ccffff"},{n:mstrmojo.desc(2482,"Pale Blue"),id:"#99ccff"},{n:mstrmojo.desc(2290,"Lavender"),id:"#cc99ff"},{n:mstrmojo.desc(2293,"White"),id:"#ffffff"}];var E=[];mstrmojo.util.ui.ColorPicker={getBasicColors:function B(){return A.slice();},getCustomColors:function D(){return E.slice();},addCustomColor:function C(G){var F=function(H){return H.id===G;};if(!A.filter(F)[0]&&!E.filter(F)[0]){E.push({n:G,id:G});if(E.length>8){E.shift();}}}};}());(function(){mstrmojo.vi._MonitorsAppState=mstrmojo.provide("mstrmojo.vi._MonitorsAppState",{onAppStateChange:function(B){if(this._super){this._super(B);}},init:function A(B){this._super(B);if(mstrApp.attachEventListener){mstrApp.attachEventListener("appStateChange",this.id,"onAppStateChange");}}});}());(function(){mstrmojo.hash=mstrmojo.provide("mstrmojo.hash",{copy:function B(S,R){if(S){R=R||{};var T;for(T in S){R[T]=S[T];}}return R;},copyProps:function C(T,V,R){R=R||{};if(V){var U=(T&&T.length)||0,S;for(S=0;S<U;S++){var W=T[S];if(V[W]!==undefined){R[W]=V[W];}}}return R;},forEach:function I(U,T,S){if(U){var R;for(R in U){if(S){if(T.call(S,U[R],R,U)===false){break;}}else{if(T(U[R],R,U)===false){break;}}}}return U;},walk:function P(V,S){if(!S){S=mstrmojo.global;}var U=V.split(".");if(U.length===1){return S[V];}var T=(U&&U.length)||0,R;for(R=0;R<T;R++){S=S[U[R]];if(!S){break;}}return S;},isEmpty:function F(S){if(!S){return true;}var R;for(R in S){if(S[R]!==null&&S[R]!==undefined){return false;}}return true;},clear:function G(S){if(S){var R;for(R in S){delete S[R];}}return S;},any:function J(U,V){var T;if(U){var S=this.keyarray(U);if(S.length>0){var R=S[0];T=V?R:U[R];}}return T;},clone:function M(V){if(!V){return null;}var X;if(V.constructor===Array){X=V.concat();var W=X[0];if(W&&typeof W==="object"){var R=X.length,U;for(U=0;U<R;U++){X[U]=this.clone(V[U]);}}}else{X={};var T;for(T in V){var S=V[T];if(S&&typeof S==="object"){X[T]=this.clone(S);}else{X[T]=S;}}}return X;},cloneArray:function E(S){var T=[],R=(S&&S.length)||0,U;for(U=0;U<R;U++){T[U]=this.clone(S[U]);}return T;},keyarray:function K(T,U){var R=[],S;if(T){if(Object.keys&&!U){R=Object.keys(T);}else{for(S in T){R.push(U?Number(S):S);}}}return R;},valarray:function L(T){var R=[];if(T){var S;for(S in T){R.push(T[S]);}}return R;},equals:function Q(Y,X){var S=mstrmojo.hash,W=(Y&&X)||(!Y&&!X&&(Y===X));if(W&&Y){W=(Y.constructor===X.constructor);if(W){if(Y.constructor===Array){var V=Y.length;W=(V===X.length);if(W&&V){var T;for(T=0;T<V;T++){W=W&&S.equals(Y[T],X[T]);}}}else{if(typeof Y==="object"){var Z=S.keyarray(Y),U=S.keyarray(X);W=Z.length===U.length;if(W){var R;for(R in Y){W=W&&(S.equals(Y[R],X[R]));}}}else{W=(Y===X);}}}}return W;},obj2array:function O(W){var X;for(X in W){var V=W[X];if(V&&typeof V==="object"){W[X]=this.obj2array(V);}}var S=W.isArray;if(S!==undefined&&S===true){var U=[],R=W.length,T;for(T=0;T<R;T++){U.push(W[T]);}return U;}return W;},min:function D(U,V,W){var R=null,T;if(U){for(T in U){var S=V?U[T]:T;if(W){S=Number(S);}if((R===null)||(S<R)){R=S;}}}return R;},max:function N(U,V,W){var R=null,T;if(U){for(T in U){var S=V?U[T]:T;if(W){S=Number(S);}if((R===null)||(S>R)){R=S;}}}return R;},make:function A(S,T,R){if(!S||!T){return null;}if(S.attachEventListener){return S;}if(T.makeObservable){S=T.makeObservable(S,R)||S;}else{this.copy(T.prototype,S);if(S.init){S=S.init(R)||S;}}return S;},mergeHashes:function H(R,S){R=this.clone(R)||{};if(S){mstrmojo.array.forEach(mstrmojo.array.distinct(this.keyarray(S).concat(this.keyarray(R))),function(T){var V=R[T],U=S[T];if(!V){R[T]=U;}else{if(V&&U){if(typeof V==="object"){if(V.constructor===Array){R[T]=V.concat(U);}else{R[T]=this.mergeHashes(V,U);}}else{R[T]=U;}}}},this);}return R;}});}());mstrmojo.chart.model.enums.EnumDSSGraphProperty={DssGraphTextContent:9999,DssGraphContent:9999,DssGraphPropertyReserved:0,DssGraphAutoFitO1:4,DssGraphAutoFitO2:5,DssGraphAutoFitX:6,DssGraphAutoFitY1:7,DssGraphAutoFitY2:8,DssGraphGroupSpacing:10,DssGraphRiserWidth:11,DssGraphColorBySeries:12,DssGraphCurveColorAsSeries:13,DssGraphSDMOVAFactor:14,DssGraph2DAngle:18,DssGraph2DDepth:20,DssGraphDepthMode:21,DssGraph2ScaleDirectionX:22,DssGraph2ScaleDirectionY1:23,DssGraph2ScaleDirectionY2:24,DssGraph2ExcludeZeroX:25,DssGraph2ExcludeZeroY1:26,DssGraph2ExcludeZeroY2:27,DssGraphFormatDataTextX:28,DssGraphFormatDataTextY1:29,DssGraphFormatDataTextY2:30,DssGraphFormatX:33,DssGraphFormatY1:34,DssGraphFormatY2:35,DssGraphFormatZ:36,DssGraphGridLineO1:37,DssGraphGridLineO2:38,DssGraphGridLineX:39,DssGraphGridLineY1:40,DssGraphGridLineY2:41,DssGraphLabelModeO1:48,DssGraphLabelModeO2:49,DssGraphLegendLocation:52,DssGraphTitleXLocation:54,DssGraphTitleY1Location:55,DssGraphTitleY2Location:56,DssGraph2LogScaleX:57,DssGraph2LogScaleY1:58,DssGraph2LogScaleY2:59,DssGraphMarkerShape:60,DssGraphMarkerSize:61,DssGraph2DPlaceX:65,DssGraph2DPlaceY1:66,DssGraph2DPlaceY2:67,DssGraphConnectLine:68,DssGraphShowStepLine:70,DssGraph2ScaleEndX:74,DssGraph2ScaleEndY1:75,DssGraph2ScaleEndY2:76,DssGraph2DScaleFreqO1:87,DssGraph2DScaleFreqO2:88,DssGraph2DScaleFreqX:89,DssGraph2DScaleFreqY1:90,DssGraph2DScaleFreqY2:91,DssGraphScaleX:92,DssGraphScaleY1:93,DssGraphScaleY2:94,DssGraphShowSDDataLineType:96,DssGraphSDRiserType:97,DssGraphShowSDLine:98,DssGraphShowSDCurve:99,DssGraphShowSDLinrCorr:101,DssGraphShowSDLinrExp:102,DssGraphShowSDLinrFormula:103,DssGraphShowSDLinrLine:104,DssGraphShowSDLinrLog:105,DssGraphShowSDLinrNatLog:106,DssGraphShowSDLinrNPoly:107,DssGraphSDPolyFactor:108,DssGraphShowSDMeanLine:109,DssGraphShowSDMOVALine:110,DssGraphShowSDSTDDLine:111,DssGraphShowDataText:113,DssGraphShowDivBiPolar:114,DssGraphShowErrorBar:115,DssGraphShowLegendText:116,DssGraphShow2DO1Label:117,DssGraphShow2DO1:-117,DssGraphShow2DO2:118,DssGraphOffScaleTypeX:119,DssGraphOffScaleTypeY1:120,DssGraphOffScaleTypeY2:121,DssGraphShowQuadrants:122,DssGraphShowRiserShadows:123,DssGraphShow2DXTitle:124,DssGraphShow2DY1Title:125,DssGraphShow2DY2Title:126,DssGraphShow2DXLabel:127,DssGraphShow2DX:-127,DssGraphShow2DY1Label:128,DssGraphShow2DY1:-128,DssGraphShow2DY2Label:129,DssGraphShow2DY2:-129,DssGraphShowZeroLineX:130,DssGraphShowZeroLineY1:131,DssGraphShowZeroLineY2:132,DssGraph2DSideO1:133,DssGraph2DSideO2:134,DssGraph2DSideX:135,DssGraph2DSideY1:136,DssGraph2DSideY2:137,DssGraph2DSDSplitY:140,DssGraphStaggerO1:142,DssGraphStaggerO2:143,DssGraphStaggerX:144,DssGraphStaggerY1:145,DssGraphStaggerY2:146,DssGraphUniformBorders:148,DssGraphPieDepthValue:192,DssGraphPieHoleSizeValue:198,DssGraphPieInset:200,DssGraphPiesPerRowValue:201,DssGraphPieRotationValue:202,DssGraphShowFeeler:204,DssGraphShowLBLFeelerLabel:205,DssGraphShowLBLFeeler:-205,DssGraphShowLBLPie:206,DssGraphShowLBLRing:207,DssGraphDeleteSlice:208,DssGraphDetachSlice:209,DssGraphPieRestore:210,DssGraphPieTiltValue:211,DssGraphPieTiltOn:212,DssGraphShowPolarCoordinateAxis:215,DssGraphShowPolarConnectLines:218,DssGraphStockDataValueType:222,DssGraphShowBubbleGrid:245,DssGraphSDShowDataText:247,DssGraphShowTitleSeries:248,DssGraphConnectStackBars:249,DssGraphLegendBox:250,DssGraphLinkColors:260,DssGraph3DCustomView:265,DssGraph3DGridFloor:277,DssGraph3DGridLWall:278,DssGraph3DGridRiser:279,DssGraph3DGridRWall:280,DssGraph3DColTitleLocation:285,DssGraph3DLYTitleLocation:287,DssGraph3DRowTitleLocation:288,DssGraph3DRYTitleLocation:289,DssGraph3DScalefreqX:299,DssGraph3DScalefreqY:300,DssGraph3DScalefreqZ:301,DssGraphShow3DScatterLine:308,DssGraphShow3DLineToLWall:309,DssGraphShow3DLineToFloor:310,DssGraphShow3DLineToRWall:311,DssGraphSD3DRiserType:312,DssGraphShow3DShowDataLabelsBox:313,DssGraph3DOffScaleTypeX:314,DssGraph3DOffScaleTypeY:315,DssGraph3DOffScaleTypeZ:316,DssGraphShow3DCHeader:318,DssGraphShow3DColTitle:319,DssGraph3DShowDataText:320,DssGraphShow3DLNumber:321,DssGraphShow3DLYTitle:322,DssGraphShow3DRNumber:323,DssGraphShow3DRYTitle:324,DssGraphShow3DRHeader:325,DssGraphShow3DRowTitle:326,DssGraphShow3DFloor:327,DssGraphShow3DLegend:328,DssGraphShow3DLWall:329,DssGraphShow3DRWall:330,DssGraph3DViewStruct:337,DssGraphACMColorModel:549,DssGraphLegendItems:554,DssGraphSeriesColor:556,DssGraphReverseGroup:558,DssGraphReverseSeries:559,DssGraphSeriesByColumn:560,DssGraphAreaBackColor:561,DssGraphAreaTransparency:563,DssGraphAreaColor:564,DssGraphAreaPattern:566,DssGraphAreaSFX:567,DssGraphFontAlign:570,DssGraphFontTransparency:573,DssGraphFontColor:574,DssGraphFontName:576,DssGraphFontRotation:578,DssGraphVirtualFontSize:583,DssGraphFontStyle:584,DssGraphType:585,DssGraphLineTransparency:587,DssGraphLineColor:588,DssGraphLinePattern:589,DssGraphVirtualLineWidth:591,DssGraphFootnoteLocation:592,DssGraphFrameLocation:593,DssGraphSubTitleLocation:594,DssGraphTitleLocation:595,DssGraphShowfootnote:596,DssGraphShowSubtitle:597,DssGraphShowTitle:598,DssGraphFontBox:601,DssGraphFontSize:603,DssGraphLockFontSize:604,DssGraphLineWidth:605,DssGraphAreaAlpha:608,DssGraphLineAlpha:609,DssGraphFontAlpha:610,DssGraphAreaCustomBevelEffect:612,DssGraphFormatDataTextAdv:616,DssGraphFormatXAdv:618,DssGraphFormatY1Adv:619,DssGraphFormatY2Adv:620,DssGraphFormatZAdv:621,DssGraphMiddleValue:630,DssGraphSplitYPosition:631,DssGraphAxisShowUserLine:632,DssGraphAxisUserLineValue:633,DssGraphAxisUserLineAxis:634,DssGraphMarkerLayout:637,DssGraphPieDataValueLoc:638,DssGraphPieDataLabelLoc:639,DssGraph2DOrdSpaceMode:642,DssGraphLegendLock:644,DssGraphGridStepY1:645,DssGraphGridStepY2:646,DssGraphGridStepX:647,DssGraphDataTextShowConnectLine:652,DssGraphGridLineZ:658,DssGraphScaleZ:659,DssGraphStaggerZ:660,DssGraph2ScaleEndZ:662,DssGraph2ExcludeZeroZ:663,DssGraph2ScaleDirectionZ:664,DssGraphGridStepZ:665,DssGraphGaugeInfo:668,DssGraphGaugeFancyBox:669,DssGraphSDMarkerSize:671,DssGraphSDMarkerShape:683,DssGraphMetric1:690,DssGraphMetric2:691,DssGraphStockStyle:692,DssGraph2ScaleDirectionY3:693,DssGraph2ExcludeZeroY3:694,DssGraphGridLineY3:697,DssGraphFormatY3Adv:699,DssGraphGridStepY3:701,DssGraphOffScaleTypeY3:702,DssGraphShow2DY3:704,DssGraph2DSideY3:706,DssGraphStaggerY3:707,DssGraph2DPlaceY3:709,DssGraph2ScaleEndY3:710,DssGraph2DScaleFreqY3:713,DssGraphScaleY3:714,DssGraph2ScaleDirectionY4:715,DssGraph2ExcludeZeroY4:716,DssGraphGridLineY4:719,DssGraphFormatY4Adv:721,DssGraphGridStepY4:723,DssGraphOffScaleTypeY4:724,DssGraphShow2DY4:726,DssGraph2DSideY4:728,DssGraphStaggerY4:729,DssGraph2DPlaceY4:731,DssGraph2ScaleEndY4:732,DssGraph2DScaleFreqY4:735,DssGraphScaleY4:736,DssGraphSpiderLines:739,DssGraphPolarStartAngle:740,DssGraphMetric3:742,DssGraphRadarCircularDataLines:782,DssGraphRemoteAxis:784,DssGraphConnectFirstLast:790,DssGraphGaugeShowAxisLabelsOutside:791,DssGraphGaugeShowNeedle:792,DssGraphTailShape:793,DssGraphPieForceRound:794,DssGraphGaugeStyleValue:795,DssGraphGaugeBorderStyleValue:796,DssGraphGaugeBorderThicknessValue:797,DssGraphGaugeRangeThicknessValue:798,DssGraphGaugeRangeStartAngleValue:799,DssGraphGaugeRangeStopAngleValue:800,DssGraphGaugeNeedleStyleValue:801,DssGraphCurvedLines:804,DssGraphAreaBevelEffect:879,DssGraphFontAntiAlias:881,DssGraphFormatDataTextY3:695,DssGraphFormatDataTextY4:717,DssGraphColorPalette:10000,DssGraphOriContent:10001,DssGraphFillEffect:10002,DssGraphGradient:10003,DssGraphSDShowToolTip:10004,DssGraphSDToolTip:10005,DssGraphSDRegressionType:10006,DssGraph2LogScale:10007,DssGraphManualMajor:10008,DssGraphManualMinor:10009,DssGraph2ScaleDirection:10010,DssGraphShow2DAxisLine:10011,DssGraph2ExcludeZero:10012,DssGraph2ScaleUseMax:10013,DssGraph2ScaleUseMin:10014,DssGraph2ScaleMax:10015,DssGraph2ScaleMin:10016,DssGraphShow2DAxisLabels:10017,DssGraph2ScaleEndMax:10018,DssGraph2ScaleEndMin:10019,DssGraphShow2DAxisMajor:10020,DssGraphShow2DAxisMinor:10021,DssGraph2DSide:10022,DssGraphStyleMajor:10023,DssGraphStyleMinor:10024,DssGraphCountMajor:10025,DssGraphCountMinor:10026,DssGraphShowTotalValue:10027,DssGraph2DPie:10028,DssGraphShowDataValue:10029,DssGraphShowDVPercent:10030,DssGraphShowDataLabel:10031,DssGraphShowPieLabelOnSide:10032,DssGraphShowMarker:10033,DssGraphShowMetric1:10034,DssGraphShowMetric2:10035,DssGraphShowMetric3:10036,DssGraphMetric1Style:10037,DssGraphMetric2Style:10038,DssGraphMetric3Style:10039,DssGraphShowLine:10040,DssGraphShowToolTip:10041,DssGraphToolTip:10042,DssGraphAxisAutoFit:10043,DssGraphAxisStagger:10044,DssGraphAxisScaleFreq:10045,DssGraphMetric1Value:10046,DssGraphMetric2Value:10047,DssGraphMetric3Value:10048,DssGraph2AxisFormatText:10049,DssGraph2AxisFormatDataText:10050,DssGraphDPI:10051,DssGraphDocSize:10052,DssGraphAutoArrange:10053,DssGraph2DSplitYAutomatic:10054,DssGraphHistogramRangeMin:10055,DssGraphHistogramRangeMax:10056,DssGraphHistogramBuckets:10057,DssGraphGaugeSAngle:10058,DssGraphGaugeEAngle:10059,DssGraphGaugeThickness:10060,DssGraphGauge1Show:10061,DssGraphGauge1Min:10062,DssGraphGauge1Max:10063,DssGraphGauge2Show:10064,DssGraphGauge2Min:10065,DssGraphGauge2Max:10066,DssGraphGauge3Show:10067,DssGraphGauge3Min:10068,DssGraphGauge3Max:10069,DssGraphGauge4Show:10070,DssGraphGauge4Min:10071,DssGraphGauge4Max:10072,DssGraphGauge5Show:10073,DssGraphGauge5Min:10074,DssGraphGauge5Max:10075,DssGraphAxisDataTextPlace:10076,DssGraphAxisNumberFormat:10077,DssGraphAxisDataNumberFormat:10078,DssGraphAxisHasErrorBar:10079,DssGraphAxisHasMiddleValue:10080,DssGraphHeight:10081,DssGraphWidth:10082,DssGraphPicture:10083,DssGraph3DTurnXCounterClockwise:10084,DssGraph3DTurnYCounterClockwise:10085,DssGraph3DTurnZCounterClockwise:10086,DssGraph3DTurnXClockwise:10087,DssGraph3DTurnYClockwise:10088,DssGraph3DTurnZClockwise:10089,DssGraph3DMoveXTowardsOrigin:10090,DssGraph3DMoveYTowardsOrigin:10091,DssGraph3DMoveZTowardsOrigin:10092,DssGraph3DMoveXAwayFromOrigin:10093,DssGraph3DMoveYAwayFromOrigin:10094,DssGraph3DMoveZAwayFromOrigin:10095,DssGraph3DDecreaseCubeX:10096,DssGraph3DDecreaseCubeY:10097,DssGraph3DDecreaseCubeZ:10098,DssGraph3DIncreaseCubeX:10099,DssGraph3DIncreaseCubeY:10100,DssGraph3DIncreaseCubeZ:10101,DssGraph3DDecreaseWallX:10102,DssGraph3DDecreaseWallY:10103,DssGraph3DDecreaseWallZ:10104,DssGraph3DIncreaseWallX:10105,DssGraph3DIncreaseWallY:10106,DssGraph3DIncreaseWallZ:10107,DssGraph3DPanXLeft:10108,DssGraph3DPanYUp:10109,DssGraph3DRelative:10110,DssGraph3DPanXRight:10111,DssGraph3DPanYDown:10112,DssGraph3DAbsolute:10113,DssGraph3DZoomIn:10114,DssGraph3DIncreasePerspectiveDistortion:10115,DssGraph3DStepSize:10116,DssGraph3DZoomOut:10117,DssGraph3DDecreasePerspectiveDistortion:10118,DssGraph3DInitMatrix:10119,DssGraphGaugeQBShow:10120,DssGraphGaugeQBStart:10121,DssGraphGaugeQBStop:10122,DssGraphEnhancedSeriesEffect:10123,DssGraphLocale:10124,DssGraph3DViewStructName:10125,DssGraphLabelsDistance:10126,DssGraphLegendDetails:10127,DssGraphDefaultsInitialized:10128,DssGraphShow3DAxisMajor:10129,DssGraphGradientColorMode:10130,DssGraphLegendDetailsNEW:10131,DssGraphFrameLocationNEW:10132,DssGraph3DColTitleLocationNEW:10133,DssGraph3DRowTitleLocationNEW:10134,DssGraphLabelsDistanceNEW:10135,DssGraphDocSizeNEW:10136,DssGraphUseManualHistogramBuckets:10137,DssGraphFontSize100:10138,DssGraphUseSpecialSeries:10140,DssGraphIsOnlyAdditionalMetrics:10170};mstrmojo.EnumReadystate={IDLE:1,WAITING:3,ERROR:4,SUCCESS:5,CANCELLED:6,TIMEOUT:7};mstrmojo.chart.model.enums.EnumDSSXMLAxesBitMap={DssXmlAxisNone:0,DssXmlAxisRowsBit:1,DssXmlAxisColumnsBit:2,DssXmlAxisPagesBit:4,DssXmlAxisChaptersBit:8};mstrmojo.chart.model.enums.EnumDSSAxisName={DssAxisReserved:0,DssAxisRows:1,DssAxisColumns:2,DssAxisPages:3,DssAxisChapters:4,DssAxisAll:5,DssAxisDropZoneIndexRoot:8,DssAxisDropZoneIndexEnd:8+255,DssAxisDynamicShortcutRoot:300,DssAxisDynamicShortcutEnd:300+255};mstrmojo.mstr.EnumDataType={DataTypeUnknown:-1,DataTypeReserved:0,DataTypeInteger:1,DataTypeUnsigned:2,DataTypeNumeric:3,DataTypeDecimal:4,DataTypeReal:5,DataTypeDouble:6,DataTypeFloat:7,DataTypeChar:8,DataTypeVarChar:9,DataTypeLongVarChar:10,DataTypeBinary:11,DataTypeVarBin:12,DataTypeLongVarBin:13,DataTypeDate:14,DataTypeTime:15,DataTypeTimeStamp:16,DataTypeShort:21,DataTypeLong:22,DataTypeMBChar:23,DataTypeBool:24,DataTypePattern:25,DataTypeBigDecimal:30,DataTypeCellFormatData:31,DataTypeInt64:34};(function(){function A(C){return C.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&");}mstrmojo._ImageHelper=mstrmojo.provide("mstrmojo._ImageHelper",{getImage:function B(D){var E=mstrApp,C=E.getConfiguration();if(D){if(D.indexOf("\\")>=0){D=D.replace(/\\/g,"/");}D=A(D);if(D===decodeURI(D)){D=encodeURI(D);}}if(C&&D&&D.indexOf("://")===-1){D=C.getHostUrlByProject(E.getCurrentProjectId())+D;}return(mstrApp.useBinaryFormat)?String(mstrMobileApp.getImage(D)):D;}});}());(function(){mstrmojo.func=mstrmojo.provide("mstrmojo.func",{composite:function D(E){if(!E||!E.length){return mstrmojo.emptyFn;}return function(){var F=E.length,G;for(G=0;G<F;G++){E[G].apply(this,arguments);}};},wrapMethods:function C(J,H){function I(L,K){K=K||{};mstrmojo.hash.forEach(L,function(M,N){K[N]=(K.hasOwnProperty(N)&&typeof M==="function")?mstrmojo.func.composite([M,K[N]]):M;});return K;}if(arguments.length<3){return I(J,H);}var F=arguments.length,G=[].slice.call(arguments,0,F-1).reverse(),E=arguments[F-1];mstrmojo.array.forEach(G,function(K){E=I(K,E);});return E;},override:function A(G,E){var F=function(J,I){return function H(){var L=this._super,K;this._super=I||mstrmojo.emptyFn;try{K=J.apply(this,arguments||[]);}finally{this._super=L;}return K;};};E=E||{};mstrmojo.hash.forEach(G,function(H,I){E[I]=F(H,E[I]);});return E;},throttle:function(G,I,E){var F,K,N,L=null,J=0,M=E||{};var H=function(){J=M.leading===false?0:mstrmojo.date.now();L=null;N=G.apply(F,K);F=K=null;};return function(){var O=mstrmojo.date.now();if(!J&&M.leading===false){J=O;}var P=I-(O-J);F=this;K=arguments;if(P<=0){clearTimeout(L);L=null;J=O;N=G.apply(F,K);F=K=null;}else{if(!L&&M.trailing!==false){L=setTimeout(H,P);}}return N;};},debounce:function(H,J,G){var M,L,F,K,N,E=mstrmojo.date.now;var I=function(){var O=E()-K;if(O<J){M=setTimeout(I,J-O);}else{M=null;if(!G){N=H.apply(F,L);F=L=null;}}};return function(){F=this;L=arguments;K=E();var O=G&&!M;if(!M){M=setTimeout(I,J);}if(O){N=H.apply(F,L);F=L=null;}return N;};},addMethods:function B(F,E){E=E||{};mstrmojo.hash.forEach(F,function(G,H){if(!E.hasOwnProperty(H)&&typeof G==="function"){E[H]=G;}});return E;}});}());(function(){var A=/^mstrmojo./;mstrmojo.DynamicClassFactory={newComponent:function(C,B,F){var H=C.prototype.scriptClass.replace(A,"");for(var E=0,D=B&&B.length||0;E<D;E++){if(!B[E]._mixinName){throw new Error('Mixins must have a "_mixinName" property to be used with DynamicClassFactory');}H+="_"+B[E]._mixinName.replace(A,"");}var G=mstrmojo[H];if(!G){G=mstrmojo.declare(C,B,F);mstrmojo[H]=G;}return G;}};}());mstrmojo.vi.viz.EnumWidgetTypes={GRID:0,GRAPH_MATRIX:1,HEATMAP:2,NETWORK:3,IMAGELAYOUT:4,ESRIMAP:5,GOOGLEMAP:6,CUSTOM:7};(function(){function D(K){var J=this.h.idx;if(J!==-1){return this.t.es[J][K];}return"";}mstrmojo.models.template.Header=mstrmojo.declare(null,null,{init:function H(J){this.h=J.h;this.t=J.t;},getName:function A(){return D.call(this,"n");},getElementId:function I(){return D.call(this,"id");},getObjectId:function B(){return D.call(this,"oid");},getElementIndex:function G(){return this.h.idx;},getActionType:function F(){return this.h.at;},isTotal:function E(){return this.h.otr===1;},getFormIndex:function C(){return this.h.fi;}});}());mstrmojo.warehouse.EnumObjectTypes={FILTER:1,METRIC:4,ATTRIBUTE:12,FACT:13,DIMENSION:14,TABLE:15,TABLE_LOGICAL_VIEW:151,TABLE_PARTITION:152,FORM:21,COLUMN:26,DBROLE:29,PROJECT:32,TRANSFORMATION:43,DBTABLE:53,LAYER:70,RELATIONSHIP:99,COMPOUND_FORM:1001,RELATIONSHIP_ATTRIBUTE:1002};mstrmojo.mstr.EnumFunction={FunctionCustom:-1,FunctionReserved:0,FunctionPlus:1,FunctionMinus:2,FunctionTimes:3,FunctionDivide:4,FunctionUnaryMinus:5,FunctionEquals:6,FunctionNotEqual:7,FunctionGreater:8,FunctionLess:9,FunctionGreaterEqual:10,FunctionLessEqual:11,FunctionSum:12,FunctionCount:13,FunctionAvg:14,FunctionMin:15,FunctionMax:16,FunctionBetween:17,FunctionLike:18,FunctionAnd:19,FunctionOr:20,FunctionNot:21,FunctionIn:22,FunctionRank:23,FunctionAbs:24,FunctionRunningSum:25,FunctionRunningAvg:26,FunctionMovingSum:28,FunctionMovingAvg:27,FunctionProduct:29,FunctionMedian:30,FunctionMode:31,FunctionStdev:32,FunctionVar:33,FunctionGeomean:34,FunctionEqualEnhanced:35,FunctionNotEqualEnhanced:36,FunctionGreaterEqualEnhanced:37,FunctionLessEqualEnhanced:38,FunctionBetweenEnhanced:39,FunctionBanding:40,FunctionBandingC:41,FunctionBandingP:42,FunctionNotLike:43,FunctionNotBetween:44,FunctionIntersect:45,FunctionIntersectIn:46,FunctionNullToZero:47,FunctionZeroToNull:48,FunctionApplySimple:49,FunctionApplyAggregation:50,FunctionApplyLogic:51,FunctionApplyComparison:52,FunctionApplyRelative:53,FunctionIsNull:54,FunctionIsNotNull:55,FunctionUcase:56,FunctionNotIn:57,FunctionNTile:58,FunctionPercentile:59,FunctionMovingMax:60,FunctionMovingMin:61,FunctionMovingDifference:62,FunctionMovingStdev:63,FunctionExpWghMovingAvg:64,FunctionMovingCount:65,FunctionRunningMax:66,FunctionRunningMin:67,FunctionRunningStdev:68,FunctionRunningCount:69,FunctionExpWghRunningAvg:70,FunctionNotBetweenEnhanced:71,FunctionConcat:72,FunctionFirstInRange:73,FunctionLastInRange:74,FunctionValueSegment:75,FunctionContains:76,FunctionBeginsWith:77,FunctionEndsWith:78,FunctionNotContains:79,FunctionNotBeginsWith:80,FunctionNotEndsWith:81,FunctionCase:82,FunctionCaseV:83,FunctionStdevP:84,FunctionRunningStdevP:85,FunctionMovingStdevP:86,FunctionNTileS:87,FunctionNTileVS:88,FunctionVarP:89,FunctionCurrentDate:90,FunctionDayOfMonth:91,FunctionDayOfWeek:92,FunctionDayOfYear:93,FunctionWeek:94,FunctionMonth:95,FunctionQuarter:96,FunctionYear:97,FunctionCurrentDateTime:98,FunctionCurrentTime:99,FunctionHour:100,FunctionMinute:101,FunctionSecond:102,FunctionMilliSecond:103,FunctionConcatNoBlank:104,FunctionLength:105,FunctionLower:106,FunctionLTrim:107,FunctionPosition:108,FunctionRTrim:109,FunctionSubStr:110,FunctionInitCap:111,FunctionTrim:112,FunctionRightStr:113,FunctionLeftStr:114,FunctionGreatest:115,FunctionLeast:116,FunctionFirst:117,FunctionLast:118,FunctionAdd:134,FunctionAverage:135,FunctionMultiply:136,FunctionBandingM:137,FunctionOLAPSum:138,FunctionOLAPAvg:139,FunctionOLAPCount:140,FunctionOLAPMax:141,FunctionOLAPMin:142,FunctionLag:143,FunctionLead:144,FunctionPercentRank:166,FunctionTuple:1000};mstrmojo.chart.enums.EnumGraphMajorType={GMT_INVALID:0,GMT_CATEGORY:1,GMT_PIE:2,GMT_SCATTER:3,GMT_POLAR:4,GMT_RADAR:5,GMT_BUBBLE:6,GMT_STOCK:7,GMT_HISTOGRAM:8,GMT_GAUGE:9,GMT_FUNNEL:10,GMT_BOX:11,GMT_GANTT:12,GMT_SPECTRAL:13,GMT_TABLE:14,GMT_3D_CATEGORY:15,GMT_3D_SCATTER:16,GMT_GRID:17};mstrmojo.EnumDSSDisplayMode={RESERVED:0,GRID:1,GRAPH:2,ENGINE:3,TEXT:4,DATAMART:5,BASE:6,GRIDGRAPH:7,NONINTERACTIVE:8};(function(){mstrmojo._Fetchable=mstrmojo.provide("mstrmojo._Fetchable",{_mixinName:"mstrmojo._Fetchable",blockBegin:1,blockCount:-1,concat:false,items:null,size:function A(){var B=this.items;return(B&&B.length)||0;},next:function(B){if(this.hasNext()){this.getItems(this.blockBegin+this.blockCount,B);}},previous:function(B){if(this.hasPrevious()){var C=this.blockBegin-this.blockCount;C=C<0?0:C;this.getItems(C,B);}},getItems:function(G,E){E=E||{};var D=this,C=mstrmojo.emptyFn,B=E.success||C,F=E.failure||C,H=E.complete||C;this._retrieveItems(G,{success:function(I){D.blockBegin=G;D.set("items",(D.concat?(D.items||[]).concat(I.items||[]):(I.items||[])));if(I.totalSize){D.totalSize=I.totalSize;}B(I);},failure:function(I){F(I);},complete:function(I){H(I);}});},_retrieveItems:function(C,B){alert("Object which mixes in this mixin has not implemented this method - _retrieveItems().");},hasNext:function(){return(((this.concat?1:this.blockBegin)+((this.items&&this.items.length)||0))<(this.totalSize+1));},hasPrevious:function(){return this.blockBegin>1;}});}());(function(){mstrmojo.models.template.MetricValue=mstrmojo.declare(null,null,{init:function G(H){this.data=H.data;this.value=H.value;},getValue:function B(){return this.value.v;},getThresholdType:function D(){return this.value.ty;},getRawValue:function A(){return this.value.rv;},getCSS:function C(){return this.data.css[this.value.cni].n;},getThresholdValue:function F(H){if(this.value.ti===undefined){return H;}return this.data.th[this.value.ti].n;},getFillColor:function E(H){if(this.value.ci===undefined){return H;}return this.data.fc[this.value.ci].n;}});}());(function(){var C="xviPopopNode";function A(G){var H={};H[C]=G;return H;}mstrmojo.ui.menus._IsMenuPopup=mstrmojo.provide("mstrmojo.ui.menus._IsMenuPopup",{init:function E(G){this._super(G);var J=this.popupConfig;if(!J){throw new Error("Cannot instantiate popup without supplying the popupConfig property.");}this.addDisposable(J);var H=mstrmojo.all[J.hostId],I=J.hostElement;if(J.isHostedWithin&&H&&I){H.addSlots(A(I));this.slot=C;}},closeAllMenus:function F(){var G=this.opener;if(G&&G.closePopup){G.closePopup();}if(G&&G.closeAllMenus){G.closeAllMenus();}},open:function B(H,G){if(this._super){this._super(H,G);}},close:function D(G){if(this.slot===C){this.opener.removeSlots(A(null));}if(this._super){this._super(G);}this.destroy();var H=mstrmojo.all[this.popupConfig.hostId];if(H){H.closePopup();}}});}());(function(){function Q(U,R,S){if(U.nodeType===3&&R){return U;}else{var T=(R&&U.nodeType===1&&U.lastChild)?U.lastChild:F(U,S);return T?D(T,S):null;}}function F(S,R){return(S===R)?null:(S.previousSibling||F(S.parentNode,R));}function D(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}else{if(S.nodeType===1&&S.lastChild){return D(S.lastChild);}else{return D(F(S,R));}}}function I(R){return R.textContent||R.nodeValue||R.innerText;}function M(U,R,S){if(U.nodeType===3&&R){return U;}else{var T=(R&&U.nodeType===1&&U.firstChild)?U.firstChild:B(U,S);return T?E(T,S):null;}}function B(S,R){return(S===R)?null:(S.nextSibling||B(S.parentNode,R));}function E(S,R){if(S===R){return null;}if(S.nodeType===3&&I(S)){return S;}else{if(S.nodeType===1&&S.firstChild){return E(S.firstChild);}else{return E(B(S,R));}}}mstrmojo.range=mstrmojo.provide("mstrmojo.range",{EDGE:{EDGE_BEGIN:1,EDGE_END:2,EDGE_MIDDLE:-1},getEdgeInfo:function P(T,U){var R=0,S;if(T.nodeType===1){if(window.getSelection){S=document.createRange();S.selectNode(T);R=S.toString().length;}else{S=document.body.createTextRange();S.moveToElementText(T);R=S.text.length;}}else{R=I(T).length;}return U===R?this.EDGE.EDGE_END:(U===0?this.EDGE.EDGE_BEGIN:this.EDGE.EDGE_MIDDLE);},collapseOnNode:function K(U,S){if(!U.offsetParent){return ;}var T=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(U);R.collapse(S);T.removeAllRanges();T.addRange(R);}else{R.moveToElementText(U);R.collapse(S);R.select();}},collapseOnTextNode:function L(U,V){var T=this.getSelection(),S=this.getRange();if(window.getSelection){var R=M(U,true);S.setStart(R,V);S.collapse(true);T.removeAllRanges();T.addRange(S);}else{S.moveToElementText(U);S.collapse(true);S.move("character",V);S.select();}},collapseOnTextNodeIE:function C(S,T){var U=M(S,true),R;while(U!==null){R=I(U).length;if(R>=T){this.collapseOnTextNode(U,T);break;}else{T-=R;U=M(U,false);}}},getRangeInfo:function J(X,e){var Z=null,j,c=this.getRange(),b;if(X&&X===c.startContainer){var g=c.startContainer.firstChild,U=g&&g.firstChild,d=U&&U.firstChild;if(d){c.setStart(d,c.startOffset);c.setEnd(d,c.endOffset);}}if(window.getSelection){var W=function(l,n,m){var k=l.cloneRange();k.collapse(m);k.setStartBefore(n);return k.toString().length;},S=c.startContainer,f=c.startOffset;if(S.nodeType===1){f=W(c,S,true);}Z={collapsed:c.collapsed,startContainer:S,startOffset:e?e.startOffset:f};if(!c.collapsed){var V=c.endContainer,R=c.endOffset;if(V.nodeType===1){R=W(c,V,false);}Z.endContainer=V;Z.endOffset=R;}Z.range=c;}else{var i,a,Y=function(n,o){var m=n.duplicate(),k=document.body.createTextRange(),l;m.collapse(o);l=m.parentElement();k.moveToElementText(l);k.setEndPoint("EndToStart",m);return{container:l,offset:k.text.length};},h=Y(c,true),T;Z={collapsed:(c.compareEndPoints("StartToEnd",c)===0),startContainer:h.container,startOffset:h.offset};if(!Z.collapsed){T=Y(c,false);Z.endContainer=T.container;Z.endOffset=T.offset;}}return Z;},collapse:function O(S){if(window.getSelection){var T=this.getSelection();if(S){T.collapseToStart();}else{T.collapseToEnd();}}else{var R=this.getRange();R.collapse(S);R.select();}},selectSingleNode:function H(T){var S=this.getSelection(),R=this.getRange();if(window.getSelection){R.selectNodeContents(T);S.removeAllRanges();S.addRange(R);}else{R.moveToElementText(T);R.select();}},selectMultipleNodes:function N(W,S,X,U){var V=this.getSelection(),T=this.getRange();if(window.getSelection){T.setStart(W,S);T.setEnd(X,U);V.removeAllRanges();V.addRange(T);}else{W=(W.nodeType===3)?W.parentNode:W;T.moveToElementText(W);T.move("character",S);X=(X.nodeType===3)?X.parentNode:X;var R=document.body.createTextRange();R.moveToElementText(X);R.move("character",U);T.setEndPoint("EndToStart",R);T.select();}},getSelection:function G(){if(window.getSelection){return window.getSelection();}else{return document.selection;}},getRange:function A(){if(window.getSelection){selection=window.getSelection();if(selection.rangeCount>0){return selection.getRangeAt(0);}else{return document.createRange();}}else{return document.selection.createRange();}}});}());(function(){var A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",G=String.fromCharCode;function D(H){H=H.replace(/\r\n/g,"\n");var I="";for(var K=0;K<H.length;K++){var J=H.charCodeAt(K);if(J<128){I+=G(J);}else{if((J>127)&&(J<2048)){I+=G((J>>6)|192);I+=G((J&63)|128);}else{I+=G((J>>12)|224);I+=G(((J>>6)&63)|128);I+=G((J&63)|128);}}}return I;}function F(L){var H="",J=0,M=0,K=0,I=0;while(J<L.length){M=L.charCodeAt(J);if(M<128){H+=G(M);J++;}else{if((M>191)&&(M<224)){K=L.charCodeAt(J+1);H+=G(((M&31)<<6)|(K&63));J+=2;}else{K=L.charCodeAt(J+1);I=L.charCodeAt(J+2);H+=G(((M&15)<<12)|((K&63)<<6)|(I&63));J+=3;}}}return H;}mstrmojo.base64=mstrmojo.provide("mstrmojo.base64",{decodeHttpHeader:function E(K){var I=/\=\?UTF-8\?B\?(.+?)\?\=/g;if(K&&K.indexOf("=?UTF-8?B?")===0){var J="",H;while((H=I.exec(K))!==null){J+=mstrmojo.base64.decode(H[1]);}return J;}return K;},encode:function B(J){var H="";var Q,O,M,P,N,L,K;var I=0;J=D(J);while(I<J.length){Q=J.charCodeAt(I++);O=J.charCodeAt(I++);M=J.charCodeAt(I++);P=Q>>2;N=((Q&3)<<4)|(O>>4);L=((O&15)<<2)|(M>>6);K=M&63;if(isNaN(O)){L=K=64;}else{if(isNaN(M)){K=64;}}H+=A.charAt(P)+A.charAt(N)+A.charAt(L)+A.charAt(K);}return H;},decode:function C(J){var H="",I=0;var Q,O,M,P,N,L,K;J=J.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(I<J.length){P=A.indexOf(J.charAt(I++));N=A.indexOf(J.charAt(I++));L=A.indexOf(J.charAt(I++));K=A.indexOf(J.charAt(I++));Q=(P<<2)|(N>>4);O=((N&15)<<4)|(L>>2);M=((L&3)<<6)|K;H+=G(Q);if(L!==64){H+=G(O);}if(K!==64){H+=G(M);}}H=F(H);return H;}});})();mstrmojo._ShowsStatus=mstrmojo.provide("mstrmojo._ShowsStatus",{showStatus:function showStatus(A,G,D){var C=this._STATUS;if(!this.hasRendered||!C){return ;}var E=C.style;if(!A){if(this.showingStatus){E.display="none";}}else{if(C){var F=this._STATUS_TXT;if(F){F.innerHTML=G||"";}var B=this._STATUS_BAR;if(B){B.style.width=(D||0)+"%";}if(!this.isStatusBarPositioned){E.top=Math.max((this.scrollboxHeight||0)-50,12)+"px";this.isStatusBarPositioned=true;}if(!this.showingStatus){E.display="block";}}}this.showingStatus=A;},updateStatus:function updateStatus(A,B){this.showStatus(this.showingStatus,A,B);}});mstrmojo.chart.model.enums.EnumDSSObjectType={DssTypeUnknown:-1,DssTypeReserved:0,DssTypeGeneric:5,DssTypeFormatBAD:46,DssTypeFilter:1,DssTypeTemplate:2,DssTypeReportDefinition:3,DssTypeMetric:4,DssTypeStyle:6,DssTypeAggMetric:7,DssTypeFolder:8,DssTypeDevice:9,DssTypePrompt:10,DssTypeFunction:11,DssTypeAttribute:12,DssTypeFact:13,DssTypeDimension:14,DssTypeTable:15,DssTypeDatamartReport:16,DssTypeFactGroup:17,DssTypeShortcut:18,DssTypeResolution:19,DssTypeMonitor:20,DssTypeAttributeForm:21,DssTypeSchema:22,DssTypeFormat:23,DssTypeCatalog:24,DssTypeCatalogDefn:25,DssTypeColumn:26,DssTypePropertyGroup:27,DssTypePropertySet:28,DssTypeDBRole:29,DssTypeDBLogin:30,DssTypeDBConnection:31,DssTypeProject:32,DssTypeServerDef:33,DssTypeUser:34,DssTypeTransmitter:35,DssTypeConfiguration:36,DssTypeRequest:37,DssTypeScript:38,DssTypeSearch:39,DssTypeSearchFolder:40,DssTypeDatamart:41,DssTypeFunctionPackageDefinition:42,DssTypeRole:43,DssTypeSecurityRole:44,DssTypeLocale:45,DssTypeConsolidation:47,DssTypeConsolidationElement:48,DssTypeScheduleEvent:49,DssTypeScheduleObject:50,DssTypeScheduleTrigger:51,DssTypeLink:52,DssTypeDbTable:53,DssTypeTableSource:54,DssTypeDocumentDefinition:55,DssTypeDrillMap:56,DssTypeDBMS:57,DssTypeMDSecurityFilter:58,DssTypePromptAnswer:59,DssTypePromptAnswers:60,DssTypeGraphStyle:61,DssTypeChangeJournalSearch:62,DssTypeNCSObjects:255,DssTypeReservedLastOne:63};mstrmojo.vi.models.EnumDragSources={DATASETS:1,VIZ_EDITOR:2,FILTERS:3,ALL_OBJECT_LIST:4,VIZ:5};(function(){function X(a){var b=[].slice.call(a),c=b[b.length-1],d=function(f,e){return f===e;};if(/function|string/.test(typeof c)){d=typeof c==="function"?c:function(f,e){return f[c]===e[c];};b=b.slice(0,b.length-1);}return{sets:b,compareFunc:d};}mstrmojo.array=mstrmojo.provide("mstrmojo.array",{indexOf:function D(b,d){var a=(b&&b.length)||0,c;for(c=0;c<a;c++){if(b[c]==d){return c;}}return -1;},indexOfMulti:function T(a,b){var f=[],e={},d=0,c=this;c.forEach(a,function(h,g){c.forEach(b,function(i,j){var k=(i===h);if(k){f[j]=e[j]=g;d++;}return !k;});});return{indices:f.length?f:null,map:e,count:d};},forEach:function R(b,g,d){var a=(b&&b.length)||0,c;for(c=0;c<a;c++){var e=c===(a-1);if(d){if(g.call(d,b[c],c,b,e)===false){break;}}else{if(g(b[c],c,b,e)===false){break;}}}return b;},map:function Y(b,e){var a=(b&&b.length)||0,c=[],d;for(d=0;d<a;d++){c[d]=e(b[d],d);}return c;},filter:function I(c,d,e){var h=[],g=0,b=(c&&c.length)||0,a=(e&&e.max)||0,f;for(f=0;f<b;f++){if(d(c[f],f,c)){h[g]=c[f];g++;if(a&&g>=a){break;}}}return h;},filterOne:function L(a,b){var c=this.filter(a,b,{max:1});if(c.length){return c[0];}return null;},ensureArray:function P(a){return[].concat(a||[]);},find:function M(b,f,c){var a=(b&&b.length)||0,d;for(d=0;d<a;d++){var e=b[d];if(e&&e[f]==c){return d;}}return -1;},distinct:function B(b,f){if(b.reduce&&!f){return b.reduce(function(h,g){if(h.indexOf(g)<0){h.push(g);}return h;},[]);}var a=(b&&b.length)||0,c,e,d=[];for(c=0;c<a;c++){e=b[c];if((e!==undefined)&&((f&&this.find(d,f,e[f])<0)||(!f&&this.indexOf(d,e)<0))){d.push(e);}}return d;},findBin:function E(c,g,i,b){var f=(b||c.length)-1,d=0,a,e=g[i];while(f-d>1){if(c[a=f+d>>1][i]<e){d=a;}else{f=a;}}if(c[d][i]===e){return d;}return c[f][i]===e?f:-1;},search:function H(i,d,f){var e=i.length,c=-1,b,g=d.toUpperCase(),a=d.length;while(e-c>1){if(i[b=e+c>>1][f].substr(0,a).toUpperCase()<g){c=b;}else{e=b;}}return e;},findMulti:function Q(h,d,m){if(!m){return{indices:null,map:{},count:0};}var l=m.length,q=[],b={},o=0,f=(h&&h.length)||0,g;for(g=0;g<f;g++){var p=h[g][d],e;for(e=0;e<l;e++){if(m[e][d]===p){q[e]=g;b[e]=g;o++;break;}}}return{indices:q,map:b,count:o};},removeItem:function W(a,c){var b=this.indexOf(a,c);if(b>-1){this.removeIndices(a,b,1);}return b;},removeItems:function N(a,f,b){var c=this.findMulti(a,f,b);if(c.count){var e=c.indices.concat().sort(this.numSorter).slice(0,c.count),d;for(d=e.length-1;d>-1;d--){a.splice(e[d],1);}}},numSorter:function Z(d,c){return Number(d)-Number(c);},stringSorter:function J(e,d){var c=e.toLowerCase(),f=d.toLowerCase();if(c<f){return -1;}if(c>f){return 1;}return 0;},removeIndices:function O(a,c,b){a.splice(c,b);},insert:function F(b,a,c){if(!b){b=[];}if(a===null||a===undefined){a=b.length;}Array.prototype.splice.apply(b,[a,0].concat(c));return b;},hash:function C(b,d){d=d||{};var a=(b&&b.length)||0,c;for(c=0;c<a;c++){d[b[c]]=true;}return d;},get:function U(b,e){if(!e){return null;}var c=[],a=e.length,d;for(d=0;d<a;d++){c[d]=b[e[d]];}return c;},deepSortArr:function G(b,d,a,c){return b.sort(function(g,e){var h=g[a][d],f=e[a][d];if(!c){return(h<=f);}return(h>f)?-1:1;});},isArray:function(a){var b=Array.isArray;if(b){return b(a);}return Object.prototype.toString.call(a)==="[object Array]";},some:function K(b,c){if(!b){return false;}if(b.some){return b.some(c);}var a=false;this.forEach(b,function(e,d){a=c(e,d,b);return !a;});return a;},difference:function V(){if(arguments.length<2){throw new Error("difference should get at least 2 parameters");}var d=X(arguments),b=d.sets,c=d.compareFunc,e=b[0],a=[].concat.apply([],b.slice(1));return e.filter(function(f){return !a.some(function(g){return c(f,g);});});},intersection:function S(){if(arguments.length<2){throw new Error("intersection should get at least 2 parameters");}var e=X(arguments),c=e.sets,d=e.compareFunc,a=c[0],b=c.slice(1);b.forEach(function(f){a=a.filter(function(g){return f.some(function(h){return d(g,h);});});});return a;},fnReduceNumber:function A(a,b){return a+b;}});}());mstrmojo.chart.enums.EnumFontStyle={FS_NORMAL:0,FS_BOLD:1,FS_ITALIC:2,FS_BOTH:3,FS_UNDERLINE:4,FS_STRIKETHROUGH:8};(function(){function AF(Al,Am){return Am||(Al||window).event;}mstrmojo.PositionType=null;var Ai=!!document.all,AD=document.documentMode,p=navigator.userAgent,i=false,g=false,e=false,d=false,R=false,r=false;if(Ai){if(window.mstrConfig&&mstrConfig.isEdgeModeEnabled){i=!!p.match(/MSIE 6/);g=((!!p.match(/MSIE 7/)&&!AD)||AD===7);e=(AD===8);d=(AD===9);R=(AD===10);r=(!AD||AD<=9);}else{i=!!p.match(/MSIE 6/);g=!!p.match(/MSIE 7/);e=!!p.match(/MSIE 8/);d=!!p.match(/MSIE 9/);R=!!p.match(/MSIE 10/);r=!R;}}var c=!Ai&&!!p.match(/Firefox/),k=0,q=!!p.match(/Android/),AZ=!!p.match(/iPad/),AJ=!!p.match(/iPhone/),AR=!!document.createTouch||q,o=!!p.match(/PlayBook/),O=!!p.match(/Windows Phone/),Aj=!Ai&&!!p.match(/Trident.*rv/),b=c?"-moz-":(Ai||Aj)?"":"-webkit-",AE=c?"Moz":(R||Aj)?"":Ai?"ms":"webkit",AO=((R||Aj)?"t":"T"),AI=AE+AO+"ransition";function Ad(){return AE+AO+"ransform";}function AB(){return AI+"Property";}function S(){return AI+"Duration";}function N(){return(R||c)?"transitionend":"webkitTransitionEnd";}function f(){return AE+"BoxShadow";}var Ag=Ad(),AW=AB(),w=S(),A=N(),m=f();function AN(){if(!k&&c){var Al=p.match(/.*Firefox\/([\d|\.]*).*/);if(Al){k=parseFloat(Al[1]);}}return k;}function AT(){var Am=0,Aq=0,An=window,Ao=document,Al=Ao.body,Ap=Ao.documentElement;if(typeof An.pageYOffset==="number"){Aq=An.pageYOffset;Am=An.pageXOffset;}else{if(Al&&(Al.scrollLeft||Al.scrollTop)){Aq=Al.scrollTop;Am=Al.scrollLeft;}else{if(Ap&&(Ap.scrollLeft||Ap.scrollTop)){Aq=Ap.scrollTop;Am=Ap.scrollLeft;}}}return{x:Am,y:Aq};}function AC(Al){Al=Al||0;Al=String(Al);return((Al.indexOf("%",0))!==-1)?Al:(Al+"px");}function AL(An,Ar,Aq,Ap,Ao){if(!mstrmojo.dom.isWinPhone){Ap=(Ap||false||this.isHWAccelerated);}else{Ap=false;}var Am=Ao+(Ap?"3d":"")+"(",Al=Ap?(","+Aq+")"):")";return Am+An+","+Ar+Al;}var AX=2,V=3;function s(Ar,Aq,Au){var At=Ar.style,An=At.display,Ap=this.windowDim(),Ao=AT();At.display="block";var As=Ap.w-Ar.clientWidth,Av=Math.max(Ap.h-Ar.clientHeight,0),Al={4:0,5:As,3:As/2},Am={1:0,3:Av/2,2:Av};At.left=Al[Aq]+Ao.x+"px";At.top=Am[Au]+Ao.y+"px";At.display=An;}function l(Ao,An,Ap,Al){if(Ao.addEventListener){return Ao.addEventListener(An,Ap,!!Al);}Ap._id=Ap._id||l.guid++;Ao.events=Ao.events||{};var Am=Ao.events[An];if(!Am){Am=Ao.events[An]={};if(Ao["on"+An]){Am[0]=Ao["on"+An];}}Am[Ap._id]=Ap;function Aq(At){At=At||window.event;var As=this.events[At.type],Ar;for(Ar in As){As[Ar].call(this,At);}}Ao["on"+An]=Aq;}l.guid=1;function h(An,Am,Ao,Al){if(!An){return ;}if(An.removeEventListener){An.removeEventListener(Am,Ao,!!Al);}else{if(An.events&&An.events[Am]){delete An.events[Am][Ao._id];}}}mstrmojo.Enum_Keys={BACKSPACE:8,TAB:9,ENTER:13,CTRL:17,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46};mstrmojo.dom=mstrmojo.provide("mstrmojo.dom",{userAgent:p,isIE:Ai,isIE6:i,isIE7:g,isIE8:e,isIE9:d,isIE10:R,isIEW3C:Aj,isNSIE:r,isDXIE:r,isFF:c,isWK:!!p.match(/AppleWebKit/),isSafari:!!p.match(/Safari/)&&!p.match(/Chrome/),isChrome:!!p.match(/AppleWebKit/)&&p.match(/Chrome/),isHWAccelerated:!q,isAndroid:q,isIPad:AZ,isPlayBook:o,isWinPhone:O,isMobile:AZ||AJ||O||q,supportsTouches:AR,TOUCHSTART:AR?"touchstart":"mousedown",TOUCHMOVE:AR?"touchmove":"mousemove",TOUCHEND:AR?"touchend":"mouseup",TOUCHCANCEL:AR?"touchcancel":"",RESIZE:AR?"orientationchange":"resize",CSS3_PREFIX:b,CSS3_BOXSHADOW:m,CSS3_TRANSFORM:Ag,CSS3_TRANSITION:AI,CSS3_TRANSITION_PROPERTY:AW,CSS3_TRANSITION_DURATION:w,CSS3_TRANSITION_END:A,cssFeatures:{GRADIENTS:"gd",ROUND_CORNERS:"rc",TEXT_ROTATION:"tr",DROP_SHADOW:"sh"},htmlFeatures:{FILE_READER:"fr"},MOUSE_BUTTON:{LEFT:1,RIGHT:2},supports:function B(Al){var Am=this.isFF&&AN();switch(Al){case this.cssFeatures.GRADIENTS:return(this.isIE||this.isIEW3C||this.isWK||Am>=3.6||this.isWinPhone);case this.cssFeatures.ROUND_CORNERS:return(this.isWK||this.isFF||this.isWinPhone||this.isIE10);case this.cssFeatures.TEXT_ROTATION:case this.cssFeatures.DROP_SHADOW:return(this.isIE||this.isWK||Am>=3.5||this.isWinPhone||this.isIE10||this.isIEW3C);case this.htmlFeatures.FILE_READER:return !!(window.FileReader);}return false;},getOSInfo:function AK(){var Aq="Unknown",Am=navigator.appVersion,Ap=navigator.userAgent,Ao=Aq;var Al=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];var An;for(An=0;An<Al.length;An++){var As=Al[An];if(As.r.test(Ap)){Ao=As.s;break;}}var Ar=Aq;if(/Windows/.test(Ao)){Ar=/Windows (.*)/.exec(Ao)[1];Ao="Windows";}switch(Ao){case"Mac OS X":Ar=/Mac OS X (10[\.\_\d]+)/.exec(Ap)[1];break;case"Android":Ar=/Android ([\.\_\d]+)/.exec(Ap)[1];break;case"iOS":Ar=/OS (\d+)_(\d+)_?(\d+)?/.exec(Am);Ar=Ar[1]+"."+Ar[2]+"."+(Ar[3]|0);break;}return{name:Ao,version:Ar};},transEndEvtNames:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},replace:function n(An,Al){if(An&&Al){var Am=An.parentNode;if(Am){Am.replaceChild(Al,An);}}return Al;},attachEvent:function X(An,Am,Ao,Al){if(An.addEventListener){return An.addEventListener(Am,Ao,!!Al);}return An.attachEvent("on"+Am,Ao);},detachEvent:function AV(An,Am,Ao,Al){if(!An){return ;}if(An.removeEventListener){An.removeEventListener(Am,Ao,!!Al);}else{An.detachEvent("on"+Am,Ao);}},attachMarkupEvent:function u(Ao,An,Al){var Am=function(Ap){mstrmojo.all[Ao].captureDomEvent(Al,window,Ap);};this.attachEvent(An,Al,Am);return Am;},attachOneTimeEvent:function W(Ao,Am,Ap,Al){var An=function(Aq){Ap(Aq);if(Al){h(this,Am,An);}else{mstrmojo.dom.detachEvent(this,Am,An);}};if(Al){l(Ao,Am,An);}else{this.attachEvent(Ao,Am,An);}Ao=null;return An;},attachMouseMoveEvents:function D(Ao,Al){var An=this,Am=function(Ap){if(Al){Al(Ap);}An.detachEvent(document,"mousemove",Ao);An.detachEvent(document,"mouseup",Am);};An.attachEvent(document,"mousemove",Ao);An.attachEvent(document,"mouseup",Am);},captureDomEvent:function AH(Aq,Ao,Am,Ap,An){var Al=mstrmojo.all[Aq];if(Al){Al.captureDomEvent(Ao,Am,Ap,An);}},translate:function L(An,Am,Aq,Ap,Al,Ao){Al=(Al&&" "+Al)||"";An.style[((mstrmojo.dom.isWinPhone||mstrmojo.dom.isIE9||mstrmojo.dom.isIE10)?"ms":"webkit")+"Transform"]=this.createTranslateString(Am,Aq,Ap,Ao)+Al;},createTranslateString:function P(Al,Ao,An,Am){Al=AC(Al);Ao=AC(Ao);An=AC(An);return AL(Al,Ao,An,Am,"translate");},createScaleString:function t(Al,Ao,An,Am){Al=Al||0;Ao=Ao||0;An=An||0;return AL(Al,Ao,An,Am,"scale");},_bufferSize:200,_bufferConnects:{},attachBufferedEvent:function C(An,Al,Ao,Aq){var Am=An.id+"-"+Al,Ap=this._bufferConnects[Am];if(!Ap){Ap=this._bufferConnects[Am]={elId:An.id,eventName:Al,timer:null,bufferSize:Aq,listeners:[],callback:function(Ar){mstrmojo.dom._callback(Ar,mstrmojo.global,Am);return true;}};this.attachEvent(An,Al,Ap.callback);}Ap.listeners.push(Ao);},_callback:function Ac(Ap,Al,An){var Ao=this._bufferConnects[An],Aq=Ao&&Ao.timer;if(Ao&&!Aq){var Am=(Ao.bufferSize===null)?this._bufferSize:Ao.bufferSize;if(Ao.bufferSize){Ao.timer=Al.setTimeout(function(){mstrmojo.dom.updateBuffers(An);},Am);}else{mstrmojo.dom.updateBuffers(An);}}},updateBuffers:function H(Ao){var Ap=this._bufferConnects[Ao],Am=Ap&&Ap.listeners,Al=(Am&&Am.length)||0,An;for(An=0;An<Al;An++){Am[An]();}if(Ap&&Ap.timer){delete Ap.timer;}},detachBufferedEvent:function z(Am,Aq,Ar){if(!Am){return ;}var At=Am.id+"-"+Aq,An=this._bufferConnects[At],Ap=An&&An.listeners,As=(Ap&&Ap.length)||0,Ao;if(As){for(Ao=As-1;Ao>-1;Ao--){if(Ap[Ao]===Ar){Ap.splice(Ao,1);}}if(!Ap.length){this.detachEvent(Am,Aq,An.callback);delete this._bufferConnects[At];if(An.timer){var Al=mstrmojo.global;Al.clearTimeout(An.timer);}}}},eventTarget:function x(Al,Am){Am=AF(Al,Am);return Am.target||Am.srcElement;},isMac:function v(){return this.getOSInfo().name.toLowerCase().indexOf("mac")>=0;},isMetaKey:function J(Al,Ao){var An=this.getOSInfo().name.toLowerCase().indexOf("mac")>=0,Am=AF(Al,Ao)||{};return(Am.ctrlKey&&!An)||(Am.metaKey&&An);},ctrlKey:function Af(Al,Am){return(AF(Al,Am)||{}).ctrlKey;},shiftKey:function y(Al,Am){return(AF(Al,Am)||{}).shiftKey;},metaKey:function Z(Al,Am){return(AF(Al,Am)||{}).metaKey;},getButton:function AP(Al,Am){return((Number(AF(Al,Am).button))===2)?2:1;},isPrimaryMouseBtn:function Aa(Am,Al){return this.getButton(Al||window,Am)===1;},getMousePosition:function j(Ao,An){An=An||window;var Am,Ar;if(mstrmojo.dom.isIE){Ao=Ao||An.event;var Ap=document,Al=Ap.body,Aq=Ap.documentElement;Am=Ao.clientX+Al.scrollLeft+(Aq.scrollLeft||0);Ar=Ao.clientY+Al.scrollTop+(Aq.scrollTop||0);}else{Am=Ao.pageX;Ar=Ao.pageY;}return{x:Am,y:Ar};},position:function AQ(Am,An){var Aq={x:0,y:0,w:0,h:0};if(Am&&Am.getBoundingClientRect){try{Aq=Am.getBoundingClientRect();}catch(Ap){Aq={left:0,top:0,right:0,bottom:0,height:0,width:0};}Aq={x:Aq.left,y:Aq.top,w:Aq.right-Aq.left,h:Aq.bottom-Aq.top};if(this.isIE6||this.isIE7){var Al=Am.ownerDocument;if(Al){var As=Al.documentElement,Ar=As.getBoundingClientRect();Aq.x-=Ar.left;Aq.y-=Ar.top;}}}if(An){var Ao=AT();Aq.x+=Ao.x;Aq.y+=Ao.y;}return Aq;},delta:function F(An,Al){Al=Al||document.body;var Am=this.position(An),Ao=this.position(Al);return{x:Math.round(Am.x-Ao.x),y:Math.round(Am.y-Ao.y)};},windowDim:function Q(){var Al=0,An=0,Ao=window,Ap=document,Aq=Ap.documentElement,Am=Ap.body;if(typeof (Ao.innerWidth)=="number"&&typeof (Ao.innerHeight)=="number"){Al=Ao.innerWidth;An=Ao.innerHeight;}else{if(Aq&&(Aq.clientWidth||Aq.clientHeight)){Al=Aq.clientWidth;An=Aq.clientHeight;}else{if(Am&&(Am.clientWidth||Am.clientHeight)){Al=Am.clientWidth;An=Am.clientHeight;}}}return{w:Al,h:An};},center:function AG(Al){s.call(this,Al,V,V);},bottomCenter:function E(Al){s.call(this,Al,V,AX);},clearBrowserHighlights:function K(Al){Al=Al||self;if(!Al.getSelection){var Ar=Al.document,Aq=Ar&&Ar.selection,Ao=Aq&&Aq.empty;if(Ao){try{Aq.empty();}catch(An){}}}else{var Am=Al.getSelection,Ap=Am&&Al.getSelection();if(Ap&&!Ap.isCollapsed){if(Ap.empty){Ap.empty();}else{if(Ap.removeAllRanges){Ap.removeAllRanges();}}}}},findAncestorByAttr:function AM(Ap,An,Am,Al){var Aq=Am?Ap:Ap&&Ap.parentNode;while(Aq&&(Aq!==Al)){var Ao=Aq.getAttribute&&Aq.getAttribute(An);if(Ao!=null){return{node:Aq,value:Ao};}Aq=Aq.parentNode;}return null;},findAncestorByName:function Ae(An,Aq,Am,Al){Aq=Aq&&Aq.toLowerCase();var Ao=Am?An:An&&An.parentNode;while(Ao&&(Ao!==Al)){var Ap=Ao.nodeName;if(Ap&&(Ap.toLowerCase()===Aq)){return Ao;}Ao=Ao.parentNode;}return null;},contains:function I(Ao,Ap,Am,Al){var An=Ap;if(!Am){An=An.parentNode;}while(An){if(An===Ao){return true;}if(An===Al){break;}An=An.parentNode;}return false;},toggleSelection:function Ak(Am,Al){Am.setAttribute("unselectable",Al?"off":"on");mstrmojo.css.toggleClass(Am,"unselectable",!Al);Am.onselectstart=function(){return Al;};if(!Al){this.clearBrowserHighlights();}},preventDefault:function U(Al,Am){Am=Am||Al.event;if(Am.preventDefault){Am.preventDefault();}else{Am.returnValue=false;}},stopPropogation:function M(Al,Am){Am=Am||Al.event;if(Am.stopPropagation){Am.stopPropagation();}else{Am.cancelBubble=true;}},firstTouch:function AS(Al,Am){return Am&&Am.touches&&Am.touches.length?Am.touches[0]:(Am||Al.event);},firstChangedTouch:function AY(Al,Am){return Am&&Am.changedTouches&&Am.changedTouches.length?Am.changedTouches[0]:(Am||Al.event);},isLandscape:function T(){return !this.supportsTouches||(Math.abs(window.orientation)===90);},findWidget:function AU(Al){while(Al){var Am=Al.mstrmojoId;if(Am!==null&&Am!==undefined){return mstrmojo.all[Am];}Al=Al.parentNode;}return null;},setCaret:function G(Al,An){if(Al.setSelectionRange){Al.focus();Al.setSelectionRange(An,An);}else{if(Al.createTextRange){var Am=Al.createTextRange();Am.move("character",An);Am.select();}}},setInputSelection:function Y(Al){if(Al.select){Al.focus();Al.select();}else{if(Al.createTextRange){Al.createTextRange().select();}}},setElementSelection:function a(An){if(window.getSelection){var Al=document.createRange(),Am=window.getSelection();Al.selectNodeContents(An);Am.removeAllRanges();Am.addRange(Al);}else{if(document.body.createTextRange){var Ao=document.body.createTextRange();Ao.moveToElementText(An);Ao.select();}}},getHorizontalScroll:function Ah(){return AT().x;},getVerticalScroll:function AA(){return AT().y;},removeNode:function Ab(An){var Am=document.getElementById(An),Al=Am&&Am.parentNode;if(Al){return Al.removeChild(Am);}}});}());(function(){mstrmojo.ui.editors._HostsControls=mstrmojo.provide("mstrmojo.ui.editors._HostsControls",{_mixinName:"mstrmojo.ui.editors._HostsControls",setFormatSource:function C(E){this.throwAbstractMethodError("setFormatSource");},syncControls:function A(E){var F=this._sync;this._sync=true;E.call(this);this._sync=F;},raiseFormatValueChange:function D(F,G,E){if(this._sync){return false;}this.onGroupValueChange(F,G,E);return true;},onGroupValueChange:function B(F,G,E){}});}());mstrmojo.vi.viz.EnumDSSDropZones={Reserved:0,Rows:1,Columns:2,XAxis:3,YAxis:4,BreakBy:5,SliceBy:6,ColorBy:7,SizeBy:8,AdditionalMetrics:9,Angle:10,Grouping:11,GeoAttribute:12,Layout:13,FromItem:14,ToItem:15,ItemSize:16,Latitude:17,Longitude:18};mstrmojo.chart.model.enums.EnumDSSGraphObject={DssGraphNull:-3,DssGraphBackground:1,DssGraphFrame:2,DssGraphFootnote:3,DssGraphSubtitle:4,DssGraphTitle:5,DssGraphLegendArea:6,DssGraphLegendLine:7,DssGraphLegendMarker:8,DssGraphLegendText:9,DssGraphCurve:257,DssGraphDataLine:258,DssGraphDataMarker:259,DssGraphDataText:260,DssGraphDivBiPolar:261,DssGraphErrorBar:262,DssGraphLinrExp:263,DssGraphLinrLine:264,DssGraphLinrLog:265,DssGraphLinrNatLog:266,DssGraphLinrNPoly:267,DssGraphLinrText:268,DssGraphMeanLine:269,DssGraphMovAvgLine:270,DssGraphO1Body:271,DssGraph2DO1Label:272,DssGraphO1Major:273,DssGraphO1Minor:274,DssGraphO1Super:275,DssGraphO1Title:276,DssGraphO2Body:277,DssGraph2DO2Label:278,DssGraphO2Major:279,DssGraphO2Minor:280,DssGraphO2Title:281,DssGraphConnectDataLine:282,DssGraphRiser:286,DssGraphRiserShadow:287,DssGraphStdDevLine:288,DssGraphX1Body:289,DssGraphX1Label:290,DssGraphX1Major:291,DssGraphX1Minor:292,DssGraphXTitle:293,DssGraphY1Body:295,DssGraphY1Label:296,DssGraphY1Major:297,DssGraphY1Minor:298,DssGraphY1Title:299,DssGraphY2Body:301,DssGraphY2Label:302,DssGraphY2Major:303,DssGraphY2Minor:304,DssGraphY2Title:305,DssGraph3DShowColumnHeaders:318,DssGraph3DShowLeftHeaders:321,DssGraph3DShowRightHeaders:323,DssGraph3DShowRowHeaders:325,DssGraphOBPBox:329,DssGraphOBPMedian:330,DssGraphOBPStem:331,DssGraphOBPTail:332,DssGraphPieFeelerLine:337,DssGraphPieFeelerLabel:338,DssGraphPieGroupLabel:339,DssGraphPieRingLabel:340,DssGraphPieSlice:341,DssGraphSeriesTitle:398,DssGraphConnectStackLine:399,DssGraphDataTextStackTotal:401,DssGraphOPILBLValue:418,DssGraphUserLine1:414,DssGraphUserLine2:415,DssGraphUserLine3:416,DssGraphUserLine4:417,DssGraphDataTextConnectLine:431,DssGraphGauge:444,DssGraphGaugeTitle:450,DssGraphGaugeRange:451,DssGraphY3Body:477,DssGraphY3Label:478,DssGraphY3Major:479,DssGraphY3Minor:480,DssGraphY4Body:483,DssGraphY4Label:484,DssGraphY4Major:485,DssGraphY4Minor:486,DssGraph3DColHeader:512,DssGraph3DColTitle:515,DssGraph3DDataText:518,DssGraph3DRowHeader:552,DssGraph3DRowTitle:555,DssGraph3DRYHeader:558,DssGraph3DRYTitle:561,DssGraphGaugeBorder:1319,DssGraphGaugeNeedleBase:1320,DssGraphGaugeNeedleBaseLine:1330,DssGraphZBody:10003,DssGraphTrendLine:10004,DssGraphY1RightBody:10005,DssGraphY1RightTitle:10006,DssGraphReferenceLine:10007,DssGraphStraightLine:10008,DssGraphTargetLine:10009,DssGraphRefLineText:10010,DssGraphTrendLineText:10011,DssGraphUserLabel1:100100,DssGraphUserLabel2:100101,DssGraphUserLabel3:100102,DssGraphUserLabel4:100103,DssGraphX2Body:100200,DssGraphX2Label:100201,DssGraphX2Major:100202,DssGraphX2Minor:100203,DssGraphX2Title:100204};mstrmojo.mstr.EnumDSSXMLBaseFormType={DssXmlBaseFormReserved:0,DssXmlBaseFormHidden:-1,DssXmlBaseFormDateTime:1,DssXmlBaseFormNumber:2,DssXmlBaseFormText:3,DssXmlBaseFormPicture:4,DssXmlBaseFormUrl:5,DssXmlBaseFormEmail:6,DssXmlBaseFormHTMLTag:7,DssXmlBaseFormDate:8,DssXmlBaseFormTime:9,DssXmlBaseFormSymbol:10,DssXmlBaseFormBigDecimal:11,DssXmlBaseFormPhoneNumber:12};mstrmojo.mstr.EnumDSSXMLBaseFormType.convertDataType2BaseFormType=function(B){var A={0:2,1:2,2:2,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:2,12:2,13:2,14:8,15:9,16:1,17:3,18:3,21:2,22:2,23:3,30:11,31:2,33:3,34:2};return A[B]||0;};mstrmojo.vi.viz.EnumVizStyles={GRAPH_MATRIX:"GraphMatrixVisualizationStyle",NETWORK:"NetworkVisualizationStyle",HEAT_MAP:"VIHeatMapVisualizationStyle",GOOGLE_MAP:"GoogleMapVisualizationStyle",ESRI_MAP:"ESRIMapVisualizationStyle",IMAGE_LAYOUT:"ImageLayoutVisualizationStyle"};mstrmojo.chart.model.enums.EnumDSSGraphDataTextShowType={DssGraphDataTextNone:0,DssGraphDataTextValue:1,DssGraphDataTextLabel:2,DssGraphDataTextBoth:3,DssGraphDataTextAbs:4,DssGraphDataTextAbsValue:5,DssGraphDataTextAbsBoth:7,DssGraphDataTextTotal:8,DssGraphDataTextZValue:16,DssGraphDataTextPercent:32,DssGraphDataTextYValue:64,DssGraphDataTextInternal:128,DssGraphDataTextSeriesDependent:256,DssGraphDataTextQualityObjectMode:512};mstrmojo.gm.GMEnums={};mstrmojo.gm.DualAxisSubAxisBit={PRIMARY:0,SECONDARY:1};mstrmojo.gm.StackExetrmeId={PRIMARY_Y_AXIS:-2,SECONDARY_Y_AXIS:-18,PRIMARY_X_AXIS:-1,SECONDARY_X_AXIS:-17};mstrmojo.gm.FormNameType={OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4};mstrmojo.gm.EnumSelectionOptionLevel={GLOBAL:1,ITSELF:2,ATTS_METRIC_COMBINATION:3,METRIC_AXIS:4,METRIC:5,AXIS:6,COLOR_BY:7,ALL_SHAPE:8,ITSELF_RESOLVED:9};mstrmojo.gm.EnumLabelRotation={VERTICAL:2,HORIZONTAL:0,AUTOMATIC:-1};mstrmojo.gm.EnumIdentityType={LEGEND:Math.pow(2,0),GRAPH_SHAPE:Math.pow(2,1),X_AXIS:Math.pow(2,2),Y_AXIS:Math.pow(2,3),X2_AXIS:Math.pow(2,4),Y2_AXIS:Math.pow(2,5),GRID_LINE:Math.pow(2,6),TREND_LINE:Math.pow(2,7),REF_LINE:Math.pow(2,8),DATA_LABEL:Math.pow(2,9),COLOR_SQUARE:Math.pow(2,10),ROW_TITLE:Math.pow(2,11),COL_TITLE:Math.pow(2,12),ROW_HEADER:Math.pow(2,13),COL_HEADER:Math.pow(2,14),LOG_SCALE:Math.pow(2,15),H_MATRIX_LINE:Math.pow(2,16),V_MATRIX_LINE:Math.pow(2,17),LEGEND_TEXT:Math.pow(2,18),SHAPE_COLLECTION:Math.pow(2,19),MINOR_GRID_LINE:Math.pow(2,20),AXIS_SCALE:Math.pow(2,22),AXIS_ORIGIN:Math.pow(2,23),ROWS_BACKGROUND:Math.pow(2,24),COLS_BACKGROUND:Math.pow(2,25),X_NUMERIC:Math.pow(2,26),X_CATEGORY:Math.pow(2,27),Y_NUMERIC:Math.pow(2,28),Y_CATEGORY:Math.pow(2,29),X_METRIC_AXIS_TITLE:Math.pow(2,30),Y_METRIC_AXIS_TITLE:Math.pow(2,31),VIZ_BOX_TITLE:Math.pow(2,32),REF_LINE_LABEL:Math.pow(2,33),LINE_MARKER:Math.pow(2,34),X_AXIS_ORIGIN_LABEL:Math.pow(2,35),Y_AXIS_ORIGIN_LABEL:Math.pow(2,36),X_AXIS_ORIGIN_LINE:Math.pow(2,37),Y_AXIS_ORIGIN_LINE:Math.pow(2,38),Y_ATTRIBUTE_AXIS_TITLE:Math.pow(2,39),ROW_HEADER_TEXT:Math.pow(2,40),ROW_TITLE_TEXT:Math.pow(2,41),COL_HEADER_TEXT:Math.pow(2,42),COL_TITLE_TEXT:Math.pow(2,43),VIZ_BOX_CONTAINER:Math.pow(2,44),X_ATTRIBUTE_AXIS_TITLE:Math.pow(2,45),AXIS_ORIGIN_DEFINE:Math.pow(2,46)};mstrmojo.gm.EnumGMZoneIds={ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10};mstrmojo.gm.EnumClickType={NONE:-1,LEFT_CLICK:1,RIGHT_CLICK:2,DOUBLE_CLICK:3};mstrmojo.gm.EnumLegendSlot={RIGHT_TOP:1,RIGHT_MIDDLE:2,RIGHT_BOTTOM:3,LEFT_TOP:4,LEFT_MIDDLE:5,LEFT_BOTTOM:6,LEFT:7,RIGHT:8};mstrmojo.gm.EnumAxisType={ATTRIBUTE:0,METRIC:1};mstrmojo.gm.EnumGraphType={UNDEFINED:-1,AREA:1,BAR:2,LINE:3,SCATTER:4,BUBBLE:5,PIE:6,GRID:7};mstrmojo.gm.EnumContextMenu={SEPARATOR:0,KEEP_ONLY:1,EXCLUDE:2,SORT_ASCENDING:3,SORT_DESCENDING:4,CLEAR_SORT:5,SHOW_DATA:6,SWITCH_THEME:7,KEEP_ONLY_AND_SHOW:8,CLOSE_LEGEND:9,OPEN_LEGEND:10,AXIS_SCALE:11,DRILL_TO:100,CHART_TYPE:200,AREA_ABS:201,AREA_STACKED:202,AREA_PERCENT:203,BAR_SBS:204,BAR_ABS:205,BAR_STACKED:206,BAR_PERCENT:207,LINE_ABS:208,LINE_STACKED:209,LINE_PERCENT:210,BUBBLE:211,SCATTER:212,H_AREA_ABS:213,H_AREA_STACKED:214,H_AREA_PERCENT:215,H_BAR_SBS:216,H_BAR_ABS:217,H_BAR_STACKED:218,H_BAR_PERCENT:219,H_LINE_ABS:220,H_LINE_STACKED:221,H_LINE_PERCENT:222,GRID:223,CIRCLE:224,SQUARE:225,PIE:226,TICKER:227,RING:228,CANVAS:229,SVG:230,LARGE_ABL:231,OUTPUT_EXTREMES:232,COMBINATION:233,ENABLE_PARTIAL_RENDERING:234,DISABLE_PARTIAL_RENDERING:235,OUTPUT_DATA_COUNT:236,ENABLE_TIMER:239,DISABLE_TIMER:240,ENABLE_CE_TIMER:241,DISABLE_CE_TIMER:242};mstrmojo.gm.EnumColorRankMode={RANK_MODE_VALUE:0,RANK_MODE_TOP:1,RANK_MODE_BOTTOM:2,RANK_MODE_TOP_PERCENT:3,RANK_MODE_BOTTOM_PERCENT:4};mstrmojo.gm.EnumColorByType={NULL:0,ATT:1,METRICS_ITEM:2,METRICS:3,ATT_METRICS:4};mstrmojo.gm.EnumDockPosition={TOP:1,RIGHT:2,BOTTOM:3,LEFT:4};mstrmojo.gm.EnumXAxisLabelStatus={NORMAL:1,STAGGER:2,ROTATE:3,HORI_DROP:4};mstrmojo.gm.EnumABLDirection={HORIZONTAL:1,VERTICAL:2};mstrmojo.gm.EnumMetricsPosition={MetricsByRow:0,MetricsByColumn:1,MetricsByAxis:2,MetricsByBreakBy:3,MetricsBySlice:4,MetricsByXAxis:5,MetricsByYAxis:6};mstrmojo.gm.EnumDrawingAPI={GET_CHART_WIDTH:0,GET_CHART_HEIGHT:1,GET_ROW_HEADER:2,GET_COLUMN_HEADER:3,CREATE_UNIT_Y_AXIS:4,CREATE_UNIT_X_AXIS:5,GET_FULL_FLEDGED_CHART:6,GET_ROW_SPAN:7,GET_COLUMN_SPAN:8,GET_METRICS_ON_X:9,GET_METRICS_ON_Y:10,GET_METRICS_ON_SIZE_BY:11,UPDATE_MINI_CHART:12,UPDATE_X_AXIS:13,UPDATE_Y_AXIS:14,MAX_RADIUS_CALC:15,GET_EXTRA_COLUMN_HEADER:16,UPDATE_COLUMN_HEADER:17,UPDATE_ROW_HEADER:18,LAYOUT_ALL_X_AXIS_LABELS:19,LAYOUT_ONE_X_AXIS_LABELS:20};mstrmojo.gm.WidgetPropertyTag={FIT_TO:"FitTo",AXIS_SCALE:"MinMax",SHAPE:"Shape",SUB_TYPE:"Subtype",DATA_LABEL:"DataLabel",DATA_LABELS_PLACEMENT:"DataLabelPalcement",METRIC_LEVEL_DATA_LABEL:"mtcLvlDataLabel",BANDING:"Banding",LEGEND_VISIBLE:"LegendVisibleness",COL_ALIGNMENT:"Columnalignment",ROW_ALIGNMENT:"Rowalignment",MAX_SIZE_TYPE:"SizeType",MAX_SIZE_VALUE:"SizeValue",MIN_SIZE_TYPE:"minSizeType",MIN_SIZE_VALUE:"minSizeValue",OUTSIDE_BORDER:"OutSideBorder",AXES:"AxisLine",MATRIX_LINES:"MatrixLine",GRID_LINES:"GridLine",SELECTION_TYPE:"SelectionType",SELECTIONS:"Selections",LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr",SCALE_CHART_HEIGHT:"rr",SCALE_CHART_WIDTH:"cr",SCALE_ROW_HEADERS:"rvr",SCALE_COL_HEADERS:"chr",SCALE_Y:"yr",SCALE_X:"xr",SCALE_Y2:"y2r",SCALE_X2:"x2r",SCALE_ALL:"scales",SCALE_V_EXTRA_LINE:"vExtraLine",SORT_ORDER:"so",SORT_INDEX:"si",AXIS_SCALE_DATA:"AxisScale",AXIS_SCALE_REAL_MIN:"rMin",AXIS_SCALE_REAL_MAX:"rMax",AXIS_SCALE_MANUAL_MIN:"mMin",AXIS_SCALE_MANUAL_MAX:"mMax",AXIS_SCALE_AUTO_MIN:"autoMin",AXIS_SCALE_AUTO_MAX:"autoMax",SINGLE_AXIS_SCALE_TYPE:"scaleType",LOG_SCALE:"logScale",GROUP_INFO:"groupInfo",METRIC_SHAPES:"metricShapes",AXIS_ORIGIN:"axisOrigin",AXIS_ORIGIN_AUTO:"axOriAuto",AXIS_ORIGIN_VALUE:"axOriValue",TREND_LINE_DEF:"trdDef",REF_LINE_DEF:"refDef",TREND_TYPE:"trdTp",TREND_LEVEL:"trdLvl",TREND_ENABLED:"trdEnabled",TREND_INCLUDE_BREAK_BY:"trdIncBB",TREND_POLY_DEGREE:"trdDgr",TREND_FORECAST_ENABLED:"trdFstEnabled",TREND_BWD_FORECAST:"trdBwdFst",TREND_FWD_FORECAST:"trdFwdFst",TREND_SEASONALITY:"trdSeason",TREND_BUBBLE_FORE_DEF:"trdBbForeDef",TREND_BUBBLE_FORE_FWD:"trdBbForeFwd",TREND_BUBBLE_FORE_BWD:"trdBbForeBwd",TREND_BUBBLE_FORE_ENABLED:"trdBbForeEnabled",TREND_BUBBLE_MAX:"trdBbMax",TREND_BUBBLE_MIN:"trdBbMin",REF_TYPE:"refTp",REF_LEVEL:"refLvl",REF_ENABLED:"refEnabled",REF_SHOW_LABEL:"refLbShw",REF_LABEL_TYPE:"refLbTp",REF_CONST_VALUE:"refCstVl",REF_LINE_NAME:"refLnName",TREND_REF_LINE_THICKNESS:"trdRefLnThk",TREND_REF_LINE_COLOR:"trdRefLnClr",TREND_REF_LINE_STYLE:"trdRefLnStyle",TREND_REF_LINE_COMBINED_STYLE:"trdRefLnCmbStyle",FORMATS_ON_COMBINATION:"fmtOnComb",PARTIAL_RENDER:"prtRdn"};mstrmojo.gm.FormatingPropertyTag={IS_DEFAULT_VALUE:"_default",MODIFIED_DEF_FILL_COLOR:"modDefFillClr",ALL_SHAPE_FORMAT:"allShpFmt",SHAPE_LINE_THICKNESS:"shpLnThk",SHAPE_LINE_COLOR:"shpLnClr",SHAPE_LINE_STYLE:"shpLnStyle",SHAPE_LINE_COMBINED_STYLE:"shpLnCmbStyle",SHAPE_FILL_COLOR:"shpFillClr",SHAPE_FILL_COLOR_DEFAULT:"shpFillClr_default",SHAPE_FILL_STYLE:"shpFillStyle",SHAPE_FILL_TRANSPARENCY:"shpFillTrans",SHAPE_FILL_EFFECT:"shpFillEff",SHAPE_BORDER_COLOR:"shpBdrClr",SHAPE_BORDER_STYLE:"shpBdrStyle",SHAPE_BORDER_COMBINED_STYLE:"shpBdrCmbStyle",SHAPE_BORDER_THICKNESS:"shpBdrThk",LINE_MARKER_SHOW:"lnMkShw",LINE_MARKER_SHAPE:"lnMkShp",LINE_MARKER_SIZE:"lnMkSz",LINE_MARKER_COLOR:"lnMkClr",LINE_MARKER_COLOR_EQUAL:"lnMkClrEq",LINE_MARKER_BORDER_COLOR:"lnMkBdrClr",PIE_EXPLODE:"pieExpl",DATA_LABELS_SHOW:"dlShw",DATA_LABELS_FONT_FAMILY:"dlFntFml",DATA_LABELS_FONT_SIZE:"dlFntSz",DATA_LABELS_FONT_STYLE:"dlFntStyle",DATA_LABELS_FONT_COLOR:"dlFntClr",REF_LABELS_FONT_FAMILY:"rfLnFntFml",REF_LABELS_FONT_SIZE:"rfLnFntSz",REF_LABELS_FONT_STYLE:"rfLnFntStyle",REF_LABELS_FONT_COLOR:"rfLnFntClr",LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",ALL_LINE_SHOW:"allLnShw",ALL_LINE_COLOR:"allLnClr",ALL_LINE_STYLE:"allLnStyle",ALL_LINE_COMBINED_STYLE:"allLnCmbStyle",ALL_LINE_THICKNESS:"allLnThk",ALL_AXIS_ORIGIN_LINE_SHOW:"axOriLnShw",ALL_AXIS_ORIGIN_LINE_COLOR:"axOriLnClr",ALL_AXIS_ORIGIN_LINE_COMBINED_STYLE:"axOriLnCmbStyle",X_AXIS_ORIGIN_LINE_SHOW:"xAxOriLnShw",X_AXIS_ORIGIN_LINE_COLOR:"xAxOriLnClr",X_AXIS_ORIGIN_LINE_STYLE:"xAxOriLnStyle",X_AXIS_ORIGIN_LINE_COMBINED_STYLE:"xAxOriLnCmbStyle",X_AXIS_ORIGIN_LINE_THICKNESS:"xAxOriLnThk",Y_AXIS_ORIGIN_LINE_SHOW:"yAxOriLnShw",Y_AXIS_ORIGIN_LINE_COLOR:"yAxOriLnClr",Y_AXIS_ORIGIN_LINE_STYLE:"yAxOriLnStyle",Y_AXIS_ORIGIN_LINE_COMBINED_STYLE:"yAxOriLnCmbStyle",Y_AXIS_ORIGIN_LINE_THICKNESS:"yAxOriLnThk",ALL_AXIS_LINE_SHOW:"allAxLnShw",ALL_AXIS_LINE_COLOR:"allAxLnClr",ALL_AXIS_LINE_STYLE:"allAxLnStyle",ALL_AXIS_LINE_COMBINED_STYLE:"allAxLnCmbStyle",ALL_AXIS_LINE_THICKNESS:"allAxLnThk",ALL_AXIS_TITLE_SHOW:"allAxTtShw",ALL_AXIS_TITLE_CONTENT:"allAxTtCtt",ALL_AXIS_TITLE_FONT_COLOR:"allAxTtFntClr",ALL_AXIS_TITLE_FONT_FAMILY:"allAxTtFntFml",ALL_AXIS_TITLE_FONT_STYLE:"allAxTtFntStyle",ALL_AXIS_TITLE_FONT_SIZE:"allAxTtFntSz",ALL_AXIS_LABELS_FONT_SIZE:"allAxLbFntSz",ALL_AXIS_LABELS_FONT_FAMILY:"allAxLbFntFml",ALL_AXIS_LABELS_FONT_STYLE:"allAxLbFntStyle",ALL_AXIS_LABELS_FONT_COLOR:"allAxLbFntClr",ALL_AXIS_LABELS_ROTATION:"allAxLbRtt",ALL_AXIS_LABELS_SHOW:"allAxLbShw",X_AXIS_LINE_SHOW:"xAxLnShw",X_AXIS_LINE_COLOR:"xAxLnClr",X_AXIS_LINE_STYLE:"xAxLnStyle",X_AXIS_LINE_COMBINED_STYLE:"xAxLnCmbStyle",X_AXIS_LINE_THICKNESS:"xAxLnThk",X_AXIS_TITLE_SHOW:"xAxTtShw",X_AXIS_TITLE_CONTENT:"xAxTtCtt",X_AXIS_TITLE_FONT_COLOR:"xAxTtFntClr",X_AXIS_TITLE_FONT_FAMILY:"xAxTtFntFml",X_AXIS_TITLE_FONT_STYLE:"xAxTtFntStyle",X_AXIS_TITLE_FONT_SIZE:"xAxTtFntSz",X_AXIS_LABELS_FONT_SIZE:"xAxLbFntSz",X_AXIS_LABELS_FONT_FAMILY:"xAxLbFntFml",X_AXIS_LABELS_FONT_STYLE:"xAxLbFntStyle",X_AXIS_LABELS_FONT_COLOR:"xAxLbFntClr",X_AXIS_LABELS_ROTATION:"xAxLbRtt",X_AXIS_LABELS_SHOW:"xAxLbShw",Y_AXIS_LINE_SHOW:"yAxLnShw",Y_AXIS_LINE_COLOR:"yAxLnClr",Y_AXIS_LINE_STYLE:"yAxLnStyle",Y_AXIS_LINE_COMBINED_STYLE:"yAxLnCmbStyle",Y_AXIS_LINE_THICKNESS:"yAxLnThk",Y_AXIS_TITLE_SHOW:"yAxTtShw",Y_AXIS_TITLE_CONTENT:"yAxTtCtt",Y_AXIS_TITLE_FONT_COLOR:"yAxTtFntClr",Y_AXIS_TITLE_FONT_FAMILY:"yAxTtFntFml",Y_AXIS_TITLE_FONT_STYLE:"yAxTtFntStyle",Y_AXIS_TITLE_FONT_SIZE:"yAxTtFntSz",Y_AXIS_LABELS_FONT_SIZE:"yAxLbFntSz",Y_AXIS_LABELS_FONT_FAMILY:"yAxLbFntFml",Y_AXIS_LABELS_FONT_STYLE:"yAxLbFntStyle",Y_AXIS_LABELS_FONT_COLOR:"yAxLbFntClr",Y_AXIS_LABELS_ROTATION:"yAxLbRtt",Y_AXIS_LABELS_SHOW:"yAxLbShw",ALL_FILL_COLOR:"allFillClr",ALL_FILL_TRANSPARENCY:"allFillTrans",BG_COLOR:"bgFillClr",BG_FILL_EFFECT:"bgFillEff",BG_FILL_STYLE:"bgFillStyle",BG_FILL_TRANSPARENCY:"bgFillTrans",ROW_HEADER_FILL_COLOR:"rwHdrFillClr",ROW_HEADER_FILL_EFFECT:"rwHdrFillEff",ROW_HEADER_FILL_STYLE:"rwHdrFillStyle",ROW_HEADER_FILL_TRANSPARENCY:"rwHdrFillTrans",COLUMN_HEADER_FILL_COLOR:"colHdrFillClr",COLUMN_HEADER_FILL_EFFECT:"colHdrFillEff",COLUMN_HEADER_FILL_STYLE:"colHdrFillStyle",COLUMN_HEADER_FILL_TRANSPARENCY:"colHdrFillTrans",ALL_MATRIX_LINES_SHOW:"allMatrixLnShw",ALL_MATRIX_LINES_COLOR:"allMatrixLnClr",ALL_MATRIX_LINES_THICKNESS:"allMatrixLnThk",ALL_MATRIX_LINES_STYLE:"allMatrixLnStyle",ALL_MATRIX_LINES_COMBINED_STYLE:"allMatrixLnCmbStyle",V_MATRIX_LINES_SHOW:"vMatrixLnShw",V_MATRIX_LINES_COLOR:"vMatrixLnClr",V_MATRIX_LINES_THICKNESS:"vMatrixLnThk",V_MATRIX_LINES_STYLE:"vMatrixLnStyle",V_MATRIX_LINES_COMBINED_STYLE:"vMatrixLnCmbStyle",H_MATRIX_LINES_SHOW:"hMatrixLnShw",H_MATRIX_LINES_COLOR:"hMatrixLnClr",H_MATRIX_LINES_THICKNESS:"hMatrixLnThk",H_MATRIX_LINES_STYLE:"hMatrixLnStyle",H_MATRIX_LINES_COMBINED_STYLE:"hMatrixLnCmbStyle",OUTSIDE_BORDER_SHOW:"outBdrShw",OUTSIDE_BORDER_COLOR:"outBdrClr",OUTSIDE_BORDER_STYLE:"outBdrStyle",OUTSIDE_BORDER_THICKNESS:"outBdrThk",OUTSIDE_BORDER_COMBINED_STYLE:"outBdrCmbStyle",GRID_LINE_AUTO:"gridLineAuto",ALL_GRID_LINES_SHOW:"allGridLnShw",ALL_GRID_LINES_COLOR:"allGridLnClr",ALL_GRID_LINES_THICKNESS:"allGridLnThk",ALL_GRID_LINES_STYLE:"allGridLnStyle",ALL_GRID_LINES_COMBINED_STYLE:"allGridLnCmbStyle",AUTO_GRID_LINES_COLOR:"autoGridLnClr",AUTO_GRID_LINES_COMBINED_STYLE:"autoGridLnCmbStyle",MAJOR_GRID_LINES_SHOW:"majorGridLnShw",MAJOR_GRID_LINES_COLOR:"majorGridLnClr",MAJOR_GRID_LINES_THICKNESS:"majorGridLnThk",MAJOR_GRID_LINES_STYLE:"majorGridLnStyle",MAJOR_GRID_LINES_COMBINED_STYLE:"majorGridLnCmbStyle",MINOR_GRID_LINES_SHOW:"minerGridLnShw",MINER_GRID_LINES_COLOR:"minerGridLnClr",MINER_GRID_LINES_THICKNESS:"minerGridLnThk",MINER_GRID_LINES_STYLE:"minerGridLnStyle",MINER_GRID_LINES_COMBINED_STYLE:"minerGridLnCmbStyle",ALL_ROW_COLUMN_SHOW:"allRwColShw",COLUMN_TEXT_SHOW:"colTxtShw",ROW_TEXT_SHOW:"rwTxtShw",COLUMN_HEADER_SHOW:"colHdrShw",ROW_HEADER_SHOW:"rwHdrShw",COLUMN_VALUES_SHOW:"colVlShw",ROW_VALUES_SHOW:"rwVlShw",ALL_TEXT_FONT_COLOR:"allTxtFntClr",ALL_TEXT_FONT_SIZE:"allTxtFntSz",ALL_TEXT_FONT_FAMILY:"allTxtFntFml",ALL_TEXT_FONT_STYLE:"allTxtFntStyle",ALL_ROW_COLUMN_TEXT_FONT_COLOR:"allRwColTxtFntClr",ALL_ROW_COLUMN_TEXT_FONT_SIZE:"allRwColTxtFntSz",ALL_ROW_COLUMN_TEXT_FONT_FAMILY:"allRwColTxtFntFml",ALL_ROW_COLUMN_TEXT_FONT_STYLE:"allRwColTxtFntStyle",ALL_ROW_COLUMN_TEXT_ALIGNMENT_HORIZONTAL:"allRwColTxtAlignH",ALL_ROW_COLUMN_TEXT_ALIGNMENT_VERTICAL:"allRwColTxtAlignV",ROW_TEXT_TEXT_FONT_COLOR:"rwTxtTxtFntClr",ROW_TEXT_TEXT_FONT_SIZE:"rwTxtTxtFntSz",ROW_TEXT_TEXT_FONT_FAMILY:"rwTxtTxtFntFml",ROW_TEXT_TEXT_FONT_STYLE:"rwTxtTxtFntStyle",ROW_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"rwTxtTxtAlignH",ROW_TEXT_TEXT_ALIGNMENT_VERTICAL:"rwTxtTxtAlignV",COLUMN_TEXT_TEXT_FONT_COLOR:"colTxtTxtFntClr",COLUMN_TEXT_TEXT_FONT_SIZE:"colTxtTxtFntSz",COLUMN_TEXT_TEXT_FONT_FAMILY:"colTxtTxtFntFml",COLUMN_TEXT_TEXT_FONT_STYLE:"colTxtTxtFntStyle",COLUMN_TEXT_TEXT_ALIGNMENT_HORIZONTAL:"colTxtTxtAlignH",COLUMN_TEXT_TEXT_ALIGNMENT_VERTICAL:"colTxtTxtAlignV",ROW_HEADER_TEXT_FONT_COLOR:"rwHdrTxtFntClr",ROW_HEADER_TEXT_FONT_SIZE:"rwHdrTxtFntSz",ROW_HEADER_TEXT_FONT_FAMILY:"rwHdrTxtFntFml",ROW_HEADER_TEXT_FONT_STYLE:"rwHdrTxtFntStyle",ROW_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"rwHdrTxtAlignH",ROW_HEADER_TEXT_ALIGNMENT_VERTICAL:"rwHdrTxtAlignV",COLUMN_HEADER_TEXT_FONT_COLOR:"colHdrTxtFntClr",COLUMN_HEADER_TEXT_FONT_SIZE:"colHdrTxtFntSz",COLUMN_HEADER_TEXT_FONT_FAMILY:"colHdrTxtFntFml",COLUMN_HEADER_TEXT_FONT_STYLE:"colHdrTxtFntStyle",COLUMN_HEADER_TEXT_ALIGNMENT_HORIZONTAL:"colHdrTxtAlignH",COLUMN_HEADER_TEXT_ALIGNMENT_VERTICAL:"colHdrTxtAlignV",ROW_VAVLUE_TEXT_FONT_COLOR:"rwVlTxtFntClr",ROW_VAVLUE_TEXT_FONT_SIZE:"rwVlTxtFntSz",ROW_VAVLUE_TEXT_FONT_FAMILY:"rwVlTxtFntFml",ROW_VAVLUE_TEXT_FONT_STYLE:"rwVlTxtFntStyle",ROW_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"rwVlTxtAlignH",ROW_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"rwVlTxtAlignV",COLUMN_VAVLUE_TEXT_FONT_COLOR:"colVlTxtFntClr",COLUMN_VAVLUE_TEXT_FONT_SIZE:"colVlTxtFntSz",COLUMN_VAVLUE_TEXT_FONT_FAMILY:"colVlTxtFntFml",COLUMN_VAVLUE_TEXT_FONT_STYLE:"colVlTxtFntStyle",COLUMN_VAVLUE_TEXT_ALIGNMENT_HORIZONTAL:"colVlTxtAlignH",COLUMN_VAVLUE_TEXT_ALIGNMENT_VERTICAL:"colVlTxtAlignV",TITLE_FONT_COLOR:"ttlFntClr",TITLE_FONT_SIZE:"ttlFntSz",TITLE_FONT_FAMILY:"ttlFntFml",TITLE_FONT_STYLE:"ttlFntStyle",COLOR_SQUARE_COLOR:"clrSqrClr"};mstrmojo.gm.EnumAxis={DssAxisReserved:0,DssAxisRows:1,DssAxisColumns:2,DssAxisPages:3,DssAxisChapters:4,DssAxisAll:5};mstrmojo.gm.EnumCombinedLineStyle={NONE:99,THIN:1,THICK:2,DASHED:3,DOTTED:4};mstrmojo.gm.EnumSizeByType={SQUARE:1,CIRCLE:4};mstrmojo.gm.EnumTheme={DARK:0,LIGHT:1};mstrmojo.gm.EnumFitTo={CONTENT:1,PANEL:2,COMPACT:3};mstrmojo.gm.EnumAxisScale={GLOBAL:0,PERROWCOL:1,PERCELL:2,CUSTOM:3,DIFFERENT:4};mstrmojo.gm.EnumShape={GENERIC:-1,AREA:0,BAR:1,LINE:2,STEPLINE:3,CIRCLE:4,RECTANGLE:5,SQUARE:6,TICK:7,PIESLICE:8,POLYGON:9,PIE:10,RING:11,DEFAULT:12,BULLET:13};mstrmojo.gm.EnumSubtype={AUTO:1,ABSOLUTE:2,STACKED:3,CLUSTERED:4,PERCENT:5};mstrmojo.gm.EnumDataLabels={HIDE:1,SHOW_VALUE_ONLY:2,SHOW_TEXT_ONLY:3};mstrmojo.gm.EnumDataLabelPlacements={AUTOMATIC:1,GENERIC:2,RESERVED:3};mstrmojo.gm.EnumLegend={SHOW:0,HIDE:1,MINIMIZED:2};mstrmojo.gm.EnumLegendMode={RESTORED:1,MINIMIZED:2};mstrmojo.gm.EnumTextAlignH={LEFT:0,MIDDLE:1,RIGHT:2};mstrmojo.gm.EnumTextAlignV={TOP:0,MIDDLE:1,BOTTOM:2};mstrmojo.gm.EnumMaxSizeType={AUTO:1,MANUAL:2,AUTO_FIT:3};mstrmojo.gm.EnumMinSizeType={AUTO:1,MANUAL:2,PROPORTIONAL:3};mstrmojo.gm.EnumAxes={SHOW_BOTH:1,SHOW_NONE:2,SHOW_X:3,SHOW_Y:4};mstrmojo.gm.EnumMatrixLines={SHOW_ALL:1,SHOW_NONE:2,SHOW_HORIZONTAL:3,SHOW_VERTICAL:4};mstrmojo.gm.EnumGridLines={AUTO:1,SHOW:2,HIDE:3,SHOW_MAJOR_ONLY:4};mstrmojo.gm.LineMarkerShape={Circle:4,Square:1};mstrmojo.gm.ShapeFillType={Solid:0,Gradient:14,Pattern:3};mstrmojo.gm.ShapeFillEffect={None:1,Bevel:2};mstrmojo.gm.Enum3DGMapping={SizeType:"9999_1002",SizeValue:"9999_1003",lgdBgFillClr:"6_564",lgdBgFillStyle:"6_10002",lgdBgFillEff:"6_608",lgdFntSz:"9_603",lgdFntFml:"9_576",lgdFntStyle:"9_584",lgdFntClr:"9_574",LegendVisibleness:"9999_116",xAxShw:"9999_124",xAxTtCtt:"293_9999",xAxTtFntClr:"293_574",xAxTtFntFml:"293_576",xAxTtFntStyle:"293_584",xAxLbFntSz:"272_603",xAxLbFntFml:"272_576",xAxLbFntStyle:"272_584",yAxShw:"9999_125",yAxTtCtt:"299_9999",yAxTtFntClr:"299_574",yAxTtFntFml:"299_576",yAxTtFntStyle:"299_584",yAxLbFntSz:"296_603",yAxLbFntFml:"296_576",yAxLbFntStyle:"296_584",bgFillClr:"1_564",bgFillEff:"1_879",bgFillTrans:"1_608",outBdrClr:"1_588"};mstrmojo.gm.EnumRefLineModelType={MAX:1,MIN:2,AVG:3,MED:4,FIRST:5,LAST:6,CONST:7};mstrmojo.gm.EnumTrendLineModelType={BEST_FIT:256,LINEAR:257,LOG:258,EXP:259,POW:260,POLY:261};mstrmojo.gm.EnumTrendRefLevel={DssModelLevelReserved:0,DssModelLevelPerCell:1,DssModelLevelPerRow:2,DssModelLevelPerColumn:3,DssModelLevelPerPanel:4,DssModelLevelLastOne:5};mstrmojo.gm.EnumTimeRole={None:0,YearOfDecade:3083,QuarterOfYear:2826,MonthOfYear:2825,MonthOfQuarter:2569,WeekOfYear:2824,WeekOfQuarter:2568,WeekOfMonth:2312,DayOfYear:2823,DayOfQuarter:2567,DayOfMonth:2311,DayOfWeek:2055,HourOfDay:1798,MinuteOfDay:1797,MinuteOfHour:1541,SecondOfDay:1796,SecondOfHour:1540,SecondOfMinute:1284};mstrmojo.gm.EnumTrendRefModelLabels={DssModelLabelsReserved:-1,DssModelLabelsNone:0,DssModelLabelsType:1,DssModelLabelsMetric:2,DssModelLabelsValue:4};mstrmojo.gm.EnumTRFManipulations={AddTRLine:"141",RemoveTRLine:"142",UpdateTRLine:"143",UpdateForecastInfo:"144"};mstrmojo.gm.EnumShapeFormatStatus={NORMAL:0,PER_COLORBY:1,PER_SHAPE:2};(function(){mstrmojo._HasPopup=mstrmojo.provide("mstrmojo._HasPopup",{_mixinName:"mstrmojo._HasPopup",_lastOpened:null,openPopup:function A(G,E){var C=!!G&&(typeof G==="string")&&!G.match(/\./)&&!!this[G],D=mstrmojo.registry.ref(C?this[G]:G);if(D&&D.open){if(C){this[G]=D;}if(D.disposable!==false){this.addDisposable(D);}var J=D.slot&&this[D.slot];if(J){if(D.parent!==this){if(this.addChildren){this.addChildren([D]);}else{var I=false,F=D.domNode||D.placeholder;if(F&&typeof F==="string"){F=document.getElementById(F);}if(!F){I=true;F=document.createElement("span");D.placeholder=F;}if(I||(F.parentNode!==J)){J.appendChild(F);}}}}try{D.open(this,E);}catch(H){console.log("Error opening popup: "+H);}this._lastOpened=D;}},closePopup:function B(){var C=this._lastOpened;if(C&&C.visible&&C.close){C.close();delete this._lastOpened;}}});}());(function(){function B(L,Q,N){var M,O;M=0;if(N){M=Math.max(L,L-Q);M=Math.max(M,-Q);}else{M=L-Q;}if(M===0){this.mIsShown=false;return 1;}var P=M;O=1;while(M<1){M*=10;O/=10;}while(M>=10){M/=10;O*=10;}if(M<1.8){O*=2;O/=10;}else{if(M<3.1){O*=4;O/=10;}else{if(M<4.6){O*=5;O/=10;}else{if(M>=8.1){O*=2;}}}}return O;}function K(P){var L,N;this.mStep=B.call(this,this.mMaximum,this.mMinimum,P.mAlwaysIncludeZero);this.mMaxTick=Math.ceil(this.mMaximum/this.mStep)*this.mStep;this.mMinTick=Math.floor(this.mMinimum/this.mStep)*this.mStep;this.mMinTick=(this.mMinTick*this.mMinimum<0)?0:this.mMinTick;if(P.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}var M=this.mMaxTick-this.mMinTick;if(this.mStep>=M){return ;}L=Math.floor((this.mMaxTick-this.mMinTick+this.mStep/100)/this.mStep)+1;for(N=1;N<L-1;++N){var O=this.mMinTick+N*this.mStep;this.mTicks.push(O);}}function C(M){var L;this.mMaxTick=1;this.mStep=this.mMinimum<0?0.2:0.1;if(M.mUseCustomMinMax){this.mMaxTick=M.mAxisMaxValue;this.mMinTick=M.mAxisMinValue;this.mMaxTick=Math.min(1,this.mMaxTick);this.mMinTick=Math.max(-1,this.mMinTick);this.mStep=0.1;}else{if(this.mMaximum>=0.5){this.mMaxTick=1;this.mMinTick=Math.floor(this.mMinimum/this.mStep)*this.mStep;this.mMinTick=(this.mMinTick*this.mMinimum<0)?0:(this.mMinTick>0?0:this.mMinTick);if(this.mMinimum<-0.5){this.mMinTick=-1;}}else{if(this.mMaximum>0){this.mMaxTick=Math.ceil(this.mMaximum/this.mStep)*this.mStep;this.mMinTick=-1;}else{this.mStep=0.1;this.mMaxTick=0;this.mMinTick=-1;}}}for(L=this.mMinTick+this.mStep;L+0.01<this.mMaxTick;L+=this.mStep){this.mTicks.push(Math.round(L*100)/100);}}function I(L){return Math.log(L)/Math.log(10);}function H(O){var N,L,M;this.mStep=1;if(this.mMaximum<=0){this.mMinTick=1;this.mMaxTick=10;return ;}if(this.mMinimum<=0){L=this.mMaximum>1?0:-1;this.mMinTick=Math.pow(10,L);if(O.mUseCustomMinMax){this.mMaxTick=this.mMaximum;N=Math.floor(I.call(this,this.mMaximum));if(I.call(this,this.mMaximum)===N){N--;}}else{N=Math.ceil(I.call(this,this.mMaximum));this.mMaxTick=Math.pow(10,N);}for(M=L+1;M<N;++M){this.mTicks.push(Math.pow(10,Math.floor(M)));}return ;}if(O.mUseCustomMinMax){N=I.call(this,this.mMaximum);L=I.call(this,this.mMinimum);this.mMaxTick=this.mMaximum;this.mMinTick=this.mMinimum;}else{N=Math.ceil(I.call(this,this.mMaximum));L=Math.floor(I.call(this,this.mMinimum));this.mMaxTick=Math.pow(10,N);this.mMinTick=Math.pow(10,L);}for(M=L+1;M<N;++M){this.mTicks.push(Math.pow(10,Math.floor(M)));}}function J(L){this.mTicks.splice(0,this.mTicks.length);if(this.mIsPercent){return C.call(this,L);}if(L.mUseLogarithmicScale){return H.call(this,L);}K.call(this,L);}function G(Q){if(Q.mUseCustomMinMax||Q.mUseLogarithmicScale){return ;}var M=0.1,O=false,L=false,P=[];this.GetTicks(P);if(P.length>=2){var N=P.length;L=((Math.abs(this.mMaximum-P[N-2])<M*this.mStep));O=((Math.abs(this.mMinimum-P[1])<M*this.mStep));if(this.mIsPercent){L=false;}}if(L&&O){this.mMinTick=this.mMinimum;this.mMaxTick=this.mMaximum;Q.mUseMinValue=Q.mShowMinLabel=true;Q.mUseMaxValue=Q.mShowMaxLabel=true;}else{if(L){this.mMaxTick=this.mMaximum;Q.mUseMaxValue=Q.mShowMaxLabel=true;}else{if(O){this.mMinTick=this.mMinimum;Q.mUseMinValue=Q.mShowMinLabel=true;}else{}}}if(Q.mAlwaysIncludeZero){this.mMaxTick=(this.mMaximum<0)?0:this.mMaxTick;this.mMinTick=(this.mMinimum>0)?0:this.mMinTick;}}mstrmojo.chart.common.ScalePlate=mstrmojo.provide("mstrmojo.chart.common.ScalePlate",{mOptions:{mShowMinLabel:true,mShowMaxLabel:true},isStackedChart:false,mStep:0,mIsPercent:false,mMinimum:0,mMaximum:0,mMaxTick:0,mMinTick:0,mTicks:[],clear:function F(){this.isStackedChart=this.mIsPercent=false;this.mMinimum=this.mMaximum=0;this.mMinTick=this.mMaxTick=0;this.mStep=0;this.mTicks=[];},GetTicks:function A(M){if(this.mOptions.mShowMinLabel){M.push(this.mMinTick);}var L;for(L=0;L<this.mTicks.length;++L){M.push(this.mTicks[L]);}if(this.mOptions.mShowMaxLabel){M.push(this.mMaxTick);}},getMaxMinTickValue:function D(O,N,L,M){this.computeTicks(O,N,L,M);return{Max:this.mMaxTick,Min:this.mMinTick};},computeTicks:function E(Q,P,L,N){this.mMinimum=N;this.mMaximum=L;this.mIsPercent=!!(P&1);this.isStackedChart=!!(P&2);var O=1e-14;if(!Q.mUseLogarithmicScale&&this.isStackedChart){this.mMinimum=Math.min(this.mMinimum,0);this.mMaximum=Math.max(this.mMaximum,0);}if(Q.mDrawCustomLine){this.mMinimum=Math.min(this.mMinimum,Q.mAxisCustomValue);this.mMaximum=Math.max(this.mMaximum,Q.mAxisCustomValue);}if(this.mIsPercent&&this.mMinimum===this.mMaximum&&1===this.mMaximum){if(this.mMinimum===1){this.mMinimum=0;}}if(Math.abs(this.mMinimum-this.mMaximum)<O){if(this.mMinimum<-O||this.mMinimum>O){var M=Math.abs(this.mMinimum)*0.5;this.mMaximum=this.mMaximum+M;this.mMinimum=this.mMinimum-M;}else{this.mMinimum=-6;this.mMaximum=6;}}J.call(this,Q);if(Q.mUseLogarithmicScale&&this.isStackedChart){this.mMaximum=Q.mDrawCustomLine?Math.max(this.mMaximum+this.mMinTick,Q.mAxisCustomValue):this.mMaximum+this.mMinTick;this.mMinimum=Math.min(this.mMinimum,0);this.mTicks.splice(0,this.mTicks.length);H.call(this,Q);}G.call(this,Q);}});}());mstrmojo.mstr.EnumDSSXMLObjectTypes={Generic:-2,Unknown:-1,Reserved:0,Filter:1,Template:2,ReportDefinition:3,Metric:4,Style:6,AggMetric:7,Folder:8,SubscriptionDevice:9,Prompt:10,Function:11,Attribute:12,Fact:13,Dimension:14,Table:15,DatamartReport:16,FactGroup:17,Shortcut:18,Resolution:19,Monitor:20,AttributeForm:21,Schema:22,Format:23,Catalog:24,CatalogDefn:25,Column:26,PropertySet:28,DBRole:29,DBLogin:30,DBConnection:31,Project:32,ServerDef:33,User:34,Configuration:36,Request:37,Script:38,Search:39,SearchFolder:40,Datamart:41,FunctionPackageDefinition:42,Role:43,SecurityRole:44,Locale:45,Consolidation:47,ConsolidationElement:48,ScheduleEvent:49,ScheduleObject:50,ScheduleTrigger:51,Link:52,DbTable:53,TableSource:54,DocumentDefinition:55,DrillMap:56,DBMS:57,MDSecurityFilter:58,PromptAnswer:59,PromptAnswers:60,ObjectTag:65,ReservedLastOne:66};(function(){mstrmojo.boxmodel=mstrmojo.provide("mstrmojo.boxmodel",{rangeIntersect:function E(J,H,I,G){if(J<I){return I<=H;}if(J>I){return J<=G;}return true;},px2Inches:function C(H,G){G=parseInt(G,10);return mstrmojo.NumberFormat.getInstance(mstrConfig.decimalSep,mstrConfig.thousandsSep).format(parseFloat((G/H.zf/H.dpi).toFixed(4)));},offset:function F(I,H){var L=I,G=0,K=0;while(I){G+=I.offsetLeft;K+=I.offsetTop;I=I.offsetParent;if(I===H){break;}}var J;for(J=L&&L.parentNode;J&&J!==H;J=J.parentNode){if(J.scrollTop){K-=J.scrollTop;}if(J.scrollLeft){G-=J.scrollLeft;}}return{left:G,top:K};},convert2px:function D(K,I){if(!/px$/.test(I)){var H=document.createElement("img"),G=H.style,J;G.zIndex=-1;G.left=I;K.appendChild(H);J=G.pixelLeft;K.removeChild(H);return J+"px";}return I;},getEdgeQuadrantByPoint:function B(I,H){var G=H.x-I.x,M=H.y-I.y,J=I.w,L=I.h,K=[["Left","Bottom"],["Top","Right"]];if(M>L/J*G){K=K[0];}else{K=K[1];}return(M<-L/J*G+L)?K[0]:K[1];},isPtInPolygon:function A(I,K){var G=I.x,J=I.y,H=false;K.forEach(function(N,L){var M=K[L-1]||K[K.length-1];if((N.y>=J)!==(M.y>=J)){if((G<(M.x-N.x)*(J-N.y)/(M.y-N.y)+N.x)){H=!H;}}});return H;}});}());mstrmojo.VisEnum={ControlType:{BUTTON:"button",LASSO_SELECTOR:"lasso-selector",LASSO_RESIZER:"lasso-resizer",SPLITTER:"splitter",GM_ROW_HEADER:"rh",GM_ROW_HEADER_TEXT:"rhtext",GM_ROW_HEADER_EXTRA:"rhext",GM_COL_HEADER:"ch",GM_COL_HEADER_TEXT:"chtext",GM_COL_HEADER_EXTRA:"chext",GM_YAXIS:"y",GM_XAXIS:"x",GM_YLABEL:"y-label",GM_XLABEL:"x-label",GM_ROW_HEADER_TITLE:"rht",GM_ROW_HEADER_TITLE_TEXT:"rhttext",GM_COL_HEADER_TITLE:"cht",GM_COL_HEADER_TITLE_TEXT:"chttext",GM_MINI_CHART:"chart",GM_TEXT_BODY:"text-body",GM_SHAPE:"shape",GM_MARKER:"marker",GM_SET_SHAPE:"set-shape",GM_YAXIS2:"y2",GM_XAXIS2:"x2",GM_TREND_LINE:"trendLine",GM_TREND_LINE_HOVER:"trendLineHover",GM_TREND_LINE_SELECT:"trendLineSelect",GM_REF_LINE:"referenceLine",GM_REF_LINE_HOVER:"referenceLineHover",GM_REL_LINE_SELECT:"referenceLineSelect",GM_HIGHLIGHT_BOX:"highlight-box",GM_AXIS_TEXT:"axis-text",GM_AXIS_WORD:"axis-word",GM_SVG_X_NUMERIC:"svg-x-numeric",GM_SVG_X_CATEGORY:"svg-x-category",GM_SVG_Y_NUMERIC:"svg-y-numeric",GM_SVG_Y_CATEGORY:"svg-y-category",GM_X_NUMERIC:"x-numeric",GM_X_CATEGORY:"x-category",GM_Y_NUMERIC:"y-numeric",GM_Y_CATEGORY:"y-category",GM_SVG_CHART:"svg-chart",GM_DATA_LABEL:"data-label",GM_YAXIS_LINE:"y-line",GM_XAXIS_LINE:"x-line",GM_YAXIS2_LINE:"y2-line",GM_XAXIS2_LINE:"x2-line",LGD_TITLE:"lgd-title",LGD_TEXT:"lgd-text",LGD_COLORBOX:"lgd-colorbox",LGD_COLORBOX_CTN:"lgd-colorbox-ctn",LGD_CANVAS:"lgd-canvas",LINE_CONTAINER:"line-ctn",GM_V_MATRIX_LINE:"v-line",GM_H_MATRIX_LINE:"h-line",GM_V_CHART_LINE:"v-ctline",GM_H_CHART_LINE:"h-ctline",GM_CHART_ROW:"ct-row",GM_CHART_COL:"ct-col",GM_H_GRID_LINE:"h-gline",GM_V_GRID_LINE:"v-gline",GM_H_MINOR_GRID_LINE:"h-gline-minor",GM_V_MINOR_GRID_LINE:"v-gline-minor",GM_ORIGIN_LINE:"originLine",GM_ORIGIN_LABEL:"origin-label",GM_ORIGIN_LINE_H:"origin-line-h",GM_ORIGIN_LINE_V:"origin-line-v",GM_ORIGIN_LABEL_H:"origin-label-h",GM_ORIGIN_LABEL_V:"origin-label-v",GM_DUMMY_A:"dummy-a",GM_V_EXTRA_LINE:"v-extra-line",GM_REF_LABEL:"ref-label",GM_RIGHT_BORDER:"border-r",GM_BOTTOM_BORDER:"border-b"},GMDropZoneID:{ROWS:1,COLUMNS:2,XAXIS:3,YAXIS:4,BREAKBY:5,SLICEBY:6,COLORBY:7,SIZEBY:8,TOOLTIP:9,ANGLEBY:10},NETWORK_LOCAL_PROPS:{ZOOM_FACTOR:"zf",NODE_POSITION:"np"},NETWORK_PROPERTIES:{showLegend:"showLegend",showEdgeDirection:"showedgearrow",showTransition:"animatelayout",nodeSizeAggregation:"nodesizeaggfunc",minNodeSize:"minns",maxNodeSize:"maxns",themeType:"th",circleLabelFont:"BubFnt",modifiedNodes:"mn",layoutMode:"layout",legendPosition:"legendposition",dragMode:"mode",bubbleStyle:"bbs",propsCategory:"pc",lgdBgFillClr:"lgdBgFillClr",lgdBgFillTrans:"lgdBgFillTrans",lgdFntClr:"lgdFntClr",lgdFntSz:"lgdFntSz",lgdFntFml:"lgdFntFml",lgdFntStyle:"lgdFntStyle"},NETWORK_LAYOUT:{CIRCULAR:"circular",LINEAR:"linear",FORCE_DIRECTED:"forceDirected"},NETWORK_DRAG_MODE:{pan:0,select:1},NETWORK_AGGREGATION_METHOD:{"Count of":0,"Sum of":1,"Average of":2,"Min of":3,"Max of":4},NETWORK_MIN_NODE_SIZE_TYPE:{PROPORTIONAL:1,FULL_RANGE:2,ADJUSTED_RANGE:3},NETWORK_MAX_NODE_SIZE_TYPE:{AUTOMATIC:1,MANUAL:2},NETWORK_FORCE_DIRECTED_LAYOUT_EDGE_CURVATURE:[0,0.2],HEATMAP_PROPERTIES:{showLegend:"showLegend",deleteButton:"ed",showMetricValues:"mv",labelSize:"lb",layout:"la",themeType:"th",headerType:"he",deletedList:"dl",refreshType:"rt",metricList:"ml",colorByType:"cbt",absoluteFixed:"abs",blendColor:"blc",background:"bg",legendBackground:"lbg",headerColors:"hcl",fonts:"fts",propsCategory:"pc",attrColorByOpacity:"acbo",metricColorByOpacity:"mcbo"},HEATMAP_LABEL_SIZE:{On:0,Off:1,Proportional:2},MAPS_PROPERTIES:{SHOW_LEGEND:"showLegend"},VIS_CARDLIMIT:{GRID:250,NON_GRID:8000},GMLegendDataType:{COLOR_BY:1,SIZE_BY:2},GMLegendFormatingPropertyTag:{LEGEND_BG_COLOR:"lgdBgFillClr",LEGEND_BG_FILL_STYLE:"lgdBgFillStyle",LEGEND_BG_FILL_EFFECT:"lgdBgFillEff",LEGEND_BG_FILL_TRANSPARENCY:"lgdBgFillTrans",LEGEND_FONT_SIZE:"lgdFntSz",LEGEND_FONT_FAMILY:"lgdFntFml",LEGEND_FONT_STYLE:"lgdFntStyle",LEGEND_FONT_COLOR:"lgdFntClr",LEGEND_BORDER_SHOW:"lgdBdrShw",LEGEND_BORDER_COLOR:"lgdBdrClr",LEGEND_BORDER_THICKNESS:"lgdBdrThk",LEGEND_BORDER_LINE_STYLE:"lgdBdrStyle",LEGEND_BORDER_LINE_COMBINED_STYLE:"lgdBdrCmbStyle",COLOR_SQUARE_COLOR:"clrSqrClr"},LegendPropertyTag:{LEGEND_MODE:"lm",LEGEND_POSITION:"LegendPosition",SCALE_LEGEND_WIDTH:"lwr"},EnumLegendMode:{RESTORED:1,MINIMIZED:2},EnumColorRankMode:{INVALID:-1,VALUE:0,TOP:1,BOTTOM:2,TOP_PERCENT:3,BOTTOM_PERCENT:4},FormNameDisplayType:{OFF:0,ON:1,FORM_NAME_ONLY:2,SHOW_ATT_NAME_ONCE:3,AUTO:4},SERVER_JSON_ERROR_TYPE:{EMPTY_DATA:0,NO_DATASET:1,AE_ERROR:2,NO_TEMPLATE_UNIT:3},NETWORK_CIRCLE_BORDER_WIDTH:8,IMAGELAYOUT_PROPERTIES:{DISPLAY_MODE:"mt",MAX_SIZE_TYPE:"ty",MAX_SIZE_VALUE:"val",MIN_SIZE_TYPE:"mst",MIN_SIZE_VALUE:"msv",MAP_FILE_PATH:"mf",SHAPE_FILL_OPC_PER:"shapeFillTrans",SHAPE_FILL_COLOR:"shapeClr",SHAPE_BORDER_STYLE:"shapeBorderCmbStyle",SHAPE_BORDER_COLOR:"shapeBorderClr",DATA_LABEL_SWITCH:"dls",DATA_LABEL_FONT_SIZE:"dlFntSz",DATA_LABEL_FONT_FAMILY:"dlFntFml",DATA_LABEL_FONT_COLOR:"dlFntClr",DATA_LABEL_FONT_STYLE:"dlFntStyle",BLANK_MAP_BORDER_STYLE:"blankMapBorderStyle",BLANK_MAP_BORDER_COLOR:"blankMapBorderClr",BLANK_MAP_COLOR:"blankMapClr",DEFAULT_MAP_COLOR:"dftMapClr",DEFAULT_BUBBLE_COLOR:"dftBubbleClr",DEFAULT_MAP_BORDER_COLOR:"dftMapBorderClr",DEFAULT_BUBBLE_BORDER_COLOR:"dftBubbleBorderClr",LEGEND_FONT_SIZE:"lgFntSz",LEGEND_FONT_FAMILY:"lgFntFml",LEGEND_FONT_COLOR:"lgFntClr",LEGEND_FONT_STYLE:"lgFntStyle",LEGEND_BACKGROUND_COLOR:"lgBgClr",LEGEND_OPC_PER:"lgBgFillTrans",LEGEND_POSITION:"lgPos",LEGEND_SHOW:"lgShow",LEGEND_MODE:"lgMode",LEGEND_SCALE:"lgScale",H_MATRIX_LINE_COLOR:"hMatrixLnClr",V_MATRIX_LINE_COLOR:"vMatrixLnClr",ALL_MATRIX_LINE_COLOR:"allMatrixLnClr",H_MATRIX_LINE_STYLE:"hMatrixLnCmbStyle",V_MATRIX_LINE_STYLE:"vMatrixLnCmbStyle",ALL_MATRIX_LINE_STYLE:"allMatrixLnCmbStyle"}};mstrmojo.EnumRWUnitType={LAYOUT:0,HEADER:2,FOOTER:3,SUBSECTION:4,DETAILS:5,PAGEHEADER:6,PAGEFOOTER:7,PANELSTACK:8,PANEL:9,GRID:521,GRAPH:522,GRIDGRAPH:527,RECTANGLE:101,IMAGE:102,LINE:105,TEXTFIELD:106,HTMLCONTAINER:107,SELECTOR:111,ROUNDEDRECTANGLE:112,VISUALIZATION:114,MOJOVISUALIZATION:115};mstrmojo.mstr.EnumNodeDimty={NodeDimtyReserved:0,NodeDimtyNone:1,NodeDimtyContinuation:2,NodeDimtyExclusiveContinuation:3,NodeDimtyOutputLevel:4,NodeDimtyBreakBy:5,NodeDimtyEmbedded:6,NodeDimtyUnspecified:7};(function(){mstrmojo.models.template.Title=mstrmojo.declare(null,null,{init:function G(J){this.title=J.title;},getActionType:function(){return this.title.at;},getDrillPath:function(){return this.title.dp;},getHeaderValues:function B(){return this.title.es;},getHeaderName:function F(J){return this.title.es[J].n;},getHeaderId:function F(J){return this.title.es[J].id;},getForms:function E(){return this.title.fs;},getFormId:function D(){return this.title.fid;},getFormType:function I(){return this.title.ftp;},getUnitId:function H(){return this.title.id;},getLinkMap:function C(){return this.title.lm;},getName:function A(){return this.title.n;},getUnitDssType:function(){return this.title.otp;},getSelectorControl:function(){return this.title.sc;}});}());(function(){mstrmojo.StringBuffer=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.StringBuffer",append:function A(C){if(!this.buf){this.reset();}this.buf[++this.len]=C;return this;},reset:function B(){this.buf=[];this.len=-1;}});mstrmojo.StringBuffer.prototype.toString=function(D){var C=this.buf;return(C&&C.join(D||""))||"";};}());(function(){mstrmojo._IsGraphDataService=mstrmojo.provide("mstrmojo._IsGraphDataService",{handleUserSingleTap:function A(D,E,B,G,C,F){if(mstrApp.onMobileDevice()){mstrApp.serverRequest({taskId:"handleUserSingleTap",sliceID:D,nodekey:E,x:B,y:G,selectable:C},F);}}});}());mstrmojo.LoadedExternalJSURLs={};function LoadScriptsExternalJSCallback(){mstrmojo.LoadedExternalJSURLs[mstrmojo._LoadsScript.esScripts.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(mstrmojo._LoadsScript.esScripts,mstrmojo._LoadsScript.callback,mstrmojo._LoadsScript.esScritsContext);mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=false;}mstrmojo._LoadsScript=mstrmojo.provide("mstrmojo._LoadsScript",{_meta_usesSuper:false,requiresMethod:function requiresMethod(B){if(!B){return false;}if(typeof this[B]==="function"){return true;}var A=this[B]||(this.methods&&(this.methods[B]||this.methods["*"]));if(typeof A==="string"){this.requiresCls(A);return typeof this[B]==="function";}return false;},requiresCls:function req(mixins,callback){if(mixins){if(typeof mixins==="string"){mixins=[mixins];}mstrmojo.requiresCls.apply(mstrmojo,mixins);var p=this.constructor.prototype,pm=p.mixins;if(!pm){p.mixins={};pm=p.mixins;}var mx=mstrmojo.mixin,i,len;for(i=0,len=mixins.length;i<len;i++){var fqcn=mixins[i];if(!pm[fqcn]){var m=eval(mixins[i]);mx(m,p);pm[fqcn]=true;if(m.__onmixin__){m.__onmixin__.apply(this,[]);}}}if(callback){callback.apply(this,[]);}}},requiresContrib:function reqCb(C,B){var A=this[C];if(A){var E,D=false;if(typeof A==="string"){E=mstrmojo.registry.ref(A);this[C]=E;D=true;}else{E=A;}if(E&&(D||B)){E.parent=this;if(E.startup){E.startup();}}return E;}return null;},requiresExternalScripts:function requiresExternalScripts(F,G,C){if(F&&F instanceof Array){if(F.length===0){if(G){G.call(C);}return false;}if(F[0]&&F[0].forceReload===false&&mstrmojo.LoadedExternalJSURLs[F[0].url]){F.splice(0,1);return this.requiresExternalScripts(F,G,C);}var A=document.createElement("script"),D=!!document.all,B=F[0].url;if(B.substr(0,7)==="file://"){B=B.substr(7);}else{if(mstrApp.isSingleTier&&B.substr(0,4)!=="http"){B="http:"+B;}}A.type="text/javascript";A.src=B;if(!F[0].callbackParamName){if(D){A.onreadystatechange=function(){if(A.readyState==="loaded"||A.readyState==="complete"){A.onreadystatechange=null;if(F.length>1){mstrmojo.LoadedExternalJSURLs[F.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(F,G);}else{if(F.length===1){mstrmojo.LoadedExternalJSURLs[F[0].url]=true;if(G){G.call(C);}}}}};}else{A.onload=function(){A.onload=null;if(F.length>1){mstrmojo.LoadedExternalJSURLs[F.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(F,G);}else{if(F.length===1){mstrmojo.LoadedExternalJSURLs[F[0].url]=true;if(G){G.call(C);}}}};}}else{if(F[0].callbackParamName.length!==0){if(mstrmojo._LoadsScript.ExternalJSCallbackIsBusy&&mstrmojo._LoadsScript.ExternalJSCallbackIsBusy===true){var E=this;window.setTimeout(function(){E.requiresExternalScripts(F,G,C);},500);return ;}mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=true;A.src+="&"+F[0].callbackParamName+"=LoadScriptsExternalJSCallback";mstrmojo._LoadsScript.esScripts=F;mstrmojo._LoadsScript.callback=G;mstrmojo._LoadsScript.esScritsContext=C;}}document.getElementsByTagName("head")[0].appendChild(A);}}});(function(){mstrmojo.requiresCls("mstrmojo.models.template.Title");mstrmojo.models.template.Titles=mstrmojo.declare(null,null,{init:function D(G){var F=this.gridData=G.data,E=F.gts;this.titles=G.isRow?E.row:E.col;},size:function C(){return this.titles.length;},getTitle:function B(E){return new mstrmojo.models.template.Title({title:this.titles[E]});},getCSS:function A(E){return this.gridData.css[this.titles[E].cni].n;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var E=mstrmojo.dom,M=mstrmojo.hash,B,I=mstrmojo.global.document,K="mousedown",P="mousemove",R="mouseup";function G(Y){if(E.isPrimaryMouseBtn(Y)){B.startDragCheck(self,Y);}}var V,Q,A="mstrmojo-dnd-avatar",U;function F(Z,Y){if(Y!==undefined&&Y!==null){Q.innerHTML=Y;}U.left=Z.x+"px";U.top=Z.y+"px";}function L(Z,Y){if(!V){V=I.createElement("div");U=V.style;V.className=A;V.innerHTML='<div class="'+A+'-inner"></div>';Q=V.firstChild;I.body.appendChild(V);}F(Z,Y);U.display="block";}function S(){if(U){U.display="none";}}function H(Y){var Z=++B.ctxt.moveCount;if(Z>=B.minMoves){B.stopDragCheck();if((Y.buttons===1||Y.buttons===undefined||E.isIE9)&&(Y.which===1||Y.button===0||E.isIE8)){B.startDrag(self,Y);}}}function O(Y){if(E.isPrimaryMouseBtn(Y)){B.stopDragCheck();delete B.ctxt;}}function D(Y){B.onDragMove(self,Y);}function C(Y){if(E.isPrimaryMouseBtn(Y)){B.stopDrag(window,Y);}}function N(b){var Z=mstrmojo.hash.copy(b,{}),a=Z.hWin=Z.hWin||window,Y=Z.e=Z.e||a.event;Z.node=E.eventTarget(a,Y);Z.pos=E.getMousePosition(Y,a);return Z;}function J(Z){var Y=E.findWidget(Z);while(Y){if(Y.draggable){return Y;}Y=Y.parent;}return null;}function T(Y){var a=Y.src,Z=J(a.node);if(!Z){return null;}if(Z.getDragAction){Y.action=Z.getDragAction(Y);}a.widget=Z;a.data=Z.getDragData&&Z.getDragData(Y);if(Z.isDragValid){if(!Z.isDragValid(Y)){if(!Z.shouldDragBubble||Z.shouldDragBubble(Y)!==true){Y.src.node=Z.domNode.parentNode;return T(Y);}return null;}}if(Z.ondragstart){Z.ondragstart(Y);}return Z;}function X(a,Z){var Y=E.findWidget(a),b=Z.tgt&&Z.tgt.widget;while(Y){if(Y.dropZone){if(Y===b){return Y;}if(Y.allowDrop&&Y.allowDrop(Z)){return Y;}}Y=Y.parent;}return null;}function W(){if(this.set){this.set("allowingDrop",false);}}mstrmojo.dnd=mstrmojo.dnd||mstrmojo.provide("mstrmojo.dnd",{minMoves:3,enable:function(){if(!mstrmojo.dndEnabled){E.attachEvent(I,K,G);mstrmojo.dndEnabled=true;}},disable:function(){mstrmojo.dndEnabled=false;E.detachEvent(I,K,G);},startDragCheck:function(Y,Z){delete this.ctxt;var a=N({hWin:Y,e:Z});this.ctxt={src:a,moveCount:0,last:M.copy(a.pos),getDirection:function(b){return !!this.dir[b];},getCtxtDragData:function(){var b=this.src;return(b&&b.data)||{};},getCtxtDropData:function(){var b=this.tgt;return(b&&b.data)||{};}};if(this.minMoves){E.attachEvent(I,P,H);E.attachEvent(I,R,O);}else{this.startDrag(Y,Z);}},stopDragCheck:function(){E.detachEvent(I,P,H);E.detachEvent(I,R,O);},startDrag:function(Y,b){var Z=this.ctxt;Z.id=mstrmojo.now();var a=T(Z);if(!a){return ;}E.clearBrowserHighlights(Y);E.preventDefault(self,b);E.attachEvent(I,P,D);E.attachEvent(I,R,C);var d=window.mstrApp;if(d&&d.setInteractive){this._changeAppStatus=d.setInteractive(false);}if(!a.ownAvatar){var c=Z.src;L(c.pos,c.data&&c.data.html);}},stopDrag:function(Y,f){E.detachEvent(I,P,D);E.detachEvent(I,R,C);var b=this.ctxt,a=b.tgt||{},Z=N({hWin:Y,e:f,data:a.data}),d=X(Z.node,b);Z.widget=d;b.tgt=Z;if(d){if(d.ondrop){d.ondrop(b);}else{W.call(d);}}var c=b.src.widget;if(c&&c.ondragend){c.ondragend(b);}if(c&&!c.ownAvatar){S();}if(this._changeAppStatus){window.mstrApp.setInteractive(true);delete this._changeAppStatus;}},onDragMove:function(c,f){if(E.isSafari){E.clearBrowserHighlights();}var Y=this.ctxt,b=Y.tgt||{},Z=b.widget,d=N({hWin:c,e:f,data:b.data}),i=d.widget=X(d.node,Y),h=Y.last,a=d.pos;Y.dir={x:a.x>h.x,y:a.y>h.y};Y.last=M.copy(d.pos);Y.tgt=d;if(Z!==i){if(Z){if(Z.ondragleave){Z.ondragleave(Y);}else{W.call(Z);}}if(i){Y.tgt.data=(i.getDropData&&i.getDropData(Y))||{};if(i.ondragenter){i.ondragenter(Y);}else{if(i.set){i.set("allowingDrop",true);}}}}if(i){if(i.ondragover){i.ondragover(Y);}}var g=Y.src.widget;if(g&&g.ondragmove){g.ondragmove(Y);}if(g&&!g.ownAvatar){F(d.pos);}}});B=mstrmojo.dnd;B.enable();}());(function(){mstrmojo.requiresCls("mstrmojo.dom");function G(J){return(J&&J.id);}mstrmojo._HasScrollbox=mstrmojo.provide("mstrmojo._HasScrollbox",{_mixinName:"mstrmojo._HasScrollbox",scrollListeners:null,scrollListenerCount:0,scrollInterval:50,scrollboxNode:undefined,scrollTo:function F(L,K){var J=this.scrollboxNode;J.scrollLeft=L.x;J.scrollTop=L.y;if(K){this.notifyScrollListeners(L);}},connectScrollbox:function E(K){if(!G(K)){return ;}var L=this.scrollListeners,J=K.id;if(!L){L={};this.scrollListeners=L;}if(!L[J]){L[J]=K;this.scrollListenerCount++;if(this.scrollListenerCount===1){this._attachScrollDom();}}},disconnectScrollbox:function D(K){if(!G(K)){return ;}var L=this.scrollListeners,J=K.id;if(L&&L.hasOwnProperty(J)){delete this.scrollListeners[J];this.scrollListenerCount--;if(!this.scrollListenerCount){this._detachScrollDom();}}},notifyScrollListeners:function C(K){var N=K||this.getScrollPos(),M=N.y,L=N.x;this.scrollboxTop=M;this.scrollboxLeft=L;this.scrollboxRight=L+this.scrollboxWidth;this.scrollboxBottom=M+this.scrollboxHeight;var J=this.scrollListeners,O;for(O in J){J[O].onscroll(this);}},getScrollPos:function H(){var J=this.scrollboxNode;return{x:J.scrollLeft,y:J.scrollTop};},_attachScrollDom:function A(){var M=this.scrollboxNode;if(M){var L=this.usesTouches;if(!L){if(!this.scrollCallback){var K=this.id;this.scrollCallback=function(){mstrmojo.all[K].notifyScrollListeners();};}mstrmojo.dom.attachBufferedEvent(M,"scroll",this.scrollCallback,this.scrollInterval);}if(this.scrollboxTop===null){this.scrollboxTop=L?0:M.scrollTop;}if(this.scrollboxLeft===null){this.scrollboxLeft=L?0:M.scrollLeft;}var J=function(P){var O=P.toLowerCase();var N=M.style[O];return(!isNaN(N)&&N.charAt(N.length-1)!=="%")?parseInt(N,10):M["client"+P];};if(this.scrollboxHeight===null){this.scrollboxHeight=J("Height");}if(this.scrollboxWidth===null){this.scrollboxWidth=J("Width");}this.scrollboxBottom=this.scrollboxTop+this.scrollboxHeight;this.scrollboxRight=this.scrollboxLeft+this.scrollboxWidth;this._attachedScrollbox=M;}},_detachScrollDom:function I(){var J=this._attachedScrollbox;if(J&&this.scrollCallback){mstrmojo.dom.detachBufferedEvent(J,"scroll",this.scrollCallback,this.scrollInterval);}delete this._attachedScrollbox;},scrollboxTop:null,scrollboxLeft:null,scrollboxHeight:null,scrollboxBottom:null,buildRendering:function B(){this._detachScrollDom();this._super();if(this.scrollListenerCount){this._attachScrollDom();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var B=mstrmojo.dom,E=100;function I(K,J){return function(L){mstrmojo.all[K][(J?"move":"show")+"Tooltip"](L,self);};}function A(){var K=this.tooltipNode||this.domNode,M=this.id,J,L="_ontooltip"+(this.isDynamicTooltip?"move":"over");if(!this._ontooltipout){this._ontooltipout=function(N){mstrmojo.all[M].hideTooltip(N,self);};}if(!this[L]){this[L]=I(M,this.isDynamicTooltip);}K=[].concat(K);for(J=0;J<K.length;J++){K[J].removeAttribute("title");B.attachEvent(K[J],(this.isDynamicTooltip?"mousemove":"mouseover"),this[L]);B.attachEvent(K[J],"mouseout",this._ontooltipout);}}mstrmojo._HasTooltip=mstrmojo.provide("mstrmojo._HasTooltip",{tooltip:"",richTooltip:null,useRichTooltip:false,isDynamicTooltip:false,tooltipNode:null,tooltipOpenDelay:700,hasOpenTooltip:false,postBuildRendering:function(){var J=this._super();if(this.useRichTooltip){A.call(this);}return J;},onuseRichTooltipChange:function H(){if(this.hasRendered){var K=this.tooltipNode||this.domNode,J;if(this.useRichTooltip){A.call(this);}else{if(this._ontooltipout){if(K&&K.constructor!==Array){K=[K];}for(J=0;J<K.length;J++){B.detachEvent(K[J],this.isDynamicTooltip?"mousemove":"mouseover",this["_ontooltip"+(this.isDynamicTooltip?"move":"over")]);B.detachEvent(K[J],"mouseout",this._ontooltipout);}}this.hideTooltip();}}},showTooltip:function G(M,L){var K=this;if(!K.hasOpenTooltip&&(!mstrApp.isInteractive||mstrApp.isInteractive&&mstrApp.isInteractive())){mstrmojo.requiresCls("mstrmojo.tooltip");if(this.updateTooltipConfig){this.updateTooltipConfig(M);}window.clearTimeout(this._tooltipTimeOut);if(mstrmojo.dom.isIE){var N={};for(var J in M){N[J]=M[J];}M=N;}var O=this.richTooltip?this.richTooltip.areaId:undefined;this._tooltipTimeOut=window.setTimeout(function(){if(K._closeTooltipTimeout){window.clearTimeout(K._closeTooltipTimeout);delete K._closeTooltipTimeout;}mstrmojo.tooltip.open(K,M,L);K.tooltip.onmouseover=function(){if(K.richTooltip&&K.richTooltip.enableHover){window.clearTimeout(K._closeTooltipTimeout);window.clearTimeout(K._deactivationTimeout);if(K.tooltip){K.tooltip.onmouseout=function(P){if(!B.contains(this.domNode,P.e.toElement||P.e.relatedTarget)){K.hideTooltip();}};}}};K.hasOpenTooltip=true;K._hasActiveArea=true;K._tooltipAreaId=O;window.clearTimeout(K._deactivationTimeout);delete K._deactivationTimeout;},(this._hasActiveArea&&O&&O===this._tooltipAreaId)?0:this.tooltipOpenDelay);}},moveTooltip:function C(J,L){if(this._tooltipTimeOut){window.clearTimeout(this._tooltipTimeOut);this._tooltipTimeOut=null;mstrmojo.tooltip.close();}var N=this,K=J,M=L;this._tooltipTimeOut=setTimeout(function(){mstrmojo.tooltip.open(N,K,M);},this.tooltipOpenDelay);},hideTooltip:function F(){var J=this;window.clearTimeout(this._tooltipTimeOut);if(this._closeTooltipTimeout){window.clearTimeout(this._closeTooltipTimeout);}if(this._hasActiveArea&&!this._deactivationTimeout){this._deactivationTimeout=window.setTimeout(function(){delete J._deactivationTimeout;delete J._hasActiveArea;delete J._tooltipAreaId;},100);}mstrmojo.requiresCls("mstrmojo.tooltip");if(J.richTooltip&&J.richTooltip.enableHover){this._closeTooltipTimeout=window.setTimeout(function(){mstrmojo.tooltip.close();delete J._closeTooltipTimeout;},E);}else{mstrmojo.tooltip.close();}this.hasOpenTooltip=false;},unrender:function D(M){var N=this.tooltipNode||this.domNode,L;if(N&&N.constructor!==Array){N=[N];}if(N){var O=this._ontooltipover,K=this._ontooltipout,J=this._ontooltipmove;for(L=0;L<N.length;L++){if(O){B.detachEvent(N[L],"mouseover",O);}if(K){B.detachEvent(N[L],"mouseout",K);}if(J){B.detachEvent(N[L],"mousemove",J);}}}this._super(M);}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom;mstrmojo.ui._IsIncFetchList=mstrmojo.provide("mstrmojo.ui._IsIncFetchList",{_mixinName:"mstrmojo.ui._IsIncFetchList",ifDataHelper:null,supportsIncFetch:false,isFetching:false,initScroll:function A(){var G=this.ifDataHelper,F=this,E=this.scrollNode||this.domNode;this.supportsIncFetch=G&&G.hasNext();if(G&&this.supportsIncFetch){this._scroll=function D(){if(E.offsetHeight+E.scrollTop>=E.scrollHeight){F.raiseEvent({name:"incFetch",id:F.id});}};C.attachEvent(E,"scroll",this._scroll);this.attachEventListener("incFetch",this.id,function(H){if(!this.supportsIncFetch||this.isFetching){return ;}if(this.preNext){this.preNext();}this.set("isFetching",true);G.next({complete:function(I){if(F.postNext){F.postNext();}F.set("isFetching",false);},success:function(I){F.addItems(I.items);},failure:function(I){F.supportsIncFetch=false;mstrmojo.alert("Error in fetching next: "+I);}});});}},addItems:function B(D){if(this._super){this._super(D);}if(!this.ifDataHelper.hasNext()){this.supportsIncFetch=false;var E=this.scrollNode||this.domNode;C.detachEvent(E,"scroll",this._scroll);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var D=mstrmojo.dom,L=mstrmojo.hash;var O=100;var F=D.supportsTouches?0.5:1;var G=1;var R=100;var P={onvscrollVisibleChange:function(){var U=this.vscrollNode,V=U&&U.style;if(!V){return ;}if(this.vscrollVisible){var T=this.maxPos,W=this.clientSize;V.height=Math.round(W.y*W.y/T.y)+"px";V.left=(W.x-5)+"px";V.display="block";V.opacity=0.5;}else{V.opacity=0;}},onhscrollVisibleChange:function(){var V=this.hscrollNode,U=V&&V.style;if(!U){return ;}if(this.hscrollVisible){var T=this.maxPos,W=this.clientSize;U.width=Math.round(W.x*W.x/T.x)+"px";U.top=(W.y-5)+"px";U.display="block";U.opacity=0.5;}else{U.opacity=0;}}};var M=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,W=0;if(this.scrollsVert){W=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style[D.CSS3_TRANSFORM]="translateY("+Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px)";}}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style[D.CSS3_TRANSFORM]="translateX("+Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px)";}}this.scrollChild.style[D.CSS3_TRANSFORM]="translate3d(-"+parseInt(T,10)+"px, -"+parseInt(W,10)+"px, 0px)";},ondeceleratingChange:function(){this.scrollChild.style[D.CSS3_TRANSITION]=this.decelerating?(D.CSS3_PREFIX+"transform 0.2s linear"):"";}},L.copy(P));var H=L.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,X=0,W=this.scrollboxNode;if(this.scrollsVert){X=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style.top=Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px";}W.scrollTop=parseInt(X,10);}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style.left=Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px";}W.scrollLeft=parseInt(T,10);}}},L.copy(P));mstrmojo._TouchScrolling=mstrmojo.provide("mstrmojo._TouchScrolling",{FRICTION:0.65,BOUNCEFRICTION:0.5,usesTouches:false,bounces:true,scrollsHoriz:true,scrollsVert:true,pos:null,preBuildRendering:function N(){this.usesTouches=(mstrmojo.dom.supportsTouches&&this.usesTouches&&(this.scrollsHoriz||this.scrollsVert));if(this.usesTouches){this.pos={x:0,y:0};}if(this._super){this._super();}},postBuildRendering:function C(){if(this._super){this._super();}if(this.usesTouches){var W=this.scrollboxNode,V=this.itemsContainerNode||W.firstChild;if(W&&W!==V){this.scrollChild=V;var T=W.style;T.position="relative";T.overflow="hidden";var U=V.style;U.position="absolute";U.left=0;U.top=0;this.markupMethods=L.copy(D.isSafari?M:H,L.copy(this.markupMethods));this.attachTouchEvents();}}},unrender:function(T){if(this.usesTouches){this.detachTouchEvents();}this._super(T);},attachTouchEvents:function(){var U=this.touchNode||this.scrollboxNode;if(U){if(!this._tsCallback){var T=this;this._tsCallback=function(V){T.touchesBegin(self,V);};this._tmCallback=function(V){T.touchesMoved(self,V);};this._teCallback=function(V){T.touchesEnd(self,V);};}D.attachEvent(U,D.TOUCHSTART,this._tsCallback);this._tsNode=U;}},detachTouchEvents:function(){var T=this._tsNode;if(T){D.detachEvent(T,D.TOUCHSTART,this._tsCallback);delete this._tsNode;}},touchesBegin:function J(T,V){var U=V.target&&V.target.tagName;if(U&&(U==="SELECT"||U==="INPUT")){return ;}D.preventDefault(T,V);this.stopDeceleration();this.startTime=new Date();this.startTimePos={x:this.pos.x,y:this.pos.y};this.startTouchPos=D.getMousePosition(D.firstTouch(T,V),T);this.dragging=false;D.attachEvent(window,D.TOUCHMOVE,this._tmCallback);D.attachEvent(window,D.TOUCHEND,this._teCallback);},touchesMoved:function E(b,d){var Z=D.getMousePosition(D.firstTouch(b,d),b);D.preventDefault(b,d);if(!this.dragging){var T=5,h=Math.abs;if((this.scrollsHoriz&&h(Z.x-this.pos.x)>T)||(this.scrollsVert&&h(Z.y-this.pos.y)>T)){this.dragging=true;this.dragStartTime=new Date();this.startTouchPos=Z;var V=this.scrollboxNode,Y={x:V.clientWidth,y:V.clientHeight},f={x:V.scrollWidth,y:V.scrollHeight};this.clientSize=Y;this.scrollSize=f;this.maxPos={x:Math.max(f.x-Y.x,0),y:Math.max(f.y-Y.y,0)};this.showScroll();}}if(this.dragging){D.stopPropogation(b,d);var c=this.startTimePos,X=this.startTouchPos,a=this.maxPos;var W={x:this.scrollsHoriz?Math.max(Math.min(c.x-(Z.x-X.x),a.x),0):0,y:this.scrollsVert?Math.max(Math.min(c.y-(Z.y-X.y),a.y),0):0};this.set("pos",W);this.nextLastDragPos=this.lastDragPos;this.lastDragPos=Z;var U=new Date(),g=this.lastDragTime;this.nextLastDragTime=g;this.lastDragTime=U;if((U-g)>R){this.startTime=this.lastDragTime;this.dragStartTime=this.startTime;this.startTimePos={x:W.x,y:W.y};this.startTouchPos=Z;}}},touchesEnd:function I(T,U){D.preventDefault(T,U);D.detachEvent(window,D.TOUCHMOVE,this._tmCallback);D.detachEvent(window,D.TOUCHEND,this._teCallback);if(this.dragging){this.dragging=false;D.stopPropogation(T,U);if((new Date())-this.lastDragTime<=R){this.startDeceleration(T,U);}else{this.hideScroll();}}},startDeceleration:function B(Y,Z){var W=D.getMousePosition(D.firstChangedTouch(Y,Z),Y),c=((mstrmojo.dom.supportsTouches===null)?this.lastDragPos:this.nextLastDragPos)||W,b={x:W.x-c.x,y:W.y-c.y},T=((mstrmojo.dom.supportsTouches===null)?this.lastDragTime:this.nextLastDragTime),d=T?(new Date())-T:0,V={x:d?Number(b.x*O*F/d).toFixed(2):0,y:d?Number(b.y*O*F/d).toFixed(2):0};var a=this,U=function(e){return(a.scrollsHoriz&&Math.abs(e.x)>=G)||(a.scrollsVert&&Math.abs(e.y)>=G);};if(U(V)){this.velocity=V;this.friction={x:this.FRICTION,y:this.FRICTION};this.set("decelerating",true);var X=function(){a.decelerate();if(!U(a.velocity)){a.stopDeceleration();a=null;}};X();if(this.decelerating){this.decelerationTimer=window.setInterval(X,O);}}else{this.hideScroll();}},stopDeceleration:function A(){this.set("decelerating",false);delete this.velocity;if(this.decelerationTimer){window.clearTimeout(this.decelerationTimer);delete this.decelerationTimer;}this.hideScroll();},decelerate:function S(){var W=this.pos,V=this.velocity,U=this.friction,Z=this.maxPos,X={x:W.x-V.x,y:W.y-V.y},b=this.bounces,T=this.BOUNCEFRICTION;var a=X.x;if(a<0||a>Z.x){X.x=(a<0)?0:Z.x;V.x*=b?-T:0;U.x=T;}var Y=X.y;if(Y<0||Y>Z.y){X.y=(Y<0)?0:Z.y;V.y*=b?-T:0;U.y=T;}this.set("pos",X);this.velocity={x:U.x*V.x,y:U.y*V.y};},hideScroll:function K(){this.set("vscrollVisible",false);this.set("hscrollVisible",false);},showScroll:function Q(){var T=this.maxPos;if(this.scrollsVert&&T.y&&this.vscrollNode){this.set("vscrollVisible",true);}if(this.scrollsHoriz&&T.x&&this.hscrollNode){this.set("hscrollVisible",true);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var E=mstrmojo.dom;var P=mstrmojo.dom;var O="mousedown";function S(U){var T=U[U.hotSlot||"domNode"];if(T){if(!U._closeCallback){var W=U.id,V=function(X){return function(Z){var Y=mstrmojo.all[W];if(Y&&!Y.ignoreHover){Y["auto"+X](Z,self);}};};U._uncloseCallback=V("Unclose");U._closeCallback=V("Close");}E.attachEvent(T,"mouseover",U._uncloseCallback);E.attachEvent(T,"mouseout",U._closeCallback);}}function B(U){if(U._closeCallback){var T=U[U.hotSlot||"domNode"];if(T){E.detachEvent(T,"mouseover",U._uncloseCallback);E.detachEvent(T,"mouseout",U._closeCallback);}}}function F(V,U){var T=V;while(T){if(T.open||T.openPopup){if(T.set){T.set("ignoreHover",U);}else{T.ignoreHover=U;}}T=T.opener||T.parent;if(T&&T.shouldPropagateLockHover&&!T.shouldPropagateLockHover()){break;}}}function D(){var T=this._lockHoverCallback;if(T){E.detachEvent(document.body,O,T,true);delete this._lockHoverCallback;}}mstrmojo._CanAutoClose=mstrmojo.provide("mstrmojo._CanAutoClose",{autoCloses:false,autoCloseDelay:100,locksHover:false,hotSlot:null,closeOnClick:false,curtainNode:null,postBuildRendering:function Q(){this._super();if(this.autoCloses){S(this);}this.oncloseOnClickChange();},onautoClosesChange:function L(){var T=(this.autoCloses)?S:B;T(this);},oncloseOnClickChange:function H(){if(!this.curtainNode){return ;}var V=this,U="click",T=(mstrApp&&mstrApp.isTouchApp&&mstrApp.isTouchApp());if(T){U="touchstart";}E.attachEvent(V.curtainNode,U,function(){V.close();if(T){mstrmojo.touchManager.notify([]);}});},autoUnclose:function G(){var T=this._autoCloseTimer;if(T){self.clearTimeout(T);delete this._autoCloseTimer;}},autoClose:function J(){if(this.ignoreHover){return ;}if(this._autoCloseTimer){self.clearTimeout(this._autoCloseTimer);}if(this.opener){if(this.autoCloseDelay){var T=this.opener.id;this._autoCloseTimer=self.setTimeout(function(){mstrmojo.all[T].closePopup();},this.autoCloseDelay);}else{this.opener.closePopup();}}},destroy:function R(T){D.call(this);this._super(T);},lockHover:function N(){F(this,true);if(!this._lockHoverCallback){var U=this.id,T=this._lockHoverCallback=function(V){mstrmojo.all[U]._unlockHoverCheck(V,self);};if((E.isIE7||E.isIE8)&&window.event&&(window.event.type===O)&&this.opener){this.opener._ignoreMousedown=true;}E.attachEvent(document.body,O,T,true);}},unlockHover:function M(){F(this,false);D.call(this);},_unlockHoverCheck:function C(X,T){var U=this.opener;if(U&&U._ignoreMousedown){delete U._ignoreMousedown;return ;}var W=E.eventTarget(T,X);if(!P.contains(this.domNode,W,true,document.body)){var V=P.findWidget(W);while(V){if(V===this){return ;}V=V.parent||V.opener;}if(U&&U.onPopupAutoClosed){U.onPopupAutoClosed(X,T);}this.close();}},open:function I(U,T){if(this.autoCloses){this.autoUnclose();}this._super(U,T);if(this.locksHover){this.lockHover();}},close:function K(T){if(this.locksHover){this.unlockHover();}this._super(T);},shouldPropagateLockHover:function A(){return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx={enabled:true};var E=mstrmojo.dom;mstrmojo.fx._Effect=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.fx._Effect",duration:500,interval:50,delay:null,target:null,getTarget:null,widget:null,slot:null,preStart:null,postStart:null,onCancel:null,onEnd:null,revertOnCancel:true,isPlaying:false,started:false,init:function R(W){mstrmojo.hash.copy(W,this);},play:function C(){this.isPlaying=true;this.started=false;if(this.delay){var W=this;this.delayTimer=window.setTimeout(function(){W._start();W=null;},this.delay);}else{this._start();}},pause:function H(){if(this.delayTimer){window.clearTimeout(this.delayTimer);delete this.delayTimer;}if(this.timer){window.clearInterval(this.timer);delete this.timer;}this.isPlaying=false;},cancel:function U(){this.pause();if(this.started){if(this.revertOnCancel){this.counter=0;this.exec();}if(this.onCancel){this.onCancel();}this.started=false;}},_start:function F(){this.started=true;this._doTarget();this.steps=Math.max(Math.ceil(this.duration/this.interval),1);var W=this.ease;if(typeof W==="string"){this.ease=mstrmojo.registry.ref(W);}if(this._doPreStart()===false){this.started=false;this.isPlaying=false;return ;}this.counter=0;this.exec();this.counter++;this._doPostStart();if(this.counter>=this.steps){this._end();}else{var X=this;if(this.timer){window.clearInterval(this.timer);}this.timer=window.setInterval(function Y(){if(X){X.exec();X.counter++;if(X.counter>=X.steps){X._end();X=null;}}},this.interval);}},exec:null,_end:function D(){this.pause();this.started=false;if(this.onEnd){this.onEnd();}},_doTarget:function T(){if(this.getTarget){this.target=this.getTarget();}else{if(this.widget){this.target=this.widget[this.slot||"domNode"];}else{if(this.target){var X=this.target;if(X&&this.slot&&X.scriptClass){var Y=X[this.slot];if(Y){this.widget=X;this.target=Y;}}}}}if(!this.target){var W=this;while(W=W.parent){if(!W||W.domNode){break;}}if(W){this.widget=W;this.target=W[this.slot||"domNode"];}}},_doPreStart:function N(){if(this.preStart){return this.preStart();}},_doPostStart:function S(){if(this.postStart){this.postStart();}}});function M(Z,a){var X=Z.children,W=(X&&X.length)||0,Y;for(Y=0;Y<W;Y++){X[Y][a]();}}mstrmojo.fx.Parallel=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Parallel",init:function R(Z){this._super(Z);var Y=this.children;mstrmojo.registry.refArray(Y);var W=(Y&&Y.length)||0,X;for(X=0;X<W;X++){Y[X].parent=this;}},_start:function F(){this.started=true;if(this.preStart){this.preStart();}M(this,"play");if(this.postStart){this.postStart();}},pause:function H(){M(this,"pause");},cancel:function U(){M(this,"cancel");}});mstrmojo.fx.AnimateProp=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.AnimateProp",props:null,_start:function O(){var Y=this.props,Z;for(Z in Y){var X=Y[Z],W=X.ease;if(typeof W==="string"){X.ease=mstrmojo.registry.ref(W,{dontInst:true});}}this._super();},exec:function P(){var Z=this.props,a;for(a in Z){var X=Z[a],W=(X.ease||mstrmojo.ease.sin)(this.counter,X.start,X.stop-X.start,this.steps-1);if(X.fn){W=X.fn(W);}if(X.suffix){W+=X.suffix;}var Y=X.isStyle===false?this.target:this.target.style;Y[a]=W;}}});mstrmojo.fx.Typewriter=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Typewriter",charGroupSize:1,srcProp:"text",_doPreStart:function(){this._super();this._dynStop=false;if(this.stop==null){var a=this.srcProp,Y;if(a){var W=this.widget||this.parent;Y=W&&W[a];if((Y!=null)&&(typeof (Y)!=="string")){Y=String(Y);}}this.stop=Y;this._dynStop=true;}if(this.stop==null){this.stop="";}var Z=this.target,b=null,X=1;if(Z){Z.innerHTML="";b=document.createTextNode("");Z.appendChild(b);X=Math.max(Math.floor(this.stop.length/this.steps),1);}this.targetTextNode=b;this.charGroupSize=X;},exec:function(){var X=this.targetTextNode;if(!X){return ;}var W;if(this.counter>=this.steps-1){W=this.stop;}else{if(this.counter===0){W="";}else{W=this.stop.substring(0,this.charGroupSize*this.counter)+"_";}}X.nodeValue=W;},_end:function D(){this._super();if(this._dynStop){this.stop=null;delete this._dynStop;}},cancel:function U(){if(this._dynStop){this.stop=null;delete this._dynStop;}}});mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx.Fade=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Fade",start:null,stop:null,ease:null,suffix:null,exec:function P(W){if(W==null){W=(this.ease||mstrmojo.ease.sin)(this.counter,this.start,this.stop-this.start,this.steps-1);}if(E.isIE&&!E.isWinPhone){this.target.style.filter="alpha(opacity="+parseInt(W*100,10)+")";}else{this.target.style.opacity=W;}}});mstrmojo.fx.FadeOut=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeOut",start:1,stop:0,revertOnCancel:true,cssDisplay:"block",_end:function D(){if(this.cssDisplay){this.target.style.display="none";this.exec(this.start);}this._super();},cancel:function U(){if(this.started&&this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();}});mstrmojo.fx.FadeIn=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeIn",start:0,stop:1,revertOnCancel:true,cssDisplay:"block",_doPostStart:function V(){if(this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();},cancel:function(){if(this.started&&this.revertOnCancel&&this.cssDisplay){this.target.style.display="none";}this._super();}});function I(Y,X,Z){var W=Math.pow(10,Z||2);if(X){return parseInt(W*Y/X,10)/W;}return parseInt(W*Y,10)/W;}mstrmojo.ease={linear:function L(X,W,Z,Y){if(X===Y){return W+Z;}if(X===0){return W;}return W+Z*I(X,Y);},sin:function A(X,W,Z,Y){return W+Z*Math.sin((Math.PI/2)*X/Y);},cos:function B(X,W,Z,Y){return W+Z*Math.cos((Math.PI/2)*(1-X/Y));},sincos:function K(X,W,Z,Y){if(X>Y/2){return W+Z*Math.cos((Math.PI/2)*(1-X/Y));}return W+Z*Math.sin((Math.PI/2)*X/Y);},cossin:function Q(X,W,Z,Y){if(X>Y/2){return W+Z*Math.sin((Math.PI/2)*X/Y);}return W+Z*Math.cos((Math.PI/2)*(1-X/Y));},bounce:function G(X,W,Z,Y){if((X/=Y)<(1/2.75)){return Z*(7.5625*X*X)+W;}if(X<(2/2.75)){return Z*(7.5625*(X-=(1.5/2.75))*X+0.75)+W;}if(X<(2.5/2.75)){return Z*(7.5625*(X-=(2.25/2.75))*X+0.9375)+W;}return Z*(7.5625*(X-=(2.625/2.75))*X+0.984375)+W;},shake:function J(X,W,Z,Y){if(X<Y/2){return W+Z*I(Math.sin(2*Math.PI*X/8),null,2)*2*X/Y;}return W+Z*I(Math.sin(2*Math.PI*X/8),null,2)*2*(1-X/Y);}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom;function D(J,I){var G=[];if(J){var F;for(F in J){var H=Number(F);if(H>=I){G.push(H);}}}G.sort(mstrmojo.array.numSorter);return G;}mstrmojo.ListSelector=mstrmojo.provide("mstrmojo.ListSelector",{premousedown:function E(L,F,N){if(C.isPrimaryMouseBtn(N.e)){var I=N.hWin,J=N.e,G=C.eventTarget(I,J),M=L.listMapper.findIndex(L,F,G);if(M>-1){var H=L.multiSelect,K=C.ctrlKey(I,J),O=C.shiftKey(I,J);if(K||O){C.clearBrowserHighlights(I);}if(H&&(K||(L.selectionPolicy==="toggle"))){L.toggleSelect(M);}else{if(H&&O){L.rangeSelect(M);}else{L.singleSelect(M);}}}}},premouseup:function B(H,K,G){var F=G.hWin,J=G.e,L=C.ctrlKey(F,J),I=C.shiftKey(F,J);if(L||I){C.clearBrowserHighlights(F);}},onadd:function A(I,H){var M=H&&H.value&&H.value.length;if(M){var G=H.index,K=I.selectedIndices,L=D(K,G),J;for(J=L.length-1;J>-1;J--){var F=L[J];K[F+M]=true;delete K[F];}if(I.selectedIndex>=G){I.selectedIndex+=M;}}},onremove:function A(Q,S){var O=S&&S.value&&S.value.length;if(O){var R=S.index,I=R+O-1,M=Q.selectedIndices,L=Q.selectedIndex,G=[],T=[],P=false;if(M){var H;for(H in M){var K=Number(H);if(K>I){G.push(K);}else{if(K>=R){T.push(K);P=true;}}}}G.sort(mstrmojo.array.numSorter);var J,N;for(J=0,N=G.length;J<N;J++){var F=G[J];M[F-O]=true;delete M[F];}if(L>I){Q.selectedIndex-=O;}if(P){Q.removeSelect(T);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var C=function(R){var Q=(mstrApp.docModelData&&mstrApp.docModelData.mid)||"";return R.k+"-"+Q;},E={},L=mstrmojo.array;mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights",{_mixinName:"mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights",postBuildRendering:function G(){this._super();this.setup();if(!this.getExp()){if(E[C(this)]){this.highlight.apply(this,E[C(this)]);}else{this.highlight(this.getSelectionType(),this.getSelectionHash(),true);}}},getExp:function(){var Q=this.model.data,R=Q&&Q.sc&&Q.sc.exp;return R;},clearsBrushingOnHighlight:true,brushSub:null,clearSub:null,getAssociatedNodes:function B(){var Q=this.defn.an;return Q&&Q.length>0?Q:[];},hasAssociatedNodes:function K(){var Q=this.getAssociatedNodes();return Q.length>0;},getDocModelForEvent:function P(){return this.model&&this.model.docModel;},setup:function H(){var Q=this.getDocModelForEvent(),R=this.id;if(Q){[this.brushSub,this.clearSub].forEach(function(S){if(S){S.clear();}});this.brushSub=Q.attachEventListener("brushing",R,this.onBrushing);this.clearSub=Q.attachEventListener("clearBrush",R,this.onClearBrushing);}},handlesMultiSelection:function I(){return(this._super&&this._super())||this.getAssociatedNodes().length>0;},getHighlightKeys:function F(){var R=[],Q=this.getAssociatedNodes();Q.forEach(function(S){R.push(S.k);});return R;},onSelectionChange:function J(R){var S=false;if(this._super){S=this._super(R);}var Q=this.getDocModelForEvent();if(this.clearsBrushingOnHighlight){Q.raiseEvent({name:"clearBrush",from:this});}if(this.handlesMultiSelection()&&!S){Q.raiseEvent({name:"brushing",from:this,keys:this.getHighlightKeys()});return true;}return false;},onBrushing:function A(R){var Q=R.keys.slice();if(Q.indexOf(this.k)!==-1){if(this.highlight){var S=R.from;this.highlight(S.getSelectionType(),S.getSelectionHash());Q.push(S.k);this.getDocModelForEvent().raiseEvent({name:"clearBrush",from:this,excludeKeys:Q});}else{throw new Error(this.scriptClass+" must implement highlight method.");}}},onClearBrushing:function O(R){var Q=false;if(L.indexOf(R.excludeKeys,this.k)===-1){if(this._super){Q=this._super(R);}if(!Q){var S=this.getAssociatedNodes();if(L.find(S,"k",R.from.k)!==-1){this.clearSelections(true);}}}return true;},highlight:function D(){E[C(this)]=arguments;if(this._super){this._super.apply(this,arguments);}},clearSelections:function N(){delete E[C(this)];if(this._super){this._super.apply(this,arguments);}},updateAssociatedNodesOnMove:function M(){this.clearSelections(true);this.endSelections();delete this.defn.an;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var K=mstrmojo.array,D=mstrmojo.hash;function E(V,T){var W=[],Q=V.selectedIndices,P=V.allIdx;var R,S,U=V.items;if(V.multiSelect&&(P>-1)&&(K.indexOf(T,V.allIdx)>-1)){for(R=0,S=U.length;R<S;R++){if(!Q[R]){W.push(R);Q[R]=true;V.selectedIndex=R;V.selectedItem=U[R];}}}else{for(R=0,S=T.length;R<S;R++){var X=T[R];if(!Q[X]){Q[X]=true;W.push(X);V.selectedIndex=X;V.selectedItem=U[X];}}}return W;}function J(R){var Q=[],S=R.selectedIndices,P;for(P in S){delete S[P];Q.push(parseInt(P,10));}R.selectedIndex=-1;R.selectedItem=null;return Q;}function H(V,U){var S=[],Q=V.selectedIndices,X=K.indexOf,P=V.allIdx;if(V.multiSelect&&(P>-1)&&(X(U,P)>-1)){return J(V);}if(U.length>0&&Q[P]){if(X(U,P)<0){U.push(P);}}var T=U.length,R;for(R=0;R<T;R++){var W=U[R];if(Q[W]){delete Q[W];S.push(W);if(V.selectedIndex===W){V.selectedIndex=-1;V.selectedItem=null;}}}return S;}function A(S,R){var P=S.selectedIndices;if(!P){P={};S.selectedIndices=P;}if(!R){R={};}var U=S.selectedIndex,T=[],V,Q;for(Q in P){if(!R[Q]){V=parseInt(Q,10);delete P[Q];T.push(V);if(U===V){S.selectedIndex=-1;S.selectedItem=null;}}}var X=[],W=S.items;for(Q in R){if(!P[Q]){V=parseInt(Q,10);P[Q]=true;X.push(V);S.selectedIndex=V;S.selectedItem=W&&W[V];}}return{add:X,rmv:T};}function G(Q,P,R){if(Q.raiseEvent&&((P&&P.length)||(R&&R.length))){Q.raiseEvent({name:"change",added:P,removed:R});}}mstrmojo._ListBase2Selections=mstrmojo.provide("mstrmojo._ListBase2Selections",{multiSelect:false,selectedIndices:null,selectedIndex:-1,selectedItem:null,selectedIndices_bindEvents:"change",selectedIndex_bindEvents:"change",selectedItem_bindEvents:"change",allowUnlistedValues:true,insertUnlistedValuesAt:-1,allIdx:-1,singleSelect:function F(P,Q){if(!this.selectedIndices[P]||(this.selectionPolicy==="reselect")||(P!==this.allIdx&&this.selectedIndices[this.allIdx])){var R=J(this),S=E(this,[P]);if(Q!==true){G(this,S,R);}}},toggleSelect:function O(P,Q){var S,R;if(this.selectedIndices[P]){R=H(this,[P]);}else{S=E(this,[P]);}if(Q!==true){G(this,S,R);}},rangeSelect:function N(P,Q){this.singleSelect(P,Q);},clearSelect:function I(P){var Q=J(this);if(P!==true){G(this,null,Q);}},select:function L(R,P){var Q=A(this,K.hash(R));if((P!==true)&&(Q.add.length||Q.rmv.length)){G(this,Q.add,Q.rmv);}},addSelect:function B(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=E(this,R);if(P!==true){G(this,Q,null);}return Q;},removeSelect:function M(R,P){if(R===null||R===undefined){return null;}if(R.constructor!==Array){R=[R];}var Q=H(this,R);if(P!==true){G(this,null,Q);}return Q;},_set_selectedIndices:function(S,Q,P){if(this.selectedIndices===Q){return false;}var R=A(this,Q);if(R.add.length||R.rmv.length){if(P!==true){G(this,R.add,R.rmv);}}return false;},_set_selectedIndex:function(S,Q,P){var R={};if(Q>-1){R[Q]=true;}return this._set_selectedIndices(null,R,P);},_set_selectedItem:function(W,T,S){var R=T&&(typeof T==="object"),V=this.itemIdField,Q=-1,U=this.items;if(R&&V!=null){Q=K.find(U,V,T[V]);}else{if(T!=null){Q=K.indexOf(U,T);}}if((Q===-1)&&(T!=null)&&this.allowUnlistedValues){var P=this.insertUnlistedValuesAt;if(P==null||P<0){P=(U&&U.length)||0;}Q=P;this.add([T],Q);}return this._set_selectedIndex(null,Q,S);},initSelections:function C(T,Q,P,S,R){if(!this.selectedIndices){this.selectedIndices={};this.selectedIndex=-1;}if(T){this._set_selectedIndices(null,T,R);}else{if(Q){this.select(Q,R);}else{if(S){this._set_selectedItem(null,S,R);}else{if(P!==null&&P!==undefined){this._set_selectedIndex(null,P,R);}}}}},sortSelectedIndices:function(){return D.keyarray(this.selectedIndices,true).sort(K.numSorter);},removeSelectedItems:function(){var R=this.sortSelectedIndices(),P=R.length,S=R[P-1],Q=this.remove(R);S=Math.min(S+1-P,this.items.length-1);if(S>=0){this.singleSelect(S);}return Q;},getSelectedItems:function(){return K.get(this.items,this.sortSelectedIndices())||[];},setSelectedItems:function(Q,d){if(!Q||!Q.length){return ;}var S=this.items||[],s=this.itemIdField!=null?K.findMulti(S,this.itemIdField,Q):K.indexOfMulti(S,Q),V=Q.length,T=V-s.count,q=this.allowUnlistedValues,b=this.insertUnlistedValuesAt,X=(q&&(b>-1))?T:0;if(b<0){b=S.length;}var R=[],U=[],f=s.map;if(T&&q){var p=0,e;for(e=0;e<V;e++){if(f[e]==null){R.push(Q[e]);U.push(b+p++);}}this.add(R,b);}var W=[],h;for(h in f){var o=f[h];if(o>=b){o+=X;}W.push(o);}var r=W.concat(U),Y=this.addSelect(r,!d);if(!d){var Z=K.hash(Y),g=this.selectedIndices,a=[],l;for(l in g){if(!Z[l]){a.push(parseInt(l,10));}}var P=this.removeSelect(a,true);G(this,Y,P);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var G=mstrmojo.array;function B(){var H=this.buildConfig=this.buildConfig||{};H.pk=this.k;H.fgk=this.defn&&this.defn.fgk;return H;}mstrmojo._HasBuilder={builder:null,postBuildRendering:function D(){if(!this.builtChildren){this.buildChildren();}return this._super();},getChildren:function F(){return this.model.getChildren(this.node,false);},buildChildren:function E(H){if(!this.builder||!this.model){return false;}var J=this.children;if(J&&J.length){this.set("children",[]);}var I=this.builder.build(this.getChildren(),this.model,B.call(this));if(!H){this.addChildren(I);}this.builtChildren=true;return H?I:true;},rebuildChildren:function C(K){var H=this.children.slice(0),I=this.model,J=[];K=K||H.slice(0);K.forEach(function(P){var N=G.indexOf(H,P),O=P.k;if(N===-1){throw new Error("Invalid child requested rebuild in mstrmojo._HasBuilder::rebuildChild.");}this.removeChildren(P);P.destroy();J.push(O);},this);var L=I.getChildrenByKey(this.node,false,J);var M=this.builder.build(L,I,B.call(this));this.addChildren(M);return M;},rebuildChild:function A(H){return this.rebuildChildren([H])[0];}};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var I=mstrmojo.array,B=mstrmojo.hash,D="u;",C="-1";mstrmojo.elementHelper=mstrmojo.provide("mstrmojo.elementHelper",{buildElemsTerseID:function F(P,O,R){var N,M;for(M in P){N=P[M];if(N.v){var Q=N.v.split(";");if(Q&&Q.length>1){Q[1]=O;if(R&&Q.length>2){Q.pop();}N.v=Q.join(";");}}}return P;},buildElemsCountStr:function K(P,N){P=(!P||!P.length)?[]:P;N=(!N||!N.length)?[]:N;var O=P.length,M=N.length;if(I.find(N,"v",D)>-1){M-=1;}if(I.find(N,"v",C)>-1){M-=1;}if(I.find(P,"v",D)>-1||I.indexOf(P,D)>-1){O=M;}return this.buildElemsCountStrByNum(O,M);},buildElemsCountStrByNum:function K(N,M){if(N===M){if(M===0){return"";}return M.toString();}else{if(M===0){return N+" "+mstrmojo.desc(514);}else{if(N>M){return"("+M+")";}}}return mstrmojo.desc(4891,"").replace("##",String(N)).replace("###",String(M));},browseElements:function G(O,P,N){var M={doNotHold:!(N&&mstrApp.serverProxy),silent:true};mstrApp.serverRequest(mstrmojo.hash.copy(N,P),O,M);},getIdPresentation:function J(P){if(!!P){var O=P.charAt(0),M,N,Q;if((O>="g"&&O<="w")||(O>="V"&&O<="Z")){N=false;for(Q=1;Q<P.length;++Q){if(N){N=false;}else{switch(P.charAt(Q)){case";":return"terseLong";case"\\":N=true;break;}}}return"terse";}if(O>="B"&&O<="Q"){if(P.length>2){M=P.charAt(1);if(M>="A"&&M<="Q"){if(P.charAt(2)===":"){return"oldLong";}}}}if(P.length>=33&&P.charAt(32)===":"){return"old";}}return null;},isNullElem:function H(M){if(!M){return true;}var P=this.getIdPresentation(M),N=false,O;switch(P){case"terse":case"terseLong":O=M.substring(1,M.length).split(";");N=O[0].indexOf(this.TERSE_NULL)>-1;break;case"old":case"oldLong":N=M.indexOf(this.OLD_NULL)>-1;break;}return N;},isNonGroupNull:function(O){var M=O.eid||(O._e&&O._e.id),N=M&&M.split(":")[0];return N&&N===this.NON_GROUP_NULL;},getAttributeId:function L(O){var N,M;if(O){M=O.split(";");N=M[1];}return N;},getElementValue:function A(N){var O,M;if(N){M=N.split(";");if(M.length>2){O=M[0]+" "+M[2];}else{O=M[0];}}return O;},isAttributeIdsLinked:function E(N,M,O){var Q=false,P=B.keyarray(O);I.forEach(P,function(R){if(R===N){I.forEach(O[R],function(S){if(S===M){Q=true;return false;}});}if(Q){return false;}});return Q;},ELEM_ALL_ID:"u;",ELEM_DUMMY_ID:"-1",ELEM_SEPARATOR:"\u001E",OLD_NULL:"~!@@~~!@@~",TERSE_NULL:"\\N",NON_GROUP_NULL:"n00000000000000000000000000000000"});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var B={};var E={};mstrmojo.publisher=mstrmojo.provide("mstrmojo.publisher",{publish:function F(H,Q,L){var M=B[H]&&B[H][Q],O;if(!M){return ;}for(O in M){var J=null;if(O){J=mstrmojo.all[O];if(!J){delete M[O];continue;}}var R=M[O].methods;if(R){var P=J||mstrmojo.global,I;for(I in R){if(P[I]){P[I](L);}}}var N=M[O]&&M[O].functions,S=(N&&N.length)||0;if(S){var K;if(J){for(K=S-1;K>-1;K--){if(N[K]){N[K].apply(J,[L]);}}}else{for(K=S-1;K>-1;K--){if(N[K]){N[K](L);}}}}}},subscribe:function D(I,N,R,J){var S=B[I];if(!S){S={};B[I]=S;}var M=S[N];if(!M){M={};S[N]=M;}var K=M[J||""];if(!K){K={};M[J||""]=K;}if(typeof R==="function"){var L=K.functions;if(!L){L=[];K.functions=L;}L.push(R);}else{var H=K.methods;if(!H){H={};K.methods=H;}H[R]=true;}var Q=E,P=Q[J||""];if(!P){P={};Q[J||""]=P;}var O=P[I];if(!O){O={};P[I]=O;}O[N]=true;return{id:I,type:N,callback:R,listener:J,clear:function(){mstrmojo.publisher.unsubscribe(this);}};},unsubscribe:function C(I){var R=B[I.id],O=R&&R[I.type],L=O&&O[I.listener||""];if(!L){return ;}var K=mstrmojo.array,Q=mstrmojo.hash,P=typeof I.callback,M=false;if(P==="function"){var N=L.functions;if(N){K.removeItem(N,I.callback);if(!N.length){delete L.functions;if(Q.isEmpty(L.methods)){M=true;}}}}else{var J=L.methods;if(J){delete J[I.callback];if(Q.isEmpty(J)){delete L.methods;if(!L.functions||!L.functions.length){M=true;}}}}if(M){delete O[I.listener||""];if(Q.isEmpty(O)){delete R[I.type];}}},hasSubs:function G(K,J){var I=B[K],H=I&&I[J];return !!H;},clearSubscriptions:function A(I){if(!I){I="";}var P=B,M=mstrmojo.hash,H;if(P[I]){delete P[I];}var O=E[I];if(O){for(H in O){var N=P[H],L=O[H],K;if(!N){continue;}for(K in L){var J=N[K];if(!J){continue;}delete J[I];if(M.isEmpty(J)){delete N[K];}}}}delete E[I];}});mstrmojo.publisher.NO_SRC="NO_SRC";mstrmojo.publisher.CONNECTIVITY_CHANGED_EVENT="CONNECTIVITY_CHANGED";mstrmojo.publisher.RECONCILE_END_EVENT="RECONCILE_END";}());(function(){mstrmojo.requiresCls("mstrmojo.array");var A=mstrmojo.array;mstrmojo.fe._IsRelationTreeNode=mstrmojo.provide("mstrmojo.fe._IsRelationTreeNode",{createSetHtml:'<span class="mstrmojo-textset mstrmojo-create-set-text" mstrAttach:click >'+mstrmojo.desc(12034,"Create a Set")+"</span>",syncRootOperator:function(){var F=this.parent,H=function(){var J=this.parent,I=[];if(J){I=J.ctxtBuilder.itemWidgets;}return I;},E,D,B,C,G;if(F){E=H.call(this);B=E.length;D=A.find(E,"noRelationOperator",true)!==-1;for(C=0;C<B;C++){G=E[C];G&&G.set("noRelationOperator",D);}this.set("noRelationOperator",D);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var C=mstrmojo.array;function A(E){var D=(E&&E.gts&&E.gts.col)||[],G=(E&&E.gts&&E.gts.row)||[];var F=C.filter(D.concat(G),function(H){return H.otp===-1;})[0];return{tpltProp:E.prop,mxProp:C.map((F&&F.es)||[],function(H){var I={};I[H.oid]=mstrmojo.hash.copy(H.prop,{n:H.n,t:H.otp});return I;})};}mstrmojo._IsDocumentTemplate=mstrmojo.provide("mstrmojo._IsDocumentTemplate",{_mixinName:"mstrmojo._IsDocumentTemplate",gridInfo:null,tmsProps:null,update:function B(D){if(D&&D.data){this.gridInfo=D.data.gsi;this.tmsProps=A(D.data);}if(this._super){return this._super(D);}return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var H="#000000",E=Math.round;function N(X){return("0"+parseInt(X,10).toString(16)).slice(-2);}mstrmojo.color=mstrmojo.provide("mstrmojo.color",{rgbStr2rgb:function V(X){return X.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i).slice(1);},rgbStr2hex:function F(X){if(X.indexOf("rgb")>=0){var Y=this.rgbStr2rgb(X);return"#"+this.rgb2hex(Y[0],Y[1],Y[2]);}return X;},rgb2hex:function B(Z,Y,X){return N(Z)+N(Y)+N(X);},rgb2hsv:function U(X,e,i){var a=Math.min(X,e,i),j=Math.max(X,e,i),c=0,m,l;l=j/255;m=(j!==0)?(parseFloat(j)-parseFloat(a))/parseFloat(j):0;if(m===0){c=0;}else{var f=j-a,Y=(j-X)/f,Z=(j-e)/f,k=(j-i)/f;if(X===j){c=k-Z;}else{if(e===j){c=2+Y-k;}else{c=4+Z-Y;}}c=c/6;if(c<0){c=c+1;}}return[E(c*360),E(m*100),E(l*100)];},rgb2hsl:function D(X,c,d){X/=255;c/=255;d/=255;var e=Math.max(X,c,d),Z=Math.min(X,c,d),Y=(e+Z)/2,a,i;if(e===Z){a=i=0;}else{var f=e-Z;i=Y>0.5?f/(2-e-Z):f/(e+Z);switch(e){case X:a=(c-d)/f+(c<d?6:0);break;case c:a=(d-X)/f+2;break;case d:a=(X-c)/f+4;break;}a/=6;}return[a,i,Y];},hsl2rgb:function C(d,i,c){var a=function a(h,g,b){if(b<0){b+=1;}if(b>1){b-=1;}if(b<1/6){return h+(g-h)*6*b;}if(b<1/2){return g;}if(b<2/3){return h+(g-h)*(2/3-b)*6;}return h;},X,e,f;if(i===0){X=e=f=c;}else{var Y=c<0.5?c*(1+i):c+i-c*i,Z=2*c-Y;X=a(Z,Y,d+1/3);e=a(Z,Y,d);f=a(Z,Y,d-1/3);}return[E(X*255),E(e*255),E(f*255)];},hsl2hex:function I(Z,Y,X){return"#"+mstrmojo.array.map(this.hsl2rgb(Z,Y,X),function(a){return N(a);}).join("");},hex2rgb:function P(a){var X=this.fixFullHexValue("#"+a.replace("#","")),Y=[],Z;X=X.replace("#","");for(Z=0;Z<3;Z++){Y.push(parseInt(X.substr(Z*2,2),16));}return Y;},hex2bgr:function K(X){return this.hex2rgb(X).reverse();},hex2hsv:function S(Y){var X=this.hex2rgb(Y);return this.rgb2hsv(X[0],X[1],X[2]);},hex2hsl:function W(X){return this.rgb2hsl.apply(this,this.hex2rgb(X));},hsv2rgb:function G(f,o,m){f=f/360;o=o/100;m=m/100;var X,j,l;if(o===0){X=m*255;j=m*255;l=m*255;}else{var a=f*6;if(a===6){a=0;}var e=Math.floor(a);var Z=m*(1-o);var Y=m*(1-o*(a-e));var n=m*(1-o*(1-(a-e)));var k,c,d;switch(e){case 0:k=m;c=n;d=Z;break;case 1:k=Y;c=m;d=Z;break;case 2:k=Z;c=m;d=n;break;case 3:k=Z;c=Y;d=m;break;case 4:k=n;c=Z;d=m;break;default:k=m;c=Z;d=Y;break;}X=k*255;j=c*255;l=d*255;}return[E(X),E(j),E(l)];},hsv2hex:function L(a,Z,X){var Y=this.hsv2rgb(a,Z,X);return this.rgb2hex(Y[0],Y[1],Y[2]);},getContrastingColor:function M(a,Y,X){var Z=this.hex2rgb(a);return(((Z[0]*299)+(Z[1]*587)+(Z[2]*114))/1000<125)?Y:X;},getHighlightColor:function R(f,d){var X,e,h,i,j=this.hex2rgb(!d?"#FFCE7F":"#EFE6D8"),c=parseInt(f[0],10),Z=parseInt(f[1],10),l=parseInt(f[2],10),a=parseInt(j[0],10),Y=parseInt(j[1],10),k=parseInt(j[2],10);X=(c*a)/255;e=(Z*Y)/255;h=(l*k)/255;i=c*0.3+Z*0.59+l*0.11;if(i<85){X=X+(63*(85-i)/85);X=X>255?255:X;e=e+(63*(85-i)/85);e=e>255?255:e;h=h+(63*(85-i)/85);h=h>255?255:h;}return"#"+this.rgb2hex(E(X),E(e),E(h));},get3DBorderColor:function Q(Z,d){var Y=parseInt(Z[0],10)*0.3+parseInt(Z[1],10)*0.59+parseInt(Z[2],10)*0.11;var c=parseInt(Z[0],10);var a=parseInt(Z[1],10);var X=parseInt(Z[2],10);switch(d){case"light":if(Y>150){c=c*0.9;a=a*0.9;X=X*0.9;}else{c=c*0.6+102;a=a*0.6+102;X=X*0.6+102;}break;case"dark":if(Y>10){c=c*0.4;a=a*0.4;X=X*0.4;}else{c=c*0.8+30;a=a*0.8+30;X=X*0.8+30;}break;}return"#"+this.rgb2hex(E(c),E(a),E(X));},encodeColor:function J(X,Y){if(Y!==undefined&&(X===null||X.length===0||X==="undefined")){X=Y;}if(X==="transparent"){return -1;}if(parseInt(X,10)===-2){return -2;}if(X.substring(0,1)==="#"){X=X.substring(1);}return parseInt(X.substring(4)+X.substring(2,4)+X.substring(0,2),16);},decodeColor:function A(X){X=parseInt(X,10);if(X===0){return H;}var Y=16777216+(X&255)*65536+(X&65280)+(X&16711680)/65536;return"#"+Y.toString(16).substring(1).toUpperCase();},fixFullHexValue:function T(X){if(X&&X.length===4){return X.replace(/([0-9a-f])/ig,"$1$1");}return X;},findMidColorHex:function O(a,Z){var b=this.hex2rgb(a),X=this.hex2rgb(Z),Y=[];b.forEach(function(c,d){Y.push(parseInt((c+X[d])/2,10));});return("#"+this.rgb2hex(Y[0],Y[1],Y[2]));}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var A=mstrmojo,D=A.array;mstrmojo.vi.util.TemplateUtils=mstrmojo.provide("mstrmojo.vi.util.TemplateUtils",{getTemplateUnits:function B(F){var E=[].concat(F.mx);(F.rows||[]).concat(F.cols||[]).forEach(function(G){if(G.did!=="-1"){E.push({did:G.did,t:G.t,n:G.n});}});return E;},findUnitsById:function C(H,F){var E=mstrmojo.vi.util.TemplateUtils.getTemplateUnits(H),G=[];D.ensureArray(F).forEach(function(K){var J=D.find(E,"did",K),I=J>-1?E[J]:null;if(I){G.push(I);}});return G;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var E="*",A=".",C="-",J="_",H="<";var M=new RegExp("[\\"+E+"\\"+A+"\\"+C+"\\"+J+"\\"+H+"]","g"),G=E+"$&";mstrmojo.Serializer={scriptClass:"mstrmojo.Serializer",serializeValueGroup:function F(B){mstrmojo.array.forEach(B,function(D,K){B[K]=mstrmojo.Serializer.serializeValues(D);});return C+this.serializeValues(B)+J;},serializeValues:function I(D){var B=[];mstrmojo.array.forEach(D,function(K){if(typeof K==="Boolean"){K=K?"1":"0";}B.push(String(K).replace(M,G));});return B.join(A);}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var H=mstrmojo.array,B=mstrmojo.hash,J=B.isEmpty;var G=1;function D(Q){return(typeof Q==="object")?Q:{};}function E(R,Q){B.forEach(Q,function(S,V){var T=R[V];if(T===undefined){delete Q[V];return true;}S=Q[V]=D(S);T=R[V]=D(T);if(J(S)&&J(T)){throw (G);}else{if(J(T)){delete R[V];if(J(R[V])){E(R,Q);}}else{if(J(S)){delete R[V];if(J(R[V])){E(R,Q);}}else{try{E(R[V],Q[V]);}catch(U){switch(U){case G:R[V]=Q[V]={};break;}}}}}});}function I(Q){B.forEach(Q,function(R){B.forEach(R,function(U,S){var T=U.include,W=U.exclude;if(J(T)||J(W)){return true;}if(!J(T)&&!J(W)){try{E(W,T);}catch(V){switch(V){case G:R[S]={};break;}}}});});return Q;}function F(S,R,Q){B.forEach(S,function(U,T){if(U===true||J(U)){Q.push(R+T);}else{F(U,R+T+".",Q);}});return Q;}function P(Q){B.forEach(Q,function(R){B.forEach(R,function(U,S){var T=[];F(U.include,"",T);F(U.exclude,"!",T);R[S]=T.join(";");});});return Q;}function K(Q,R){B.forEach(Q,function(S,U){var T=R[U];if(T!==undefined){if(S!==true&&T!==true){K(S,T);}else{if(S===true&&T!==true){R[U]=true;}else{if(S!==true&&T===true){Q[U]=true;}}}}});}function L(R,S){var Q=true;B.forEach(R,function(Y,T){var W=S[T];if(W){var U=Y.include,Z=Y.exclude,X=W.include,V=W.exclude;if(!J(V)&&!J(Z)){Q=false;return Q;}if(!J(X)&&!J(U)){K(X,U);}}return Q;});return Q;}function C(S,Q){Q=Q||{};if(S){var R=Q;H.forEach(S.split("."),function(W,U,T,V){R[W]=V?true:{};R=R[W];});}return Q;}mstrmojo.rw.model.RetrievalKeysConfig=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.rw.model.RetrievalKeysConfig",init:function M(){this.nodes=[];this.filters={};},addNode:function A(R,T){var S=this.filters,Q=S[R];if(!Q){this.nodes.push(R);Q=S[R]={data:{},defn:{}};}if(T){if(L(Q,T)){S[R]=B.mergeHashes(Q,T);}else{throw ("The new filters for node key ## cannot be merged with the filters currently defined".replace("##",R));}}return this;}});mstrmojo.rw.model.RetrievalKeysConfig.getConsolidatedConfig=function O(T){var Q={},U={},S={};H.forEach(T,function R(W){var V=W.partialRetrieval;if(V){H.forEach(V.nodes,function(X){U[X]=true;});S=B.mergeHashes(S,V.filters);delete W.partialRetrieval;}H.forEach(W.actions,R);});if(!J(U)){Q.nodes=B.keyarray(U);}if(!J(S)){Q.filters=P(I(S));}return Q;};mstrmojo.rw.model.RetrievalKeysConfig.parseResponseFilters=function N(R){var Q=function(T){var S={};B.forEach(T,function(W,V){var U=S[V]={serialized:W,include:{},exclude:{}};H.forEach(W.split(";"),function(Y){var X=Y.indexOf("!")===0;Y=X?Y.slice(1):Y;C(Y,X?U.exclude:U.include);});});return S;};return{data:Q(R.data),defn:Q(R.defn)};};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");mstrmojo.vi.ui.rw.SelectionType={EMPTY:"empty",ATTS:"att",METRICS:"metric",COL_HEADERS:"col-headers",ROW_HEADERS:"row-headers",METRIC_VALUES:"metric-values"};var D=function(Z){var Y=(mstrApp.docModelData&&mstrApp.docModelData.mid)||"";return Z.k+"-"+Y;},M={},Q=mstrmojo.hash,V=mstrmojo.array,S=function(a){var Y=Q.keyarray(a).sort(),Z=[],b;V.forEach(Y,function(c){b=[];V.forEach(a[c],function(d){b.push(this.model.getNormalizedFormElementId(d.id));},this);Z.push(c+"-"+b.sort().join("@"));},this);return Z.join("#");},X=function(Y){var Z=S.call(this,Y);if(!this._viSelections[Z]){this._viSelections[Z]=Y;M[D(this)]={_selectionType:this.getSelectionType(),_viSelections:this.getSelectionHash()};}},C=function(Z){var a=S.call(this,Z),Y=this._viSelections[a];if(Y){delete this._viSelections[a];M[D(this)]={_selectionType:this.getSelectionType(),_viSelections:this.getSelectionHash()};}return Y;},K=function(Z,Y,b){var a={};a[Z]=[{id:Y,n:b}];return a;},O=mstrmojo.vi.ui.rw.SelectionType;mstrmojo.vi.ui.rw._HasVisSelections=mstrmojo.provide("mstrmojo.vi.ui.rw._HasVisSelections",{_mixinName:"mstrmojo.vi.ui.rw._HasVisSelections",init:function(Y){if(this._super){this._super(Y);}this._viSelections={};},update:function F(Z){var Y=true;if(this._super){Y=this._super(Z);}Q.copy(M[D(this)],this);return Y;},onSelectionChange:function L(Y){if(this._super){this._super(Y);}},_viSelections:{},_selectionType:O.EMPTY,getSelectionType:function(){return this._selectionType;},isSingleAttrSelection:function(){var Z=null,Y;if(this.getSelectionType()===O.ATTS){Y=this.getSelections();if(Y.length>1){return !Y.some(function(a){if(!Z){Z=a[0].tid;return false;}return Z!=a[0].tid;},this);}return true;}return false;},isSingleSelection:function(){return(this._viSelections&&Q.keyarray(this._viSelections).length===1);},getSelectionSize:function U(){return(this._viSelections&&Q.keyarray(this._viSelections).length)||0;},getSelectionHash:function E(){return this._viSelections;},getSelections:function I(){var Y=[],Z;Q.forEach(this._viSelections,function(a){Z=[];Y.push(Z);Q.forEach(a,function(b,c){V.forEach(b,function(d){Z.push({tid:c,eid:d.id,v:d.n});});});});return Y;},isMetricValueSelected:function G(Y){return !!this._viSelections[S.call(this,Y)];},isAttSelected:function B(Z,Y){return this.isMetricValueSelected(K(Z,Y));},addAttributeSelection:function N(Z,Y,a){if(this._selectionType!==O.ATTS){this.clearSelections();this._selectionType=O.ATTS;}var b=K.call(this,Z,Y,a);X.call(this,b);return b[Z];},removeAttributeSelection:function W(Z,Y){return C.call(this,K.call(this,Z,Y));},addMetricValueSelection:function J(Y){if(this._selectionType!==O.METRICS){this.clearSelections();this._selectionType=O.METRICS;}X.call(this,Y);},removeMetricValueSelection:function R(Y){return C.call(this,Y);},clearSelections:function A(){if(this._super){this._super();}this._viSelections={};this._selectionType=O.EMPTY;},clearSelectionsCache:function H(){M={};},clearUnitSelections:function A(Z){if(this._super){this._super();}var Y={};Q.forEach(this._viSelections,function(b,a){if(Q.keyarray(b)[0]!==Z){Y[a]=b;}});this._viSelections=Y;},endSelections:function P(){M[D(this)]={_selectionType:this.getSelectionType(),_viSelections:this.getSelectionHash()};this.onSelectionChange(this.getSelectionHash());},addSelectionsFromExpression:function T(a){this.clearSelections();this._selectionType=a.type;var Y=this,Z=function(g){var h=20,e=19,f=function(i){return i.nds.length===1?h:i.fn;},d=function(i){return parseInt(i.et,10)===5||parseInt(f(i),10)===e;},b=function(i){V.forEach(i.es,function(j){Y.addAttributeSelection(i.a.did,j.v,j.n);});},c=function(k){var j={},i=function(l){V.forEach(l.es,function(m){Q.copy(K.call(Y,l.a.did,m.v,m.n),j);});};if(k.nds){V.forEach(k.nds,i);}else{if(k.es){i(k);}}Y.addMetricValueSelection(j);};if(d(g)){g={nds:[g]};}V.forEach(g.nds,function(i){if(d(i)){if(a.type===O.ATTS){b(i);}else{c(i);}}else{Z(i);}});};Z(a.data);}});mstrmojo.vi.ui.rw._HasVisSelections.VisSelectionType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var I=mstrmojo.array,M=mstrmojo.hash;function J(U){if(U!==null){return(U.constructor!==Array)?[U]:U;}return null;}function F(e,c,Y){if(!c){return null;}var f=[],V=e.selectedIndices,U=e.allIdx,a=e.noneIdx;if(e.multiSelect&&(a>-1)&&(I.indexOf(c,a)>-1)){return f;}var X,Z,d=e.items,b=e.itemIdField,W=e.selectedItems,h;if(e.multiSelect&&(U>-1)&&(I.indexOf(c,e.allIdx)>-1)){for(X=0,Z=d.length;X<Z;X++){if(!V[X]){f.push(X);V[X]=true;e.selectedIndex=X;e.selectedItem=d[X];}}}else{for(X=0,Z=c.length;X<Z;X++){var g=c[X];if(!V[g]){V[g]=true;if(Y){f.push({idx:g,positions:Y});}else{f.push(g);}e.selectedIndex=g;h=e.selectedItem=d[g];if(W){W[h[b]]=h;}}}}return f;}function D(X,U){var W=[],Y=X.selectedIndices,Z=X.selectedItems,V;for(V in Y){delete Y[V];if(U){W.push({idx:parseInt(V,10),positions:U});}else{W.push(parseInt(V,10));}}X.selectedIndex=-1;X.selectedItem=null;if(Z){X.selectedItems={};}return W;}function T(e,d,Y){if(!d){return null;}var a=[],V=e.selectedIndices,g=I.indexOf,U=e.allIdx,b=e.noneIdx,c=e.itemIdField,W=e.selectedItems;if(e.multiSelect&&(((U>-1)&&(g(d,U)>-1))||((b>-1)&&(g(d,b)>-1)))){return D(e);}if(d.length>0&&V[U]){if(g(d,U)<0){d.push(U);}}var Z=d.length,X;for(X=0;X<Z;X++){var f=d[X];if(V[f]){delete V[f];if(Y){a.push({idx:f,positions:Y});}else{a.push(f);}if(W){delete W[e.items[f][c]];}if(e.selectedIndex===f){e.selectedIndex=-1;e.selectedItem=null;}}}return a;}function C(X,Y,V,U){if(U){return ;}if(this.raiseEvent){if((X&&X.length)||(Y&&Y.length)){try{this.raiseEvent({name:"selectionChange",added:X,removed:Y});}catch(W){T(this,X);F(this,Y);throw W;}}}}function B(V){var W=this.itemIdField,U=this.items;if(typeof V==="object"&&W){return I.find(U,W,V[W]);}return I.indexOf(U,V);}mstrmojo._ListSelections={multiSelect:false,allIdx:-1,noneIdx:-1,itemIdField:"",items:null,selectedIndices:null,selectedIndex:-1,selectedIndices_bindEvents:"selectionChange",selectedIndex_bindEvents:"selectionChange",selectedItem:null,selectedItem_bindEvts:"selectionChange",allowUnlistedValues:true,selectedItems:null,supportsIncFetch:false,init:function(U){this._super(U);if(this.supportsIncFetch&&this.itemIdField){this.selectedItems={};}if(!this.items){this.items=[];}if(!this.selectedIndices){this.selectedIndices={};if(this.selectedIndex>-1){this._set_selectedIndex("selectedIndex",this.selectedIndex,true);}else{if(this.selectedItem){this._set_selectedItem("selectedItem",this.selectedItem,true);}}}},addItems:function K(d){d=J(d);if(!d){return ;}var a=this.items,U=this.items.length,W=this.selectedItems,Y=[],V;a=this.items=a.concat(d);V=a.length;if(W){var Z=this.itemIdField,X,c;for(X=U;X<a.length;X++){c=a[X];if(W[c[Z]]){Y.push(X);}}}if(Y&&Y.length){F(this,Y);}if(V>U){var b=this.itemsContainerNode;if(b){b.innerHTML+=this._buildItemsMarkup(U,V-1).join("");}}},addSelectedItems:function S(U){this.selectItems(U,false);},setSelectedItems:function L(U){this.selectItems(U,true);},selectItems:function R(c,e){c=J(c);if(!c){return ;}if(e&&this.selectedItems){this.selectedItems={};}var W=this.selectedItems,a=this.itemIdField,U=[],Y=this.items.length,Z=[],V=this.allowUnlistedValues,d,b,X;for(X=0;X<c.length;X++){d=c[X];b=B.call(this,d);if(b<0){if(W===null){if(V){U.push(d);b=Y++;Z.push(b);}}else{W[d[a]]=d;}}else{Z.push(b);}}if(U.length>0){this.addItems(U);}if(Z.length>0){if(e){this.select(Z);}else{this.addSelect(Z);}}},unselectItems:function A(V){V=J(V);if(!V){return ;}var a=this.selectedItems,W=[],Z=this.itemIdField,Y,U,X;if(a===null){return ;}for(X=0;X<V.length;X++){Y=V[X];if(a){delete a[Y[Z]];}U=B.call(this,Y);if(U<0){W.push(U);}}if(W.length>0){this.removeSelect(W);}},getSelectedItems:function G(){if(this.selectedItems){return M.valarray(this.selectedItems);}return I.get(this.items,M.keyarray(this.selectedIndices,true));},singleSelect:function(V,W,U){if(V!==-1){this.select([V],W,U);}},singleSelectByField:function O(V,W,U){this.singleSelect(I.find(this.items,W,V),U);},toggleSelect:function Q(U){var W,V;if(this.selectedIndices[U]){V=T(this,[U]);}else{W=F(this,[U]);}C.call(this,W,V,[U]);},select:function(W,V,U){W=J(W);if(!W){return ;}var Y=D(this,U),a=F(this,W,U),X;if(this.selectionPolicy!=="reselect"){for(X=Y.length-1;X>=0;X--){var Z=I.indexOf(a,Y[X]);if(Z>-1){Y.splice(X,1);a.splice(Z,1);}}}C.call(this,a,Y,W,V);},rangeSelect:function H(V,U){var a=this.selectedIndex,Y=a,Z=this.allIdx,W=[],X;if(V===Z||this.selectedIndices[Z]){W.push(Z);}else{if(Y===-1&&this.selectedIndices){for(X in this.selectedIndices){Y=parseInt(X,10);break;}}Y=Y===-1?0:Y;if(Y>V){Y=V;V=a;}for(X=Y;X<=V;X++){W.push(X);}}this.select(W,U);this.selectedIndex=a;},clearSelect:function(U){C.call(this,null,D(this),[],U);if(!U){this.raiseEvent({name:"clearSelection"});}},addSelect:function(X,U,V){X=J(X);if(!X){return ;}var W=F(this,X,V),Z=null,Y=this.noneIdx;if(this.multiSelect&&(Y>-1&&I.indexOf(X,Y)>-1)){Z=T(this,X);}C.call(this,W,Z,X,U);},removeSelect:function(W,U,V){W=J(W);if(!W){return ;}C.call(this,null,T(this,W,V),W,U);},_set_selectedIndices:function P(W,c,U){if(this.selectedItems){this.selectedItems={};}var V=this.selectedIndices;if(V===c){return false;}if(!V){V={};this.selectedIndices=V;}if(!c){c={};}var a=this.selectedIndex,Z=[],b;for(b in V){if(!c[b]){b=parseInt(b,10);delete V[b];Z.push(b);if(a===b){this.selectedIndex=-1;this.selectedItem=null;}}}var f=[],d=this.items,Y=this.itemIdField,e;for(b in c){if(!V[b]){b=parseInt(b,10);V[b]=true;f.push(b);this.selectedIndex=b;e=this.selectedItem=d[b];if(this.selectedItems){this.selectedItems[e[Y]]=e;}}}if(U!==true){var X=[];for(b in c){if(V[b]){b=parseInt(b,10);X.push(b);}}C.call(this,f,Z,X);}return(f.length||Z.length);},_set_selectedIndex:function N(X,V,U){var W={};if(V>-1){W[V]=true;}return this._set_selectedIndices("selectedIndices",W,U);},_set_selectedItem:function E(X,W,V){var U=B.call(this,W);if((U<0)&&(W!==null&&W!==undefined)&&this.allowUnlistedValues&&this.items){this.set("items",this.items.concat(W));U=this.items.length-1;}return this._set_selectedIndex("selectedIndex",U,V);},_addSelections:function(U){return F(this,U);},_removeAll:function(){return D(this);}};}());(function(){mstrmojo.requiresCls("mstrmojo.array");var G=mstrmojo.array,E=mstrmojo.desc(2412,"Default"),H=mstrmojo.desc(3433,"Font"),B=mstrmojo.desc(3434,"Number"),C=mstrmojo.desc(3435,"Alignment"),A=mstrmojo.desc(2886,"Borders"),F=mstrmojo.desc(3905,"Background");var L=[{n:E,v:"pru"}];G.forEach(["Arial","Arial Black","Arial Narrow","Arial Unicode MS","Batang","Book Antiqua","Bookman Old Style","Comic Sans MS","Courier New","Garamond","Haettenschweiler","Helvetica","Impact","Lucida Console","Lucida Sans Unicode","Map Symbols","Marlett","Monotype Corsiva","Monotype Sorts","MS Gothic","MS Outlook","Microsoft Sans Serif","MT Extra","Symbol","Tahoma","Times New Roman","Trebuchet MS","Verdana","Webdings","Wingdings"],function(M){L.push({n:M,v:M});});function K(N,M,O){return(M&&M>=N)?K(N,M-O,O).concat(M):[];}var J=K(2,12,1);J=J.concat(K(14,24,2));J=J.concat(K(36,48,12));J=J.concat(K(72,72,1));var D=[{n:E,v:"pru"}];G.forEach(J,function(M){D.push({n:String(M),v:String(M)});});mstrmojo._FormatDefinition={Formats:[{n:H},{n:B},{n:C},{n:mstrmojo.desc(3436,"Color and Lines")}],FormatTarget:[{n:mstrmojo.desc(7942,"Element Header"),v:1,p:"header_format"},{n:mstrmojo.desc(7943,"Element Value"),v:2,p:"grid_format"},{n:mstrmojo.desc(7944,"Individual Items Header"),v:3,p:"child_header_format"},{n:mstrmojo.desc(7945,"Individual Items Value"),v:4,p:"child_grid_format"}],MetricFormatTarget:[{n:mstrmojo.desc(9710,"Metric Headers"),v:1,p:"header_format"},{n:mstrmojo.desc(9711,"Metric Values"),v:2,p:"grid_format"}],MetricValueFormats:[{n:B},{n:C},{n:H},{n:A},{n:F}],MetricHeaderFormats:[{n:B},{n:C},{n:H},{n:A},{n:F},{n:mstrmojo.desc(12139,"Chart")}],NumberFormatCategory:{Automatic:-3,Default:-2,General:9,Fixed:0,Currency:1,Date:2,Time:3,Percentage:4,Fraction:5,Scientific:6,Custom:7},DefaultFormat:{FormattingAlignment:{Horizontal:"1",Vertical:"1",TextWrap:"0",TextDirection:"0"},FormattingBorder:{HInsideStyle:"1",VInsideStyle:"1",TopStyle:"1",LeftStyle:"1",BottomStyle:"1",RightStyle:"1",HInsideColor:"0",VInsideColor:"0",TopColor:"0",LeftColor:"0",BottomColor:"0",RightColor:"0",Border3DStyle:"0",Border3DWeight:"0",Border3DBottomColor:"0",Border3DLeftColor:"0",Border3DRightColor:"0",Border3DTopColor:"0"},FormattingFont:{Name:"Arial",Bold:"0",Italic:"0",Size:"10",Strikeout:"0",Underline:"0",Color:"0",Script:"0"},FormattingNumber:{Category:"9",DecimalPlaces:"0",ThousandSeparator:"-1",CurrencySymbol:"$",CurrencyPosition:"0",Format:"General",NegativeNumbers:"3"},FormattingPadding:{LeftPadding:"1",RightPadding:"1",TopPadding:"1",BottomPadding:"1",LineSpacing:"0"},FormattingPatterns:{FillColor:"16777215",PatternColor:"8650752",PatternStyle:"1",FillStyle:"0",ApplyToGraphThreshold:"0",GradientColor:"16777215",GradientAngle:"0",GradientXOffset:"0",GradientYOffset:"0",SelectorSelectionColor:"16167264",SelectorSelectionFillStyle:"0",SeriesFillColor:"pru",SeriesPatternColor:"8650752",SeriesPatternStyle:"1",SeriesFillStyle:"0",SeriesApplyToGraphThreshold:"0",SeriesGradientColor:"16777215",SeriesGradientAngle:"0",SeriesGradientXOffset:"0",SeriesGradientYOffset:"0",SeriesSelectorSelectionColor:"16167264",SeriesSelectorSelectionFillStyle:"0"}},Families:L,Sizes:D,SizesInVI:D.slice(7,19),Styles:[{n:E,v:"pru"},{n:mstrmojo.desc(3440,"Regular"),v:"0,0"},{n:mstrmojo.desc(2718,"Bold"),v:"-1,0",v2:"-1,"},{n:mstrmojo.desc(2719,"Italic"),v:"0,-1",v2:",-1"},{n:mstrmojo.desc(3441,"Bold Italic"),v:"-1,-1"}],Effects:[{n:"Underline",v:0},{n:"Strike",v:1}],Category:[{n:E,v:-2},{n:mstrmojo.desc(2378,"General"),v:9},{n:mstrmojo.desc(2050,"Fixed"),v:0},{n:mstrmojo.desc(2051,"Currency"),v:1},{n:mstrmojo.desc(2052,"Date"),v:2},{n:mstrmojo.desc(2170,"Time"),v:3},{n:mstrmojo.desc(2053,"Percentage"),v:4},{n:mstrmojo.desc(2054,"Fraction"),v:5},{n:mstrmojo.desc(2055,"Scientific"),v:6},{n:mstrmojo.desc(2056,"Custom"),v:7}],MaxNegativeDidigts:30,FixedNegative:[{n:"-1,234.12",v:1,f:"#,##0.00"},{n:"-1,234.12",r:true,v:5,f:"#,##0.00;[RED]-#,##0.00"},{n:"1,234.12",r:true,v:2,f:"#,##0.00;[RED]#,##0.00"},{n:"(1,234.12)",v:3,f:"#,##0.00;(#,##0.00)"},{n:"(1,234.12)",r:true,v:4,f:"#,##0.00;[RED](#,##0.00)"}],CurrencyNegative:[{n:"-$1,234.12",v:1,f:'"$"#,##0.00'},{n:"-$1,234.12",r:true,v:5,f:'"$"#,##0.00;[RED]-"$"#,##0.00'},{n:"$1,234.12",r:true,v:2,f:'"$"#,##0.00;[RED]"$"#,##0.00'},{n:"($1,234.12)",v:3,f:'"$"#,##0.00;("$"#,##0.00)'},{n:"($1,234.12)",r:true,v:4,f:'"$"#,##0.00;[RED]("$"#,##0.00)'}],CurrencyPosition:[{n:mstrmojo.desc(2194,"Left"),v:0},{n:mstrmojo.desc(2195,"Right"),v:1},{n:mstrmojo.desc(2183,"Left with space"),v:2},{n:mstrmojo.desc(2182,"Right with space"),v:3}],Date:[{n:mstrmojo.desc(2231,"4/7"),v:"m/d"},{n:mstrmojo.desc(2232,"04/07"),v:"mm/dd"},{n:mstrmojo.desc(2233,"4/7/98"),v:"m/d/yy"},{n:mstrmojo.desc(2234,"04/07/98"),v:"mm/dd/yy"},{n:mstrmojo.desc(2235,"04/07/1998"),v:"mm/dd/yyyy"},{n:mstrmojo.desc(2236,"7-Apr"),v:"d-mmm"},{n:mstrmojo.desc(2237,"7-Apr-98"),v:"d-mmm-yy"},{n:mstrmojo.desc(2238,"Apr-98"),v:"mmm-yy"},{n:mstrmojo.desc(2239,"Apr '98"),v:"mmm 'yy"},{n:mstrmojo.desc(2240,"April 1998"),v:"mmmm yyyy"},{n:mstrmojo.desc(2241,"4/7/98 15:41"),v:"m/d/yy h:mm"},{n:mstrmojo.desc(2242,"4/7/98 3:41 PM"),v:"m/d/yy h:mm AM/PM"},{n:mstrmojo.desc(2243,"April 7, 1998"),v:"mmmm d, yyyy"}],Time:[{n:mstrmojo.desc(2244,"15:41"),v:"h:mm"},{n:mstrmojo.desc(2245,"3:41 PM"),v:"h:mm AM/PM"},{n:mstrmojo.desc(2246,"15:41:46"),v:"h:mm:ss"},{n:mstrmojo.desc(2247,"3:41:46 PM"),v:"h:mm:ss AM/PM"},{n:mstrmojo.desc(2241,"4/7/98 15:41"),v:"m/d/yy h:mm"},{n:mstrmojo.desc(2242,"4/7/98 3:41 PM"),v:"m/d/yy h:mm AM/PM"},{n:mstrmojo.desc(2250,"04/07/98 15:41"),v:"mm/dd/yy h:mm"},{n:mstrmojo.desc(2248,"04/07/98 3:41 PM"),v:"mm/dd/yy h:mm AM/PM"}],PercentNegative:[{n:"-12.12%",v:1,f:"0.00%"},{n:"-12.12%",r:true,v:5,f:"0.00%;[RED]-0.00%"},{n:"12.12%",r:true,v:2,f:"0.00%;[RED]0.00%"},{n:"(12.12%)",v:3,f:"0.00%;(0.00%)"},{n:"(12.12%)",r:true,v:4,f:"0.00%;[RED](0.00%)"}],Fraction:[{n:"12 1/3",v:"# ?/?"},{n:"37/3",v:"?/?"},{n:"12 26/81",v:"# ??/??"},{n:"998/81",v:"??/??"}],TextDirection:[{n:E,v:"pru"},{n:mstrmojo.desc(4601,"Horizontal"),v:0},{n:mstrmojo.desc(5156,"-90 Degree"),v:-90}],Horizontal:[{n:mstrmojo.desc(2296,"Use Default"),v:"pru"},{n:mstrmojo.desc(2378,"General"),v:1},{n:mstrmojo.desc(2194,"Left"),v:2},{n:mstrmojo.desc(2193,"Center"),v:3},{n:mstrmojo.desc(2195,"Right"),v:4},{n:mstrmojo.desc(2068,"Justify"),v:6}],Vertical:[{n:mstrmojo.desc(2296,"Use Default"),v:"pru"},{n:mstrmojo.desc(2256,"Top"),v:1},{n:mstrmojo.desc(2067,"Center"),v:2},{n:mstrmojo.desc(2257,"Bottom"),v:3}],TextWrap:[{v:0},{v:-1}],BorderStyles:[{n:E,v:"pru"},{n:mstrmojo.desc(2258,"None"),v:0},{n:mstrmojo.desc(2259,"Dashed"),v:3},{n:mstrmojo.desc(2260,"Dotted"),v:4},{n:mstrmojo.desc(2261,"Hair"),v:7},{n:mstrmojo.desc(2262,"Thin"),v:1},{n:mstrmojo.desc(2264,"Thick"),v:5},{n:mstrmojo.desc(2265,"Double"),v:6}],extractModel:function(O,Q,N){var S=N||this.DefaultFormat,R;for(R in O){var M=O[R];if(!M.attachEventListener){if(!mstrmojo.hash.isEmpty(M)){Q[R]=M;}}else{var P;for(P in M){if(S[R]&&S[R][P]){if(!Q[R]){Q[R]={};}Q[R][P]=M[P];}}}}},getAvailableFonts:function I(){var M={success:function(O){if(O.name==="fontPicker"){var N=[{n:E,v:"pru"}];mstrmojo.array.forEach(O.shortcuts,function(P){N.push({n:P.attributes[1].value,v:P.attributes[1].value});});mstrmojo._FormatDefinition.Families=N;}}};mstrmojo.xhr.request("POST",mstrConfig.taskURL,M,{taskId:"getSystemPickerJson",name:"fontPicker"},false,null,true);},getStandardFormat:function(N,M){var P=mstrmojo.hash.clone(M||this.DefaultFormat),O;N=N||{};for(O in P){N[O]=N[O]||{};}for(O in N){if(!N[O].attachEventListener){N[O]=mstrmojo.hash.make(N[O],mstrmojo.Obj);}}return N;},saveFormatModel:function(Q,W,N,X){var V=X||this.DefaultFormat,S,M;for(S=0;S<N.length;S++){var R=N[S],P=W[R]||null,U=Q[R];if(U===undefined){delete W[R];continue;}for(M in V){var T=V[M],O;if((!P&&!U)||(P&&!P[M]&&!U[M])){continue;}for(O in T){if(U[M]===undefined||U[M]===""||U[M][O]==="pru"||U[M][O]===undefined){if(P&&P[M]&&(P[M][O]!==undefined&&P[M][O]!==null&&P[M][O]!=="pru")){P[M][O]="pru";}}else{P=P||{};P[M]=P[M]||{};P[M][O]=U[M][O];}}}if(P){W[R]=P;}}}};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var N=/\{\@(en@)?([^\}]+)\}/gm,J=/\</gm,R=/\>/gm,E=/\S/,Q=["$","^","=","!",":","/",".","*","+","?","|","(",")","[","]","{","}","\\"],F=new RegExp("(\\"+Q.join("|\\")+")","g"),S={"&":{k:"&(?!#?\\w+;)",v:"&amp;"},"<":"&lt;",">":"&gt;",u0009:"&#x09;","\n":"&#x0A;","\r":"&#x0D;",'"':"&quot;"},C={"&":{k:"&(?!#?\\w+;)",v:"&amp;"},"<":"&lt;",">":"&gt;"," ":"&nbsp;","\n":"<br/>","\r":"&nbsp;&nbsp;&nbsp;&nbsp;","'":"&#039;",'"':"&quot;"},M={"&amp;":"&","&lt;":"<","&gt;":">","&nbsp;":" ","<br/>":"\n","&nbsp;&nbsp;&nbsp;&nbsp;":"\r","&#039;":"'","&quot;":'"'},D={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#039;",'"':"&quot;","\u20ac":"&#8364;"},K={"&amp;":"&","&lt;":"<","&gt;":">","&#039;":"'","&quot;":'"',"&#8364;":"\u20ac"};var L=function(V){if(V===null){return"null";}var W=typeof V;if(W!=="object"){return W;}if(V.length===undefined){return"object";}return"array";};var T={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};mstrmojo.string=mstrmojo.provide("mstrmojo.string",{multiReplace:function G(W,Z,Y){var V;Y=Y||[];if(!W){return"";}var X=[];for(V in Z){if(mstrmojo.array.indexOf(Y,V)===-1){X.push(V.k||V);}}return W.replace(new RegExp(X.join("|"),"g"),function(a){var b=Z[a];return b.v||b;});},trim:function P(V){return(V&&V.replace)?V.replace(/^\s+/,"").replace(/\s+$/,""):V;},startsWith:function U(W,V){return W.length>=V.length&&W.substring(0,V.length)==V;},ellipsize:function A(X,W){var V=this.trim(X.substr(0,(W||1)-1));if(V!==X){V+="&hellip;";}return V;},isEmpty:function I(V){return(V===null)||(V===undefined)||!(E.test(V));},regEscape:function O(V){return V.replace(F,"\\$1");},encodeXMLAttribute:function(V){return mstrmojo.string.multiReplace(V,S);},encodeHtmlString:function(W,V,X){if(!W||!W.replace){return W;}if(X){return mstrmojo.string.multiReplace(W,D);}return mstrmojo.string.multiReplace(W,C,V?[" "]:[]);},decodeHtmlString:function(W,V){return V?mstrmojo.string.multiReplace(W,K):mstrmojo.string.multiReplace(W,M);},htmlAngles:function(V){if(!mstrmojo.string.isEmpty(V)){V=String(V);return V.replace(J,"&lt;").replace(R,"&gt;");}return V;},apply:function H(V,X){if(!V){return"";}var W=this;return V.replace(N,function Y(b,c,d){var Z;try{Z=mstrmojo.hash.walk(d,X);}catch(a){}Z=(Z===null||Z===undefined)?"":Z;return(!!c)?W.encodeHtmlString(Z,true):Z;});},json2xml:function(V,k,l){if(!(k instanceof Array)){k=[k];}var W=l&&l.isSerializable,j=(l.convertBoolean!==false),o=l&&l.skipFunctions,h,b;var d=[],Z=[],c,Y,a;for(h=0,b=k.length;h<b;h++){var g=k[h];for(c in g){if(o&&typeof g[c]==="function"){continue;}if(W){var m=W(c,k,h);if(m!==true){if(m===false){continue;}else{if(m.att){d.push(m.att);}if(m.child){Z.push(m.child);}continue;}}}Y=g[c];a=L(Y);switch(a){case"array":var e,f;Z.push("<"+c+">");for(e=0,f=Y.length;e<f;e++){var X=l.getArrItemName(c,Y,e)||e;Z.push(this.json2xml(X,Y[e],l));}Z.push("</"+c+">");break;case"object":Z.push(this.json2xml(c,Y,l));break;case"string":d.push(c+'="'+mstrmojo.string.encodeXMLAttribute(Y)+'"');break;case"boolean":d.push(c+'="'+(j?(Y?"-1":"0"):Y)+'"');break;case"null":if(!l.skipNull){d.push(c+'="'+l.nullValue+'"');}break;default:d.push(c+'="'+Y+'"');break;}}}return"<"+V+" "+d.join(" ")+">"+Z.join("")+"</"+V+">";},escape4HTMLText:function B(c){if(!c||!c.replace){return c;}var Z=/"/gm;var X="&quot;";var d=/&/gm;var b="&amp;";var a=/</gm;var V="&lt;";var Y=/>/gm;var W="&gt;";return c.replace(d,b).replace(Z,X).replace(a,V).replace(Y,W);},parseUri:function(Z,W){W=W||T;var V=W.parser[((W.strictMode)?"strict":"loose")].exec(Z),Y={},X=14;while(X--){Y[W.key[X]]=V[X]||"";}Y[W.q.name]={};Y[W.key[12]].replace(W.q.parser,function(b,a,c){if(a){Y[W.q.name][a]=c;}});return Y;},removeSpecialChars:function(V){return V.replace(/[^a-zA-Z0-9]/g,"");}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var C=mstrmojo.hash,E=mstrmojo.array;function D(F){return function(G){F[G]=true;};}mstrmojo.rw.model.UpdateKeysConfig=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.rw.model.UpdateKeysConfig",init:function B(){this.nodes=[];this.selectors={};this.objects={};}});mstrmojo.rw.model.UpdateKeysConfig.getConsolidatedConfig=function A(J){var F={},K={},G={},I={};E.forEach(J,function H(M){var L=M.partialUpdate;if(L){E.forEach(L.nodes,D(K));E.forEach(L.selectors,D(G));E.forEach(L.objects,function(N){if(!I[N.id]||N.flag>I[N.id].flag){I[N.id]=N;}});delete M.partialUpdate;}E.forEach(M.actions,H);});if(!C.isEmpty(K)){F.nodes=C.keyarray(K);}if(!C.isEmpty(G)){F.selectors=C.keyarray(G);}if(!C.isEmpty(I)){F.objects=C.valarray(I);}return F;};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var C=mstrmojo.array,B=mstrmojo.hash;mstrmojo.models.datasets.DataInterface=mstrmojo.provide("mstrmojo.models.datasets.DataInterface",{getFormsByAttrId:function A(F,E){var D=[];E=E||[];B.forEach(E,function(G){C.forEach(G.att||[],function(H){if(H.did===F){D=D.concat(H.fs||[]);return false;}});});D=C.filter(D,function(G){return !!G.obf;});return C.distinct(D,"fid");}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.EnumDragSources");function D(H){this.cleanUpAfterTarget(H);var G=H.tgtData;if(G){delete H.tgtData;}var I=this.getContextDragData(H);if(I&&I.setAvatarClass){I.setAvatarClass("");}}mstrmojo.vi.ui._IsDropTarget=mstrmojo.provide("mstrmojo.vi.ui._IsDropTarget",{_mixinName:"mstrmojo.vi.ui._IsDropTarget",dropZone:true,getDropAvatarIcon:function B(G){return"add";},getContextDragData:function F(G){return G.getCtxtDragData();},cleanUpAfterTarget:mstrmojo.emptyFn,ondragenter:function A(G){var H=this.getContextDragData(G);if(H&&H.setAvatarClass){H.setAvatarClass(this.getDropAvatarIcon(G));}if(this._super){this._super(G);}},ondragleave:function E(G){D.call(this,G);if(this._super){this._super(G);}},ondrop:function C(G){D.call(this,G);if(this._super){this._super(G);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.base64","mstrmojo.func","mstrmojo.hash");mstrmojo.XhrCallbackType=null;function decodeHeader(value){var rEncoded=/\=\?UTF-8\?B\?(.+?)\?\=/g;if(value&&value.indexOf("=?UTF-8?B?")===0){var decMsg="",result;while((result=rEncoded.exec(value))!==null){decMsg+=mstrmojo.base64.decode(result[1]);}return decMsg;}return value;}function encodeParams(params){var x=-1,url=[],p;if(params){for(p in params){url[++x]=p+"="+encodeURIComponent(params[p]);}}return url.join("&");}function appendUrlParams(method,baseUrl,params){if(method!=="GET"||!params){return baseUrl;}return baseUrl+"?"+encodeParams(params);}function sendXhr(xhr,method,baseUrl,params){method=method.toUpperCase();var app=mstrApp,m=window.microstrategy;if(this.isTask){params=mstrmojo.addCSRFTokenToTaskParams(params);params.taskContentType=params.taskContentType||"json";params.taskEnv=params.taskEnv||"xhr";params.xts=new Date().getTime();params[mstrApp.name]=mstrApp.servletState||"";baseUrl=baseUrl||mstrConfig.taskURL;}var ptp=app.persistTaskParams||(m&&m.persistParams);if(ptp){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.hash.copy(ptp,params);}xhr.open(method,appendUrlParams(method,baseUrl,params),this.async);if(method!=="POST"){xhr.send(null);}else{xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");xhr.send(encodeParams(params));}if(this.async===false){xhr.onreadystatechange();}}function createXhr(){var methods=[function(){return new XMLHttpRequest();},function(){return new ActiveXObject("Msxml2.XMLHTTP");},function(){return new ActiveXObject("Microsoft.XMLHTTP");}],cnt=methods.length,i;for(i=0;i<cnt;i++){var xhr;try{xhr=methods[i]();}catch(e){continue;}createXhr=methods[i];return xhr;}throw new Error("mstrmojo.SimpleXHR: Could not create an XHR object.");}function evalResponse(rt){var rtn=null;try{rtn=eval("("+rt+")");}catch(ex){rtn=rt&&mstrmojo.string.trim(rt);}return rtn;}var MSI_SERVER_NAME_NOT_INITIALIZED=2147760371,MSI_INVALID_SESSION_ID=2147760372,E_MSI_USERMGR_USER_NOTFOUND=2147758245,E_MSI_CONNECT_FAILED=2147759877;function isSessionExpiredError(res){var c=res&&res.getResponseHeader("X-MSTR-TaskErrorCode");c=(c<0)?(4294967296+parseInt(c,10)):c;switch(c){case MSI_SERVER_NAME_NOT_INITIALIZED:case MSI_INVALID_SESSION_ID:case E_MSI_USERMGR_USER_NOTFOUND:case E_MSI_CONNECT_FAILED:return true;}return false;}function xhrSupportsProgress(xhr){return !!(xhr&&xhr.upload&&xhr.upload.onprogress);}mstrmojo.SimpleXHR=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.SimpleXHR",isTask:true,async:true,init:function init(props){mstrmojo.hash.copy(props,this);},onreadystatechange:function onreadystatechange(xhr,callback,prevRequest){if(xhr.readyState!==4){return ;}if(typeof callback!=="object"){return ;}try{if((xhr.status===200)||(xhr.status===304)){this.response=callback.textResponse?xhr.responseText:evalResponse(xhr.responseText);if(typeof callback.success==="function"){callback.success(this.response);}}else{if(xhr.status!==0){var app=mstrApp,sessionExp=app&&app.onSessionExpired;if(sessionExp&&isSessionExpiredError(xhr)){sessionExp.call(app,prevRequest);}else{var orig=xhr.getResponseHeader;xhr.getResponseHeader=function(name){return decodeHeader(orig.apply?orig.apply(xhr,[name]):orig(name));};if(typeof callback.failure==="function"){callback.failure(xhr);}}}}}catch(ex){mstrmojo.err(ex);throw ex;}finally{if(typeof callback.complete==="function"){callback.complete();}if(!isSessionExpiredError(xhr)&&!prevRequest.params.notRestartSessionManager){var sm=mstrApp.sessionManager;if(sm&&sm.restart){sm.restart();}}}},cancel:function(){var didCancel=false;var xhr=this.xhr;if(xhr){delete xhr.onreadystatechange;xhr.isAborted=true;if(xhr.readyState<4){xhr.abort();didCancel=true;}this.xhr=null;}return didCancel;},request:function request(method,baseUrl,callback,params,webSvrUrl,useResFeed,webSrvParams){if(webSvrUrl){if(useResFeed===true){if(!params){params={};}params.srcURL=appendUrlParams("POST",webSvrUrl,webSrvParams);this.request(method,baseUrl,callback,params);}else{mstrmojo.jsonp.request(webSvrUrl,params,callback);}}else{var xhr=createXhr();xhr.onreadystatechange=(function(me,x,c,pr){return function(){me.onreadystatechange(x,c,pr);};}(this,xhr,callback,{method:method,baseUrl:baseUrl,callback:callback,params:params}));if(xhrSupportsProgress(xhr)&&callback.progress){xhr.onprogress=(function(me,x,c){return function(evt){c.progress.call(me,evt);};}(this,xhr,callback));}this.xhr=xhr;sendXhr.call(this,xhr,method,baseUrl,params);}}});mstrmojo.QueuedXHR=mstrmojo.declare(mstrmojo.SimpleXHR,null,{scriptClass:"mstrmojo.QueuedXHR",queue:null,requestCount:0,retryDelay:1,lookup:null,cancel:function cancel(){var didCancel=this._super();while(this.queue.length){var x=this.queue.pop();var cb=x.callback;if(cb&&cb.complete){cb.complete();}}this.queue=[];this.requestCount--;return didCancel;},init:function init(){this.queue=[];this.lookup=[];},request:function request(method,baseUrl,callback,params,override,webSvrUrl,useResFeed,webSrvParams,useCache){if(webSvrUrl){if(useResFeed===true){if(!params){params={};}params.srcURL=appendUrlParams("POST",webSvrUrl,webSrvParams);this.request(method,baseUrl,callback,params);}else{mstrmojo.jsonp.request(webSvrUrl,params,callback);}}else{if(this.requestCount>0&&!override){this.queue.push({method:method,baseUrl:baseUrl,callback:callback,params:params});}else{if(this.requestCount>0){this.cancel();}this.requestCount++;var lu=null,oriParams=null;if(useCache){lu=this._searchForCacheRequest(params);oriParams=mstrmojo.hash.copy(params);}if(lu){try{if(callback.success){window.setTimeout(function(){callback.success(lu.res);},10);}}catch(ex){mstrmojo.err(ex);throw ex;}finally{if(callback.complete){callback.complete();}this.advanceQueue();}}else{var xhr=this.xhr=createXhr();callback=mstrmojo.func.wrapMethods(callback,{complete:(function(ths){return function(){ths.advanceQueue();};}(this)),success:(function(ths){return function(){if(useCache){ths.lookup.push({params:oriParams,res:ths.response});}};}(this))});xhr.onreadystatechange=(function(me,x,c,pr){return function(){me.onreadystatechange(x,c,pr);};}(this,xhr,callback,{method:method,baseUrl:baseUrl,callback:callback,params:params}));if(xhrSupportsProgress(xhr)&&callback.progress){xhr.onprogress=(function(me,x,c){return function(evt){c.progress.call(me,evt);};}(this,xhr,callback));}sendXhr.call(this,xhr,method,baseUrl,params);}}}},upload:function upload(method,baseUrl,callback,params,data,config,override,webSrvParams,useCache){if(this.isTask){params=mstrmojo.addCSRFTokenToTaskParams(params);}if(this.requestCount>0&&!override){this.queue.push({method:method,baseUrl:baseUrl,callback:callback,params:params,data:data,config:config});}else{if(this.requestCount>0){this.cancel();}this.requestCount++;var lu=null,oriParams=null;if(useCache){lu=this._searchForCacheRequest(params);oriParams=mstrmojo.hash.copy(params);}if(lu){try{if(callback.success){window.setTimeout(function(){callback.success(lu.res);},10);}}catch(ex){mstrmojo.err(ex);throw ex;}finally{if(callback.complete){callback.complete();}this.advanceQueue();}}else{var xhr=this.xhr=createXhr();var self=this;callback=mstrmojo.func.wrapMethods(callback,{complete:(function(ths){return function(){ths.advanceQueue.call(ths);};}(this)),success:(function(ths){return function(){if(useCache){ths.lookup.push({params:oriParams,res:ths.response});}};}(this))});var handleProgress=function(event){callback.progress(event,config);};var url=baseUrl;xhr.open("POST",url,false);var formData=new FormData();var a;for(a in params){formData.append(a,params[a]);}if(data){if(params.fileName){formData.append("myFile",data,params.fileName);}else{formData.append("myFile",data);}}if(xhrSupportsProgress(xhr)&&callback.progress){xhr.upload.onprogress=handleProgress;}xhr.onreadystatechange=(function(me,x,c,pr){return function(){me.onreadystatechange(x,c,pr);};}(self,xhr,callback,{method:method,baseUrl:baseUrl,callback:callback,params:params}));xhr.send(formData);}}},advanceQueue:function advanceQueue(){this.requestCount--;if(this.queue.length===0){this.requestCount=0;return ;}var req=this.queue.shift();if(req.params.taskId==="importFile"){this.upload(req.method,req.baseUrl,req.callback,req.params,req.data,req.config);}else{this.request(req.method,req.baseUrl,req.callback,req.params,true);}},_searchForCacheRequest:function _searchForCacheRequest(params){var i;for(i in this.lookup){if(mstrmojo.hash.equals(params,this.lookup[i].params)){return this.lookup[i];}}return null;},hasRequests:function hasRequests(){return this.requestCount>0||mstrmojo.jsonp.hasRequests();}});mstrmojo.xhr=new mstrmojo.QueuedXHR();mstrmojo.jsonp={jsc:new Date().getTime(),timeToWait:20000,requestCount:0,request:function(url,params,callback){var head=document.getElementsByTagName("head")[0]||document.documentElement,jsonp="jsonp"+(this.jsc++),script=document.createElement("script");params.jsonp=jsonp+"(@R@);";params.taskContentType="jsonp";params.taskEnv="jsonp";params.xts=new Date().getTime();window[jsonp]=function(response){mstrmojo.jsonp.requestCount--;if(!response){if(callback.timeout){callback.timeout();}}else{if(response.status===200){callback.success(response.content);}else{var res={status:response.status,getResponseHeader:function(name){switch(name){case"X-MSTR-TaskFailureMsg":return response.errorMsg;case"X-MSTR-TaskErrorCode":return response.errorCode;}}};if(mstrApp.onSessionExpired&&isSessionExpiredError(res)){if(callback.onSessionExpired){callback.onSessionExpired();}else{mstrApp.onSessionExpired();}}else{callback.failure(res);}}}if(window[jsonp]){if(callback.complete){callback.complete();}window[jsonp]=undefined;try{delete window[jsonp];}catch(e){}head.removeChild(script);}};head.insertBefore(script,head.firstChild);this.requestCount++;script.src=appendUrlParams("GET",url,params);setTimeout(function(){var fn=window[jsonp];if(fn){fn();}},this.timeToWait);},hasRequests:function(){return this.requestCount>0;}};}());(function(){mstrmojo.requiresCls("mstrmojo.EnumDSSDisplayMode");mstrmojo.requiresDescs(981);var B=mstrmojo.vi.viz;mstrmojo.vi.viz.KnownVisualizations={CUSTOM:-2,UNKNOWN:-1,GRID:0,ESRIMAP:2,GRAPHMATRIX:3,IMAGELAYOUT:4,HEATMAP:16,GOOGLEMAP:17,NETWORK:18,getDefinition:function A(E){var F=B.KnownVisualizations,H={Grid:{id:F.GRID,displayMode:mstrmojo.EnumDSSDisplayMode.GRID,title:mstrmojo.desc(981,"Grid")},visAjaxDatePicker:{id:1},ESRIMapVisualizationStyle:{id:F.ESRIMAP,mobileVIStyles:{IPhoneVisualization:"ViEsriMapAdapter",IPadVisualization:"ViEsriMapAdapter"}},GraphMatrixVisualizationStyle:{id:F.GRAPHMATRIX,displayMode:mstrmojo.EnumDSSDisplayMode.GRID,widgetEnable:"-1",mobileVIStyles:{IPadVisualization:"IPadGraphMatrix2Style"}},ImageLayoutVisualizationStyle:{id:F.IMAGELAYOUT,mobileVIStyles:{IPadVisualization:"IPhoneImageMapStyle",ATabletVisualization:"AndroidImageMapStyle"}},SurveyVisualizationStyle:{id:8,mobileVIStyles:{IPadVisualization:"SurveyVisualizationStyle"}},VIHeatMapVisualizationStyle:{id:F.HEATMAP,mobileVIStyles:{IPadVisualization:"IPadHeatMapStyle",ATabletVisualization:"HeatMapVisualizationStyle"}},GoogleMapVisualizationStyle:{id:F.GOOGLEMAP,mobileVIStyles:{IPhoneVisualization:"IPhoneMapStyle",IPadVisualization:"IPadMapStyle"}},NetworkVisualizationStyle:{id:F.NETWORK,mobileVIStyles:{IPadVisualization:"IPhoneNetVizStyle"}}};var G=H[E];if(!G){var C=mstrConfig.pluginsVisList,D=C&&C[E];G={id:D?F.CUSTOM:F.UNKNOWN};G.mobileVIStyles=(D&&D.mobileVIStyles)||{};}return G;}};}());(function(){mstrmojo.requiresCls("mstrmojo.models.template.Header");mstrmojo.models.template.Headers=mstrmojo.declare(null,null,{init:function D(K){var O=this.isRow=K.isRow,J=this.data=K.data,L=J.gts,G=J.ghs,F=this.hs=O?G.rhs:G.chs,M=this.i=K.i,N=0,I;this.titles=O?L.row:L.col;this.headers=F.items&&F.items[M]&&F.items[M].items;if(O&&this.headers){N=this.titles.length-this.headers.length;if(N){for(I=M-1;I>=0;I--){var E=F.items[I].items,H=E.length-this.headers.length;if(H>0){this.headers=E.slice(0,H).concat(this.headers);if(this.titles.length===this.headers.length){break;}}}}}},size:function B(){var E=this.headers;return(!E?0:E.length);},getHeader:function C(H){var F=this.headers,G=F&&F[H],E=H;if(G&&mstrApp&&mstrApp.isVI){E=isNaN(G.tui)?G.ui:G.tui;}return G&&new mstrmojo.models.template.Header({h:G,t:this.titles[this.isRow?H:this.i]});},getCSS:function A(F){var E=this.headers;return E&&this.data.css[E[F].cni].n;},getHeaderCell:function(F){var E=this.headers;return E&&E[F];}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.hash");var E=mstrmojo.func.wrapMethods;function B(L,I,K,H,J){return E({success:function(M){if(mstrMobileApp&&mstrMobileApp.sendCallback){mstrMobileApp.sendCallback("success",I.target,JSON.stringify(I.memo),JSON.stringify(M));}},complete:function(){if(mstrMobileApp&&mstrMobileApp.sendCallback){mstrMobileApp.sendCallback("complete",I.target,JSON.stringify(I.memo));}J.removeCallback(K,H);},failure:function(M){if(mstrMobileApp&&mstrMobileApp.sendCallback){mstrMobileApp.sendCallback("failure",I.target,JSON.stringify(I.memo),JSON.stringify(M));}}},L);}mstrmojo._CanProxyCallback=mstrmojo.provide("mstrmojo._CanProxyCallback",{_mixinName:"mstrmojo._CanProxyCallback",callbacks:null,isCallbackReceiver:false,newCallback:function D(O){return O;var K=this.callbacks,I=mstrmojo.hash.copy(O),P=(O.index!==undefined)?String(O.index):"index",N=arguments.callee.caller.arguments,L,J,M,H=O.method||"anonymous";if(!K){K=this.callbacks={};}if(!K[H]){K[H]={};}if(!this.isCallbackReceiver){for(J=0,M=N.length;J<M;J++){L=N[J];if(L&&L.target){I=B(I,L,H,P,this);break;}}}if(!O.method){I.proxy=this.getCallbackMemo();}K[H][P]=I;return I;},anonymous:function(J,K,I,H){if(!this.isCallbackReceiver){K=B(K,H,"anonymous","index",this);mstrApp.serverRequest(J,K,I);}},getCallback:function C(K,J){var H=J||"index",I=this.callbacks;return I&&I[K]&&I[K][H];},removeCallback:function G(K,J){var H=J||"index",I=this.callbacks;if(I&&I[K]){delete I[K][H];if(mstrmojo.hash.isEmpty(I[K])){delete I[K];}}},getCallbackMemo:function F(I,H){return{target:'mstrmojo.all["'+this.id+'"].receiveCallback',memo:{method:I||"anonymous",index:H||"index"}};},receiveCallback:function A(L,J,K){var M=J.method,I=J.index,H=this.getCallback(M,I);if(H&&L&&H[L]){H[L](K);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresDescs(521,522,523,524,525,526,529,530,534,535,546,547,587,686,687,688,696,746,1101,1102,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,2171,2202,2203,2204,2219,2220,2784,2785,2786,2795,2796,3086,3344,3852,3853,3854,3855,3856,3857,3858,3859,3860,3861,3862,3863,3945,3946,4406,4407,5282,5283,5924,5925,6076,6077,6078,6079,6080,6081,6082,7899,7900,7901,7902,7903,9379,9380,9381,9382,9383,9384,9385,12298,13889,13890,13896,13897);mstrmojo.locales=mstrmojo.provide("mstrmojo.locales",{load:function(C){var A=this;if(this.isLoaded){C();C=null;}else{var B={taskId:"getLocaleInfo"};if(mstrConfig&&mstrConfig.isAddSessionState&&mstrApp&&mstrApp.sessionState){B.sessionState=mstrApp.sessionState;}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(D){A.update(D);C();C=null;if(mstrmojo.expr){mstrmojo.expr.onLocaleUpdated();}mstrmojo.locales.isLoaded=true;},failure:function(D){alert(D.getResponseHeader("X-MSTR-TaskFailureMsg"));}},B);}},update:function(A){if(A){mstrmojo.hash.copy(mstrmojo.hash.obj2array(A),this);}},isLoaded:false,datetime:{MONTHNAME_SHORT:[mstrmojo.desc(3852,"Jan"),mstrmojo.desc(3853,"Feb"),mstrmojo.desc(3854,"Mar"),mstrmojo.desc(3855,"Apr"),mstrmojo.desc(3856,"May"),mstrmojo.desc(3857,"Jun"),mstrmojo.desc(3858,"Jul"),mstrmojo.desc(3859,"Aug"),mstrmojo.desc(3860,"Sep"),mstrmojo.desc(3861,"Oct"),mstrmojo.desc(3862,"Nov"),mstrmojo.desc(3863,"Dec")],MONTHNAME_FULL:[mstrmojo.desc(1956,"January"),mstrmojo.desc(1957,"February"),mstrmojo.desc(1958,"March"),mstrmojo.desc(1959,"April"),mstrmojo.desc(1960,"May"),mstrmojo.desc(1961,"June"),mstrmojo.desc(1962,"July"),mstrmojo.desc(1963,"August"),mstrmojo.desc(1964,"September"),mstrmojo.desc(1965,"October"),mstrmojo.desc(1966,"November"),mstrmojo.desc(1967,"December")],dayShortNames:["S","M","T","W","T","F","S"],dayNames:[mstrmojo.desc(9379,"Sunday"),mstrmojo.desc(9380,"Monday"),mstrmojo.desc(9381,"Tuesday"),mstrmojo.desc(9382,"Wednesday"),mstrmojo.desc(9383,"Thursday"),mstrmojo.desc(9384,"Friday"),mstrmojo.desc(9385,"Saturday")],DATEINPUTFORMATS:["M/d/yy","M/d/yyyy","MMM d, yy"],TIMEINPUTFORMATS:["h:mm a","H:mm","h:mm:ss a","H:mm:ss","h:mm:ss a z"],DATEOUTPUTFORMAT:"M/d/yyyy",TIMEOUTPUTFORMAT:"h:mm:ss a",DATEDISPLAYFORMAT:"M/d/yy",TIMEDISPLAYFORMAT:"h:mm:ss",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:".",THOUSANDSEPARATOR:","},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:mstrmojo.desc(3945,"Include")},{did:"2",n:mstrmojo.desc(3946,"Exclude")}],BranchQual:[{did:"19",n:mstrmojo.desc(5282,"AND")},{did:"20",n:mstrmojo.desc(5283,"OR")},{did:"21",n:mstrmojo.desc(12298,"NOT")},{did:"19_21",n:mstrmojo.desc(5924,"AND NOT")},{did:"20_21",n:mstrmojo.desc(5925,"OR NOT")}],RootOperator:[{did:"19",n:mstrmojo.desc(534,"All selections")},{did:"20",n:mstrmojo.desc(535,"Any selection")}],ExprType:[{did:"2",n:mstrmojo.desc(546,"Qualify")},{did:"5",n:mstrmojo.desc(547,"Select")}],DimtyLevels:[{did:"1",n:mstrmojo.desc(2171,"Default")},{did:"2",n:mstrmojo.desc(3086,"Metric")},{did:"3",n:mstrmojo.desc(3344,"Report")}],Attribute:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1},{did:"1,44",n:mstrmojo.desc(746,"Not between"),t:1,tp:1},{did:"1,76",n:mstrmojo.desc(686,"Contains"),t:1,tp:1},{did:"1,79",n:mstrmojo.desc(2784,"Does not contain"),t:1,tp:1},{did:"1,77",n:mstrmojo.desc(687,"Begins with"),t:1,tp:1},{did:"1,80",n:mstrmojo.desc(2785,"Does not begin with"),t:1,tp:1},{did:"1,78",n:mstrmojo.desc(688,"Ends with"),t:1,tp:1},{did:"1,81",n:mstrmojo.desc(2786,"Does not end with"),t:1,tp:1},{did:"1,18",n:mstrmojo.desc(525,"Like"),t:1,tp:1},{did:"1,43",n:mstrmojo.desc(526,"Not Like"),t:1,tp:1},{did:"1,54",n:mstrmojo.desc(2202,"Is Null"),t:1,tp:1},{did:"1,55",n:mstrmojo.desc(2203,"Is Not Null"),t:1,tp:1},{did:"1,22",n:mstrmojo.desc(587,"In"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2204,"Not In"),t:1,tp:1}],Metric:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1},{did:"1,44",n:mstrmojo.desc(746,"Not between"),t:1,tp:1},{did:"1,54",n:mstrmojo.desc(2202,"Is Null"),t:1,tp:1},{did:"1,55",n:mstrmojo.desc(2203,"Is Not Null"),t:1,tp:1},{did:"1,22",n:mstrmojo.desc(587,"In"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2204,"Not In"),t:1,tp:1},{did:"2,1",n:mstrmojo.desc(529,"Highest"),t:2,tp:2},{did:"2,2",n:mstrmojo.desc(530,"Lowest"),t:2,tp:2},{did:"3,1",n:mstrmojo.desc(4407,"Highest %"),t:3,tp:3},{did:"3,2",n:mstrmojo.desc(4406,"Lowest %"),t:3,tp:3}],MetricRP:[{did:"2,13",n:mstrmojo.desc(13897,"Rank between highest"),t:2,tp:2},{did:"2,4",n:mstrmojo.desc(1101,"Exclude highest"),t:2,tp:2},{did:"2,3",n:mstrmojo.desc(13896,"Rank between lowest"),t:2,tp:2},{did:"2,5",n:mstrmojo.desc(1102,"Exclude lowest"),t:2,tp:2},{did:"3,13",n:mstrmojo.desc(13890,"Between highest")+"%",t:3,tp:3},{did:"3,4",n:mstrmojo.desc(1101,"Exclude highest")+"%",t:3,tp:3},{did:"3,3",n:mstrmojo.desc(13889,"Between lowest")+"%",t:3,tp:3},{did:"3,5",n:mstrmojo.desc(1102,"Exclude lowest")+"%",t:3,tp:3}],MDXAttribute:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1},{did:"1,44",n:mstrmojo.desc(746,"Not between"),t:1,tp:1},{did:"1,22",n:mstrmojo.desc(587,"In"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2204,"Not In"),t:1,tp:1}],MDXMetric:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1}],SAPAttribute:[{did:"1,6",n:mstrmojo.desc(2795,"Equals"),t:1,tp:1},{did:"1,7",n:mstrmojo.desc(2796,"Does not equal"),t:1,tp:1},{did:"1,22",n:mstrmojo.desc(587,"In"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2204,"Not In"),t:1,tp:1},{did:"1,8",n:mstrmojo.desc(521,"Greater than"),t:1,tp:1},{did:"1,10",n:mstrmojo.desc(522,"Greater than or equal to"),t:1,tp:1},{did:"1,9",n:mstrmojo.desc(523,"Less than"),t:1,tp:1},{did:"1,11",n:mstrmojo.desc(524,"Less than or equal to"),t:1,tp:1},{did:"1,17",n:mstrmojo.desc(696,"Between"),t:1,tp:1}],Element:[{did:"1,22",n:mstrmojo.desc(2219,"In List"),t:1,tp:1},{did:"1,57",n:mstrmojo.desc(2220,"Not In List"),t:1,tp:1}]},validation:{requiredFieldError:mstrmojo.desc(6078,"This field is required."),invalidCharError:mstrmojo.desc(7899,"This field contains invalid characters for #."),invalidDateStringError:mstrmojo.desc(7900,"This field contains invalid date/time string."),invalidNumericFormatError:mstrmojo.desc(7901,"This field contains numeric value with incorrect format."),outofRangeError:mstrmojo.desc(6079,"This field should be # between ## and ###."),noLessMinError:mstrmojo.desc(6081,"This field should be # greater than or equal to ##."),noGreaterMaxError:mstrmojo.desc(6080,"This field should be # less than or equal to ###."),failRegexTestError:mstrmojo.desc(6082,"This field failed regular expression validation."),invalidValueInListError:mstrmojo.desc(7902,"One of the value (#) in this list is not valid."),integerDataType:mstrmojo.desc(6076,"an Integer value"),numericDataType:mstrmojo.desc(6077,"a Number value"),dateDataType:mstrmojo.desc(7903,"a Date/Time value")},color:{colors:[{n:"Black",v:"#000000"},{n:"Brown",v:"#993300"},{n:"Olive Green",v:"#333300"},{n:"Dark Green",v:"#003300"},{n:"Dark Teal",v:"#003366"},{n:"Dark Blue",v:"#000080"},{n:"Indigo",v:"#333399"},{n:"Grey-80%",v:"#333333"},{n:"Dark Red",v:"#800000"},{n:"Orange",v:"#FF6600"},{n:"Dark Yellow",v:"#808000"},{n:"Green",v:"#008000"},{n:"Teal",v:"#008080"},{n:"Blue",v:"#0000FF"},{n:"Blue-Grey",v:"#666699"},{n:"Grey-50%",v:"#808080"},{n:"Red",v:"#FF0000"},{n:"Light Orange",v:"#FF9900"},{n:"Lime",v:"#99CC00"},{n:"Sea Green",v:"#339966"},{n:"Aqua",v:"#33CCCC"},{n:"Light Blue",v:"#3366FF"},{n:"Violet",v:"#800080"},{n:"Grey-40%",v:"#969696"},{n:"Pink",v:"#FF00FF"},{n:"Gold",v:"#FFCC00"},{n:"Yellow",v:"#FFFF00"},{n:"Bright Green",v:"#00FF00"},{n:"Turquoise",v:"#00FFFF"},{n:"Sky Blue",v:"#00CCFF"},{n:"Plum",v:"#993366"},{n:"Grey-25%",v:"#C0C0C0"},{n:"Rose",v:"#FF99CC"},{n:"Tan",v:"#FFCC99"},{n:"Light Yellow",v:"#FFFF99"},{n:"Light Green",v:"#CCFFCC"},{n:"Light Turquoise",v:"#CCFFFF"},{n:"Pale Blue",v:"#99CCFF"},{n:"Lavender",v:"#CC99FF"},{n:"White",v:"#ffffff"}],userPalette:[{n:"#F00E0E",v:"#F00E0E"},{n:"#080000",v:"#080000"},{n:"#E81A1A",v:"#E81A1A"},{n:"#6E0909",v:"#6E0909"},{n:"#4F2828",v:"#4F2828"},{n:"#141212",v:"#141212"},{n:"#D60202",v:"#D60202"},{n:"#C40404",v:"#C40404"}]}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var B=mstrmojo.hash;mstrmojo.Base=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Base",init:function A(C){B.copy(C,this);if(this.postApplyProperties){this.postApplyProperties();}}});}());mstrmojo.DPIManager={classes:[],registerClass:function registerClass(B,C,D,A){this.classes.push({c:B,d:C,s:D,v:A});},setDPI:function(){var A=mstrMobileApp.getDeviceDPI();mstrmojo.array.forEach(this.classes,function(B){B.c.prototype.layoutConfig[B.d][B.s]=B.v[A]+"px";});this.classes=[];}};(function(){document.msCSSOMElementFloatMetrics=true;mstrmojo.requiresCls("mstrmojo.hash");var S=mstrmojo.hash,H="containerNode",G="auto",Q="px";var I={v:G,c:undefined,sv:G};function E(c,f,e){var g=this._layoutWidgets[f],j=c.slot||H,h=g.f,i=g.p,d=(h&&h[j]!==undefined),b=(i&&i[j]!==undefined);if(j&&((!e&&d)||b)){return d?h[j]:(g.x*parseInt(i[j],10)/100)+Q;}return c[(f==="h")?"height":"width"];}function K(g,d,b){if(g.ignoreLayout){return ;}var c=(d===G)||d==="NaNpx",f=(b===G)||b==="NaNpx";var e=g.getLayoutOffsets&&g.getLayoutOffsets();if(e){if(!c){d=(parseInt(d,10)-e.h)+Q;}if(!f){b=(parseInt(b,10)-e.w)+Q;}}if(g.setDimensions){g.setDimensions(d,b);}else{if(g.set){if(!c){g.set("height",d);}if(!f){g.set("width",b);}}}}function Z(e){var c=this.children,g,k;for(g=0,k=(c&&c.length)||0;g<k;g++){var d=c[g],l=d.slot||H;if(l){var j=E.call(this,d,"h",e),m=E.call(this,d,"w",e);this.setSlotDimensions(l,j,m);K(d,j,m);var b=E.call(this,d,"h",e),f=E.call(this,d,"w",e);if(b!==j||f!==m){K(d,b,f);}this.setSlotDimensions(l,b,f);}}this.afterLayout();}function B(){var c=this.children,b=this._layoutWidgets;S.forEach(this.slotNames,function(g,i){if(!g||this.skipsSlotLayout(i)){return ;}var f=(b.h&&b.h.getSlotSizeInfo(i,c))||I,d=(b.w&&b.w.getSlotSizeInfo(i,c))||I,e=f.c||d.c;mstrmojo.array.forEach(e,function(h){K(h,f.v,d.v);});this.setSlotDimensions(i,f.sv,d.sv);},this);this.afterLayout();}function D(c){var b=this.layoutConfig.xt?B:Z;b.call(this,c);}function T(i,e,g){var h=i.slot||H,f=e&&e.a;if(!f||f[h]===undefined){return ;}var b=this[h]["offset"+g],c=f[h];if(b===c){return ;}e.x-=(b-c);f[h]=b;}function J(b){this.beforeLayout();var c=this._layoutWidgets,d=b.src;T.call(this,d,c.h,"Height");T.call(this,d,c.w,"Width");D.call(this,true);}function O(d,g){if(!d){return null;}var b=this.children,q=g.toLowerCase(),h=parseInt(this[q],10),k=h,m={},o={},f={},c={},n={},j,l,e,r,p;for(p in d){if(!d.hasOwnProperty(p)){continue;}r=d[p];if(r.match(/px$/)){h-=parseInt(r,10);m[p]=r;}else{if(r.match(/%$/)){o[p]=r;}else{if(r.match(/all/)){n[p]=k;}else{f[p]=r;}}}}if(!S.isEmpty(f)&&!S.isEmpty(o)){for(j=0,l=(b&&b.length)||0;j<l;j++){e=b[j];p=e.slot||H;if(p&&f[p]&&!e.ignoreLayout){if(e.hasRendered){c[p]=this[p]["offset"+g];h-=c[p];}else{c[p]=0;e.attachEventListener((e instanceof mstrmojo.Container)?"childrenRendered":"renderComplete",this.id,J);}}}}return{f:S.isEmpty(m)?undefined:m,p:S.isEmpty(o)?undefined:o,a:S.isEmpty(c)?undefined:c,n:S.isEmpty(n)?undefined:n,x:h,getSlotSizeInfo:function(y,t){if(!d[y]){return I;}var s=mstrmojo.array.filter(t,function(AA){var z=AA.slot;return z===y||(y===H&&!z);}),w,x;var i=m[y];if(i){x=i;}var v=o[y];if(v){x=(this.x*parseInt(v,10)/100)+Q;}if(f[y]){x=c[y];if(x){x+=Q;}else{x=G;}w=G;}var u=n[y];if(u){x=w=u+Q;}x=x||"0px";return{v:x,c:s,sv:w||x};}};}function R(c){var b=this.domNode;if(!b||!this.layoutConfig){return ;}b.style[c]=this[c];this.doLayout();}mstrmojo._HasLayout=mstrmojo.provide("mstrmojo._HasLayout",{_mixinName:"mstrmojo._HasLayout",height:"auto",width:"auto",ignoreLayout:false,beforeLayout:mstrmojo.emptyFn,afterLayout:mstrmojo.emptyFn,layoutConfig:null,init:function V(b){this._super(b);this.layoutConfig=S.clone(this.layoutConfig);},preBuildRendering:function C(){var d=this.cssText||"";var b=this.height;if(b&&b!==G){d+="height:"+this.height+";";}var c=this.width;if(c&&c!==G){d+="width:"+this.width+";";}this.cssText=d;return(this._super)?this._super():true;},postBuildRendering:function W(){this.doLayout();return this._super();},modifyLayoutConfig:function Y(d,c){var b=this.layoutConfig=this.layoutConfig||{};b.h=S.copy(d,b.h);b.w=S.copy(c,b.w);this.doLayout();},getLayoutOffsets:mstrmojo.emptyFn,set:function P(d,b){var c=this._super(d,b);if(d==="visible"&&this._pendingLayoutOnVisible){delete this._pendingLayoutOnVisible;this.doLayout();}return c;},doLayout:function A(){var b=this.layoutConfig;if(!b||(this.height===G&&this.width===G)){return ;}if(b.xt){if(!this.visible){this._pendingLayoutOnVisible=true;return ;}}this.beforeLayout();this._layoutWidgets={h:O.call(this,b.h,"Height"),w:O.call(this,b.w,"Width")};D.call(this,false);this.widgetResized();},browserResized:function F(b){this.setDimensions(b.h,b.w);return true;},onwidthChange:function N(){R.call(this,"width");},onheightChange:function M(){R.call(this,"height");},skipsSlotLayout:function(b){return false;},adjustParentDimensions:function L(){var c=this.parent,b=c&&c._layoutWidgets;if(b){T.call(c,this,b.h,"Height");T.call(c,this,b.w,"Width");}},setDimensions:function U(e,c){var d=(e===G)||e==="NaNpx",f=(c===G)||c==="NaNpx";if((!d&&parseInt(this.height,10)!==parseInt(e,10))||(!f&&parseInt(this.width,10)!==parseInt(c,10))){if(!d){this.height=e;}if(!f){this.width=c;}var b=this.domNode,g=b&&b.style;if(g){if(!d){g.height=e;}if(!f){g.width=c;}this.doLayout();}return true;}return false;},setSlotDimensions:function X(e,d,c){var b=this[e]&&this[e].style;if(!b){return ;}if(d!==G&&d!==undefined&&d!=="NaNpx"&&b.height!==d&&parseInt(d)>=0){b.height=d;}if(c!==G&&c!==undefined&&c!=="NaNpx"&&b.width!==c&&parseInt(c)>=0){b.width=c;}}});mstrmojo._HasLayout.getSlotSize=function a(e,f){var c=e&&e.prototype.layoutConfig;if(c){var d=c.h,b=c.w;return{h:(d&&d[f])||undefined,w:(b&&b[f])||undefined};}return null;};}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.all={};var E=mstrmojo.all,G=mstrmojo.hash;var A=0;function D(){var I;while(!I){var H="mstr"+(A++);if(!E[H]){I=H;}}return I;}mstrmojo.registry=mstrmojo.provide("mstrmojo.registry",{add:function F(H){if(!H){return ;}var I=H.id;if(!I){H.id=I=D();}else{if(E[I]){throw new Error("Tried to register 2 objects with same id: "+I);}}E[I]=H;},remove:function C(H){if(H&&H.id){delete E[H.id];}},dumpAll:function(){var H;for(H in E){var I=E[H].id;if(I){mstrmojo.dbg(I+"("+(E[H].scriptClass||"[unknown class]")+")");}}},ref:function B(I,H){H=H||{};if(I){var L=I;while(L){switch(typeof L){case"string":if(H.skipLoadChecks!==true){mstrmojo.requiresCls(L);}L=G.walk(L,window);break;case"function":return(H.dontInst!==true)?new L():L;case"object":if(L.constructor===Object){var K=L.scriptClass;if(K){if(H.skipLoadChecks!==true){mstrmojo.requiresCls(K);}var J=G.walk(K,window);if(J){return new J((H.clone===true)?G.clone(L):L);}return null;}return L;}return L;default:return null;}}}return null;}});mstrmojo.insert=mstrmojo.registry.ref;}());(function(){mstrmojo.requiresCls("mstrmojo.hash");var E=mstrmojo.hash;var B=function(G){return(mstrmojo.now()-G.getTime());};mstrmojo.storage.DOMStorage=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.storage.DOMStorage",mIsSupported:false,mStorageObj:null,itemTimeToLive:3600,init:function F(G){E.copy(G,this);return this;},isSupported:function C(){return this.mIsSupported;},checkVersion:function A(G){var H=this.getItem("__version__");if(H&&H<G){mstrmojo.dbg("DOMStorage data is old - clearing, v="+H);this.clear();}this.setItem("__version__",G,-1);return this;},length:function(){return(this.mIsSupported?this.mStorageObj.length:0);},_keyExpired:function D(G){return(G&&(G.ts>0)&&(mstrmojo.now()>G.ts));},key:function(G){return(this.mIsSupported?this.mStorageObj.key(G):null);},getItemAsString:function(H){var G=this.getItem(H);if(G){if(typeof G=="object"){G=JSON.stringify(G);}else{G=G+"";}}return G;},getItem:function(H){var G=null;if(this.mIsSupported){var J=this.mStorageObj.getItem(H);if(J){try{J=JSON.parse(J);}catch(I){}if(this._keyExpired(J)){this.removeItem(H);}else{G=J.data;}}}return G;},setItem:function(H,J,G){G=G||this.itemTimeToLive;try{if(this.mIsSupported){this.mStorageObj.removeItem(H);var L=(G>0)?(mstrmojo.now()+(G*1000)):-1;var I={ts:L,data:J};this.mStorageObj.setItem(H,JSON.stringify(I));}}catch(K){if(K!==QUOTA_EXCEEDED_ERR){throw K;}}finally{}return this;},removeItem:function(G){if(this.mIsSupported){this.mStorageObj.removeItem(G);}return this;},clear:function(){if(this.mIsSupported){this.mStorageObj.clear();}return this;}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash");var O=/this\.([\w\.\[\]\'\"\-]+)/m,D=/this\./m,M=/mstrmojo\.all\[[\'\"]([\w]+)[\'\"]\]\.([\w\.\[\]\'\"\-]+)/m,R=/mstrmojo\.all\[/m,L=/mstrmojo\.all\.([\w]+)\.([\w\.\[\]\'\"\-]+)/m,B=/mstrmojo\.all\./m,C=/\[(\d+)\]/g,E=/\[\'([\w\-]+)\'\]/g,P=/\[\"([\w\-]+)\"\]/g,H=/([\[\]].*)/;mstrmojo.Binding=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Binding",parent:null,source:null,destination:null,enabled:false,setter:"set",executing:0,init:function N(S){mstrmojo.hash.copy(S,this);mstrmojo.registry.add(this);},destroy:function F(){mstrmojo.publisher.clearSubscriptions(this.id);mstrmojo.registry.remove(this);},exec:function K(){this.executing++;var W=this._sourceFn;if(!W){var V=this.source;if(V!=null){if(typeof (V)=="string"){if(!(V.match("return "))&&!(V.match(/\;\s*\S/))){V="return "+V;}W=new Function(V);}else{if(typeof (V)=="function"){W=V;}}this._sourceFn=W;}}var S,X=this.parent;if(W){try{S=W.apply(X,[]);}catch(U){}}var T=this.setter,Y=this.destination;if(T==null){X[Y]=S;}else{if(typeof (T)=="string"){X[T](Y,S);}else{if(typeof (T)=="function"){T.apply(X,[Y,S]);}}}this.executing--;},enable:function A(){if(!this.enabled){this.exec();var T=this._chains;if(!T){this._parseChains();T=this._chains;}for(var S in T){this._attachChain(T[S]);}this.enabled=true;}},disable:function J(){if(this.enabled){var T=this._chains;if(T){for(var S in T){this._detachChain(T[S]);}}this.enabled=false;}},_chains:null,_parseChains:function(){this._chains={};var U=this._chains;var T=this.source;if(T&&(typeof (T)=="function")){T=T.toString&&T.toString();}if(!T){return ;}function S(b,e,V,X){var W=b,Z;while(Z=W.match(e)){var c=Z[0],a=c.length,d=true;c=c.replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"");for(var Y in U){if(Y.substr(0,a)===c){d=false;break;}else{if(c.indexOf(Y)===0){delete U[Y];}}}if(d){U[c]={host:(V==null)?null:Z[V],parts:Z[X].replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"").split(".")};}W=W.substr(Z.index+a);}}if(D.test(T)){S(T,O,null,1);}if(R.test(T)){S(T,M,1,2);}if(B.test(T)){S(T,L,1,2);}},_attachChain:function Q(S,U){if(!S.evt2idx){S.evt2idx={};}if(!S.idx2evt){S.idx2evt=[];}var d=S.evt2idx,g=S.idx2evt,Z=S.parts;var e=(U>=0)?U:0,b=this.id,W=mstrmojo.all,c=(U>0)?W[g[e-1].context][Z[e-1]]:(S.host?W[S.host]:this.parent),T=Z[e];var V=mstrmojo.array;while(c&&T){if(c.attachEventListener){var f=c[T+"_bindEvents"]||(T+"Change");if(typeof (f)=="string"){f=[f];}var Y=[];for(var a=0,X=f.length;a<X;a++){Y[a]=c.attachEventListener(f[a],b,"_callback");}for(var a=0;a<f.length;a++){d[c.id+"_"+f[a]]=e;}g[e]={context:c.id,evts:f,subs:Y};}c=c[T];T=S.parts[++e];}},_detachChain:function G(S,T){var U=mstrmojo.all,h=S.idx2evt,d=S.evt2idx,a=this.id;var Y=(T>-1)?T:0,b=h.length;if(Y<b){for(;Y<b;Y++){var Z=h[Y];if(!Z){break;}var W=Z.context,c=U[W],g=Z.evts;if(c&&c.detachEventListener){var k=Z.subs;for(var f=0,V=k.length;f<V;f++){c.detachEventListener(k[f]);}}h[Y]=null;for(var X=0,e=g.length;X<e;X++){delete d[W+"_"+g[X]];}}}},_callback:function I(T){this.exec();if(!T||!T.name||!T.src){return ;}var U=T.src.id+"_"+T.name,W=this._chains;for(var X in W){var V=W[X],S=V.evt2idx[U];if(S!=null){this._detachChain(V,S+1);this._attachChain(V,S+1);}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.Event=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Event",init:function A(B){if(B&&!B.name){B.name=B.type;}mstrmojo.hash.copy(B,this);},name:"",src:null});}());(function(){mstrmojo.requiresCls("mstrmojo.storage.DOMStorage");var A=4;mstrmojo.storage.DOMLocalStorage=mstrmojo.declare(mstrmojo.storage.DOMStorage,null,{scriptClass:"mstrmojo.storage.DOMLocalStorage",init:function(B){this._super(B);try{this.mIsSupported=("localStorage" in window)&&(window.localStorage!==null);this.mStorageObj=this.mIsSupported?window.localStorage:null;this.checkVersion(A);}catch(C){this.mIsSupported=false;}}});$LS=mstrmojo.global.localStore=new mstrmojo.storage.DOMLocalStorage({itemTimeToLive:(3600*24)});})();(function(){mstrmojo.requiresCls("mstrmojo.storage.DOMStorage");var A=4;mstrmojo.storage.DOMSessionStorage=mstrmojo.declare(mstrmojo.storage.DOMStorage,null,{scriptClass:"mstrmojo.storage.DOMSessionStorage",init:function(B){this._super(B);try{this.mIsSupported=("sessionStorage" in window)&&(window.sessionStorage!==null);this.mStorageObj=this.mIsSupported?window.sessionStorage:null;this.checkVersion(A);}catch(C){this.mIsSupported=false;}}});$SS=mstrmojo.global.sessionStore=new mstrmojo.storage.DOMSessionStorage();})();(function(){mstrmojo.requiresCls("mstrmojo.registry");mstrmojo._PagingList=mstrmojo.provide("mstrmojo._PagingList",{usePaging:false,page:0,totalPages:1,_set_page:function(B,A){if(this.page!==A&&this.usePaging){if(A>=0&&A<this.totalPages){this.page=A;}return true;}return false;},_inScroll:false,_inPaging:false,onscroll:function(){if(this.usePaging&&!this._inPaging){this._inScroll=true;this.set("page",this.listMapper.whichPage(this));this._inScroll=false;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.hash");var A=false,D="mstrmojo.Binding",I="bindings",H=mstrmojo.registry;function B(K){var L;for(L in K){var J=K[L];if(J&&J.disable){J.destroy();}}}function C(K,M){if(!A){mstrmojo.requiresCls(D);A=true;}var N;for(N in K){var J=K[N];if(J===null||J===undefined){continue;}var L=typeof J;if(L==="string"||L==="function"){J={destination:N,source:J,scriptClass:D};}J.parent=M;J=H.ref(J,{skipLoadChecks:true});K[N]=J;J.enable();}}mstrmojo._HasBindings=mstrmojo.provide("mstrmojo._HasBindings",{_meta_usesSuper:false,initBindings:function E(){this.hasInitBindings=true;var K=mstrmojo.hash.copy(this[I]);if(K){delete this[I];this._set_bindings(I,K);if(this.postCreateBindings){this.postCreateBindings();}}var M=this.children,J=(M&&M.length)||0;if(J){var L;for(L=0;L<J;L++){var N=M[L];if(N&&N.initBindings){N.initBindings();}}}},destroyBindings:function G(){var J=this.bindings;if(J){B(J);delete this.bindings;}},_set_bindings:function F(L,J){var K=this[I];if(J!==K){if(K){B(K);}this[I]=J;if(J){C(J,this);}return true;}return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.array","mstrmojo.publisher");var D=mstrmojo.registry,K=mstrmojo.array,I=mstrmojo.publisher;function G(Q,R){if(R){R.parent=Q;var P=D.ref(R);if(R!==P){delete R.parent;}return P;}return null;}function L(Q,R){var P=R.alias;if(P!==null&&P!==""){Q[P]=R;}}function N(Q,R){var P=R.alias;if(R.parent===Q){delete R.parent;}if((P!==null&&P!=="")&&(Q[P]===R)){delete Q[P];}}function A(T,Q){var P=Q&&Q.length,S,R;if(P){S=[];for(R=0;R<P;R++){var U=G(T,Q[R]);if(!U){continue;}S.push(U);L(T,U);}}return S;}mstrmojo._HasChildren=mstrmojo.provide("mstrmojo._HasChildren",{_meta_usesSuper:false,children:null,postCreateChildren:mstrmojo.emptyFn,onaddChild:null,onremoveChild:null,initChildren:function F(){var P="children",Q=this[P];if(!Q){return ;}this[P]=null;this._set_children(P,Q,true);this.postCreateChildren();},_set_children:function E(S,Q,P){var R=this.children;if(Q!==R){if(R){this.removeChildren(null,P);}this.addChildren(Q,0,P);}return false;},destroyChildren:function C(S){var R=this.children,P=(R&&R.length)||0,Q;if(P){for(Q=P-1;Q>-1;Q--){var T=R[Q];if(T&&T.destroy){T.destroy(S);if(!S){N(this,T);}}}if(!S){R.length=0;}}},invalidateChildren:function B(){mstrmojo.array.forEach(this.children,function(P){P.invalidate();});},invalidate:function H(){this.invalidateChildren();},addChildren:function O(U,Q,R){if(!U){return U;}var T=U.constructor===Array,P=A(this,T?U:[U]);if(P&&P.length){var S=this.children||[];if(Q===null||Q===undefined){Q=S.length;}this.children=K.insert(S,Q,P);if(!R&&(this.onaddChild||I.hasSubs(this.id,"addChild"))){this.raiseEvent({name:"addChild",value:P,index:Q});}}return T?P:(P&&P[0]);},removeChildren:function J(V,R){var T=this.children,U=V?[V]:(this.children||[]).concat(),Q=U.length,P=-1,S;if(Q){for(S=Q-1;S>-1;S--){N(this,U[S]);}if(V){P=K.removeItem(T,V);}else{if(T){T.length=0;P=0;}}if(!R&&(this.onremoveChild||I.hasSubs(this.id,"removeChild"))){this.raiseEvent({name:"removeChild",value:U,index:P});}}return P;},removeAndDestroyChild:function M(R,P,Q){if(R){if(R.parent!==this){throw"Unable to remove an object that is not in the children collection.";}this.removeChildren(R,P);R.destroy(Q);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.array");var H=mstrmojo,F=H.array,A="00000000000000000000000000000000",E=-1;function J(K){return K.t===4&&K.id!==A;}function G(L){var K,M=(L&&L.length)||0;if(M===0){return false;}for(K=0;K<M;K++){if(!J(L[K])){return false;}}return true;}mstrmojo.VisProps=null;mstrmojo.vi.viz.DropZoneHelper=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.vi.viz.DropZoneHelper",getXml:function B(){return"";},setData:function I(K){},isMetric:function(K){return J(K);},isMetricZone:function(K){return G(K);},getMetricCountInZone:function D(L){var K=0;F.forEach(L,function(M){if(J(M)){K++;}});return K;}});mstrmojo.vi.viz.DropZoneHelper.METRIC_NAMES_ID=A;mstrmojo.vi.viz.DropZoneHelper.isMetricNames=function C(K){return(parseInt(K.did,10)===E)||(K.id===A)||(K.did===A);};}());(function(){mstrmojo.requiresCls("mstrmojo.Base");mstrmojo.chart.common.DSSTimeUtil=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.DSSTimeUtil",DaysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],DaysBeforeMonth:[0,31,59,90,120,151,181,212,243,273,304,334],DateAbove1970:[1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1971,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1997,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1973,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981,1971,1972,1973,1974,1997,1976,1977,1978,1973,1980,1981,1971,1977,2012,1974,1997,1981,1988,1978,1973,1974,1992,1971,1977,1978,1996,1997,1981]});}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.string","mstrmojo.array");var N=mstrmojo.locales,I=mstrmojo.string,Q=window.mstrConfig,F=mstrmojo.array,K=function(){return mstrmojo.locales.number.THOUSANDSEPARATOR;},R=function(){return mstrmojo.locales.number.DECIMALSEPARATOR;},C=Q.units,T={CM:1,IN:2,MM:3,PT:4,PC:5,PX:6},A={1:"cm",2:"in",3:"mm",4:"pt",5:"pc",6:"px"},E={DEFAULT:-2,FIXED:0,CURR:1,PERCENT:4,FRACTION:5,SCIENTIFIC:6,GENERAL:9};var G=96;String.prototype.reverse=function(){var W="",V;for(V=this.length;V>0;--V){W+=this.charAt(V-1);}return W;};function M(V,X){V=V||"";X=X||V.match(/\".+?\"/g)||[];for(var W=0;W<X.length;W++){V=V.replace(X[W],X[W].substring(1,X[W].length-1).replace(/\$/g,"$$$$"));}return V;}function U(a){var V=86400000,Z=new Date(1900,0,1,0,0,0,0),W=Math.floor(a)-1,Y=a-W-1;if(a>=59){W--;}var X=new Date(Z.getTime()+(W*V));X.setTime(X.getTime()+Y*V+500);return X;}function H(Z,g,i){var a={"d+":Z.getDate(),"h+|H":Z.getHours(),"s+":Z.getSeconds()},V=N.datetime,b;if(/(y+)/.test(g)){var Y=Z.getFullYear().toString(),f=RegExp.$1,X=f.length===2,W=Y.length;g=g.replace(f,Y.substr(X?W-2:0,X?2:W));}if(/(^\[h\])/.test(g)&&i){g=g.replace(RegExp.$1,""+(Math.floor(i*24)));}if(/(\"?:\"?mm)/.test(g)){var c=Z.getMinutes();g=g.replace(RegExp.$1,":"+(RegExp.$1.length===1?c:("00"+c).substr(c.toString().length)));}if(/(AM\/PM)/.test(g)){var h=a["h+"],d=h>11;a["h+"]=h-(d?12:0);g=g.replace(RegExp.$1,d?"PM":"AM");}for(b in a){if(new RegExp("("+b+")").test(g)){g=g.replace(RegExp.$1,RegExp.$1.length===1?a[b]:("00"+a[b]).substr((a[b].toString()).length));}}if(/(mmmm)/.test(g)){g=g.replace(RegExp.$1,V.MONTHNAME_FULL[Z.getMonth()]);}else{if(/(mmm)/.test(g)){g=g.replace(RegExp.$1,V.MONTHNAME_SHORT[Z.getMonth()].substr(0,3));}else{if(/((m|M)+)/.test(g)){var e=(Z.getMonth()+1).toString();g=g.replace(RegExp.$1,RegExp.$1.length===1?e:("00"+e).substr(e.length));}}}return M(g);}function O(W,Z){var X=0,V=Z.length,Y=0;for(;X<V;X++){if(Z[X]==="0"){Y++;}else{if(Z[X]==="#"){if(Y<W){Y++;}}else{continue;}}}return Y;}mstrmojo.num=mstrmojo.provide("mstrmojo.num",{isInt:function D(V){var Y=K(),X=new RegExp("^(-)?[0-9]{1,3}(\\"+Y+"[0-9]{3})*$"),W=new RegExp("^(-)?[0-9]+$");return(String(V).indexOf(Y)&&X.test(V))||W.test(V);},isNumeric:function P(Y,Z){var X=R(),a=K(),W=new RegExp("^(-)?[0-9]{1,3}(\\"+a+"[0-9]{3})*(\\"+X+"[0-9]+)?$"),V=new RegExp("^(-)?[0-9]*(\\"+X+")?[0-9]+$");return(String(Y).indexOf(a)&&W.test(Y))||V.test(Y);},parseInteger:function L(V,W){if(!this.isInt(V)){return Number.NaN;}return parseInt(this.toString(V,true),W);},parseNumeric:function B(V){if(!this.isNumeric(V)){return Number.NaN;}return parseFloat(this.toString(V,true));},inNumericRange:function S(W,X,V){W=this.parseNumeric(W);V=(V!=null)?this.parseNumeric(String(V)):Number.NaN;X=(X!=null)?this.parseNumeric(String(X)):Number.NaN;if(V!=Number.NaN&&(W>V||isNaN(W))){return 1;}if(X!=Number.NaN&&(W<X||isNaN(W))){return -1;}return 0;},convertToUSUnits:function(Y,X,W){var V=Y;X=X||C;switch(parseInt(X,10)){case T.CM:V=parseFloat(this.toString(Y))/2.54+"";break;case T.MM:V=parseFloat(this.toString(Y))/25.4+"";break;case T.PT:V=parseFloat(this.toString(Y))/72+"";break;case T.PC:V=parseFloat(this.toString(Y))/6+"";break;case T.PX:V=parseFloat(this.toString(Y))/G+"";break;}return W?V:this.toLocaleString(V);},convertToLocalUnits:function(Y,X,W){var V;X=X||C;switch(parseInt(X,10)){case T.CM:V=(parseFloat(this.toString(Y))*2.54).toFixed(4)+"";break;case T.MM:V=(parseFloat(this.toString(Y))*25.4).toFixed(4)+"";break;case T.PT:V=(parseFloat(this.toString(Y))*72).toFixed(4)+"";break;case T.PC:V=(parseFloat(this.toString(Y))*6).toFixed(4)+"";break;case T.PX:V=(parseFloat(this.toString(Y))*G)+"";break;default:V=parseFloat(this.toString(Y)).toFixed(4)+"";}return W?V:this.toLocaleString(V);},convertUnits:function(W,X,V){return this.convertToLocalUnits(this.convertToUSUnits(V,W,true),X,true);},toLocaleString:function(V){return(V+"").replace(".",R());},toString:function(X,V){if(V===true){var W=this.getThousandSepRegex();if(W){X=String(X).replace(W,"");}}return String(X).replace(R(),".");},getThousandSepRegex:function(){if(this.thousandSeparatorRegex==null){this.thousandSeparatorRegex=new RegExp(K().replace(/(\W){1}/g,"\\$1"),"g");}return this.thousandSeparatorRegex;},addSeparators:function(X,W){var V=W;if(W=="."||W=="*"||W=="\\"){V="\\"+W;}return X.reverse().replace(/(\d{3})/g,"$1"+W).reverse().replace(new RegExp("^(-)?"+V),"$1");},format:function(Z,Y,c,V){var b="",a=(Y>0)?".":"",W=[];c=(c)?c:"";for(var X=0;X<Y;X++){W.push("0");}W=W.join("");switch(Z){case E.GENERAL:b="0.00";break;case E.PERCENT:b="0"+a+W+"%";break;case E.SCIENTIFIC:b="0"+a+W+"E+00";break;default:b='"'+c+'"#,##0'+a+W;}return this.formatByMask(b,V);},getDecimalLength:function J(X){var V=X.indexOf("."),Y=0;if(V!==-1){var W=X.substr(V+1,X.length).match(/\d+/);if(W&&W.length>0){Y=W[0].length;}}return Y;},formatByMask:function(AB,AR){var y,r;if(isNaN(AR)){y=new Date(AR);if(isNaN(y)){return AR;}r=true;}if(AB==="General"){return String(parseFloat(AR).toFixed(2));}var q=String(AB).split(";"),l="",Y=q[0],h="\u00A4",AK=/"[^"]*"/g,k=(AB&&AB.replace(AK,h).replace(/\[.*\]/g,h))||"",AQ=["m","y","d","h","s"],AG=false;F.forEach(AQ,function(i){AG=AG||k.indexOf(i,0)!==-1;});if(AG){if(window.SSF){l=window.SSF.format(AB,AR);}if(l!==""){return l;}else{return H(r?y:U(AR),AB,AR);}}var AF=Y.indexOf("E+"),e=Y.indexOf("%"),u=Y.match(/\".+?\"/g),w=Y.indexOf("?/?")>-1,z=(AF!=-1)?E.SCIENTIFIC:((e!=-1)?E.PERCENT:((u)?E.CURR:w?E.FRACTION:E.FIXED)),p="",AM="",n=false,W=new String(AR),d=this.parseNumeric(AR)||parseFloat(AR);if(u){if(Y.match(/\[\$.+?\]/g)){for(var f=0;f<u.length;f++){Y=Y.replace(u[f],u[f].substring(1,u[f].length-1));if(u[f].match(/\[\$.+?\]/g)){u[f]=u[f].replace(/\[\$.+?\]/g,u[f][u[f].indexOf("[$")+2]);}}Y=Y.replace(/\[\$.+?\]/g,'"#"'.replace("#",Y[Y.indexOf("[$")+2]));}p=M(Y,u);p=p.replace(Y.replace(/\".+?\"/g,""),h);}if(d<0){W=W.substring(1,W.length);d=-d,n=true;if(q.length>1){var b=q[1].replace(/\[.*\]/,"");AM=M(b.replace(q[0],h));}}var c=function(j,i){return(i)?i.replace(h,j):"-"+j;};if(z==E.FRACTION){var AJ,AI,AP,o=10,x,t=0,AD,AL,Z,X=false,AA;if(AB.indexOf("# ")>-1){X=true;}for(AJ=5;AJ>0;AJ--){AA="/";for(AI=0;AI<AJ;AI++){AA+="?";}if(AB.indexOf(AA)>-1){for(AI=1;AI<AJ;AI++){o*=10;}break;}}if(X){t=Math.floor(Number(d));d-=t;}AL=o/2;AP=-1;AD=d*o;for(AJ=o-1;AJ>=2;AJ--){Z=(AD*AJ)/o;Z=Z-Math.floor(Z);Z=Z*o;if(Math.abs(Z-o)<Z){Z=Math.abs(Z-o);}Z=Z/AJ;if(Z<AL){AL=Z;AP=AJ;}else{if((Z==AL)&&(Z==0)){AL=Z;AP=AJ;}}}x=Math.round(AP*AD/o);for(AJ=AP;AJ>=2;AJ--){if((x%AJ==0)&&(AP%AJ==0)){x=x/AJ;AP=AP/AJ;break;}}if(AP==o){AP=1;x=0;}if(x==0){AP=1;}if(x==AP){if(X){l=""+(t+1);}else{l="1";}}else{if(X&&t>0){if(x==0){l=t;}else{l=t+" "+x+"/"+AP;}}else{if(x==0){l="0";}else{l=x+"/"+AP;}}}if(n){l=c(l,AM);}}else{if(z==E.SCIENTIFIC){if(d!=0){var AS=Math.floor(Math.log(d)/Math.LN10),AH=d/Math.pow(10,AS),AT=Y.substring(0,AF),g=AT.indexOf("."),AC=Y.length-Y.indexOf("E+")-(""+Math.abs(AS)).length-2,AJ,V=AS<0;AS=Math.abs(AS);for(AJ=0;AJ<AC;AJ++){AS="0"+AS;}l+=Number(AH).toFixed((g!=-1)?AT.length-g-1:0);l=((n)?c(l,AM):l)+"E"+(V?"-":"+")+AS;}else{l="0";}}else{if(z==E.PERCENT){Y=Y.substring(0,Y.length-1);W=String(d*100);}var g=Y.indexOf("."),a=0,AO,s=g>=0?Y.substring(0,g):Y;if(s.match(/[#0\?],$/)){d/=1000;W=String(d);}AO=this.getDecimalLength(W);if(g!=-1){a=O(AO,Y.substr(g+1,Y.length));}l=String(parseFloat(W).toFixed(Math.min(a,20)));var AN=l.split(".");var AE=Y.replace(/"[^"]*"/g,"").match(/[#\d]+[^\.\d#]+[#\d]+/);if(AE!==null){AN[0]=this.addSeparators(AN[0],K());}l=AN.join(R());if(z==E.CURR){l=p.replace(h,l);if(l===p&&window.SSF){l=window.SSF.format(AB,AR);}}if(z==E.PERCENT){l+="%";}if(n){l=c(l,AM);}}}return l;},validateFormat:function(V){var W=true,X=String(V).split(";");if(X[1]&&X[1].indexOf(X[0])<0){W=false;}return W;},generateUniqueID:function(V){var X="0123456789ABCDEF".split(""),Y=[];for(var W=0;W<V;W++){Y[W]=X[0|Math.random()*16];}return Y.join("");},countOfDecimals:function(W,X){var V=String(W);return V.length-(V.indexOf(X!==undefined?X:R())+1);}});mstrmojo.num.UNIT=T;mstrmojo.num.UNIT_SYMBOL=A;})();(function(){mstrmojo.requiresCls("mstrmojo.locales");var X=function(){return mstrmojo.locales.datetime;},L=mstrmojo.string;mstrmojo.date=mstrmojo.provide("mstrmojo.date",{monthNumbers:{Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12},REGEXPS:{DATES:{},TIMES:{}},CACHE:{PARSEDATE:{CONTAINS:{},EQUALS:{}},PARSETIME:{CONTAINS:{},EQUALS:{}}},now:Date.now||function D(){return new Date().getTime();},isDate:function Y(b,f,a){var d=this.parseDate(b,a);var e=!!(d&&this.doesDateExist(d.month,d.day,d.year));if(f){if(e){var c=this.formatDateInfo(d,X().DATEOUTPUTFORMAT);if(a){return{match:d.match,formatted:c};}return c;}return null;}return !!e;},formatDateInfo:function R(d,f){if(!f){return"";}var a=d.day,e=d.month,c=d.year;var b=f.replace(/dd/g,this.formatInteger(a,2)).replace(/d/g,Number(a)).replace(/yyyy/g,Number(c)).replace(/yy/g,this.formatInteger(Number(c)%100,2)).replace(/MMM/g,"~~~~").replace(/MM/g,"@@").replace(/M/g,"^").replace(/MMMM/g,X().MONTHNAME_FULL[Number(e)-1]).replace(/\~\~\~\~/g,X().MONTHNAME_SHORT[Number(e)-1]).replace(/\@\@/g,this.formatInteger(e,2)).replace(/\^/g,Number(d.month));return b;},parseDate:function Z(l,f,j){if(l==null){return false;}if(typeof l!=="string"){l=String(l);}l=L.trim(l);var a=this.CACHE.PARSEDATE[f?"CONTAINS":"EQUALS"],c=a[l];if(c||(c===null)){return c;}var b=null;var h;if(j){h=[j];}else{h=[].concat(X().DATEINPUTFORMATS);h.unshift(X().DATEOUTPUTFORMAT);}var d,e;for(d=0,e=h.length;d<e;d++){var g=this._buildRegExp4DateFormat(h[d]),k=g&&l.match(f?g.reContains:g.reEquals);if(k){b={match:k[0],year:g.yearIndex&&this.fourDigitYear(k[g.yearIndex]),day:g.dayIndex&&parseInt(Number(k[g.dayIndex]),10),month:g.monthIndex&&this.numericMonth(k[g.monthIndex])};break;}}a[l]=b;return b;},isTime:function I(b,e,a){var f=this.parseTime(b,a);var d=!!(f&&this.doesTimeExist(f.hour,f.min,f.sec));if(e){if(d){var c=this.formatTimeInfo(f,X().TIMEOUTPUTFORMAT);if(a){return{match:f.match,formatted:c};}return c;}return null;}return !!d;},parseTime:function J(m,f,k){if(m==null){return false;}if(typeof m!=="string"){m=String(m);}m=L.trim(m);var a=this.CACHE.PARSETIME[f?"CONTAINS":"EQUALS"],c=a[m];if(c||(c===null)){return c;}var b=null;var j;if(k){j=[k];}else{j=[].concat(X().TIMEINPUTFORMATS);j.unshift(X().TIMEOUTPUTFORMAT);}var d,e;for(d=0,e=j.length;d<e;d++){var h=this._buildRegExp4TimeFormat(j[d]),l=h&&m.match(f?h.reContains:h.reEquals);if(l){var g=h.ampmIndex&&l[h.ampmIndex];b={match:l[0],hour:h.hourIndex&&this.capitalHour(l[h.hourIndex],g),min:h.minIndex&&parseInt(Number(l[h.minIndex]),10),sec:h.secIndex&&parseInt(Number(l[h.secIndex]),10)};break;}}a[m]=b;return b;},formatTimeInfo:function S(d,b){if(!b){return"";}var c=!(Number(d.hour)%12)?12:(Number(d.hour)%12),a=b.replace(/HH/g,this.formatInteger(d.hour,2)).replace(/H/g,Number(d.hour)).replace(/hh/g,this.formatInteger(c,2)).replace(/h/g,c).replace(/mm/g,this.formatInteger(Number(d.min)||0,2)).replace(/m/g,Number(d.min)||0).replace(/ss/g,this.formatInteger(Number(d.sec)||0,2)).replace(/s/g,Number(d.sec)||0).replace(/a/g,(Number(d.hour)<12)?X().AM_NAME:X().PM_NAME).replace(/tt/g,(Number(d.hour)<12)?X().AM_NAME:X().PM_NAME).replace(/AM\/PM/g,(Number(d.hour)<12)?X().AM_NAME:X().PM_NAME);return a;},doesTimeExist:function G(f,b,e){var d=parseInt(f,10);if(d>=0&&d<=23){var a=parseInt(b,10);if(a>=0&&a<=59){if(!e){return true;}var c=parseInt(e,10);if(c>=0&&c<=59){return true;}}}return false;},capitalHour:function C(a,b){a=parseInt(Number(a),10);if(b&&(b.match(X().AM_NAME)||b.match(/AM/i))){return a%12;}if(b&&(b.match(X().PM_NAME)||b.match(/PM/i))){return 12+(a%12);}return a;},getTimeStamp:function O(){var b=new Date();var a=[b.getMonth()+1,b.getDate(),b.getFullYear()];var e=[b.getHours(),b.getMinutes(),b.getSeconds()];var d=(e[0]<12)?"AM":"PM";e[0]=(e[0]<12)?e[0]:e[0]-12;e[0]=e[0]||12;for(var c=1;c<3;c++){if(e[c]<10){e[c]="0"+e[c];}}return a.join("-")+" "+e.join(":")+" "+d;},isDateAndOrTime:function V(a,b){return this.isDateTime(a,b)||this.isDate(a,b)||this.isTime(a,b);},isDateTime:function B(j,a){var e=this.parseDateAndOrTime(j),h=e&&e.date,d=e&&e.time,g=!!h&&!!d&&this.doesDateExist(h.month,h.day,h.year)&&this.doesTimeExist(d.hour,d.min,d.sec);if(a){if(g){var b=this.formatDateInfo(h,X().DATEOUTPUTFORMAT),c=this.formatTimeInfo(d,X().TIMEOUTPUTFORMAT),i=j.indexOf(h.match),f=j.indexOf(d.match);return(f<i)?c+" "+b:b+" "+c;}return null;}return !!g;},parseDateAndOrTime:function Q(b,a,f){var c=this.parseDate(b,true,a);var d=L.trim((c&&c.match)?b.replace(c.match,""):b),e=this.parseTime(d,false,f);if(!c&&!e){return null;}return{date:c,time:e};},inDateTimeRange:function P(c,e,h){var b=this.parseDateAndOrTime(c),f=b&&b.date,i=b&&b.time;if(!f&&!i){return 0;}if(e!=null){var d=this.parseDateAndOrTime(e);if(f&&d&&d.date){var j=this.compareDate(f,d.date);if(j<0){return -1;}if(j==0){if(i&&d.time&&(this.compareTime(i,d.time)<0)){return -1;}}}}if(h!=null){var a=this.parseDateAndOrTime(h);if(f&&a&&a.date){var g=this.compareDate(f,a.date);if(g>0){return 1;}if(g==0){if(i&&a.time&&(this.compareTime(i,a.time)>0)){return 1;}}}}return 0;},compareDate:function A(c,a){if(c===a){return 0;}var d=typeof c==="string"?this.parseDate(c):c,b=typeof a==="string"?this.parseDate(a):a;if(!d){return -1;}if(!b){return 1;}return(d.year-b.year)||(d.month-b.month)||(d.day-b.day)||0;},compareTime:function K(b,a){if(b===a){return 0;}var d=typeof b==="string"?this.parseTime(b):b,c=typeof a==="string"?this.parseTime(a):a;if(!d){return -1;}if(!c){return 1;}return(d.hour-c.hour)||(d.min-c.min)||(d.sec-c.sec)||0;},compareDateTime:function U(b,a){return this.compareDate(b,a)||this.compareTime(b,a);},compareDateAndOrTime:function E(h,f){if(h===f){return 0;}var b=typeof h==="string"?this.parseDateAndOrTime(h):h,a=typeof f==="string"?this.parseDateAndOrTime(f):f;if(!b){return -1;}if(!a){return 1;}var g=b.date,e=a.date,d=b.time,c=a.time;return this.compareDate(g,e)||this.compareTime(d,c);},_buildRegExp4DateFormat:function N(c){if(!c){return null;}var e=this.REGEXPS.DATES[c];if(!e){if(!this.REGEXPS.MONTHNAME_FULL){this.REGEXPS.MONTHNAME_FULL=X().MONTHNAME_FULL.join("|");this.REGEXPS.MONTHNAME_SHORT=X().MONTHNAME_SHORT.join("|");}e=this.REGEXPS.DATES[c]={};e.formatStr=c;var b=e.reStr=c.replace(/([^M|d|y|\s])/g,"\\$1").replace(/dd/g,"~~~~").replace(/d/g,"(\\d{1,2})").replace(/\~\~\~\~/g,"(\\d\\d)").replace(/yyyy/g,"(\\d\\d\\d\\d)").replace(/yy/g,"(\\d\\d)").replace(/MMMM/g,"@@@@").replace(/MMM/g,"@@@").replace(/MM/g,"(\\d\\d)").replace(/M/g,"(\\d{1,2})").replace("@@@@","("+this.REGEXPS.MONTHNAME_FULL+")").replace("@@@","("+this.REGEXPS.MONTHNAME_SHORT+")");e.reEquals=new RegExp("^"+b+"$");e.reContains=new RegExp("^"+b+"\\b");var f=[{key:"monthIndex",index:c.indexOf("M")},{key:"dayIndex",index:c.indexOf("d")},{key:"yearIndex",index:c.indexOf("y")}];f.sort(function(h,g){return h.index-g.index;});var a=1,d;for(d=0;d<3;d++){e[f[d].key]=f[d].index>-1?a++:null;}}return e;},_buildRegExp4TimeFormat:function F(d){if(!d){return null;}var f=this.REGEXPS.TIMES[d];if(!f){if(!this.REGEXPSTR_AMPM){this.REGEXPSTR_AMPM=[X().AM_NAME,X().PM_NAME,String(X().AM_NAME).toLowerCase(),String(X().PM_NAME).toLowerCase()].join("|");}f=this.REGEXPS.TIMES[d]={};f.formatStr=d;var c=d.replace(/\'\'/g,'"');var g=c.match(/\'(.+?)\'/g);c.replace(/\'(.+?)\'/g,"*");c=c.replace(/([^H|h|m|s|z|Z|a|t|\s|A|P|M|\/])/g,"\\$1").replace(/HH|hh/g,"(\\d\\d)").replace(/H|h/g,"(\\d{1,2})").replace(/mm/g,"(\\d\\d)").replace(/m/g,"(\\d{1,2})").replace(/ss/g,"(\\d\\d)").replace(/s/g,"(\\d{1,2})").replace(/a/g,"("+this.REGEXPSTR_AMPM+")").replace(/AM\/PM/,"("+this.REGEXPSTR_AMPM+")").replace(/tt/g,"("+this.REGEXPSTR_AMPM+")").replace(/z|Z/g,"(.+?)");var e,a;for(e=1,a=(g&&g.length)||0;e<a;e++){c=c.replace(/\*/,g[e]);}c=c.replace(/\"/g,"'");f.reEquals=new RegExp("^"+c+"$");f.reContains=new RegExp(c);var h=[{key:"hourIndex",index:d.search(/h|H/)},{key:"minIndex",index:d.indexOf("m")},{key:"secIndex",index:d.indexOf("s")},{key:"ampmIndex",index:d.search(/tt|a|AM\/PM/)},{key:"zoneIndex",index:d.search(/z|Z/)}];h.sort(function(j,i){return j.index-i.index;});var b=1;for(e=0;e<5;e++){f[h[e].key]=h[e].index>-1?b++:null;}}return f;},doesDateExist:function M(d,a,b){var c=new Date(b,d-1,a);return b==c.getFullYear()&&d==c.getMonth()+1&&a==c.getDate();},fourDigitYear:function T(b){b=parseInt(Number(b),10);if(!isNaN(b)){var a=(X().TWODIGITYEARSTART%100)||0;if(b>=0&&b<=a){b=2000+b;}else{if(b>a&&b<100){b=1900+b;}}}return b;},numericMonth:function W(e){var d=parseInt(Number(e),10),c=mstrmojo.array;if(!isNaN(d)){return d;}var a=(e&&e.length)||0,b=-1;if(a){if(a<=3){b=c.indexOf(X().MONTHNAME_SHORT,e);}if(b===-1){b=c.indexOf(X().MONTHNAME_FULL,e);}}return b+1;},formatInteger:function H(c,b){var f=String(c),e=Math.max(b-f.length,0);if(e>0){var a=[f],d;for(d=1;d<=e;d++){a.push("0");}f=a.reverse().join("");}return f;},getFirstDateOfMonth:function(b,a){return new Date(b,a-1,1);},getDateObject:function(g,a,f,c,e,b){g=g||0;a=a||1;f=f||1;c=c||0;e=e||0;b=b||0;return new Date(g,a-1,f,c,e,b);},getDateFromDateInfo:function(a){return this.getDateObject(a.date&&a.date.year,a.date&&a.date.month,a.date&&a.date.day,a.time&&a.time.hour,a.time&&a.time.min,a.time&&a.time.sec);},getDateJson:function(a){return{year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate(),hour:a.getHours(),min:a.getMinutes(),sec:a.getSeconds()};},isLeapYear:function(a){return !(a%400)||(!(a%4)&&!!(a%100));},getDaysOfMonth:function(c,a){var b=[31,28,31,30,31,30,31,31,30,31,30,31];if(a==2&&this.isLeapYear(c)){return 29;}return b[a-1];},getPreMonth:function(b,a){if(a===1){return{y:b-1,m:12};}return{y:b,m:a-1};},getNextMonth:function(b,a){if(a===12){return{y:b+1,m:1};}return{y:b,m:a+1};}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.locales");var c=mstrmojo.array,P=mstrmojo.meta.TP,G=mstrmojo.meta.STP,O=mstrmojo.hash,F={ANDOR:14,MQ:10,MC:12,AQ:2,AL:6,AC:9,AE:5,F:13,R:21,B:20,XML:1,RLS:15},B={};var W;for(W in F){B[F[W]]=true;}var a={};a[F.AQ]="a";a[F.AL]="a";a[F.AC]="a";a[F.AE]="a";a[F.MQ]="m";a[F.MC]="m";a[F.F]="f";a[F.R]="r";a[F.XML]="p";var K={};K[F.MQ]=["not","m","fn","fnt","cs","dmy","idcsi"];K[F.MC]=["not","m","fn","fnt","m2","m3","p","dmy","idcsi"];K[F.AE]=["not","a","fn","es","a2","fm2","p"];K[F.AQ]=["not","a","fm","fn","cs"];K[F.AL]=["not","a","fm","fn","cs"];K[F.AC]=["not","a","fm","a2","fm2","a3","fm3","fn","cs"];K[F.R]=["not","r"];K[F.F]=["not","f"];K[F.XML]=["not","n","p"];var M={};M[F.MQ]="METRIC_FNS";M[F.MC]="METRIC_FNS";M[F.AQ]="FORM_FNS";M[F.AL]="FORM_FNS";M[F.AC]="FORM_FNS";M[F.AE]="ELEM_FNS";var N={FILTER:1,REPORT:3,METRIC:4,FOLDER:8,PROMPT:10,FUNCTION:11,ATTR:12,FACT:13,DIM:14,FORM:21,ROLE:43,CONS:47},b={FILTER:256,CUSTOMGROUP:257,PROMPT:2560,PROMPT_BOOLEAN:2561,PROMPT_LONG:2562,PROMPT_STRING:2563,PROMPT_DOUBLE:2564,PROMPT_DATE:2565,PROMPT_OBJECTS:2566,PROMPT_ELEMENTS:2567,PROMPT_EXPRESSION:2568,PROMPT_EXPRESSION_DRAFT:2569,PROMPT_DIMTY:2570,PROMPT_BIGDECIMAL:2571,REPORT_GRID:768,REPORT_GRAPH:769,REPORT_ENGINE:770,REPORT_TEXT:771,REPORT_DATAMART:772,REPORT_BASE:773,REPORT_GRIDGRAPH:774,REPORT_NONINTERACTIVE:775,REPORT_CUBE:776,REPORT_EMMACUBE:779,CONS:12032,NDE:12033},T={a:N.ATTR,a2:N.ATTR,m:N.METRIC,m2:N.METRIC,r:N.REPORT,f:N.FILTER,p:N.PROMPT},U={f:b.FILTER};var V={};V[F.MQ]=N.METRIC;V[F.MC]=N.METRIC;V[F.AQ]=N.ATTR;V[F.AL]=N.ATTR;V[F.AC]=N.ATTR;V[F.AE]=N.ATTR;V[F.F]=N.FILTER;V[F.R]=N.REPORT;var J=function(d){var H=d.length,g={},e;for(e=0;e<H;e++){var h=d[e];g[h.did]=h.n;}return g;},E=function(e){var H=e.length,f;for(f=0;f<H;f++){var d=e[f];if("tp" in d){d.t=d.tp;}}return e;},X=function(e,g){var H=e.length,f;for(f=0;f<H;f++){var d=e[f];if("tp" in d){if(g){d.t=g;}else{delete d.t;}}}return e;},Z=function(d,f){if(!f){f=[];}f.length=0;var e,H;for(e=0,H=d.length;e<H;e++){f[e]=d[e];}return f;},L={0:[{did:"1,76"},{did:"1,79"},{did:"1,77"},{did:"1,80"},{did:"1,78"},{did:"1,81"},{did:"1,18"},{did:"1,43"}],1:[{did:"2,1"},{did:"2,2"},{did:"3,1"},{did:"3,2"}]};var R={0:[{did:"1,22"},{did:"1,57"}]};mstrmojo.expr=mstrmojo.provide("mstrmojo.expr",{ET:F,ETs:B,ET2TGT:a,ET2COND:K,ET2TP:V,FN:{EQUAL:6,NOT_EQUAL:7,GREATER:8,LESS:9,GREATER_EQUAL:10,LESS_EQUAL:11,IN_LIST:22,NOT_IN_LIST:57,BETWEEN:17,NOT_BETWEEN:44,IS_NULL:54,IS_NOT_NULL:55,AND:19,OR:20,NOT:21,SEARCH:158},FN_MRP:{BETWEEN:3,EXCLUDE_TOP:4,EXCLUDE_BOTTOM:5,BETWEEN_DESCENDING:13},FNT:{DEF:1,RANK:2,PER:3},FN_SEP:",",TP:N,STP:b,DMY_TP:{ATTR:-1,DIM:-2},DTP:{UNKNOWN:-1,INTEGER:1,UNSIGNED:2,NUMERIC:3,DECIMAL:4,REAL:5,DOUBLE:6,FLOAT:7,CHAR:8,VARCHAR:9,LONGVARCHAR:10,BINARY:11,VARBIN:12,LONGVARBIN:13,DATE:14,TIME:15,TIMESTAMP:16,SHORT:21,LONG:22,MBCHAR:23,BOOLEAN:24,PATTERN:25,BIGDECIMAL:30},BFTP:{RESERVED:0,HIDDEN:-1,DATETIME:1,NUMBER:2,TEXT:3,PICTURE:4,URL:5,EMAIL:6,TAG:7,DATE:8,TIME:9,SYMBOL:10,BIGDECIMAL:11,PHONENUMBER:12},METRIC_DTP:3,FN_DTP:{NUM:0,CHAR:1,DATE:2},DTP2PROMPT_STP:{"-1":b.PROMPT,1:b.PROMPT_LONG,2:b.PROMPT_LONG,3:b.PROMPT_LONG,4:b.PROMPT_DOUBLE,5:b.PROMPT_DOUBLE,6:b.PROMPT_DOUBLE,7:b.PROMPT_DOUBLE,8:b.PROMPT_STRING,9:b.PROMPT_STRING,10:b.PROMPT_STRING,14:b.PROMPT_DATE,15:b.PROMPT_DATE,16:b.PROMPT_DATE,21:b.PROMPT_LONG,22:b.PROMPT_LONG,23:b.PROMPT_STRING,24:b.PROMPT_BOOLEAN,30:b.PROMPT_BIGDECIMAL},DTP2FN_DTP:{"-1":0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:1,9:1,10:1,11:0,12:0,13:0,14:0,15:0,16:0,21:0,22:0,23:1,24:0,25:1,30:0,34:0},fnCstCount:function A(e,d){var g=this.FN,h=this.FN_MRP,H=this.FNT;if(d===H.DEF||d===undefined){switch(e){case g.BETWEEN:case g.NOT_BETWEEN:return 2;case g.IS_NULL:case g.IS_NOT_NULL:return 0;}}else{if(d===H.PER||d===H.RANK){switch(e){case h.BETWEEN:case h.BETWEEN_DESCENDING:return 2;}}}return 1;},fn_List:function S(d,H){var e=this.FN;return d==e.IN_LIST||d==e.NOT_IN_LIST;},fn_AC_MC:function Y(d,H){var e=this.FN;return(d==e.EQUAL)||(d==e.NOT_EQUAL)||(d==e.GREATER)||(d==e.LESS)||(d==e.GREATER_EQUAL)||(d==e.LESS_EQUAL);},fnName:function Q(h,g,d,f){var H=this[M[h]];if(H&&H.constructor===Object){H=H[this.DTP2FN_DTP[f]]||H["*"];}if(h===F.MQ){H=H.concat(mstrmojo.locales.expression.MetricRP);}var e=c.find(H,"did",(d||1)+this.FN_SEP+g);if(e>-1){return H[e].n;}return"";},findTargets:function I(n,f,p){if(!p){p={};}if(n){var m;for(m in T){var x=n[m];if(x){if(!x[P]){x[P]=T[m];}if(!x[G]&&U[m]){x[G]=U[m];}p[x[f]]=x;}}if(n.dmy){var j=this.TP.ATTR,q=this.DMY_TP.ATTR,e=n.dmy.uts,w,d;for(w=0,d=(e&&e.length)||0;w<d;w++){var l=e[w];if(l&&l.utp===q){var g=l.utgt;if(!g.t){g.t=j;}p[g[f]]=g;}}}var H=n.nds,o,s;for(o=0,s=(H&&H.length)||0;o<s;o++){this.findTargets(H[o],f,p);}var r=n.cs,v=r&&r.length;if(v){for(o=0;o<v;o++){this.findTargets(r[o],f,p);}}}return p;},onLocaleUpdated:function(){var d=mstrmojo.locales.expression,H=mstrmojo.expr;H.BRANCH_FNS=O.copy(J(d.BranchQual),H.BRANCH_FNS);H.ELEM_FNS=Z(X(d.Element,"fn"),H.ELEM_FNS);H.METRIC_FNS={"*":X(c.filter(d.Metric.concat(d.MetricRP),function(e){return e.did&&(c.find(R["0"],"did",e.did)<0);}))};H.FORM_FNS={0:X(c.filter(d.Attribute,function(e){return e.did&&(c.find(L["0"],"did",e.did)<0);})),1:X(c.filter(d.Attribute,function(e){return e.did&&(c.find(L["1"],"did",e.did)<0);})),2:X(c.filter(d.Attribute,function(e){return e.did&&(c.find(L["0"],"did",e.did)<0)&&(c.find(L["1"],"did",e.did)<0);}))};H.DIMTYLEVELS=Z(X(d.DimtyLevels),H.DIMTYLEVELS);},getSortedObjectsByTypeGroup:function D(f){var H=0,d=1,e=2;function g(h){switch(h.t){case N.METRIC:return d;case N.ATTR:case N.DIM:case N.CONS:return H;case N.FILTER:return h.st===b.CUSTOMGROUP?H:e;default:return e;}}return f.slice(0).sort(function(l,k){var m=g(l)-g(k);if(m){return m;}var j=l.n.toUpperCase(),i=k.n.toUpperCase(),h=j.localeCompare(i);if(h){return h;}return l.n.localeCompare(k.n);});},mapBaseFormTypeToDataType:function C(e){e=parseInt(e);if(e===NaN){return -1;}var d=this.BFTP,H=this.DTP;switch(e){case d.DATETIME:return H.TIMESTAMP;case d.DATE:return H.DATE;case d.TIME:return H.TIME;case d.NUMBER:return H.REAL;case d.TEXT:return H.CHAR;case d.BIGDECIMAL:return H.BIGDECIMAL;default:return H.CHAR;}}});mstrmojo.expr.onLocaleUpdated();}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.string","mstrmojo.models.template.Titles","mstrmojo.models.template.MetricValue","mstrmojo.models.template.Headers","mstrmojo.models.datasets.DataInterface");var O=mstrmojo.array,U=mstrmojo.hash,D=mstrmojo.string,E=mstrmojo.models.datasets.DataInterface,g=D.decodeHtmlString;var G=-1,F=1,W=2,P=3;var N=1,H=2,c=3;function b(j){var k={};U.forEach(j,function(n,m){var l=[];O.forEach(n,function(o){l.push({fillColor:o.fillclr,text:o.n});});k[m]=l;});return k;}function i(n){var x=this.getTotalRows(),p=this.data,s=[],u=p.gts.col[0],m=u?u.es:[],w=m.length,q=0;n=U.copy(n,{minAttribute:1,minMetric:1});if(x<n.minAttribute||w<n.minMetric){throw"Error";}do{var l=this.getRowHeaders(q),o,k={},t=l.size();for(o=0;o<t;o++){while(o<t&&l.getHeader(o).getFormIndex()!==undefined){o++;}if(o<t){var r=l.getHeader(o);k[r.t.n]=r.getName();}}for(o=0;o<m.length;o++){var v=this.getMetricValue(q,o).value;k[m[o].n]={v:v.v,rv:v.rv};}s.push(k);q++;}while(q<x);return s;}function K(k){var j=[],l=this.data.gts.row;O.forEach(l,function(n,m){O.forEach(k,function(o){if(n.id===o.id){j[m]=true;}});});return j;}function Q(AM){var u=this.getTotalRows(),AO=this.data,t=[],w=AO.gts.col[0],p=w?w.es:[],AD=p.length,s,AH=0;AM=U.copy(AM,{minAttribute:1,minMetric:1,colorByInfo:[],hasTitleName:false,hasSelection:false,needDecode:false});if(u<AM.minAttribute||AD<AM.minMetric){throw"Error";}var k=AM.needDecode,AJ=AM.hasTitleName,AI=AM.hasSelection,AP=AM.hasThreshold,AB=AM.colorByInfo;var AN=AP?b(AO.th):undefined;s=K.call(this,AB);do{var m=this.getRowHeaders(AH),o={},AF,AE=[],AL=AB.length,l={headers:[],values:[],colorInfo:[]};for(AF=0;AF<m.size();AF++){var AG=m.getHeader(AF),y=AG.getName(),AR=AG.t,r={name:k?g(y):y};if(AJ){var AQ=AR&&AR.n;r.tname=k?g(AQ):AQ;}if(AI){var AA=AR&&AR.id,v=AG.getElementId();r.attributeSelector={n:y,tid:AA,eid:v,isSelectAttr:true};o[AA]=[{n:y,id:v}];}if(AL&&s[AF]===true){var x=AG.getElementId();AE.push(x);}l.headers.push(r);}if(AL){l.colorInfo=AE;}for(AF=0;AF<p.length;AF++){var AC=this.getMetricValue(AH,AF).value,AK={v:AC.v,rv:AC.rv};if(AP){var q=AN[AF],n=q&&q[AC.ti];if(n){AK.threshold=n;}}if(AJ){var z=this.getColTitles().titles[0].es[AF].n;AK.name=k?g(z):z;}l.values.push(AK);}if(AI){l.metricSelector=o;}t.push(l);AH++;}while(AH<u);return t;}function A(AC){var AF=this.data,o=this.getTotalRows(),p=AF.gts.col[0],m=p?p.es:[],s=m.length,t={},u=[],w,x=0,v;AC=U.copy(AC,{minAttribute:1,minMetric:1,descKey:"name",childrenKey:"children",hasTitleName:false,hasSelection:false,needDecode:false,nestedLevel:undefined,colorByInfo:[]});if(o<AC.minAttribute||s<AC.minMetric){throw"Error";}var n=AC.descKey,q=AC.childrenKey,k=AC.needDecode,z=AC.hasTitleName,y=AC.hasSelection,l=AC.nestedLevel||0,AE=AC.hasThreshold,r=AC.colorByInfo,AA=r.length;var AD=AE?b(AF.th):undefined;t[n]="root";w=K.call(this,r);var AB=function(AW,AG,AN,AP,AJ){var AK=(AW[q]=AW[q]||[]),AX=AG.getHeader(AN),AZ=AX&&AX.t,AU=AZ&&AZ.id,AS=AX&&AX.getName(),AO=AG&&AG.headers&&AG.headers.length||0,AY,AR=AX&&AX.getElementId(),j=O.filterOne(AK,function(Ab){return(Ab._eid===AR);});AY=O.some(w,function(Ac,Ab){return Ac&&((AN-Ab)%AO===0);});if(AA&&AY){u.push(AR);}if(!j||(AN===l-1)){j={_eid:AR};var AM=(AX!==undefined);if(AM){j[n]=k?g(AS):AS;}if(z&&AM){var Aa=AZ&&AZ.n;j.tname=k?g(Aa):Aa;}if(y&&AM){j.attributeSelector={n:AS,tid:AU,eid:AR,isSelectAttr:true};}AK.push(j);}if(y&&AM){AJ[AU]=[{n:AS,id:AR}];}if(AN<AG.size()-1&&(!l||(AN<l-1))){AB.call(this,j,AG,AN+1,AP,AJ);}else{var AQ=this.getMetricValue(AP,0).value;if(AQ){j.value=AQ.rv;j.formattedValue=AQ.v;}if(AA){j.colorInfo=u;u=[];}j.values=[];for(v=0;v<m.length;v++){var AV=this.getMetricValue(AP,v).value,AH={v:AV.v,rv:AV.rv};if(AE){var AL=AD[v],AI=AL&&AL[AV.ti];if(AI){AH.threshold=AI;}}if(z){var AT=this.getColTitles().titles[0].es[v].n;AH[n]=k?g(AT):AT;}j.values.push(AH);}if(y){j.metricSelector=AJ;}}};do{AB.call(this,t,this.getRowHeaders(x),0,x,{});x++;}while(x<o);return t;}function C(j,k){var l=[];O.forEach((j.row||[]).concat(j.col||[]),function(m){if((m.id===k)&&(m.fs)){l=l.concat(m.fs);}});return l;}mstrmojo.models.template.DataInterface=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.models.template.DataInterface",data:null,init:function(j){this.data=j;},getRowTitles:function(){return new mstrmojo.models.template.Titles({data:this.data,isRow:true});},getColTitles:function(){return new mstrmojo.models.template.Titles({data:this.data,isRow:false});},getTotalRows:function V(){if(this.data.eg){return 0;}var l=this.data,k=l&&l.ghs,j=k&&k.rhs,m=j&&j.items;return(m&&m.length)||0;},getTotalColHeaderRows:function T(){var j=this.data.ghs.chs.items;return(j&&j.length)||0;},getTotalCols:function Y(){return this.getColHeaders(0).size();},getRowHeaders:function J(j){return new mstrmojo.models.template.Headers({data:this.data,i:j,isRow:true});},getColHeaders:function a(j){return new mstrmojo.models.template.Headers({data:this.data,i:j,isRow:false});},getMetricValue:function I(l,j){var k=this.data;return new mstrmojo.models.template.MetricValue({data:k,value:k.gvs.items&&k.gvs.items[l].items[j]});},getColumnHeaderCount:function M(){var j=this.data.gvs.items;return j?j[0].items.length:0;},getCSSString:function f(){return this.data.cssString;},isEmpty:function S(){var j=this.data.gsi;return !j||(!j.rows.length&&!j.cols.length&&!j.mx.length);},getAggregatePadding:function e(){var k=this.data.gsi&&this.data.gsi.fmts,l=function(n,m){return n+m;},j=function(n){var m=0;return["ch","rh","va"].map(function(o){var p=false;return n.map(function(q){if(k[o]&&k[o].hasOwnProperty(q)){if(!p){p=true;m++;}return k[o][q];}return 0;}).reduce(l)/n.length;}).reduce(l)/(m||1);};if(!k){return null;}return{v:j(["tp","bp"]),h:j(["rp","lp"])};},getColResizeScenario:function B(){var j=this.data;if(j.afw){return F;}else{if(j.afc===false){return P;}else{return W;}}},getColResizeInfo:function L(o){var p=this.data,m={v:this.getColResizeScenario(),widths:null};var q=p.gsi,k=p.gts||{},t=[],n=p.twm||{},r=n.top||[],s=n.bottom||[],l=0,j=function(v,u){if(q){q[v].every(function(x){var y=x.did,z=C(k,y),w=E.getFormsByAttrId(y,o);(z.length?z:[]).forEach(function(AC,AB){var AD=w[O.find(w,"fid",AC.id)],AA=(s&&s[l])||{};t.push({n:x.n+(w.length?(" - "+AD.fnm):""),did:y,depth:AB+1,t:x.t||4,width:parseInt(AA.w||0,10),widthModel:{top:(r&&r[l])||{},bottom:AA}});l++;});return !u;});}};j("rows",false);j("mx",q.tma===1);m.widths=t;return m;},getRowResizeScenario:function R(){return !!this.data.rh?P:W;},getRowResizeInfo:function X(){var k=this.data,j=k.rh;return{v:this.getRowResizeScenario(),height:(j===undefined||j==="")?k.xrh:j};},getColumnHeaderData:function h(){var p=this.data,u=p.gts,t=p.gts.rec,v=[],k=[],r=u.row;O.forEach(r,function(x){var w=x.fs,y=x.otp===G;if(w&&w.length>1){O.forEach(w,function(){v.push(x);});}else{v.push(x);}if(y){k=x.es;}});var o=u.col;if(o&&o.length>0){var n=p.ghs,l=n.chs,j=l.items,s=j[j.length-1].items,m=function m(w){var x=w.pi,y=x&&x.ci,z=x&&x.ri;if(w.mix!==undefined){return w;}if(z===undefined||y===undefined){return ;}return m(j[z].items[y]);};O.forEach(o,function(w){var x=w.otp===G;if((x&&(!t||r.length===0))){v.push(w);}if(x){k=w.es;}});var q=v.length;O.forEach(s,function(w){delete w._ridx;});if(k.length>0){O.forEach(s,function(z){var w=m(z);var AA=w?w.mix:(z.pi?0:z.idx),y=k[AA]||k[0];var x=y._ridx=y._ridx||[];if(x.length===0){O.forEach(s,function(AC,AD){var AB=m(AC);if(!w||AB.mix===AA){x.push(q+AD);}});}v.push(y);});}}else{if(k.length>0){v.push(k[0]);}}return v;},getUnitById:function Z(l){var k=this.data.gsi,j=null;[k.rows,k.cols,k.mx].some(function(m,n){if(n===2){n=-2;}m.some(function(o,p){if(o.did===l){j={axis:n+1,depth:p+1,unit:o};}return !!j;});return !!j;});return j;},getRawData:function d(j,k){switch(j){case H:return i.call(this,k);case c:return Q.call(this,k);}return A.call(this,k);}});mstrmojo.models.template.DataInterface.inflateGridData=function(l){var m=l.gvs,k=l.ghs;if(l.egt===undefined&&(l.eg===undefined||l.eg===null)&&!!m&&U.isEmpty(m)){var j={v:"",rv:""},n={items:(k.chs.cws||[0]).map(function(){return j;})};m.items=k.rhs.items?k.rhs.items.map(function(){return n;}):[];m.show=true;}};mstrmojo.models.template.DataInterface.ENUM_GRID_RESIZE={FIT_TO_WINDOW:F,FIT_TO_CONTENTS:W,FIXED:P};mstrmojo.models.template.DataInterface.ENUM_RAW_DATA_FORMAT={TREE:N,ROWS:H,ROWS_ADV:c};}());(function(){var D={};var B="XHRServerTransport";mstrmojo.XHRServerTransport={serverRequest:function A(I,G,F){var E=mstrmojo.all[I],H=D[G]=new mstrmojo.SimpleXHR();$MAPF(true,B,"transportRequest");if(F.params&&!F.params.sessionState&&mstrConfig&&mstrConfig.isAddSessionState&&mstrApp&&mstrApp.sessionState){F.params.sessionState=mstrApp.sessionState;}H.request(F.config.method||"POST",F.taskURL||mstrConfig.taskURL,{success:function(J){if(J.mstrerr){J.code=J.mstrerr.code;J.message=J.mstrerr.message;}E.response(G,true,J);},failure:function(J){E.response(G,false,{code:J.getResponseHeader("X-MSTR-TaskErrorCode"),message:J.getResponseHeader("X-MSTR-TaskFailureMsg")});},complete:function(){delete D[G];},textResponse:F.callback.textResponse},F.params);},cancelRequest:function C(F){var G=D[F],E=false;if(G){E=G.cancel();delete D[F];}$MAPF(false,B,"transportRequest");return E;}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.QueuedXHR");var F=mstrmojo.hash;function J(K,L){return function(){if(K[L]){K[L]();}};}var B=[];function H(L){var K;switch(L.cacheLevel){case mstrmojo.AjaxCall.CACHELEVEL_LOCAL:if(L._cache==null){L._cache=[];}K=L._cache;break;default:if(B==null){B=[];}K=B;break;}return K;}function E(N){var M=H(N);var P={cache:M,idx:-1},O=N.params;if("xts" in O){delete O.xts;}for(var L=0,K=M.length;L<K;L++){var Q=M[L];if(Q&&F.equals(Q.url,N.url)&&F.equals(Q.params,O)){P.idx=L;break;}}return P;}function C(L){var K=H(L),M=F.copy(L.params);delete M.xts;K.push({url:L.url,params:M,res:F.copy(L.response)});}function D(K){var L=E(K);if(L&&L.idx>=0){K.response=L.cache[L.idx].res;return true;}return false;}mstrmojo.AjaxCall=mstrmojo.declare(mstrmojo.QueuedXHR,null,{scriptClass:"mstrmojo.AjaxCall",method:"POST",url:"",params:null,onsuccess:null,onerr:null,oncomplete:null,oncancel:null,readCache:false,writeCache:false,cacheLevel:"",_cache:null,useQueue:false,init:function I(K){this._super(K);F.copy(K,this);},send:function A(){var K=this;if(this.readCache&&D(this)){this.onsuccess();return ;}this.request(this.method,this.url,{success:function(){if(K.writeCache){C(K);}if(K&&K.onsuccess){K.onsuccess();}},failure:J(K,"onerr"),complete:J(K,"oncomplete")},this.params,!this.useQueue);},cancel:function G(){this._super();if(this.oncancel){this.oncancel();}}});mstrmojo.AjaxCall.CACHELEVEL_GLOBAL="global";mstrmojo.AjaxCall.CACHELEVEL_LOCAL="local";})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.string","mstrmojo.StringBuffer");mstrmojo._XMLNode=mstrmojo.declare(null,null,{nodeName:null,init:function N(O){mstrmojo.hash.copy(O,this);},addChild:function F(P){var O=new mstrmojo._XMLNode({nodeName:P});return this.appendNode(O);},appendNode:function J(O){if(O){if(!this.children){this.children=[];}this.children.push(O);O.parent=this;}return O;},addAttribute:function L(O,P){if(O!=null){if(!this.attributes){this.attributes={};}this.attributes[O]=P;}return this;},addText:function M(O){this._addToStringMember("text",O);return this;},addRawXML:function K(O){this._addToStringMember("rawXML",O);return this;},getXMLString:function I(){var O=new mstrmojo.StringBuffer();this.buildXMLString(O);return O.toString();},buildXMLString:function E(O){O=O||new mstrmojo.StringBuffer();O.append("<").append(this.nodeName).append(" ");this._buildAttributesXMLString(O).append(">").append(((this.text!=null)?this._escapeString(this.text):"")).append(((this.rawXML!=null)?this.rawXML:""));this._buildChildrenXMLString(O).append("</").append(this.nodeName).append(">");return O;},_buildAttributesXMLString:function D(O){var Q=this.attributes;if(Q){var R;for(R in Q){if(Q[R]!=null){var P=String(Q[R]);switch(R){case"et":case"nt":case"dmt":case"ddt":case"fnt":case"tp":case"stp":break;default:P=this._escapeString(P);}O.append(R+'="'+P+'" ');}}}return O;},_escapeString:function C(O){return mstrmojo.string.escape4HTMLText(O);},_buildChildrenXMLString:function H(P){var R=this.children;var O=R&&R.length;if(O){var Q;for(Q=0;Q<O;Q++){if(R[Q]&&R[Q].buildXMLString){R[Q].buildXMLString(P);}}}return P;},_addToStringMember:function A(O,Q){var P=this[O];if(P==null){this[O]=Q;}else{this[O]=P+Q;}}});mstrmojo.XMLBuilder=mstrmojo.declare(null,null,{root:null,curNode:null,addChild:function F(O){if(!this.root){this.currentNode=this.root=new mstrmojo._XMLNode({nodeName:O});}else{this.currentNode=this.currentNode.addChild(O);}return this;},appendNode:function J(O){if(!this.root){this.currentNode=this.root=O;}else{this.currentNode=this.currentNode.appendNode(O);}return this;},addAttribute:function L(O,P){if(this.currentNode){this.currentNode.addAttribute(O,P);}else{alert("no root node");}return this;},addText:function M(O){if(this.currentNode){this.currentNode.addText(O);}else{alert("no root node");}return this;},addRawXML:function K(O){if(this.currentNode){this.currentNode.addRawXML(O);}else{alert("no root node");}return this;},closeElement:function G(){this.currentNode=this.currentNode.parent;},toString:function B(){if(this.root){return this.root.getXMLString();}return"";}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.hash");var M=mstrmojo.string,L=mstrmojo.hash,E=mstrmojo.dom;var R=mstrmojo.usesFrames?null:document.createElement("span");var J=/mstrAttach:([\w,]+)/g;var Q;function U(a){if(Q===undefined){Q=(mstrApp!==undefined&&mstrApp.isTouchApp&&mstrApp.isTouchApp())||false;}return a.replace(J,function Z(g,j){var c=j.split(","),d=[],b=c.length,f;for(f=0;f<b;f++){var h=c[f];if(h){if(Q){if(h.indexOf("mouse")>-1){continue;}else{if(h==="click"){h="touchend";}}}d.push("on"+h+"=\"mstrmojo.dom.captureDomEvent('{@id}','"+h+"', self, event)\"");}}return d.join(" ");});}var N="preBuildRendering",C="buildRendering",B="postBuildRendering";function X(b){var a=b.markupString;if(a.match(/mstrAttach:/)){a=U(a);if(b.markupString===b.constructor.prototype.markupString){b.constructor.prototype.markupString=a;}}var Z=M.apply(a,b);if(Z){if(mstrmojo.usesFrames){var c=(b.domNode&&b.domNode.ownerDocument)||window.document;if(!R||R.ownerDocument!==c){R=c.createElement("span");}}R.innerHTML=Z;var e=R.removeChild(R.firstChild);e.mstrmojoId=b.id;return e;}return null;}function A(b){var a=b.markupSlots,Z,c;if(a){Z={};for(c in a){Z[c]=a[c].call(b);}}return Z;}mstrmojo._HasMarkup=mstrmojo.provide("mstrmojo._HasMarkup",{markupString:null,markupMethods:null,markupSlots:null,onRender:mstrmojo.emptyFn,onUnRender:mstrmojo.emptyFn,render:function Y(){if((this[N]&&this[N]()===false)||(this[C]()===false)||(this[B]&&this[B]()===false)){return false;}this.hasRendered=!!this.domNode;this.onRender();var Z="renderComplete";if(mstrmojo.publisher.hasSubs(this.id,Z)){this.raiseEvent({name:Z});}return true;},buildDom:function T(){return X(this);},postBuildDom:null,preBuildRendering:mstrmojo.emptyFn,buildRendering:function F(){var Z=this.domNode,a=this.buildDom();this.domNode=a;if(this.postBuildDom){this.postBuildDom();}if(this.slotNames){this.removeSlots(this.slotNames);}this.addSlots(A(this));this.paint();if(a){var d=Z;if(!d){d=this.placeholder;if(d){if(typeof d==="string"){d=document.getElementById(d);}delete this.placeholder;}}if(d){E.replace(d,a);}}var b="onchildRenderingChange",c=this.parent;if(c&&c[b]){c[b](this);}return true;},postBuildRendering:mstrmojo.emptyFn,unrender:function S(b){if(this.hasRendered){if(!b){try{var Z=this.domNode;if(Z.parentNode){Z.parentNode.removeChild(Z);}if(mstrmojo.dom.isIE&&Z.outerHTML!=="undefined"){Z.outerHTML="";}}catch(a){}}this.domNode=null;this.removeSlots(this.slotNames);this.hasRendered=false;this.onUnRender();}},paint:function K(){var a=this.markupMethods;if(!a){return ;}var d=this,e=function(i){var h=a[i];if(h){try{h.apply(d,[true]);}catch(g){throw new Error(["Error in markup method.","Script class: "+d.scriptClass,"Widget id: "+d.id,"Method name: "+i,"Err: "+g.message].join("\n\n"));}}};var c=a.sequence,Z,b,f;if(c){Z=c.length||0;for(b=0;b<Z;b++){e(c[b]);}}else{for(f in a){e(f);}}},redraw:function P(){return false;},refresh:function D(Z){if(this.hasRendered){if(this.redraw()!==true){var a=this.domNode;this.unrender(true);this.placeholder=a;if(Z){Z();}this.render();}}},set:function I(c,Z){this._super(c,Z);if(this.domNode){var a=this.markupMethods,b=a&&a["on"+c+"Change"];if(b){b.apply(this);}}return this;},slotNames:null,addSlots:function G(a){var Z=this.slotNames,b;if(!Z){Z={};this.slotNames=Z;}for(b in a){this[b]=a[b];Z[b]=true;}},removeSlots:function H(Z){if(Z){var a=this.slotNames,b;for(b in Z){delete this[b];if(a){delete a[b];}}}},captureDomEvent:function W(b,Z,c,a){if(this.enabled!==false){this.raiseEvent(mstrmojo._HasMarkup.newDomEvent(b,Z,c||Z.event,a));}},playEffect:function V(a){var Z=this[a];if(Z&&Z.constructor===Object){Z=mstrmojo.insert(mstrmojo.hash.clone(Z));Z.widget=this;this[a]=Z;}if(Z){Z.play();}}});mstrmojo._HasMarkup.addMarkupMethods=function O(a,Z){a.prototype.markupMethods=L.copy(Z,L.copy(a.prototype.markupMethods));};mstrmojo._HasMarkup.MSTRDomEventType=null;mstrmojo._HasMarkup.newDomEvent=function(c,Z,b,a){return{name:c,hWin:Z,e:b,config:a,ctrlKey:E.ctrlKey(Z,b),shiftKey:E.shiftKey(Z,b),metaKey:E.isMetaKey(Z,b),cancel:function(){E.stopPropogation(Z,b);},preventDefault:function(){E.preventDefault(Z,b);},getTarget:function(){return E.eventTarget(Z,b);}};};}());(function(){mstrmojo.requiresCls("mstrmojo.string");var D=mstrmojo.string,F=1;mstrmojo.ListBuilder=mstrmojo.provide("mstrmojo.ListBuilder",{newContext:function E(G){var I=G.itemMarkupFunction;if(!I){var H=G.itemMarkup||(G.itemField&&'<div class="mstrmojo-text">{@'+G.itemField+"}</div>");I=H?function(K,J,L){return D.apply(H,K);}:null;}return{itemStatus:[],itemFunc:I};},build:function A(I,H,J,G){H.itemStatus[G]=F;return H.itemFunc(J,G,I);},onadd:function B(I,G,H){if(G){mstrmojo.array.insert(G.itemStatus,H.index,new Array(H.value.length));}},onremove:function C(I,G,H){if(G){G.itemStatus.splice(H.index,H.value.length);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.string");var T=mstrmojo.dom,K=mstrmojo.string,X=mstrmojo.array;mstrmojo.css=mstrmojo.provide("mstrmojo.css",{DISPLAY_TABLE:T.isNSIE?"block":"table",DISPLAY_CELL:T.isNSIE?"block":"table-cell",MINHEIGHT:T.isIE6?"height":"minHeight",addClass:function L(e,d){if(e){if(d.constructor!==Array){d=[d];}var Z=e.className||"",g=" "+Z+" ",a=false,Y=d.length,b;for(b=0;b<Y;b++){var f=d[b];if(!g.match(new RegExp("\\s"+f+"\\s"))){Z+=" "+f;a=true;}}if(a){e.className=K.trim(Z);}}return e;},removeClass:function N(c,b){if(!c){return ;}if(b.constructor!==Array){b=[b];}var Z=" "+(c.className||"")+" ",Y=b.length,a;for(a=0;a<Y;a++){Z=Z.replace(new RegExp("\\s"+b[a]+"\\s","g")," ");}c.className=K.trim(Z);},addWidgetCssClass:function M(d,b){var Z=d.cssClass,c=(Z&&Z.split(" "))||[],a;b=[].concat(b);for(a=0;a<b.length;a++){var Y=b[a];if(X.indexOf(c,Y)===-1){c.push(Y);}}d.cssClass=c.join(" ");},removeWidgetCssClass:function F(e,c){var Z=e.cssClass,d=(Z&&Z.split(" "))||[],b;c=[].concat(c);for(b=0;b<c.length;b++){var Y=c[b];var a=X.indexOf(d,Y);if(a!==-1){d.splice(a,1);}}e.cssClass=d.join(" ");},toggleClass:function S(a,Z,Y){if(Y){this.addClass(a,Z);}else{this.removeClass(a,Z);}},applyShadow:function G(c,d,b,a,Y){var Z=c.style;if(T.isDXIE){Z.filter+="progid:DXImageTransform.Microsoft.dropshadow(OffX="+d+"px, OffY="+b+"px, Color='"+Y+"')";}else{if(T.isFF||T.isWK||T.isIE10){Z[T.CSS3_BOXSHADOW]=d+"px "+b+"px "+a+"px "+Y;}}},removeShadow:function B(Z){var Y=Z.style;if(T.isFF||T.isWK||T.isIE10){Y[T.CSS3_BOXSHADOW]="";}},setOpacity:function U(Z,b){if(T.isDXIE&&!T.isIE9){var c=Z.currentStyle.filter;var Y=null;if(c.length>0){Y=Z.filters["DXImageTransform.Microsoft.Alpha"];}if(Y){Y.opacity=b;Y.enabled=(b!==100);}else{if(b<100){var a="progid:DXImageTransform.Microsoft.Alpha(Opacity="+b+")";Z.style.filter=(c||"")+" "+a;}}}else{Z.style.opacity=b/100-(T.isIE9?0.00001:0);}},buildGradient:function O(Z,b,Y){if(T.supports(T.cssFeatures.GRADIENTS)){var a={};if(T.isDXIE){a.n="filter";a.v="progid:DXImageTransform.Microsoft.Gradient(GradientType="+Z+",StartColorStr='"+b+"',EndColorStr='"+Y+"')";}else{if(T.isFF){a.n="background-image";a.v="-moz-linear-gradient("+((Z===0)?"top":"left")+","+b+","+Y+")";}else{if(T.isWK){a.n="background";a.v="-webkit-gradient(linear,"+((Z===0)?"left top, left bottom":"left top, right top")+",from("+b+"),to("+Y+"))";}else{if(T.isIE10||T.isIEW3C){a.n="background";a.v="linear-gradient("+((Z===0)?"to bottom":"to right")+","+b+","+Y+")";}}}}return a;}return null;},buildRoundCorners:function Q(d,c){if(T.supports(T.cssFeatures.ROUND_CORNERS)){var Z=d+"px";var f=Z+(c?" "+Z+" 0 0":"")+";";if(T.isFF||T.isWinPhone||T.isIE10){return"border-radius:"+f;}if(T.isWK){if(!c){return"-webkit-border-radius:"+Z+";";}var e=["left","right"],b=[],Y=-1,a;for(a=0;a<2;a++){b[++Y]="-webkit-border-top-"+e[a]+"-radius:"+Z;b[++Y]="-webkit-border-bottom-"+e[a]+"-radius:0";}return b.join(";");}}return"";},getBorderWidthsOrPaddings:function D(Z,e){var f={t:0,r:0,b:0,l:0,h:0,w:0};if(!Z){return f;}var c=Z.split(" "),Y=c.length,d;for(d=0;d<Y;d++){c[d]=Math.round(e*parseFloat(c[d])/72);}if(Y<4){if(Y===1){c[1]=c[2]=c[3]=c[0];}else{c[3]=c[1];if(Y===2){c[2]=c[0];}}}f.t=c[0];f.r=c[1];f.b=c[2];f.l=c[3];f.h=f.t+f.b;f.w=f.l+f.r;return f;},getBorderWidths:function H(Z,Y){return this.getBorderWidthsOrPaddings(Z,Y);},getPaddings:function C(Z,Y){return this.getBorderWidthsOrPaddings(Z,Y);},parkAfterFade:function A(Y){var Z=Y.target.style;if(Z.opacity===0){Z.left="-10000px";window.setTimeout(function(){Z.opacity=0.99;},0);return true;}return false;},getStyleValue:function I(Y,c){var a=(c==="float"),b;if(Y.currentStyle){c=a?"styleFloat":c;b=Y.currentStyle[c];}else{if(document.defaultView&&document.defaultView.getComputedStyle){c=a?"cssFloat":c;var Z=document.defaultView.getComputedStyle(Y,null);b=Z?Z[c]:null;}}return b;},getComputedStyle:function R(Y,a){var Z=(window.getComputedStyle)?function(b,c){return window.getComputedStyle(b,c||null);}:function(b){return b.currentStyle||{};};mstrmojo.css.getComputedStyle=Z;return Z(Y,a);},getCssTextFromObj:function E(a){var Z="",Y;for(Y in a){Z+=Y+":"+a[Y]+";";}return Z;},onTransitionEnd:function W(a,Y){var Z="transition",b=window.Modernizr;if(b.testProp(Z)){T.attachOneTimeEvent(a,T.transEndEvtNames[b.prefixed(Z)],Y);}else{window.setTimeout(Y,0);}},flashClass:function P(Z,Y,b){this.toggleClass(Z,Y,true);var a=this;window.setTimeout(function(){a.toggleClass(Z,Y,false);},b);},convertCssToCamelCase:function J(Y){return Y.replace(/\-([a-z])/gi,function(Z,a){return a.toUpperCase();});},printCSSInfo:function V(c){var g=document.styleSheets,l=g.length,d,e;for(e=0;e<l;e++){var f=g[e],h=f.cssRules,a=h?h.length:0,k=0;for(d=0;d<a;d++){var Y=h[d].selectorText;if(Y){try{k+=Y.split(",").length;}catch(b){}}}var Z=f.href;if(!c||(Z&&X.indexOf(Z,c)>-1)){console.log("Stylesheet: "+Z||"Inline CSS Block");console.log("Total rules: "+a);console.log("Total selectors: "+k);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.publisher");var C=mstrmojo.publisher;mstrmojo._Provider=mstrmojo.provide("mstrmojo._Provider",{_meta_usesSuper:false,audibles:{"*":true},set:function F(N,H){var G=false,K=this["_set_"+N],I=this[N];if(K){G=K.apply(this,arguments);}else{this[N]=H;G=(I!==H);}if(G){var L=N+"Change",M=this.audibles||{},J=(M[N]===true)||((M[N]!==false)&&(M["*"]!==false));if(J&&(this["pre"+L]||this["on"+L]||this["post"+L]||C.hasSubs(this.id,L))){this.raiseEvent({name:L,prop:N,value:H,valueWas:I});}}return this;},raiseEvent:function B(H){var M=H&&H.name;if(!M){return null;}H.src=this;this.preHandleEvent(H);var K=["pre","on","post"],L=false,I,G;for(I=0,G=K.length;I<G;I++){var J=K[I]+M;if(this[J]){if(this[J](H)===false){L=true;break;}}}if(!L){this.postHandleEvent(H);C.publish(this.id,M,H);}return H;},preHandleEvent:mstrmojo.emptyFn,postHandleEvent:mstrmojo.emptyFn,attachEventListener:function A(G,H,I){return C.subscribe(this.id,G,I,H);},detachEventListener:function E(G){C.unsubscribe(G);},destroy:function D(){C.clearSubscriptions(this.id);if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.ListSelector");var C=mstrmojo.dom,B=C.isIE;mstrmojo.TreeNodeSelector=mstrmojo.provide("mstrmojo.TreeNodeSelector",mstrmojo.mixin({premousedown:function A(E,I,D){var G=(E&&E.tree)||E,H=D&&D.e;if(!H){return false;}var F=G.lastMouseDown;if(F){if((F.e===H)||(B&&((new Date())-F.dt<50))){return false;}}this._super(E,I,D);if(G){if(G.onnodemousedown){G.onnodemousedown(D);}G.lastMouseDown={e:H,dt:new Date()};}return true;}},mstrmojo.hash.copy(mstrmojo.ListSelector)));}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.dnd");var E=mstrmojo.dom;function B(I){return E.contains(this.getMovingHandle(),I.src.node,true,document.body);}mstrmojo._IsMovable=mstrmojo.provide("mstrmojo._IsMovable",{draggable:true,ownAvatar:true,getMovingHandle:function G(){return this.domNode;},getMovingTarget:function H(){return this.domNode;},isDragValid:function A(I){return B.call(this,I)||(this._super&&this._super(I))||false;},ondragstart:function C(J){if(B.call(this,J)){var K=this.getMovingHandle(),I=this.getMovingTarget().style;this._leftPos=parseInt(I.left,10);this._topPos=parseInt(I.top,10);this._hWidth=K.clientWidth;this._hHeight=K.clientHeight;}if(this._super){this._super();}},ondragmove:function F(L){if(B.call(this,L)){var M=L.tgt.pos,J=L.src.pos,K=this.getMovingTarget().style,I=E.windowDim();K.left=this.left=Math.min(Math.max(this._leftPos+M.x-J.x,-this._hWidth+40),I.w-40)+"px";K.top=this.top=Math.min(Math.max(this._topPos+M.y-J.y,-this._hHeight+20),I.h-20)+"px";}if(this._super){this._super();}},ondragend:function D(I){if(B.call(this,I)){delete this._leftPos;delete this._topPos;delete this._hWidth;delete this._hHeight;}if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.registry","mstrmojo._Provider","mstrmojo.array");var B=mstrmojo.registry,F=mstrmojo.array;mstrmojo.Obj=mstrmojo.declare(mstrmojo.Base,[mstrmojo._Provider],{scriptClass:"mstrmojo.Obj",id:"",init:function I(J){this.disposables=[];this._super(J);B.add(this);if(this.postCreate){this.postCreate();}},addDisposable:function G(M){var K=this.disposables,L,J;if(M.constructor===Array){for(L=0,J=M.length;L<J;L++){K.push(M[L]);}}else{K.push(M);}return M;},destroyDisposables:function D(J){F.forEach(this.disposables,function(K){if(K.destroy){K.destroy(J);}else{if(K.clear){K.clear();}}});this.disposables=[];},throwAbstractMethodError:function A(J){throw new Error(this.scriptClass+" must implement "+J+".");},destroy:function H(J){if(this.destroyed){return ;}this._super(J);this.destroyDisposables(J);B.remove(this);delete this.parent;this.destroyed=true;}});var C=mstrmojo.Obj;C.free=function E(J){if(J instanceof C){J.destroy();}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.registry","mstrmojo.publisher","mstrmojo._Provider");var G=mstrmojo.hash,A=mstrmojo.array,B=mstrmojo.registry,D=mstrmojo.publisher;mstrmojo.Arr=mstrmojo.declare(null,[mstrmojo._Provider],{scriptClass:"mstrmojo.Arr",postApplyProperties:null,postCreate:null,length_bindEvents:["add","remove"],init:function H(K){var J;if(K&&K.data){J=K.data;delete K.data;}else{if(K){J=K;K=null;}}if(!J||J.constructor!==Array){J=[];}G.copy(mstrmojo.Arr.prototype,J);if(K){G.copy(K,J);}if(J.postApplyProperties){J.postApplyProperties();}B.add(J);if(J.postCreate){J.postCreate();}return J;},destroy:function E(){D.clearSubscriptions(this.id);B.remove(this);},add:function I(L,J,K){var M=L&&L.length;if(M){if(J==null){J=this.length;}A.insert(this,J,L);if(!K&&(this.onadd||D.hasSubs(this.id,"add"))){this.raiseEvent({name:"add",value:L,index:J});}}},remove:function F(J,L,K){if(L==null){L=1;}if((J!=null)&&L){var M=this.splice(J,L);if(!K&&(this.onremove||D.hasSubs(this.id,"remove"))){this.raiseEvent({name:"remove",value:M,index:J});}}}});mstrmojo.Arr.makeObservable=function C(J,K){if(!J){return ;}if(!K){K={};}K.data=J;return this.prototype.init(K);};})();(function(){mstrmojo.requiresCls("mstrmojo._HasPopup","mstrmojo.hash","mstrmojo.css");var F=mstrmojo.hash,C=mstrmojo.css;var D="open";function E(G){return G?G.popupConfig.hostElement:null;}mstrmojo.ui.menus._HasMenuPopup=mstrmojo.provide("mstrmojo.ui.menus._HasMenuPopup",F.copy(mstrmojo._HasPopup));mstrmojo.ui.menus._HasMenuPopup.openPopup=function A(I,G){var H=this._lastOpened;if(H){this.closePopup();}mstrmojo._HasPopup.openPopup.call(this,I,G);C.addClass(E(I),D);};mstrmojo.ui.menus._HasMenuPopup.closePopup=function B(){C.removeClass(E(this._lastOpened),D);mstrmojo._HasPopup.closePopup.call(this);};}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.fx.AnimateProp");var S=mstrmojo.css;var Q=10;function C(W,Z,Y){W.pauseScrollRendering(true);var X=W.scrollboxNode,V=W.animate?W.scrollEffect:null;if(V&&V.play){if(V.isPlaying){V.cancel();}V.props={scrollTop:{start:X.scrollTop,stop:Z,isStyle:false}};V.onEnd=function(){W.pauseScrollRendering(false,null,Y);};V.play();}else{X.scrollTop=Z;W.pauseScrollRendering(false,null,Y);}}function K(c,e,V){var W=4;if(!V){V=0;}var f=Math.round(c.renderBlockSize/2);c.fillAt(Math.max(0,e-f),e+f);var b=c.itemsContainerNode,a=b.childNodes[e],Z=c.listMapper.itemOffsetTop(c,b,null,a),d=parseInt(c.scrollboxNode.clientHeight/2,10)-a.offsetHeight/2,X=Math.max(0,c.spacerMargin+Z-d);if(Math.abs(c.scrollboxNode.scrollTop-X)>2){C(c,X,c.renderOnScroll?function(){if(V<=W){K(c,e,V++);}}:null);}else{var Y=c.animate?c.scrollEffect:null;if(Y&&Y.isPlaying&&Y.cancel){Y.cancel();c.pauseScrollRendering(false);}}}function J(X){var Y=X.itemsContainerNode,V=Y.lastChild,W=V?V.offsetTop+V.offsetHeight-Y.firstChild.offsetTop:0;return W;}function U(W){var V=J(W),X=Math.max(0,parseInt((W.scrollboxNode.clientHeight-V)/2,10));C(W,Math.max(0,W.spacerMargin-X));}function H(X){var V=X.selectedIndex,W=V>-1;X.set("hasSelection",W);if(!X.domNode){return ;}if(W){K(X,V);}else{U(X);}}function E(W){var Y=W.scrollboxNode,V=J(W),X=V>Y.clientHeight/2;S.toggleClass(W.upArrowNode,["enabled"],X);S.toggleClass(W.downArrowNode,["enabled"],X);}function N(V,W){var X=V.scrollboxNode;X.scrollTop=Math.min(Math.max(X.scrollTop+W,0),X.scrollHeight-X.offsetHeight);}function B(W,V){if(!W._scrollInter){var X=Q*(V?-1:1);W._scrollInter=window.setInterval(function(){N(W,X);},50);}}function R(V){if(V._scrollInter){window.clearInterval(V._scrollInter);V._scrollInter=null;}}mstrmojo._IsDial=mstrmojo.provide("mstrmojo._IsDial",{markupString:'<div id="{@id}" class="mstrmojo-Dial {@cssClass}" style="position:relative;"><div class="mstrmojo-Dial-uparrow"  onmouseover="mstrmojo.all.{@id}.onmouseoverarrow(self, arguments[0], true)" onmouseout="mstrmojo.all.{@id}.onmouseoutarrow(self, arguments[0], true)" onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], true)" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], true)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], true)"></div><div class="mstrmojo-Dial-scrollbox {@cssClass}" style="position:relative;{@cssText}" mstrAttach:mousedown,mouseup><div class="mstrmojo-Dial-spacer" style="{@spacerCssText}"><div class="mstrmojo-Dial-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div></div></div><div class="mstrmojo-Dial-dnarrow" onmouseover="mstrmojo.all.{@id}.onmouseoverarrow(self, arguments[0], false)" onmouseout="mstrmojo.all.{@id}.onmouseoutarrow(self, arguments[0], false)" onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], false)" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], false)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], false)"></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.childNodes[1];},spacerNode:function(){return this.domNode.childNodes[1].firstChild;},itemsContainerNode:function(){return this.domNode.childNodes[1].firstChild.firstChild;},upArrowNode:function(){return this.domNode.childNodes[0];},downArrowNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onhasSelectionChange:function(){S.toggleClass(this.domNode,["hasSelection"],!!this.hasSelection);}},animate:true,itemsEffect:{scriptClass:"mstrmojo.fx.AnimateProp",duration:500,interval:25,slot:"itemsContainerNode",preStart:function(){var W=this.widget[this.slot],V=(W&&W.offsetWidth)||0;this.props=V?{left:{start:-V,stop:0,suffix:"px",isStyle:true}}:{};},revertOnCancel:false},scrollEffect:{scriptClass:"mstrmojo.fx.AnimateProp",duration:250,interval:25,slot:"scrollboxNode",revertOnCancel:false},multiSelect:false,holdJumpOnly:true,audibles:{"*":true,hasSelection:false},initSpacer:function I(){var V=(this.cssText||"").match(/height:\s*(\d*)px/);if(V){this.spacerMargin=parseInt(Number(V[1])/2,10);var W=this.spacerMargin+"px";this.spacerCssText="padding-top: "+W+"; padding-bottom: "+W+";";}else{this.spacerMargin=0;delete this.spacerCssText;}},center:function T(){H(this);},preBuildRendering:function(){this.initSpacer();return this._super();},postBuildRendering:function D(){this._super();this.center();E(this);},refreshScroll:function G(){this.center();E(this);},prechange:function O(V){this._super(V);if(this.hasRendered){if(!this.multiSelect||(V&&V.added&&V.added.length)){this.center();}}},onclickarrow:function A(X,W,V){N(this,Q*(V?-1:1));},onmouseoverarrow:function L(X,W,V){if(!this.holdJumpOnly){B(this,V);}},onmouseoutarrow:function M(X,W,V){R(this);},onmousedownarrow:function F(X,W,V){if(this.holdJumpOnly){B(this,V);}},onmouseuparrow:function P(X,W,V){R(this);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.color","mstrmojo.hash","mstrmojo.array");var z=mstrmojo.color,V=mstrmojo.hash,BC=mstrmojo.array,A8=mstrmojo.css,d=mstrmojo.num;var BA=1,Ai=2,Aj=3,Aw=4,AQ=5,AR=6;var BH="FormattingFont",I="FormattingAppearance",X="FormattingAlignment",AX="FormattingSize",Q="FormattingPatterns",F="FormattingBorder",Av="FormattingOrder",E="FormattingView",O="FormattingSelector",Al="Template Formatting",L="FormattingPadding",Ag="AnalyticalEngineProperties",Ao="RWDocumentProperties",A5="FormattingPage",N="Mobile",T="VLDB Select";var Af=1;var g="n",M="h",BD="w",x="wm",A2="pw",W="ml",A3="mr",q="upwalw",n="ff",Aa="fsz",A6="fw",y="fit",A7="fun",k="fst",p="fc",U="alh",o="alv",AU="atw",AE="atd",a="textOverflow",Ae="bc",D="bgs",H="btc",Ad="brc",AN="bbc",m="blc",i="bts",BF="brs",Ax="bbs",AT="bls",AK="borderColor",As="borderStyle",c="zIndex",AL="showTitleBar",h="title",Ar="ctrlStyle",s="ctrlOrientation",Aq="ctrlOrientationBehavior",f="ctrlMultiselect",C="ciwm",A4="cmcy",At="sec",l="easow",AD="layoutXml",J="lockAspectRatio",Ac="ism",e="shw",Au="mg",BE="lhv",Y="gridVPadding",AZ="gridHPadding",AY="ln",AC="sar",B="hnv",AW="iw",AS="ih",AG="tsp",AO="visible",R="rf",BG="jad",Ah="jdc",Ay="fs",A1="ssc",b="sstyle",w="hgl";function P(BI){return BI;}function AI(BI){return parseInt(BI,10);}var v={name:"encode",_def:P};v[Aj]=function(BI){return BI?1:0;};v[Ai]=function(BI){if(BI==="transparent"){return -1;}if(BI.length===4){BI=BI.replace(/([0-9a-f])/ig,"$1$1");}BI=z.rgbStr2hex(BI);return parseInt(BI.substring(5)+BI.substring(3,5)+BI.substring(1,3),16);};v[Aw]=AI;v[BA]=function(BI){if(typeof BI==="number"){return d.toLocaleString(BI);}return P(BI);};v[AR]=function(BK){if(BK==="none"){return 0;}var BJ=BK.match(/([0-9]+[,\.]?[0-9]*pt)/)[0],BI=BK.match(/pt ([\w\W]*)/)[1];if(BJ==="2pt"){return 5;}switch(BI){case"solid":return 1;case"dashed":return 3;case"dotted":return 4;default:throw new Error("Invalid border style value in FormatModel::encodeValue.");}};var BB={name:"decode",_def:P};BB[Aj]=function(BI){return parseInt(BI,10)===1;};BB[Ai]=function(BI){if(BI===-1){return"transparent";}if(typeof BI==="number"){return z.decodeColor(BI);}if(BI.length===4){return BI.replace(/([0-9a-f])/ig,"$1$1");}return z.rgbStr2hex(BI);};BB[Aw]=AI;BB[AR]=function(BK){if(BK===undefined||BK===0){return"none";}var BJ="1pt",BI="solid";if(BK===5){BJ="2pt";}if(BK===3){BI="dashed";}else{if(BK===4){BI="dotted";}}return BJ+" "+BI;};function Az(){return this.pn.toLowerCase();}function AF(BI,BK,BL){var BJ=document.createElement("div");BJ.style[BL||BK]=BI[BK];return BJ;}function G(BI){return function(){return z.rgbStr2hex(BI.apply(this,arguments));};}function Ab(){var BI=Az.call(this);return BI==="underline"?BI:"line-through";}var An={name:"extract"},S=An._def=function(BI,BK,BL){var BJ=AF(BI,BK||this.getFormatBlockName(),BL);return BJ.style[this.getCssName()];};An[Ai]=G(S);function r(BI){return S.call(this,BI,this.getFormatBlockName())===Az.call(this);}function A(BI){var BJ=S.call(this,BI,this.getFormatBlockName(),this.getCssName());return BJ.indexOf(Ab.call(this))>-1;}function Am(BI){var BJ=this.getFormatBlockName();return z.rgbStr2hex(S.call(this,BI,BJ,BJ+this.pn));}var A9={name:"resolve"},Z=A9._def=function(BI,BL,BK,BM){BK=BK||this.getFormatBlockName();var BJ=AF(BI,BK);BJ.style[BM||this.getCssName()]=BL;return BJ.style[A8.convertCssToCamelCase(BK)];};A9[Ai]=function(BI,BK,BJ,BL){if(BK.or!==undefined){return BK;}return z.rgbStr2hex(Z.call(this,BI,BK,BJ,BL));};function AM(BI,BJ){return Z.call(this,BI,BJ?Az.call(this):"normal");}function AJ(BJ,BL){var BK=(BJ[this.getFormatBlockName()]||"").split(" "),BI=Ab.call(this);if(BL){if(BK.indexOf(BI)===-1){BK.push(BI);}}else{BK=BK.filter(function(BM){return BM!==BI;});}return Z.call(this,BJ,BK.join(" "));}var AV={name:"update"},A0=AV._def=function(BI,BJ){BI[this.getFormatBlockName()]=this.resolve(BI,BJ);return BI;};var AH={};AH[g]={ps:I,pn:"Name",pt:BA};AH[M]={ps:AX,pn:"Height",pt:BA};AH[BD]={ps:AX,pn:"Width",pt:BA};AH[x]={ps:AX,pn:"WidthMode",pt:Aw};AH[A2]={ps:A5,pn:"PageWidth",pt:BA};AH[W]={ps:A5,pn:"MarginLeft",pt:BA,fn:"margin-left"};AH[A3]={ps:A5,pn:"MarginRight",pt:BA,fn:"margin-right"};AH[q]={ps:A5,pn:"UsePageWidthAsLayoutWidth",pt:Aj};AH[n]={ps:BH,pn:"Name",pt:BA,fn:"font",cn:"fontFamily",extract:function(){return S.apply(this,arguments).replace(/['"]/g,"");}};AH[Aa]={ps:BH,pn:"Size",pt:Aw,fn:"font",cn:"fontSize"};AH[A6]={ps:BH,pn:"Bold",pt:Aj,fn:"font",cn:"fontWeight",extract:r,resolve:AM};AH[y]={ps:BH,pn:"Italic",pt:Aj,fn:"font",cn:"fontStyle",extract:r,resolve:AM};AH[A7]={ps:BH,pn:"Underline",pt:Aj,fn:"text-decoration",extract:A,resolve:AJ};AH[k]={ps:BH,pn:"Strikeout",pt:Aj,fn:"text-decoration",extract:A,resolve:AJ};AH[p]={ps:BH,pn:"Color",pt:Ai};AH[U]={ps:X,pn:"Horizontal",pt:Aw,fn:"text-align"};AH[AU]={ps:X,pn:"TextWrap",pt:Aj,fn:"white-space"};AH[AE]={ps:X,pn:"TextDirection",pt:Aw};AH[o]={ps:X,pn:"Vertical",pt:Aw};AH[a]={ps:AX,pn:"TextOverflow",pt:Aj};AH[Ae]={ps:Q,pn:"FillColor",pt:Ai,x:Af,fn:"background-color",update:function(BI,BK){var BJ=BI.fx;if(BK.or!==undefined){if(!BJ){BJ=BI.fx={};}var BL=BJ.gd=BJ.gd||{};BL.ec=BK.c2;BL.sc=BK.c1;BL.t=BK.or;delete BI[this.getFormatBlockName()];BI.fx=BJ;}else{if(BJ){delete BJ.gd;}A0.call(this,BI,BK);}return BI;}};AH[D]={ps:Q,pn:"FillStyle",pt:Aw};AH[A1]={ps:Q,pn:"SelectorSelectionColor",pt:Ai};AH[b]={ps:Q,pn:"SelectorSelectionFillStyle",pt:Aw};AH[H]={ps:F,pn:"TopColor",pt:Ai,fn:"border",extract:Am};AH[Ad]={ps:F,pn:"RightColor",pt:Ai,fn:"border",extract:Am};AH[AN]={ps:F,pn:"BottomColor",pt:Ai,fn:"border",extract:Am};AH[m]={ps:F,pn:"LeftColor",pt:Ai,fn:"border",extract:Am};AH[AK]={ps:F,pn:["TopColor","RightColor","BottomColor","LeftColor"],pt:Ai,fn:"border",extract:Am,resolve:G(function(BI,BK){var BL=this.getFormatBlockName(),BJ=Z.call(this,BI,BK,BL,BL+"Color"),BM=BJ.indexOf("rgb");if(BM>-1){BJ=BJ.slice(0,BM)+z.rgbStr2hex(BJ.slice(BM));}return BJ;})};AH[As]={ps:F,pn:["TopStyle","RightStyle","BottomStyle","LeftStyle"],pt:AR,fn:"border",extract:Am,resolve:function(BI,BL){var BJ=BL.split(" "),BM=this.getFormatBlockName();BI[BM]=Z.call(this,BI,BJ[0],BM,BM+"Width");var BK=Z.call(this,BI,BJ[1]||"none",BM,BM+"Style"),BN=BK.indexOf("rgb");if(BN>-1){BK=BK.slice(0,BN)+z.rgbStr2hex(BK.slice(BN));}if(BK.indexOf("#")===-1&&BK.indexOf("transparent")===-1){BK+=" transparent";}return BK;}};AH[i]={ps:F,pn:"TopStyle",pt:AR,fn:"border",extract:Am};AH[BF]={ps:F,pn:"RightStyle",pt:AR,fn:"border"};AH[Ax]={ps:F,pn:"BottomStyle",pt:AR,fn:"border",extract:Am};AH[AT]={ps:F,pn:"LeftStyle",pt:AR,fn:"border",extract:Am};AH[c]={ps:Av,pn:"ZIndex",pt:Aw,fn:"z-index"};AH[AL]={ps:E,pn:"ShowTitleBar",pt:Aj};AH[h]={ps:E,pn:"Title",pt:BA};AH[Ar]={ps:O,pn:"Style",pt:Aw};AH[s]={ps:O,pn:"Orientation",pt:Aw};AH[Aq]={ps:O,pn:"OrientationBehavior",pt:Aw};AH[f]={ps:O,pn:"Multiselect",pt:Aj};AH[C]={ps:O,pn:"ItemWidthMode",pt:Aw};AH[A4]={ps:O,pn:"MetricConditionType",pt:Aw};AH[At]={ps:O,pn:"ShowElementCount",pt:Aw};AH[l]={ps:O,pn:"ExportAsShownOnWeb",pt:Aw};AH[AD]={ps:AX,pn:"LayoutXML",pt:AQ};AH[J]={ps:AX,pn:"LockAspectRatio",pt:Aj};AH[Ac]={ps:AX,pn:"ImageSizeMode",pt:Aw};AH[AS]={ps:AX,pn:"ImageHeight",pt:BA};AH[AW]={ps:AX,pn:"ImageWidth",pt:BA};AH[AG]={ps:Ao,pn:"layoutBarPosition",pt:Aj};AH[Ay]={ps:Ao,pn:"ExecutionFullScreenMode",pt:Aj};AH[AO]={ps:I,pn:"Visible",pt:Aj};AH[AY]={ps:Al,pn:"LongNames",pt:BA};AH[AC]={ps:Ag,pn:"ShowAllRows",pt:BA};AH[B]={ps:Ag,pn:"HideNullZeroValues",pt:BA};AH[AZ]={ps:L,pn:["LeftPadding","RightPadding"],pt:BA};AH[Y]={ps:L,pn:["TopPadding","BottomPadding"],pt:BA};AH.rowsshw={ps:Al,pn:"ShowRowHeaders",pt:BA};AH.rowsmg={ps:Al,pn:"MergeCells",pt:BA};AH.rowslhv={ps:Al,pn:"LockRowHeaders",pt:BA};AH.colsshw={ps:Al,pn:"ShowColumnHeaders",pt:BA};AH.colsmg={ps:Al,pn:"MergeColumnCells",pt:BA};AH.colslhv={ps:Al,pn:"LockColumnHeaders",pt:BA};AH[R]={ps:N,pn:"RefreshFrequency",pt:Aw};AH[BG]={ps:T,pn:"Join Across Datasets",pt:Aw};AH[Ah]={ps:T,pn:"MCE Join To Get Data Combination",pt:Aw};AH[w]={ps:I,pn:"Highlight",pt:Aw};BC.forEach(V.keyarray(AH),function(BI){var BJ=AH[BI];BJ.getFormatBlockName=function(){var BL=this.fn;if(!BL){var BK=this.pn;BL=BK.charAt(0).toLowerCase()+BK.substr(1);}return BL;};BJ.getCssName=function(){var BK=this.getFormatBlockName.call(this),BL=this.cn;if(!BL){BL=A8.convertCssToCamelCase(BK);}return BL;};BC.forEach([v,BB,An,A9,AV],function(BK){var BL=BK.name;BJ[BL]=BJ[BL]||BK[BJ.pt]||BK._def;});});function Ap(BL,BK,BI){var BJ=BI[BL.ps]=BI[BL.ps]||{};BK=BL.encode(BK);BC.forEach([].concat(BL.pn),function(BM){BJ[BM]=BK;});return BI;}function AB(BO,BN,BI){var BM=BO.x;if(BM){if((BM&Af)>0){var BL=!!BN.c1,BK=0;if(BL){Ap(BO,BN.c1,BI);var BJ=BI[Q];BJ.GradientColor=BO.encode(BN.c2);BJ.GradientAngle=BN.or?0:90;BJ.GradientXOffset=0;BJ.GradientYOffset=0;BK=2;}else{if(BO.encode(BN)===-1){BK=1;}else{Ap(BO,BN,BI);}}return Ap(AH[D],BK,BI);}}return null;}mstrmojo.models.FormatModel={getFormatUpdate:function AP(BJ,BM,BI){var BL=AH[BJ];if(!BL){throw new Error("Invalid property "+BJ+" in FormatModel::getFormatUpdate.");}BI=BI||{};var BK=AB.call(this,BL,BM,BI);if(BK){return BK;}return Ap(BL,BM,BI);},getFormatPropertyInfo:function j(BI){return AH[BI];},getValueFromUpdate:function K(BJ,BK){var BM=AH[BJ],BI=null;try{BI=BK[BM.ps][BM.pn];}catch(BL){}return BI;},getGradientValues:function AA(BJ){var BI=BJ.fx&&BJ.fx.gd;if(BI){var BL={c1:BI.sc,c2:BI.ec,or:BI.t};return BL;}if(BJ[D]===2){var BK={c1:BJ.bc,c2:BJ.gdc,or:BJ.gda===90?0:1};return BK;}return null;},decodeValue:function u(BI,BJ){return AH[BI].decode(BJ);},updateFormatBlock:function Ak(BI,BJ,BK){return AH[BJ].update(BI,BK);},getFormatBlockValue:function t(BI,BJ){return AH[BJ].extract(BI);},GradientType:null,FormatObjectType:null,PROPERTY_INFO_TYPE:null,ENUM_PROPERTY_NAMES:{NAME:g,HEIGHT:M,WIDTH:BD,WIDTH_MODE:x,PAGE_WIDTH:A2,MARGIN_LEFT:W,MARGIN_RIGHT:A3,USE_PAGE_WIDTH_AS_LAYOUT_WIDTH:q,FONT_FAMILY:n,FONT_SIZE:Aa,FONT_WEIGHT:A6,FONT_STYLE:y,UNDERLINE:A7,LINE_THROUGH:k,COLOR:p,TEXT_ALIGN:U,VERTICAL_ALIGN:o,TEXT_WRAP:AU,TEXT_DIRECTION:AE,TEXT_OVERFLOW:a,BACKGROUND_COLOR:Ae,FILL_STYLE:D,BORDER_TOP_COLOR:H,BORDER_RIGHT_COLOR:Ad,BORDER_BOTTOM_COLOR:AN,BORDER_LEFT_COLOR:m,BORDER_TOP_STYLE:i,BORDER_RIGHT_STYLE:BF,BORDER_BOTTOM_STYLE:Ax,BORDER_LEFT_STYLE:AT,BORDER_COLOR:AK,BORDER_STYLE:As,Z_INDEX:c,SHOW_TITLE_BAR:AL,TITLE:h,CONTROL_STYLE:Ar,CONTROL_ORIENTATION:s,CONTROL_ORIENTATION_BEHAVIOR:Aq,CONTROL_MULTISELECT:f,CONTROL_ITEM_WIDTH_MODE:C,CONTROL_METRIC_CONDITION_TYPE:A4,CONTROL_SHOW_ELEMENT_COUNT:At,CONTROL_EXPORT_AS_SHOWN_ON_WEB:l,LAYOUT_XML:AD,LOCK_ASPECT_RATIO:J,IMAGE_SIZE_MODE:Ac,SHOW_HEADER:e,MERGE_HEADER:Au,LOCK_HEADER:BE,LONG_NAME:AY,SHOW_ALL_ROWS:AC,HIDE_NULL:B,IMAGE_WIDTH:AW,IMAGE_HEIGHT:AS,VISIBLE:AO,LAYOUT_TAB_POSITION:AG,GRID_VERTICAL_PADDING:Y,GRID_HORIZONTAL_PADDING:AZ,REFRESH:R,JOIN_ACROSS_DATASET:BG,MCE_JOIN_TO_GET_DATA_COMBINATION:Ah,FULL_SCREEN_MODE:Ay,SELECTOR_SELECTION_COLOR:A1,SELECTOR_SELECTION_FILL_STYLE:b,VIZ_HIGHLIGHTING:w}};}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.expr","mstrmojo.css");var G=mstrmojo.array,F=mstrmojo.expr,H=mstrmojo.css;mstrmojo._IsExprNode=mstrmojo.provide("mstrmojo._IsExprNode",{ind:function B(){var L=this.parent;if(L&&L.indent){var K=this.childIndex();K=(K>-1&&(K>0))?[K,K-1]:null;if(K){L.indent(K);}}},out:function D(){var L=this.parent;if(L&&L.outdent){var K=this.childIndex();K=(K>-1&&(K>0))?[K,K-1]:null;if(K){L.outdent(K);}}},andOrTxt:function A(){var M=this.parent,K=M&&M.data,L="",N=this.data;if(K&&(K.et===F.ET.ANDOR)&&K.fn){L=K.fn+(N&&N.not?"_"+F.FN.NOT:"");L=F.BRANCH_FNS[L];}return'<span class="mstrmojo-text mstrmojo-andor">'+L+"</span>";},getPrefixAndOrToolsMarkup:function(){return('<span class="mstrmojo-indent" onclick="mstrmojo.all[\'{@id}\'].ind()" mstrAttach:mouseover,mouseout>'+mstrmojo.desc(5895,"Group conditions")+'</span><span class="mstrmojo-outdent" onclick="mstrmojo.all[\'{@id}\'].out()" mstrAttach:mouseover,mouseout>'+mstrmojo.desc(5896,"Ungroup Conditions")+"</span>");},premousedown:function J(K){var L=mstrmojo.dom.eventTarget(K.hWin,K.e);if(this.prefixHoverNode&&mstrmojo.dom.contains(this.prefixHoverNode,L,false)){mstrmojo.dom.stopPropogation(K.hWin,K.e);return ;}if(this._super){this._super(K);}},isSelectableArea:function E(K){return true;},childIndex:function I(){var M=this.parent,K=M&&M.data,L=K&&K.nds,N=this.data;if(L&&N){return G.indexOf(L,N);}return -1;},toggleGroupBorder:function C(K){H.toggleClass(this.parent.itemsContainerNode.childNodes[this.childIndex()-1].firstChild,"upgroup",K);H.toggleClass(this.domNode,"downgroup",K);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.css");var A=1,K="mstrmojo-itemwrap",J="&nbsp;",I=mstrmojo.array;function B(V){if(!V.pageSize||V.pageSize<=0){var W=V.scrollboxNode;V.pageSize=W&&W.clientHeight||0;}return V.pageSize;}function T(V,W){if(V.usePaging){V.totalPages=1;var Y=V.itemsContainerNode,X=B(V);if(V.usePaging&&Y&&X){V.totalPages=Math.ceil((Y.clientHeight-parseInt(Y.style&&Y.style.paddingBottom||0,10))/X);}if(Y){V.itemsContainerNode.style.paddingBottom=X+"px";}}}mstrmojo.ListMapper=mstrmojo.provide("mstrmojo.ListMapper",{markupPrefix:"",markupSuffix:"",itemWrapperPrefix:function(V){return'<div class="'+this.getWrapperCss(V)+'">';},itemWrapperSuffix:"</div>",itemWrapperPrefill:"&nbsp",wrapperNodes:function C(V){return V.childNodes;},wrapperParentNode:function D(V){return V;},createWrapperNode:function G(V){var W=V.ownerDocument,X=W.createElement("div");return X;},findScrollRange:function N(k,Z,j,n,W,c,o,m){if(!Z){return{start:0,end:0};}var e=this.wrapperNodes(k),g=parseInt(Z/2,10),Y=parseInt(Math.log(Z)/Math.log(2),10),X=0,V=Z-1,f=j+n,d=e[0].offsetTop,b;for(var l=1;l<=Y;l++){b=e[g].offsetTop-d+m;if(b<j){X=g;}else{if(b>f){V=g;}}var a=Math.round(Z/Math.pow(2,l+1));g+=(b>j)?-a:a;g=Math.min(Math.max(0,g),Z-1);}return{start:X,end:V};},findWrapper:function L(X,V){var W=this.wrapperNodes(X);return W&&W[V];},findIndex:function F(V,Y,X){var W=this._nd2iw(V,Y,X);return W?this._iw2idx(V,Y,W):-1;},itemOffsetTop:function U(W,a,V,Y){if(!Y){var X=this.wrapperNodes(a);Y=X&&X[V];if(!Y){return 0;}}var Z=a.firstChild;if(!Z||(Z===Y)){return 0;}else{return Y.offsetTop-Z.offsetTop;}},whereDrop:function S(c,V,X,b,W){var Y=this._nd2iw(c,V,X),d,a,e;if(Y){a=this._iw2idx(c,V,Y);d=a;e=this.itemOffsetTop(c,V,null,Y);var Z=Y.offsetHeight;if(b.y>W.top+e+Z/2){d++;e+=Z;}}else{return c.dropCuePos;}return{left:0,top:e,idx:d,idxActual:a};},getWrapperCss:function(V){return K;},postBuildRendering:function(Z,Y,X,W,V){T(W,this);},buildItemWrappers:function P(e,b,h,d,a,i){var l=this.itemWrapperPrefix(h),g=this.itemWrapperSuffix,Z=l+this.itemWrapperPrefill+g,Y=[this.markupPrefix],W=1,V=h.selectedIndices||{},n=function m(k,j){for(var o=k;o<j;o++){Y[W++]=l;var p=b.build(h,d,e[o],o);if(V[o]){p=p.replace(/class\=\"([^\"]*)\"/,'class="$1 selected"');}Y[W++]=p;Y[W++]=g;}};var c=(e&&e.length)||0;a=a&&b?Math.min(a,c):0;if(a){n(0,a);}i=i&&b?Math.min(i,c-a):0;var f=c-i;for(var X=a;X<f;X++){Y[W++]=Z;}if(i){n(f,c);}Y.push(this.markupSuffix);return Y;},fillItemWrappers:function H(X,g,d,m,f,W,b,l){var e=(g&&g.length)||0,j=this.wrapperNodes(X),n=f.itemStatus,V=mstrmojo.css,Z=m.selectedIndices||{};for(var c=W,h=Math.min(b+1,e),a=0;c<h;c++){if(n[c]!==A){j[c].innerHTML=d.build(m,f,g[c],c);if(Z[c]){var Y=j[c].firstChild;if(Y){V.addClass(Y,["selected"]);}}a++;if(a===l){break;}}}return a;},onadd:function O(e,V,Z,f){if(V&&f){var a=f.value.length,b=this.wrapperNodes(V),d=b[f.index],Y=this.getWrapperCss(e);for(var X=0;X<a;X++){var W=this.createWrapperNode(V);W.className=Y;W.innerHTML=J;if(d){this.wrapperParentNode(V).insertBefore(W,d);}else{this.wrapperParentNode(V).appendChild(W);}}T(e,this);}},onremove:function Q(Y,b,V,X){if(b&&X){var a=this.wrapperNodes(b);if(a){var d=X.value.length;for(var Z=X.index+d-1,W=X.index;Z>=W;Z--){this.wrapperParentNode(b).removeChild(a[Z]);}}T(Y,this);}},onchange:function R(g,X,c,k){if(X&&k){var d=this.wrapperNodes(X);if(d){var W=mstrmojo.css,l=c.itemStatus,h;for(var b=0,V=k.removed,f=V&&V.length;b<f;b++){h=V[b];if(l[h]){W.removeClass(d[h].firstChild,["selected"]);}}for(var Z=0,e=k.added,Y=e&&e.length;Z<Y;Z++){h=e[Z];if(l[h]){W.addClass(d[h].firstChild,["selected"]);}}}}},_nd2iw:function E(W,Z,Y){Z=this.wrapperParentNode(Z);if(Z&&Y&&Z!==Y){var V=W.domNode,X=Y.parentNode;while(X){if(X===Z){return Y;}if(X===V){break;}Y=X;X=Y.parentNode;}}return null;},_iw2idx:function M(X,b,a){var W=X.items&&X.items.length,Y=this.wrapperNodes(b),V=I.findBin(Y,a,"offsetTop",W);for(var Z=V;Z<W;Z++){if(Y[Z].offsetHeight){return Z;}}return -1;},toPage:function(V,X){var W=V.scrollboxNode;if(V.usePaging&&W){W.scrollTop=X*B(V);}else{mstrmojo.alert("paging is not setup, can not perform paging.");}},whichPage:function(V){var W=V.scrollboxNode,X=B(V);return Math.round((W&&X&&W.scrollTop/X)||0);},toItem:function(Z,a){var X=Z&&Z.itemsContainerNode,e=Z.scrollboxNode,V=this.itemOffsetTop(Z,X,a),b=this.wrapperNodes(X)[a].clientHeight,W=e.clientHeight,d=e.scrollTop,Y=d;if(V<d){Y=V;}else{if(d+W-b<V){Y=Math.min(V,V-W+b);}}e.scrollTop=Y;}});})();(function(){mstrmojo.requiresCls("mstrmojo.css");var A=mstrmojo.css;mstrmojo.ui._HasUITheme=mstrmojo.provide("mstrmojo.ui._HasUITheme",{_mixinName:"mstrmojo.ui._HasUITheme",themeClassName:"",postBuildRendering:function B(){var D=this.themeClassName;if(D){this.onthemeClassNameChange({value:D});}return this._super();},onthemeClassNameChange:function C(D){var F=this.domNode;if(F){var G=D.value,E=D.valueWas;if(G){A.addClass(F,D.value);}if(E){A.removeClass(F,D.valueWas);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.string","mstrmojo.css");var K=mstrmojo.css,N=mstrmojo.string,H=mstrmojo.dom,L=13,C=27;function I(S){if(this._editComplete){return ;}var W,Q=false,V=this.text,T=false;if(S===C){W=V;T=true;Q=true;}if(!S||(!this.allowNewLine&&S===L)){var R=this[this.editableSlot],U=R.innerText||R.textContent||"";if(!this.allowNewLine){W=U.replace(/\n/g,"");}else{W=U;}Q=true;if(!this.allowEmptyText&&W.length===0){W=V;T=true;}}if(Q){this._editComplete=true;W=W.replace(/\u00A0/g,"\u0020");this.text=W;this.set("isEditing",false);this.onTextEditComplete(W!==V,V);delete this._editComplete;}if(T){this.refresh();}}function E(Q){var R={dblclick:"editOnDoubleClick",click:"editOnClick"};if(this[R[Q.name]]&&Q.getTarget()===this[this.editableSlot]){this.set("isEditing",true);}}function F(S,R,Q){if(typeof R["on"+Q]!=="function"){H.attachMarkupEvent(S,R,Q);}}mstrmojo._HasEditableText=mstrmojo.provide("mstrmojo._HasEditableText",{_mixinName:"mstrmojo._HasEditableText",editableSlot:"domNode",editButtonSlot:null,isEditing:false,editOnClick:true,allowEmptyText:false,allowNewLine:false,editOnDoubleClick:false,onTextEditComplete:mstrmojo.emptyFn,postBuildRendering:function A(){this._super();var S=this.editableSlot,Q=this[S],T=this[this.editButtonSlot||S];K.addClass(Q,"hasEditableText");this.text=this.text||Q.innerText||Q.textContent||"";Q.innerHTML=N.encodeHtmlString(this.text,true).replace(/ (?= )/g,"&nbsp;");var R=this.id;if(this.editOnClick){F(R,T,"click");}F(R,T,"dblclick");F(R,Q,"blur");F(R,Q,"keyup");F(R,Q,"keydown");},onclick:function P(Q){E.call(this,Q);if(this._super){this._super(Q);}},ondblclick:function G(Q){E.call(this,Q);},onblur:function M(){I.call(this);},onkeyup:function B(R){var Q=window.event||R.e;I.call(this,Q.keyCode);},onkeydown:function J(R){var Q=window.event||R.e;if(Q.keyCode===L){I.call(this,Q.keyCode);R.cancel();}},_set_text:function D(S,Q){var R=this.text;this.text=Q;if(this.hasRendered){this[this.editableSlot].innerHTML=N.encodeHtmlString(Q||"",true);}return(R!==Q);},onisEditingChange:function O(){if(this.hasRendered){var Q=this[this.editableSlot],R=!!this.isEditing;Q.contentEditable=R;Q.spellcheck=false;K.toggleClass(Q,"editable",R);if(R){Q.focus();H.setElementSelection(Q);}else{Q.blur();Q.scrollLeft=0;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css");var J={T:["top","left"],D:["height","width"],B:["border","border-color","border-style","border-width"],F:["font","color","text-decoration"],P:["padding"],BG:["background-color","fx"],RW:[]};J.RW=["z-index"].concat(J.T.concat(J.D));var D=mstrmojo.dom,O=mstrmojo.css;function N(T,V,S){var U=T[V]||[];U.push(S);T[V]=U;}function L(W,V){var U=((W&&W.fmts)||null);if(V){var Y=W.thresholds,T=Y&&Y[V];if(T){var X={},Z;for(Z in U){X[Z]=T[Z]||U[Z];}for(Z in T){var S=T[Z];X[Z]=(typeof S==="string")?(S+" !important"):S;}U=X;}}return U;}mstrmojo._Formattable=mstrmojo.provide("mstrmojo._Formattable",{_mixinName:"mstrmojo._Formattable",formatHandlers:null,thresholdId:null,getCacheKey:function E(){return"css_cache"+(this.thresholdId||"");},update:function G(T){var S=true;this.invisible=!!(T&&T.data&&T.data.invisible);if(this._super){S=this._super(T);}return S;},buildCSSFormatString:function H(U,d){var h=this.formatHandlers[U],j=h.src?d[h.src]:d;if(!j){return null;}var b=h.props||h;if(!b){return null;}var X=[],g=-1;var V=b.length-1;for(V;V>=0;V--){var i=b[V];var c=J[i]||[i];var a=c.length-1;for(a;a>=0;a--){i=c[a];var T=j[i];if(T!==undefined){if(i==="fx"){var Y=T,S={};var e=Y.gd;if(e){this.formatGradient(e,S);}var W=parseInt(Y.rt,10);if(W){if(W===1||W===3){this.formatTextRotation(Y.rt,S);}}if(Y.ds){this.formatDropShadow(Y,S);}var Z;for(Z in S){X[++g]=Z+":"+S[Z].join(" ");}}else{X[++g]=i+":"+T;}}}}if(this.invisible){X.push("visibility:hidden");}return X.join(";")+";";},applyCSSFormatToNode:function I(U,S){var V=this[U],T=V&&V.style;if(T){this.buildCSSFormatString(U,S).split(";").forEach(function(W){var X=W.split(":");T[O.convertCssToCamelCase(X[0])]=X[1];});}},clearSlotBackgroundCSS:function F(T){var U=this[T],S=U&&U.style;if(S){S.background="transparent none 0 0 no-repeat";S.filter="none";}},preBuildRendering:function B(){this._super();var V=this.formatHandlers,S=this.getFormats();if(V&&S){var W=this.defn=this.defn||{},X=this.getCacheKey(),U=W[X];if(!U){U=W[X]={};for(var T in V){var Z=T+"CssText";this[Z]=U[Z]=this.buildCSSFormatString(T,S)||"";}}else{var Y;for(Y in U){this[Y]=U[Y];}}}return true;},formatGradient:function P(S,U){var T=O.buildGradient(S.t,S.sc,S.ec);if(T){N(U,T.n,T.v);}},formatDropShadow:function K(W,U){if(D.supports(D.cssFeatures.DROP_SHADOW)){var V=W.ds;if(D.isDXIE){N(U,"filter","progid:DXImageTransform.Microsoft.DropShadow(Color='#66000000',Positive='true',OffX="+V+",OffY="+V+")");}else{var S=[V,V],T=parseInt(W.rt,10);if(T===1||T===3){S[((T===1)?1:0)]=-V;}N(U,(D.isWK?"-webkit-":"")+"box-shadow",S.join("px ")+"px 3px 0px #888");}}},formatTextRotation:function C(T,S){if(D.supports(D.cssFeatures.TEXT_ROTATION)){if(D.isDXIE){N(S,"filter","progid:DXImageTransform.Microsoft.BasicImage(rotation="+T+")");}else{var U=(T===1)?90:-90;N(S,D.CSS3_PREFIX+"transform-origin","top left");N(S,D.CSS3_PREFIX+"transform","rotate("+U+"deg)");}}},getFormats:function R(){if(!this.fmts){this.fmts=L.call(this,this.defn,this.thresholdId);}return this.fmts;},clearFormats:function A(){this.fmts=undefined;},createEmptyFormats:function(){return(this.fmts=this.fmts||{});},clearCache:function Q(){delete this.defn[this.getCacheKey()];},unrender:function M(S){if(this.thresholdId){this.fmts=null;}this._super(S);}});mstrmojo._Formattable.getBorderWidths=function(W){var V=W.getFormats(),S=(V.border)?V.border.match(/(\d*|\d*\.\d*)pt/)[0]:V["border-width"],U=W.model,T=U.docModel;return O.getBorderWidths(S,(T&&T.dpi)||U.dpi);};}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.fx");var Y=mstrmojo.css,H=mstrmojo.dom,O=mstrmojo.array,K={v:{styleDim:"height",styleDir:"top",dimension:"h",position:"y",scroll:"scrollTop",scrollDimension:"scrollHeight",cls:"vertical",hostCls:"hasVertical",scrollNodeCls:"hasVertical"},h:{styleDim:"width",styleDir:"left",dimension:"w",position:"x",scroll:"scrollLeft",scrollDimension:"scrollWidth",cls:"horizontal",hostCls:"hasHorizontal",scrollNodeCls:"hasHorizontal"}},W="scrollingMode",R="scrolling",b=3;var L=H.getOSInfo().name.toLowerCase().indexOf("mac")>=0;function J(){return(this.scrollbarHostNode||(this.scrollNode&&this.scrollNode.parentNode));}function P(d,c){var i=H.eventTarget(c,d),g=this.scrollNode,f=H.position(g),h=this.scrollTrackNodes,e=this.scrollBarNodes,j=function j(r){var p=i===h[r];if(p){var s=K[r],k=e[r],t=H.position(k),m=H.getMousePosition(d,c)[s.position],n=m-t[s.position],l=n>0?1:-1,q=g[s.scrollDimension],u=Math.abs(n-(t.h/2))*(q/f[s.dimension]),o={};o[s.scroll]={isStyle:false,start:g[s.scroll],stop:g[s.scroll]+(l*Math.min(q/3,500,u)),ease:mstrmojo.ease.linear};(new mstrmojo.fx.AnimateProp({props:o,duration:200,interval:10,target:g})).play();}};j.call(this,"h");j.call(this,"v");}function B(d,c){var g=this.scrollNode,f=d.type==="mousewheel",e=f?-1:1;mstrmojo.array.forEach(["h","v"],function(n){var l=K[n],i=f?"wheelDelta":"delta",k=d[i+{h:"X",v:"Y"}[n]]*e,j=Math.abs(k),h=k/j,m=j===3&&H.isFF&&!L;g[l.scroll]+=m?h*40:k;});H.stopPropogation(c,d);H.preventDefault(c,d);}function a(h){var g=K[h],f=this.scrollNode,e=H.position(f),d=e[g.dimension],i=f[g.scrollDimension],c=Math.ceil(d)/i;return A(c,d,i);}function A(d,c,e){return(!isNaN(d)&&d<1)&&(Math.abs(c-e)>b);}function C(x){var q="px",k=K[x],e=this.scrollNode,l=J.call(this),y=H.position(e),m=y[k.dimension],s=e[k.scrollDimension],d=Math.ceil(m)/s,w=this.scrollBarNodes,i=w[x],o=this.scrollTrackNodes,p=o[x],u=A(d,m,s),f=k.cls;if(!i){p=o[x]=document.createElement("div");var g=this,n=function(AA){P.call(g,AA);},j=function(AA){B.call(g,AA);},t=function(AC,AA,AB){H.attachEvent(AC,AA,AB);g.installedEventListeners.push({e:AC,evt:AA,fn:AB});};t(p,"click",n);p.className="mstrmojo-scrolltrack "+f;i=w[x]=document.createElement("div");i.className="mstrmojo-scrollbar "+f;p.appendChild(i);l.appendChild(p);var v=mstrApp.isSingleTier?"mousewheel":"wheel";t(p,v,j);t(i,v,j);}var z=i.style,h=(e[k.scroll]/e[k.scrollDimension]),c=H.delta(e,J.call(this))[k.position],r=p.style;if(u){r[k.styleDir]=c+q;z[k.styleDim]=(d*m)+q;z[k.styleDir]=(m*h)+q;}Y.toggleClass(l,k.hostCls,u);Y.toggleClass(e,k.scrollNodeCls,u);return u;}function G(){return !(mstrApp.isSingleTier&&L);}mstrmojo.ui._HasScroller=mstrmojo.provide("mstrmojo.ui._HasScroller",{_mixinName:"mstrmojo.ui._HasScroller",hasCustomScrollbar:null,draggable:true,ownAvatar:true,scrollNode:undefined,scrollbarHostNode:undefined,scrollBarNodes:undefined,setupScrollNodes:mstrmojo.emptyFn,installedEventListeners:null,init:function T(c){this._super(c);if(this.hasCustomScrollbar===null){this.hasCustomScrollbar=G();}this.installedEventListeners=[];},onRender:function I(){if(this._super){this._super();}this.updateScrollbars();this.addScrollNodeProperties();},addScrollNodeProperties:function F(){var d=this.scrollNode;if(d){var c=H.attachMarkupEvent(this.id,d,"scroll");this.installedEventListeners.push({e:d,evt:"scroll",fn:c});}if(!this.hasCustomScrollbar){Y.addClass(d,"mstrmojo-sb-show-default");return ;}if(d){Y.addClass(J.call(this),"mstrmojo-scrollbar-host");Y.addClass(d,"mstrmojo-scrollNode");}},updateScrollbars:function Z(){if(!this.hasRendered){return ;}this.setupScrollNodes();if(!this.hasCustomScrollbar){if(this.scrollNode){this.scrollNode.style.overflowX=a.call(this,"h")?"scroll":"hidden";}return ;}if(this.scrollNode){this.scrollBarNodes=this.scrollBarNodes||{};this.scrollTrackNodes=this.scrollTrackNodes||{};var c=this.scrollNode.style;c.overflowY=C.call(this,"v")?"scroll":"hidden";c.overflowX=C.call(this,"h")?"scroll":"hidden";}},onscroll:function V(){var j=this.scrollNode;if(j&&this.hasCustomScrollbar){var g=function g(k){var l=parseInt(k);return l===null||isNaN(l)?0:l;},h=H.position(j),i=h.h-g(Y.getStyleValue(j,"padding-bottom")),d=h.w-g(Y.getStyleValue(j,"padding-right")),f=this.scrollBarNodes,e=f.v,c=f.h;if(j.scrollHeight-i>0){e.style.top=((i-H.position(e).h)*(j.scrollTop/(j.scrollHeight-i)))+"px";}if(j.scrollWidth-d>0){c.style.left=((d-H.position(c).w)*(j.scrollLeft/(j.scrollWidth-d)))+"px";}}if(this._super){this._super();}if(this.onScrollEnd){this.onScrollEnd();}},getDragData:function E(d){var g=this.scrollNode,f=H.position(g),e=d.src.node,c=this.scrollBarNodes;if(this.isDraggingScrollBar(d)){return{isScrollBar:true,direction:e===c.v?"v":"h",scrollTop:g.scrollTop,scrollLeft:g.scrollLeft,conversionRatio:{y:g.scrollHeight/f.h,x:g.scrollWidth/f.w}};}return(this._super&&this._super(d));},isDragValid:function D(c){return this.isDraggingScrollBar(c)||(this._super&&this._super(c))||false;},isDraggingScrollBar:function S(d){var e=d.src.node,c=this.scrollBarNodes;return !!c&&(e===c.v||e===c.h);},ondragstart:function X(c){if(this.isDraggingScrollBar(c)){Y.addClass(c.src.node,R);Y.addClass(J.call(this),W);}if(this._super){this._super(c);}},shouldDragBubble:function Q(c){var d=c.src.node,e=this.scrollTrackNodes;return !!e&&(d===e.v||d===e.h);},ondragmove:function N(d){if(this.isDraggingScrollBar(d)){var l=d.tgt,c=d.src,m=l.pos,e=c.pos,i=c.node,h=this.scrollNode,k=this.scrollBarNodes,j=c.data,g={y:(m.y-e.y),x:(m.x-e.x)},f=j.conversionRatio;if(i===k.v){h.scrollTop=j.scrollTop+(g.y*f.y);}else{h.scrollLeft=j.scrollLeft+(g.x*f.x);}}if(this._super){this._super(d);}},ondragend:function N(c){if(this.isDraggingScrollBar(c)){Y.toggleClass(c.src.node,R,false);Y.toggleClass(J.call(this),W,false);}if(this._super){this._super(c);}},widgetResized:function M(){if(this._super){this._super();}this.updateScrollbars();},unrender:function U(c){O.forEach(this.installedEventListeners,function(d){H.detachEvent(d.e,d.evt,d.fn);});delete this.scrollNode;delete this.scrollbarHostNode;delete this.scrollBarNodes;delete this.scrollTrackNodes;this._super(c);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css");var F=mstrmojo.css,E="px",J="hasOwnAvatar",I={x:0,y:0};function B(L){var K=this.createAvatar(L.src.node,L);if(K){F.addClass(K,[this.avatarCssClass,J]);this.avatar=L.avatar=document.body.appendChild(K);}}function C(){var K=this.avatar;if(K){K.parentNode.removeChild(K);delete this.avatar;F.removeClass(K,[this.avatarCssClass,J]);}}mstrmojo._HasOwnAvatar=mstrmojo.provide("mstrmojo._HasOwnAvatar",{_mixinName:"mstrmojo._HasOwnAvatar",draggable:true,ownAvatar:true,avatarCssClass:"",restrictedToAxis:undefined,isDragValid:function H(K){if(this._super){return this._super(K);}return false;},ondragstart:function D(K){B.call(this,K);this.positionAvatar(K.src.pos,K);if(this._super){this._super(K);}},ondragmove:function A(K){this.positionAvatar(K.tgt.pos,K);if(this._super){this._super(K);}},ondragend:function A(K){C.call(this);if(this._super){this._super(K);}},createAvatar:mstrmojo.emptyFn,positionAvatar:function G(O,L){var N=this.avatar.style,M=this.restrictedToAxis,K=(L&&L.dragOffsets)||I;if(M!=="y"){N.left=O.x+K.x+E;}if(M!=="x"){N.top=O.y+K.y+E;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array");var G=mstrmojo.dom,J=mstrmojo.css,H="selected";function B(S,T,U,R,W){var V=W.listHooks[S];if(V&&V.call(W,T,U,R)){return ;}J.toggleClass(T,H,S==="select");}function I(U,T,S){var V=this[U],R=V?V.split(T):[];this[U]=mstrmojo.array.distinct(R.concat(S.split(T))).join(T);}mstrmojo._IsList=mstrmojo.provide("mstrmojo._IsList",{_mixinName:"mstrmojo._IsList",listHooks:{},useListModKeys:false,init:function Q(R){this._super(R);this._shiftStartIndex=-1;},getItemMarkup:function O(S,R){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}">{@en@n}</{@tag}>';},getItemDisplayName:function E(R){return R.n||"";},getItemProps:function K(V,R){var S=!!this.selectedIndices[R],W={tag:"div",sel:S,cls:"",n:this.getItemDisplayName(V),style:"",idx:R,addCls:function T(Y){I.call(this,"cls"," ",Y);},addStyle:function U(Y){I.call(this,"style",";",Y);},title:V.title||""};if(S){W.addCls(H);}var X=V.cls;if(X){W.addCls(X);}return W;},itemRenderer:{render:function A(S,R,T){S._renderIdx=R;return mstrmojo.string.apply(T.getItemMarkup(S,R),T.getItemProps(S,R));},select:function L(S,T,R,U){B("select",S,T,R,U);},unselect:function D(S,T,R,U){B("unselect",S,T,R,U);}},onclick:function P(R){try{var T=this.getItemFromTarget(R.getTarget());if(T){R.cancel();this.doItemSelect(T,R||{});}}catch(S){mstrApp.onerror(S);}},doItemSelect:function F(j,b){var R=b.hWin,h=b.e,c=j._renderIdx,W=j._positionIdx,S=G.isMetaKey(R,h),Z=G.shiftKey(R,h),Y=this.multiSelect,U=this.useListModKeys,d=this._shiftStartIndex,X=this.selectedIndices;if(Y&&U&&Z&&d>-1){var g=[],T=[],V=Math.min(d,c),k=Math.max(d,c),f;for(f=0;f<this.items.length;f++){if(V<=f&&f<=k){if(!X[f]){g.push(f);}}else{if(X[f]){T.push(f);}}}this.addSelect(g);this.removeSelect(T);}else{if(Y&&(!U||S)){var a=(X[c])?"remove":"add";this[a+"Select"](c,false,W);}else{this.singleSelect(c,false,W);}this._shiftStartIndex=c;}},onclearSelection:function N(){this._shiftStartIndex=-1;},getItemNodeFromTarget:function C(S){var R=G.findAncestorByAttr(S,"idx",true,this.domNode);return(R&&R.node)||null;},getItemFromTarget:function M(T){var S=this.getItemNodeFromTarget(T),R=S&&parseInt(S.getAttribute("idx"),10);if(R!==null&&!isNaN(R)&&this.items){return this.items[R];}return undefined;}});mstrmojo._IsList.SELECTED_CLS=H;}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.registry","mstrmojo.ListBuilder");var H=mstrmojo.hash,E=mstrmojo.registry,G=1;mstrmojo.WidgetListBuilder=mstrmojo.provide("mstrmojo.WidgetListBuilder",mstrmojo.mixin({newContext:function F(J){var K=J.itemFunction;if(!K){var I=J.itemConfig;K=I?function(M,L,N){var O=H.clone(I);O.data=M;O.parent=N;return E.ref(O);}:null;}return{itemStatus:[],itemWidgets:[],itemFunc:K};},build:function A(K,J,N,I){var L=J.itemFunc(N,I,K);if(L){J.itemStatus[I]=G;J.itemWidgets[I]=L;if(L.set){var M=K.selectedIndices;if(M&&M[I]){L.set("selected",true);}}}return L;},onadd:function C(K,I,J){if(I){mstrmojo.array.insert(I.itemWidgets,J.index,new Array(J.value.length));}this._super(K,I,J);},onremove:function D(L,J,K){if(J){var O=J.itemWidgets.splice(K.index,K.value.length),N,I;for(N=0,I=O.length;N<I;N++){var M=O[N];if(M&&M.destroy){delete M.parent;M.destroy();}}}this._super(L,J,K);},onchange:function B(S,J,P,T){if(T){var N=P.itemWidgets,L,O,I,R;for(O=0,I=T.removed,R=I&&I.length;O<R;O++){L=N[I[O]];if(L&&L.set){L.set("selected",false);}}var M,Q,K;for(M=0,Q=T.added,K=Q&&Q.length;M<K;M++){L=N[Q[M]];if(L&&L.set){L.set("selected",true);}}}}},H.copy(mstrmojo.ListBuilder)));}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.vi.viz.DropZoneHelper","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.XMLBuilder","mstrmojo.gm.GMEnums");var L=mstrmojo,F=L.hash,I=L.array,P=L.vi.viz,B=P.EnumDSSDropZones,A=1,H=0,D=P.DropZoneHelper.METRIC_NAMES_ID,O,E=mstrmojo.gm.DualAxisSubAxisBit,G=E.PRIMARY;mstrmojo.vi.viz.GraphMatrixHelper=mstrmojo.declare(mstrmojo.vi.viz.DropZoneHelper,null,{scriptClass:"mstrmojo.vi.viz.GraphMatrixHelper",handled:false,rowObjects:null,columnObjects:null,xAxisObjects:null,yAxisObjects:null,angleObjects:null,sliceObjects:null,breakByObjects:null,colorByObjects:null,currentXML:"",sizeByObjects:null,tooltipMetrics:null,data:null,metricsDropZone:"",secondaryMetricsDropZone:"",shape:"",subtype:"",metricShapes:null,visType:-1,init:function N(Q){this._super(Q);this.rowObjects=[];this.columnObjects=[];this.xAxisObjects=[];this.yAxisObjects=[];this.angleObjects=[];this.sliceObjects=[];this.breakByObjects=[];this.colorByObjects=[];this.sizeByObjects=[];this.tooltipMetrics=[];this.currentXML="";this.metricsDropZone="";this.secondaryMetricsDropZone="";this.shape="";this.subtype="";this.metricShapes="{}";},clone:function J(R){var Q=this;Q.rowObjects=R.rowObjects.concat();Q.columnObjects=R.columnObjects.concat();Q.xAxisObjects=R.xAxisObjects.concat();Q.yAxisObjects=R.yAxisObjects.concat();Q.angleObjects=R.angleObjects.concat();Q.sliceObjects=R.sliceObjects.concat();Q.breakByObjects=R.breakByObjects.concat();Q.colorByObjects=R.colorByObjects.concat();Q.sizeByObjects=R.sizeByObjects.concat();Q.tooltipMetrics=R.tooltipMetrics.concat();Q.currentXML=R.currentXML;Q.metricsDropZone=R.metricsDropZone;Q.secondaryMetricsDropZone=R.secondaryMetricsDropZone;Q.shape=R.shape;Q.subtype=R.subtype;Q.metricShapes=R.metricShapes;},exists:function(S,Q){var T=this[Q],R=false;I.forEach(T,function(U){R=(U.did===S.did);if(R){return false;}});return R;},removeAngleMetricFromOthers:function(Q){["xAxisObjects","yAxisObjects","tooltipMetrics"].every(function(T){var S=this[T],R=I.find(S,"did",Q.did);if(R>-1){S.splice(R,1);return false;}});},getXml:function C(){var Q=this.data.dz,R=Q?F.copy(Q.visProp&&Q.visProp.fmt,{}):{},S=new mstrmojo.XMLBuilder();if(this.shape){R.Shape=this.shape;}if(this.subtype){R.Subtype=this.subtype;}if(this.metricShapes){R.metricShapes=this.metricShapes;}R.visType=this.visType;S.addChild("props");S.addChild("widgetProps");S.addChild("fmt");F.forEach(R,function(T,U){S.addChild(U);S.addAttribute("value",T);S.closeElement();});S.closeElement();S.closeElement();S.closeElement();return S.toString();},setData:function K(T){if(!T){return ;}var R=this,S=function(V,W){if(V){var U=V.TemplateUnit||V.TemplateMetric;if(U){U.forEach(function(X){var Y=F.copy(X);if(!Y.did){Y.did=Y.id;}W.push(Y);});}}};S(T[O.PROP_ROWS],this.rowObjects);S(T[O.PROP_COLUMNS],this.columnObjects);S(T[O.PROP_XAXIS],this.xAxisObjects);S(T[O.PROP_YAXIS],this.yAxisObjects);S(T[O.PROP_BREAKBY],this.breakByObjects);S(T[O.PROP_COLORBY],this.colorByObjects);S(T[O.PROP_SIZEBY],this.sizeByObjects);S(T[O.PROP_SLICE],this.sliceObjects);S(T[O.PROP_ANGLE],this.angleObjects);S(T[O.PROP_TOOLTIPMETRICS],this.tooltipMetrics);var Q=T.visProp.fmt;this.shape=Q[O.PROP_SHAPE];this.subtype=Q[O.PROP_SUBTYPE];},setMetricsDropZone:function M(Q){if(!Q){return ;}var R=this;[O.PROP_ROWS,O.PROP_COLUMNS,O.PROP_XAXIS,O.PROP_YAXIS,O.PROP_BREAKBY,O.PROP_SLICE,O.PROP_COLORBY].forEach(function(S){if(Q[S]&&Q[S].hasOwnProperty("MetricNames")){if(R.metricsDropZone){R.secondaryMetricsDropZone=S;}else{R.metricsDropZone=S;}}});},getAddDropZonesAction:function(){var U=this,R=this.metricsDropZone,Q=this.secondaryMetricsDropZone,S={act:"updateTemplate",keyContext:this.data.k,actions:[]},T=function(V){S.actions.push({act:"addDropZoneUnit",zoneId:B[V],unitId:D,unitType:H});};[{p:"rowObjects",v:"Rows"},{p:"columnObjects",v:"Columns"},{p:"xAxisObjects",v:"XAxis"},{p:"yAxisObjects",v:"YAxis"},{p:"breakByObjects",v:"BreakBy"},{p:"colorByObjects",v:"ColorBy"},{p:"sizeByObjects",v:"SizeBy"},{p:"angleObjects",v:"Angle"},{p:"sliceObjects",v:"SliceBy"},{p:"tooltipMetrics",v:"AdditionalMetrics"}].forEach(function(X){var V=U[X.p],Y=B[X.v];V.forEach(function(Z){S.actions.push({act:"addDropZoneUnit",zoneId:Y,unitId:Z.did,unitType:Z.t,ax:Z.ax||G});});if(R===X.v){var W=function(Z){return(Z&&(Z.length>A)&&U.isMetricZone(Z));};if(W(U.xAxisObjects)||W(U.yAxisObjects)||W(U.angleObjects)){T(R);}}});if(Q==="ColorBy"){T(Q);}return S;}});O=mstrmojo.vi.viz.GraphMatrixHelper;O.PROP_ROWS="Rows";O.PROP_COLUMNS="Columns";O.PROP_HORIZONTAL_AXIS="HorizontalAxis";O.PROP_VERTICAL_AXIS="VerticalAxis";O.PROP_XAXIS="XAxis";O.PROP_YAXIS="YAxis";O.PROP_SLICE="SliceBy";O.PROP_ANGLE="AngleBy";O.PROP_BREAKBY="BreakBy";O.PROP_COLORBY="ColorBy";O.PROP_SIZEBY="SizeBy";O.PROP_TOOLTIPMETRICS="AdditionalMetrics";O.PROP_SHAPE="Shape";O.PROP_SUBTYPE="Subtype";O.PROP_METRICSHAPES="metricShapes";O.PROP_SHAPE_AREA="Area";O.PROP_SHAPE_LINE="Line";O.PROP_SHAPE_BAR="Bar";O.PROP_SHAPE_CIRCLE="Circle";O.PROP_SHAPE_SQUARE="Square";O.PROP_SHAPE_PIE="Pie";O.PROP_SHAPE_RING="Ring";O.PROP_SHAPE_TICK="Tick";O.PROP_SUBTYPE_CLUSTERED="Clustered";O.PROP_SUBTYPE_AUTOMATIC="Automatic";O.PROP_SUBTYPE_STACKED="Stacked";O.PROP_SUBTYPE_ABSOLUTE="Absolute";O.PROP_SUBTYPE_PERCENT="Percent";}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.vi.viz.DropZoneHelper");var V=mstrmojo,I=V.array,T=V.vi.viz.EnumDSSDropZones,N=V.hash,M;function C(b,a){var c=b.getDropZoneItems(a);return c[0];}function R(b,a){var c=C(b,a);return c?c.id:"";}mstrmojo.vi.viz.MapHelper=mstrmojo.declare(mstrmojo.vi.viz.DropZoneHelper,null,{scriptClass:"mstrmojo.vi.viz.MapHelper",widget:null,data:null,vp:null,geoAttribute:null,latitude:null,longitude:null,angle:null,colorBy:null,sizeBy:null,tooltip:null,mapType:null,useAttributeForm:null,supportAreaMap:true,defaultView:null,init:function S(a){this._super(a);this.tooltip=[];this.data=this.data||{};this.vp=this.data.vp||{};},setWidget:function W(a){this.widget=a;var b=a.model.data.vp;this.geoAttribute=R(a,T.GeoAttribute);this.latitude=R(a,T.Latitude);this.longitude=R(a,T.Longitude);this.angle=R(a,T.Angle);this.colorBy=R(a,T.ColorBy);this.sizeBy=R(a,T.SizeBy);this.tooltip=a.getDropZoneItems(T.AdditionalMetrics).map(function(c){return c.id;});this.mapType=b.mtp;this.useAttributeForm=b.af;this.defaultView=b.dv;},getGeoUnit:function P(){return C(this.widget,T.GeoAttribute);},getLatitudeUnit:function H(){return C(this.widget,T.Latitude);},getLongitudeUnit:function L(){return C(this.widget,T.Longitude);},getAngleUnit:function A(){return C(this.widget,T.Angle);},getColorByUnit:function B(){return C(this.widget,T.ColorBy);},getSizeByUnit:function K(){return C(this.widget,T.SizeBy);},getTooltipUnits:function G(){return this.widget.getDropZoneItems(T.AdditionalMetrics);},setMapType:function(a){this.mapType=a;},setUseAttributeForm:function J(a){this.useAttributeForm=a?M.USE_ATTRIBUTE_FORM:M.USE_ATTRIBUTE;},getGeoForm:function F(d,b){var a=d&&d.fs,c=null;if(!b){b=function(){return true;};}if((d.otp===12||d.t===12)&&a){I.forEach(a,function(e){if(b(e)){c=e;return false;}});}return c;},getLatitudeForm:function Z(a){return this.getGeoForm(a,function(b){return M.isLatitude(b.fnm,b.fgr)&&b.obf;});},getLongitudeForm:function D(a){return this.getGeoForm(a,function(b){return M.isLongitude(b.fnm,b.fgr)&&b.obf;});},getXml:function O(){return M.getXmlFromJson(this.vp);}});M=mstrmojo.vi.viz.MapHelper;M.USE_ATTRIBUTE="0";M.USE_ATTRIBUTE_FORM="1";M.MTP_MARKER="1";M.MTP_BUBBLE="2";M.MTP_AREA="3";M.MTP_DENSITY="4";M.MTP_PATH="5";M.canShowColorByZone=function(a){return a===M.MTP_MARKER||a===M.MTP_BUBBLE||a===M.MTP_AREA||a===M.MTP_PATH;};M.canShowSizeByZone=function(a){return a===M.MTP_BUBBLE;};M.supportImageThreshold=function(a){return a!==M.MTP_BUBBLE&&a!==M.MTP_AREA;};M.isLatitude=function Y(b,a){return a===5||(b&&b.toLowerCase().indexOf("latitude")>-1);};M.isLongitude=function X(b,a){return a===6||(b&&b.toLowerCase().indexOf("longitude")>-1);};M.getXmlFromJson=function E(a){var b=new mstrmojo.XMLBuilder();b.addChild("widgetProps");b.addChild("fmt");N.forEach(a,function(c,d){b.addChild(d);b.addAttribute("value",c);b.closeElement();});b.closeElement();b.closeElement();return b.toString();};M.getMapTypeByElementCount=function Q(a){return a>500?M.MTP_DENSITY:M.MTP_MARKER;};M.isGeoRoleSupportArea=function U(d){var c=1,e=3,g=2,b=8,f=9,a=7;return d===e||d===g||d===b||d===f||d===c||d===a;};}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.expr","mstrmojo.date","mstrmojo.num","mstrmojo.string");mstrmojo.validation={STATUSCODE:{UNKNOWN:-1,VALID:0,INVALID:1,INVALID_EMPTY:2,INVALID_CHAR:3,INVALID_OUTOFRANGE:4,INVALID_REGEX:5,INVALID_VALIDATOR:6,INVALID_BAD_NUMERICFORMAT:7,INVALID_BAD_DATESTRING:8},TRIGGER:{NONE:0,ONBLUR:1,ONKEYUP:2,VALUESET:4,ALL:7},REGEXP:{US_ZIP:/^\d{5}([\- ]?\d{4})?$/,EMAIL_ADDRESS:/^([a-zA-Z0-9_\.\-])+@(([a-zA-Z0-9\-])+[\.])+([a-zA-Z0-9]{2,4})+$/,SOCIAL_SECURITY_NUMBER:/^((?!000)(?!666)\d{3})(\s|\-)?((?!00)\d{2})\2((?!0000)\d{4})$/,PHONE_NUMBER:/^(?!-)[ \d\-\(\)\.\+]+$/,FILE_NAME:new RegExp('^[^:*?"<>|/\\\\()]+$'),FOLDER_PATH_WIN:new RegExp('^([a-zA-Z]:|\\\\\\\\[^:*?"<>|/\\\\]+|[^:*?"<>|/\\\\]*)(\\\\[^:*?"<>|/\\\\]+)*(\\\\){0,1}$'),FOLDER_PATH_UNIX:new RegExp('^(/){0,1}([^:*?"<>|/\\\\]+/)*([^:*?"<>|/\\\\]+){0,1}$'),PRINTER_PATH_SINGLE:new RegExp('^[^$%:*?"<>|/\\\\]*$'),PRINTER_PATH_MULTIPLE:new RegExp('^((/|\\\\\\\\)[^$%:*?"<>|/\\\\]+)((/|\\\\)[^$%:*?"<>|/\\\\]+)*(/|\\\\){0,1}$')}};var H=mstrmojo.validation,B=H.TRIGGER,b=H.STATUSCODE,A={"-1":-1,1:1,2:1,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:4,12:4,13:4,14:6,15:6,16:6,17:3,18:3,21:2,22:2,23:3,24:4,25:3,30:5,34:5};H.VALIDATOR={DEMO:function N(e){var d=parseInt(e,10),f=mstrmojo.validation.STATUSCODE;if(d===0||d===1||d>10){return{code:f.VALID};}return{code:f.INVALID,msg:"This field must be either 0, 1 or greater than 10"};},VALIDATE_PHONENO:function I(d){var e=String(d).replace(/[^\d]/g,"");if(e.length<10){return{code:b.INVALID,msg:mstrmojo.desc(9203,"A telephone number must contain at least 10 digits.")};}if(!H.REGEXP.PHONE_NUMBER.test(d)){return{code:b.INVALID,msg:mstrmojo.desc(9204,"The telephone number contains invalid characters.")};}return{code:b.VALID};},VALIDATE_ZIPCODE:function G(d){var f="",e=this.dtp;if(!H.REGEXP.US_ZIP.test(d)){if(H.isNumeric(e)||H.isInt(e)){f=mstrmojo.desc(9208,"A zip code must be 5 digits or 5+4 digits.");}else{if(H.isString(e)){f=mstrmojo.desc(9206,"The zip code is invalid");}}return{code:b.INVALID,msg:f};}return{code:b.VALID};},VALIDATE_EMAIL:function T(d){var e=d.indexOf("@");if(e===-1){return{code:b.INVALID,msg:mstrmojo.desc(9197,"The email address is missing an at sign (@).")};}if(d.substring(e).indexOf(".")===-1){return{code:b.INVALID,msg:mstrmojo.desc(9198,"The email address is missing a period on the domain.")};}return H.REGEXP.EMAIL_ADDRESS.test(d)?{code:b.VALID}:{code:b.INVALID,msg:mstrmojo.desc(9207,"The email address is invalid.")};},VALIDATE_SSN:function Q(d){var f=this.dtp,e;if(H.isNumeric(f)||H.isInt(f)){e=String(d).replace(/[^\d]/g,"");if(e.length!==9){return{code:b.INVALID,msg:mstrmojo.desc(9209,"A Social Security Number must be 9 digits.")};}}if(!H.REGEXP.SOCIAL_SECURITY_NUMBER.test(d)){return{code:b.INVALID,msg:mstrmojo.desc(9210,"The Social Security Number is invalid.")};}return{code:b.VALID};}};H.isInt=function D(d){return A[d]===1;};H.isNumeric=function Y(d){return A[d]===2||A[d]===5;};H.isString=function J(d){return A[d]===3;};var C=window.mstrConfig,L=C.listSep,S=mstrmojo.expr,M=S.DTP,Z=mstrmojo.num,U=mstrmojo.string,F=mstrmojo.date;function P(k,l){var h=k.dtp,j=k.constraints,n=j.allowedFormatChars||"",g=(A[h]===1),d=(A[h]===2),e=(A[h]===6),m=mstrmojo.locales.number.THOUSANDSEPARATOR,f=mstrmojo.locales.number.DECIMALSEPARATOR,i;if(g){if(!k._intRegExp){n+="0-9-"+(k.isList?L:"")+m;k._intRegExp=new RegExp("[^"+n+"]");}i=k._intRegExp;}if(d){if(!k._numericRegExp){n+="0-9-"+(k.isList?L:"")+f+m;k._numericRegExp=new RegExp("[^"+n+"]");}i=k._numericRegExp;}return !!i&&i.test(l);}function c(k,m){var h=k.dtp,j=k.constraints,g=(A[h]===1),d=(A[h]===2),e=(A[h]===6),f=j.min,l=j.max,i;if(f===undefined&&l===undefined){return false;}if(g||d){return Z.inNumericRange(m,f,l)!==0;}if(e){return F.inDateTimeRange(m,f,l)!==0;}return false;}function K(e,d){return !Z.isNumeric(d);}function R(g,e){var f=(g.dtp===M.DATE),d=(g.dtp===M.TIME);return(f?!F.isDate(e):(d?!F.isTime(e):!F.isDateAndOrTime(e)));}mstrmojo._CanValidate=mstrmojo.provide("mstrmojo._CanValidate",{constraints:null,required:false,dtp:M.INTEGER,isList:false,autoFormat:false,validationStatus:null,init:function W(d){this._super(d);if(!this.constraints){this.constraints={};}var e=this.constraints;if(!e.hasOwnProperty("trigger")){e.trigger=B.NONE;}},_set_value:function(i,f){var g=this.value,e=(g!==f);if(e){this.value=f;var h=this.constraints.trigger,d=(h&B.VALUESET)>0;if(d){this.validate(f);}}return e;},validate:function O(){var f=(this.value!==null&&this.value!==undefined)?this.value:"",j=this.isList?f.split(L):[f],h,e,k,d=j.length,g;for(g=0;g<d;g++){h=this.doValidation(j[g]);e=(h.code>b.VALID);if(e){if(d>1){h.msg=mstrmojo.locales.validation.invalidValueInListError.replace("#",j[g]||" ");}break;}}k=e?"onInvalid":"onValid";if(!e&&this.autoFormat){this.format();}this.set("validationStatus",h);if(this[k]){this[k](h);}},format:function X(){var j=this.dtp,f=(A[j]===6);if(!f){return ;}var l=mstrConfig.listSep,o=this.value||"",e=this.isList?o.split(l):[o],n=j===14,m=[],d,g=mstrmojo.locales.datetime,k=e.length,h;for(h=0;h<k;h++){o=e[h];d=F.parseDateAndOrTime(o);if(d){if(n&&d.date){m.push(F.formatDateInfo(d.date,g.DATEOUTPUTFORMAT));}else{m.push((d.date?F.formatDateInfo(d.date,g.DATEOUTPUTFORMAT):"")+" "+(d.time?F.formatTimeInfo(d.time,g.TIMEOUTPUTFORMAT):""));}}}this.set("value",m.join(l));},isValid:function V(){var d=this.validationStatus;if(!d){this.validate();}return this.validationStatus.code===b.VALID;},clearValidation:function a(){this.set("validationStatus",{code:b.VALID});if(this.onClearValidation){this.onClearValidation();}},doValidation:function E(p){var m=this.constraints,n=m.regExp,f=m.validator,d={id:this.id,code:b.VALID,msg:""},l=this.dtp,k=(A[l]===1),e=(A[l]===2||A[l]===5),g=(A[l]===3),h=(A[l]===6),j=U.isEmpty(p),o=String(p).length,i="",s=mstrmojo.locales.validation;if(this.required&&j){d.code=b.INVALID_EMPTY;d.msg=s.requiredFieldError;return d;}p=U.trim(p);if(!j&&P(this,p)){if(k){i=s.integerDataType;}if(e){i=s.numericDataType;}if(h){i=s.dateDataType;}d.code=b.INVALID_CHAR;d.msg=s.invalidCharError.replace("#",i);return d;}if(!j&&h&&R(this,p)){d.code=b.INVALID_BAD_DATESTRING;d.msg=s.invalidDateStringError;return d;}if(!j&&(e||k)&&K(this,p)){d.code=b.INVALID_BAD_NUMERICFORMAT;d.msg=s.invalidNumericFormatError;return d;}if(!j&&(k||e||h)&&c(this,p)){d.code=b.INVALID_OUTOFRANGE;if(m.min!==null&&m.max!==null){i=s.outofRangeError.replace("# ","").replace("##",m.min).replace("###",m.max);}else{if(m.min!==null){i=s.noLessMinError.replace("##",m.min).replace("# ","");}else{if(m.max!==null){i=s.noGreaterMaxError.replace("###",m.max).replace("# ","");}}}d.msg=i;return d;}if(g&&m.minLen!==null&&m.maxLen!==null){if(o<m.minLen||o>m.maxLen){d.code=b.INVALID;d.msg=mstrmojo.desc(9211).replace(/#/,m.minLen).replace(/##/,m.maxLen);return d;}}if(n&&!n.test(p)){d.code=b.INVALID_REGEX;d.msg=mstrmojo.desc(9205);return d;}var q=f&&f.apply(this,[p]);if(q){d.code=q.code;d.msg=q.msg;return d;}return d;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Base","mstrmojo.chart.common.DSSTimeUtil");var H=24*60*60*1000;var A=60*60*1000;var L=60*1000;var C=1000;var K=24;var D=24*60;var J=24*60*60;var B=new mstrmojo.chart.common.DSSTimeUtil();mstrmojo.chart.common.DSSDateTime=mstrmojo.declare(mstrmojo.Base,null,{scriptClass:"mstrmojo.chart.common.DSSDateTime",mnYear:1899,mnMonth:12,mnDay:30,mnHour:0,mnMinute:0,mnSecond:0,mnMillisecond:0,mnWeek:-1,mnDayOfWeek:-1,init:function P(T){if(!T||!T.ifTime){this.mnYear=1899;this.mnMonth=12;this.mnDay=30;this.mnHour=0;this.mnMinute=0;this.mnSecond=0;this.mnMillisecond=0;this.mnWeek=-1;this.mnDayOfWeek=-1;return ;}var S=0;var V=23242571;var R=-693593;if(T.ifTime>V){this.mnYear=65535;this.mnMonth=12;this.mnDay=30;S=T.ifTime-Math.floor(T.ifTime);}else{if(T.ifTime<R){this.mnYear=1;this.mnMonth=1;this.mnDay=1;S=Math.abs(T.ifTime)+Math.ceil(T.ifTime);}else{if(T.ifTime>0){var W=this.DAYSToYMD(Math.floor(T.ifTime));this.mnYear=W.year;this.mnMonth=W.month;this.mnDay=W.day;S=T.ifTime-Math.floor(T.ifTime);}else{if(T.ifTime<0){var W=this.DAYSToYMD(Math.ceil(T.ifTime));this.mnYear=W.year;this.mnMonth=W.month;this.mnDay=W.day;S=Math.abs(T.ifTime)+Math.ceil(T.ifTime);}}}}S*=H;var U=S+0.5;if(U==H){U--;}if(U>0){this.mnHour=Math.floor(U/A);U-=this.mnHour*A;this.mnMinute=Math.floor(U/L);U-=this.mnMinute*L;this.mnSecond=Math.floor(U/C);U-=this.mnSecond*C;this.mnMillisecond=Math.floor(U);}else{this.mnHour=0;this.mnMinute=0;this.mnSecond=0;this.mnMillisecond=0;}this.mnWeek=-1;this.mnDayOfWeek=-1;this.Sanitize();},Sanitize:function O(){var R=false;if(this.mnHour==24&&this.mnMinute==0&&this.mnSecond==0){R=true;this.mnHour=0;}if(this.mnMonth<1){this.mnMonth=1;}else{if(this.mnMonth>12){this.mnMonth=12;}}if(this.mnDay<1){this.mnDay=1;}else{if(this.mnDay>B.DaysInMonth[this.mnMonth-1]){this.mnDay=B.DaysInMonth[this.mnMonth-1];if(this.mnMonth==2&&this.IsLeapYear(this.mnYear)){this.mnDay++;}}}if(this.mnHour<0){this.mnHour=0;}else{if(this.mnHour>23){this.mnHour=23;}}if(this.mnMinute<0){this.mnMinute=0;}else{if(this.mnMinute>59){this.mnMinute=59;}}if(this.mnSecond<0){this.mnSecond=0;}else{if(this.mnSecond>59){this.mnSecond=59;}}if(this.mnMillisecond<0){this.mnMillisecond=0;}else{if(this.mnMillisecond>999){this.mnMillisecond=999;}}if(R){var S=this.ToMilliseconds();S=S+H;this.init({ifTime:this.MillisecondsToDATE(S)});}},IsLeapYear:function Q(R){return((R&3)==0)&&((R%100)!=0||(R%400)==0);},ToMilliseconds:function I(){var R=this.YMDToDAYS(this.mnYear,this.mnMonth,this.mnDay);var S=R*H;S+=this.mnHour*A+this.mnMinute*L+this.mnSecond*C+this.mnMillisecond;return S;},MillisecondsToDATE:function E(S){var R=Math.floor(S/H);var T=(S-R*H)/H;if(T<0){R--;T+=1;}return R>=0?R+T:R-T;},DAYSToYMD:function N(T){var W=0;var Y=0;var S=0;T+=693959;var V=Math.floor(T/365);var U=T-V*365;var X=Math.floor(V/4)-Math.floor(V/100)+Math.floor(V/400);U=U-X;if(U<0){V--;U+=365;while(U<=0){V--;U+=365;}}var R=T-(V*365+Math.floor(V/4)+(V%4?1:0)-Math.floor((V-1)/100)+Math.floor((V-1)/400));if(R==365&&!this.IsLeapYear(V)){W=V+1;Y=1;S=1;return{year:W,month:Y,day:S};}if(R==-1){W=V-1;Y=12;S=31;return{year:W,month:Y,day:S};}W=V;Y=12;while(R<B.DaysBeforeMonth[Y-1]){Y--;}S=R-B.DaysBeforeMonth[Y-1]+1;if(Y>2&&this.IsLeapYear(W)){S--;if(S==0){Y--;S=B.DaysInMonth[Y-1];if(Y==2){S++;}}}return{year:W,month:Y,day:S};},YMDToDAYS:function G(U,T,S){if(T<1||T>12){return 0;}var R=U*365+Math.floor(U/4)+(U%4?1:0)-Math.floor((U-1)/100)+Math.floor((U-1)/400);R+=B.DaysBeforeMonth[T-1];if(T>2&&this.IsLeapYear(U)){R++;}R+=S-1;R-=693959;return R;},ToDATE:function F(){var S=this.YMDToDAYS(this.mnYear,this.mnMonth,this.mnDay);var R=this.mnHour/K+this.mnMinute/D+this.mnSecond/J+this.mnMillisecond/H;if(S>=0){return S+R;}else{return S-R;}},DateTimeOrder:function M(R){if(this.mnYear>R.mnYear){return 1;}else{if(this.mnYear<R.mnYear){return -1;}}if(this.mnMonth>R.mnMonth){return 1;}else{if(this.mnMonth<R.mnMonth){return -1;}}if(this.mnDay>R.mnDay){return 1;}else{if(this.mnDay<R.mnDay){return -1;}}if(this.mnHour>R.mnHour){return 1;}else{if(this.mnHour<R.mnHour){return -1;}}if(this.mnMinute>R.mnMinute){return 1;}else{if(this.mnMinute<R.mnMinute){return -1;}}if(this.mnSecond>R.mnSecond){return 1;}else{if(this.mnSecond<R.mnSecond){return -1;}}if(this.mnMillisecond>R.mnMillisecond){return 1;}else{if(this.mnMillisecond<R.mnMillisecond){return -1;}}return 0;}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.viz.MapHelper","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.hash");var C=mstrmojo.vi.viz.EnumDSSDropZones,D=mstrmojo.vi.viz.MapHelper,A=new RegExp(".{32}","g");mstrmojo.vi.viz.GoogleMapHelper=mstrmojo.declare(mstrmojo.vi.viz.MapHelper,null,{scriptClass:"mstrmojo.vi.viz.GoogleMapHelper",supportAreaMap:false,tooltip:[],showColorByZone:function(){return D.canShowColorByZone(this.mapType||this.vp.mtp);},showSizeByZone:function(){return D.canShowSizeByZone(this.mapType||this.vp.mtp);},getXml:function B(){var G=this.vp,L=this.geoAttribute,J=this.latitude,K=this.longitude,M=this.colorBy,E=this.sizeBy,N=this.tooltip,I=this.mapType,F=this.defaultView,H=this.useAttributeForm;if(I){G.mtp=I;}if(F){G.dv=F;}G.ga=L||"";G.flat=J||"";G.flong=K||"";G.cmt=M||"";G.smt=E||"";if(H){G.af=H;}G.tooltip="";N.forEach(function(O){G.tooltip+=O;});return this._super();}});mstrmojo.vi.viz.GoogleMapHelper.zonesCfg=[{n:mstrmojo.desc(11661,"Geo Attribute"),id:C.GeoAttribute,prm:true,show:function(E){return true;},v:function(E){return E.ga?[E.ga]:[];},onDel:function(E){E.ga="";},onAdd:function(E,F){E.ga=F.item.did;E.af=D.USE_ATTRIBUTE_FORM;}},{n:mstrmojo.desc(7696,"Latitude"),id:C.Latitude,prm:true,show:function(E){return E.mtp!=="3";},v:function(E){return E.flat?[E.flat]:[];},onDel:function(E){E.flat="";},onAdd:function(E,F){var G=F.item;E.flat=G.did;E.af=G.t===21?D.USE_ATTRIBUTE_FORM:D.USE_ATTRIBUTE;}},{n:mstrmojo.desc(7697,"Longitude"),id:C.Longitude,prm:true,show:function(E){return E.mtp!=="3";},v:function(E){return E.flong?[E.flong]:[];},onDel:function(E){E.flong="";},onAdd:function(E,F){var G=F.item;E.flong=G.did;E.af=G.t===21?D.USE_ATTRIBUTE_FORM:D.USE_ATTRIBUTE;}},{n:mstrmojo.desc(11662,"Color By"),id:C.ColorBy,prm:true,show:function(E){return D.canShowColorByZone(E.mtp);},v:function(E){return E.cmt?[E.cmt]:[];},onDel:function(E){E.cmt="";},onAdd:function(E,F){E.cmt=F.item.did;}},{n:mstrmojo.desc(11663,"Size By"),id:C.SizeBy,prm:true,show:function(E){return D.canShowSizeByZone(E.mtp);},v:function(E){return E.smt?[E.smt]:[];},onDel:function(E){E.smt="";},onAdd:function(E,F){E.smt=F.item.did;}},{n:mstrmojo.desc(2962,"Tooltip"),id:C.AdditionalMetrics,prm:false,show:function(E){return true;},v:function(E){var F=E.tooltip;return F?F.match(A):[];},onDel:function(E,F){E.tooltip=E.tooltip.replace(F.item.did,"");},onAdd:function(E,F){var G=E.tooltip?E.tooltip.match(A):[];G.splice(F.idx,0,F.item.did);E.tooltip=G.join("");}}];}());(function(){mstrmojo.requiresCls("mstrmojo.vi.viz.MapHelper","mstrmojo.vi.viz.EnumDSSDropZones");var E=mstrmojo.vi.viz.MapHelper,D=mstrmojo.vi.viz.EnumDSSDropZones,H=mstrmojo.gmaps,A=new RegExp(".{32}","g");function C(I){return(I.sa==="1")?E.MTP_AREA:I.mtp;}mstrmojo.vi.viz.ESRIMapHelper=mstrmojo.declare(mstrmojo.vi.viz.MapHelper,null,{scriptClass:"mstrmojo.vi.viz.ESRIMapHelper",setWidget:function G(I){this._super(I);this.mapType=C(I.model.data.vp);},setMapType:function F(I){this._super(I);if(I===mstrmojo.vi.viz.MapHelper.MTP_AREA){this.vp.sa="1";this.vp.sm="0";}else{this.vp.sm="1";this.vp.sa="0";}},showAngleZone:function(){return(vp.mtp===H.EnumMapType.Marker||vp.mtp===H.EnumMapType.Bubble)&&vp.mc===H.EnumClusterMode.PIE;},showColorByZone:function(){return E.canShowColorByZone(this.mapType||C(this.vp));},showSizeByZone:function(){return E.canShowSizeByZone(this.mapType||C(this.vp));},getXml:function B(){var K=this.vp,P=this.geoAttribute,N=this.latitude,O=this.longitude,Q=this.colorBy,I=this.sizeBy,R=this.tooltip,M=this.mapType,J=this.defaultView,L=this.useAttributeForm;if(M){K.mtp=M;K.sa=M===E.MTP_AREA?"1":"0";K.sm=M===(E.MTP_MARKER||M===E.MTP_BUBBLE)?"1":"0";}if(J){K.dv=J;}K.ma=P||"";K.lat=N||"";K.lng=O||"";K.cmt=Q||"";K.smt=I||"";if(L){K.af=L;}K.tooltip="";R.forEach(function(S){K.tooltip+=S;});return this._super();}});mstrmojo.vi.viz.ESRIMapHelper.zonesCfg=[{n:mstrmojo.desc(11661,"Geo Attribute"),id:D.GeoAttribute,prm:true,show:function(I){return true;},v:function(I){return[I.ma];},onDel:function(I){I.ma="";},onAdd:function(I,J){I.ma=J.item.did;I.af=E.USE_ATTRIBUTE_FORM;I.lid="";}},{n:mstrmojo.desc(7696,"Latitude"),id:D.Latitude,prm:true,show:function(I){return I.sa!=="1";},v:function(I){return I.lat?[I.lat]:[];},onDel:function(I){I.lat="";},onAdd:function(I,J){var K=J.item;I.lat=K.did;I.af=K.t===21?E.USE_ATTRIBUTE_FORM:E.USE_ATTRIBUTE;}},{n:mstrmojo.desc(7697,"Longitude"),id:D.Longitude,prm:true,show:function(I){return I.sa!=="1";},v:function(I){return I.lng?[I.lng]:[];},onDel:function(I){I.lng="";},onAdd:function(I,J){var K=J.item;I.lng=K.did;I.af=K.t===21?E.USE_ATTRIBUTE_FORM:E.USE_ATTRIBUTE;}},{n:mstrmojo.desc(14294,"Angle"),id:D.Angle,prm:true,show:function(I){return(I.mtp===H.EnumMapType.Marker||I.mtp===H.EnumMapType.Bubble)&&I.mc===H.EnumClusterMode.PIE;},v:function(I){return[I.amt];},onDel:function(I){I.amt="";},onAdd:function(I,J){I.amt=J.item.did;}},{n:mstrmojo.desc(11662,"Color By"),id:D.ColorBy,prm:true,show:function(I){return E.canShowColorByZone(C(I));},v:function(I){return[I.cmt];},onDel:function(I){I.cmt="";},onAdd:function(I,J){I.cmt=J.item.did;}},{n:mstrmojo.desc(11663,"Size By"),id:D.SizeBy,prm:true,show:function(I){return E.canShowSizeByZone(C(I));},v:function(I){return[I.smt];},onDel:function(I){I.smt="";},onAdd:function(I,J){I.smt=J.item.did;}},{n:mstrmojo.desc(2962,"Tooltip"),id:D.AdditionalMetrics,prm:false,show:function(I){return true;},v:function(I){var J=I.tooltip;return J&&J.match(A);},onDel:function(I,J){I.tooltip=I.tooltip.replace(J.item.did,"");},onAdd:function(I,J){var K=I.tooltip?I.tooltip.match(A):[];K.splice(J.idx,0,J.item.did);I.tooltip=K.join("");}}];}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.WidgetListBuilder");mstrmojo.WidgetTreeBuilder=mstrmojo.provide("mstrmojo.WidgetTreeBuilder",mstrmojo.mixin({newContext:function A(B){var D=this._super(B);if(!B.itemFunction&&D.itemFunc){var C=D.itemFunc;D.itemFunc=function(G,F,H){var E=C(G,F,H);if(E){E.tree=H.tree||H;}return E;};}return D;}},mstrmojo.hash.copy(mstrmojo.WidgetListBuilder)));})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var D=1,B="mstrmojo-itemwrap";mstrmojo.ListMapperHoriz=mstrmojo.provide("mstrmojo.ListMapperHoriz",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table" cellspacing="0" cellpadding="0"><tbody><tr>',markupSuffix:"</tr></tbody></table>",itemWrapperPrefix:function(H){return'<td class="'+this.getWrapperCss(H)+'">';},getWrapperCss:function(H){return"mstrmojo-itemwrap-td";},itemWrapperPrefill:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",itemWrapperSuffix:"</td>",wrapperNodes:function G(H){return this.wrapperParentNode(H).cells;},wrapperParentNode:function F(H){return H.firstChild.rows[0];},createWrapperNode:function E(H){var I=H.ownerDocument,J=I.createElement("td");return J;},findScrollRange:function C(U,L,S,X,I,P,Y,W){var Q=this.wrapperNodes(U),R=parseInt(L/2,10),K=parseInt(Math.log(L)/Math.log(2),10),J=0,H=L-1,T=I+P,M=Q[0].offsetLeft,O;for(var V=1;V<=K;V++){O=Q[R].offsetLeft-M+Y;if(O<=I){J=R;}else{if(O>=T){H=R;}}var N=Math.round(L/Math.pow(2,V+1));R+=(O>I)?-N:N;R=Math.min(Math.max(0,R),L-1);}return{start:J,end:H};},findIndex:function A(I,M,K){if(M&&K){var H=I.domNode,L=this.wrapperParentNode(M),J=K.parentNode;while(J){if(J===L){return mstrmojo.array.findBin(this.wrapperNodes(M),K,"offsetLeft",I.items&&I.items.length);}else{if(J===H){break;}}K=J;J=K.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));})();(function(){mstrmojo.requiresCls("mstrmojo.Obj");var B={TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4};mstrmojo.ui.PopupConfig=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ui.PopupConfig",ENUM_CORNERS:B,isHostedWithin:true,position:null,hostProxyCssClass:"",hostId:"",hostElement:null,anchorElement:null,popupHandlers:null,alignment:null,alignWithAnchor:false,useTooltip:false,init:function E(F){this.clear();this._super(F);},setAlignment:function C(F,G){this.alignment={host:F,popup:G};},addPopupHandlers:function D(F,H,G){this.popupHandlers[F]={open:H,close:G};},clear:function A(){this.popupHandlers={};var F=this.ENUM_CORNERS;this.alignment={host:F.BOTTOM_LEFT,popup:F.TOP_LEFT};}});mstrmojo.ui.PopupConfig.ENUM_CORNERS=B;}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo._HasChildren","mstrmojo.Binding","mstrmojo._HasBindings");mstrmojo.Model=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasChildren,mstrmojo._HasBindings],{scriptClass:"mstrmojo.Model",init:function A(C){this._super(C);if(this.children){this.initChildren();}if(!this.parent){this.initBindings();}},destroy:function B(C){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(C);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array");var B=mstrmojo.array;mstrmojo.ObjectBrowserDataProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ObjectBrowserDataProvider",path:mstrConfig.taskURL,serverRequest:function(C,D){if(mstrApp&&mstrApp.serverRequest){mstrApp.serverRequest(C,D,{silent:true});}else{mstrmojo.xhr.request("POST",this.path,D,C,undefined,this.XServer,this.baseParams);}},fetchFolderContents:function(C,D,G){var E=C.blockCount,F={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockCount:E,includeAncestorInfo:"true",includeObjectDesc:C.includeObjectDesc};if(C.folderLinksContextId){F.folderLinksContextId=C.folderLinksContextId;}if(C.sId){F.sessionState=C.sId;}if(D.fid){F.rootFolderID=D.fid;}else{if(D.fty){F.rootFolderType=D.fty;}}if(C.browsableTypes){F.objectType=C.browsableTypes;}if(D.blockBegin){F.blockBegin=D.blockBegin;}if(D.searchPattern){if(C.enableQuickSearch){F.quickSearch=C.enableQuickSearch;}F.searchPattern=D.searchPattern;if(D.recursive){F.recursive=D.recursive;}}this.serverRequest(F,G);},newFolder:function(F,G,E,C){var D={taskId:"createFolder",taskContentType:"json",folderID:F,name:G,description:E};this.serverRequest(D,C);},loadObjects:function A(G,H,C,F){var D=[],E=[];B.forEach(G,function(I){D.push(I.did);E.push(I.t);});if(G.length>0&&F){this.serverRequest({taskId:"getObjectInfo",objectIDs:D.join(","),objectTypes:E.join(","),includeDetails:true},H,C);}else{H.success();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.Obj","mstrmojo.string","mstrmojo.hash","mstrmojo.expr","mstrmojo.mstr.EnumNodeDimty");var D=mstrmojo.array,P=mstrmojo.expr,J=P.ET,I=P.TP,K=mstrmojo.mstr.EnumNodeDimty,N=P.ET2TGT,M=P.ET2COND,B=mstrmojo.meta.TP;function O(S,A){var R=(A&&A.did)?A.did.split(P.FN_SEP):null,E=R&&parseInt(R[0],10),Q=R&&parseInt(R[1],10),T=S.et;S.fnt=E;S.fn=Q;if(T!=J.AE&&P.fn_List(Q,E)){S.et=J.AL;S.a2=null;S.cs=null;}else{if(T==J.AL&&!P.fn_List(Q,E)){S.et=J.AQ;S.cs=null;}else{if(T==J.MC&&!P.fn_AC_MC(Q,E)){S.et=J.MQ;S.m2=null;}else{if(T==J.AC&&!P.fn_AC_MC(Q,E)){S.et=J.AQ;S.a2=null;}}}}switch(Q){case P.FN.IS_NULL:case P.FN.IS_NOT_NULL:S.a2=null;S.a3=null;S.fm2=null;S.fm3=null;S.m2=null;S.m3=null;S.cs=null;break;case P.FN.BETWEEN:case P.FN.NOT_BETWEEN:break;default:S.a3=null;S.fm3=null;S.m3=null;while(S.cs&&S.cs.length>1){S.cs.pop();}}}function F(W,X,Y){var E=true,A=2+X;switch(Y.t){case I.PROMPT:var U=W.cs,V;if(!U){U=[];W.cs=U;}U[X]={};V=U[X];V.p=Y;W["a"+A]=null;W["m"+A]=null;switch(W.et){case J.AC:W.et=J.AQ;break;case J.MC:W.et=J.MQ;break;}break;case I.METRIC:W["a"+A]=null;W.cs=null;W.et=J.MC;W["m"+A]=Y;break;case I.ATTR:W["m"+A]=null;W.cs=null;W.et=J.AC;W["a"+A]=Y;W["fm"+A]=null;break;default:W["a"+A]=null;W["m"+A]=null;var U=W.cs;if(!U){U=[];W.cs=U;}if("did" in Y){W["a"+A]=null;W["fm"+A]=null;W["m"+A]=null;if(U[X]&&U[X].p){U[X].p=null;}}else{if(Y&&Y.v!=null){U[X]=Y;}else{if(U[X]){U=U.splice(X,1);}}E=false;}if(!Y.skipET){switch(W.et){case J.MC:W.et=J.MQ;break;case J.AC:W.et=J.AQ;break;case J.AL:if(!("did" in Y)&&Y.v){var Q,S=Y.dtp,U=[];Q=Y.v.split(mstrConfig.listSep);for(var R=0,T=Q.length;R<T;R++){U.push({v:mstrmojo.string.trim(Q[R]),dtp:S});}W.cs=U;}break;}}}return E;}var H={};H[J.AQ]={target:1,fm:1,fn:1,cs:1};H[J.AL]={target:1,fm:1,fn:1,cs:1};H[J.AE]={target:1,fn:1,es:1};H[J.AC]={target:1,a2:1,a3:1,fm:1,fm2:1,fm3:1,fn:1};H[J.MQ]={target:1,fn:1,cs:1,dmy:1};H[J.MC]={target:1,fn:1,m2:1,m3:1,dmy:1};H[J.F]={target:1};H[J.R]=H[J.F];H[J.XML]={target:1};var G=function(A){return A!==null&&A!==undefined;};var L=function(W){if(!W||!G(W.et)){return false;}var V=true,A=H[W.et],T=W.cs,S;V=V&&(!A.target||W[N[W.et]]);V=V&&(!A.fm||W.fm);V=V&&(!A.fn||G(W.fn));var R=P.fnCstCount(W.fn,W.fnt);if(V&&A.cs){for(S=0;S<R;S++){V=V&&T&&G(T[S]);}}if(V){var U=[N[W.et],"fm"];for(var E=0;E<2;E++){for(S=0;S<R;S++){var X=U[E]+(2+S);V=V&&(!A[X]||W[X]);}}}V=V&&(!A.es||W.es&&(W.es.length>0));var Q=W.dimtyTypes;V=V&&(!A.dmy||Q[K.NodeDimtyUnspecified]||Q[K.NodeDimtyNone]||(Q[K.NodeDimtyOutputLevel]&&W.dmy&&W.dmy.uts&&(W.dmy.uts.length>0)));return V;};mstrmojo.ConditionModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ConditionModel",completed:false,init:function(A){if(this._super){this._super(A);}this._updateCompleted();},edit:function(l,Y){var S=this[l],k=true;this.etWas=this.et;switch(l){case"not":Y=!!(Y&&Y.did===P.FN.NOT);S=!!this.not;if(Y===S){return ;}this.not=!!Y||null;break;case"target":var AA=this.et;if(Y){switch(Y[B]){case I.ATTR:case I.CONS:S=this.a;if(AA!==J.AQ&&AA!==J.AE){this.et=J.AQ;this.m=null;this.m2=null;this.m3=null;this.r=null;this.f=null;}if(AA!==J.AE){this.fn=null;this.fnt=null;}this.fm=null;this.fm2=null;this.fm3=null;this.cs=null;break;case I.METRIC:S=this.m;if((AA!==J.MQ)&&(AA!==J.MC)){this.et=J.MQ;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.r=null;this.f=null;this.cs=null;this.dmt=K.NodeDimtyUnspecified;}this.m2=null;break;case I.REPORT:S=this.r;if(AA!==J.R){this.et=J.R;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.f=null;}break;case I.FILTER:S=this.f;if(AA!==J.F){this.et=J.F;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.r=null;}break;case I.PROMPT:S=this.prms&&this.prms[0];if(AA!==J.XML){this.et=J.XML;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.r=null;this.f=null;}break;}}this.es=null;this[N[this.et]]=Y;break;case"fm":if(Y&&Y[B]==="fn"){this.et=J.AE;this.fm=null;O(this,Y);}else{this.fm=Y;if(Y&&(this.et==J.AE)){this.et=J.AQ;}this.fnt=null;this.fn=null;this.cs=null;this.a2=null;this.fm2=null;}break;case"fm2":case"fm3":this[l]=Y;break;case"fn":O(this,Y);break;case"es":var AD=this.es;if(Y&&Y.removed&&AD){D.removeItems(AD,Y.itemIdField,Y.removed);}if(Y&&Y.added){if(!AD){AD=Y.added.concat();this.es=AD;}else{D.insert(AD,AD.length,Y.added);}}break;case"c0":k=F(this,0,Y);break;case"c1":k=F(this,1,Y);break;case"dmy":var x=this.dmy;if(!x){x={cc:true,fres:true,uts:[]};this.dmy=x;}var s=x&&x.uts;if(!s){s=[];x.uts=s;this.dmt=K.NodeDimtyOutputLevel;}var Q={};Q[P.TP.ATTR]=true;Q[P.TP.DIM]=true;if(Y&&Y.removed){var f=[],A=false,W=[],R=false;for(var j=0,T=Y.removed,E=T.length;j<E;j++){var V=T[j],z=V[B] in Q;if(z){R=true;}else{A=true;}var h=z?W:f;h.push(V);}if(A){D.removeItems(s,"did",f);}if(R){var AC={};for(var d=0,Z=s&&s.length;d<Z;d++){var X=s[d];if(X&&X.utgt){AC[X.utgt.did]=d;}}var U=[];for(var y=0,w=W.length;y<w;y++){var g=AC[W[y].did];if(g>-1){U.push(g);}}U.sort(D.numSorter);for(var q=U.length-1;q>-1;q--){s.splice(U[q],1);}}}if(Y&&Y.added){var AE=[],m=P.DMY_TP.DIM,p=P.DMY_TP.ATTR;for(var AB=0,t=Y.added,e=t.length;AB<e;AB++){var o=t[AB];AE.push((o[B] in Q)?{utgt:o,utp:o[B]===I.DIM?m:p,agg:1,flt:2,gb:true,rps:0,n:o.n}:o);}D.insert(s,s.length,AE);}break;}this._updateCompleted();if(k){this.raiseEvent({name:"edit",prop:l,value:Y,valueWas:S});}},get:function C(){var A=M[this.et]||[];A.push("et");return mstrmojo.hash.copyProps(A,this);},_updateCompleted:function(){this.set("completed",L(this));}});})();(function(){mstrmojo.requiresCls("mstrmojo.StringBuffer","mstrmojo.hash","mstrmojo.array","mstrmojo.dom","mstrmojo._IsGraphDataService","mstrmojo.func","mstrmojo._ImageHelper","mstrmojo.rw.model.RetrievalKeysConfig","mstrmojo.rw.model.UpdateKeysConfig");var a=mstrmojo.hash,A=a.copy,R=mstrmojo.array,AL=mstrmojo.dom,q=mstrmojo.func,AD=[mstrmojo.desc(8445,"Loading")],Ae=mstrmojo.array.ensureArray,N=0;function T(BC){BC=BC||{};BC.preserveUndo=true;return BC;}function Ab(BG,BH,BC){if(this.blockRequests){throw ("The data service is currently ignoring all requests to the server.");}var BD=N++,BF=this.getTxUpdates(BD);BC=BC||{};BC.src=Ab.caller.name;if(!mstrmojo.string.isEmpty(BF)){BG.updateChanges=BF;}BG.zoomFactor=this.model.getZoomFactor();var BE=this.cmdMgr;if(!BC.preserveUndo&&BE){BE.onSubmitUpdates();}mstrApp.serverRequest(BG,this.wrapCallback(BH,BD),BC);}function L(BE,BD,BC){a.copy({unitType:BD.defn&&BD.defn.t,unitKey:BD.k},BE);if(BC.layoutKey){a.copy({toKey:BC.layoutKey,analysisSectionType:BC.analysisSectionType},BE);}else{a.copy({toKey:BC.parentKey},BE);}return BE;}function Ag(BD){BD=BD||{};var BC=window.mstrMobileApp?this.model.controller.getContentDimensions():mstrApp.getContentDimensions();if(BC){BD.styleName="RWDocumentMobileStyle";BD.availableWidth=BC.w;BD.availableHeight=BC.h;}else{BD.innerWidth=mstrmojo.dom.windowDim().w;BD.innerHeight=mstrmojo.dom.windowDim().h;}return BD;}function A7(BD){var BC=BD&&BD.style,BE=BC&&BC.params;return BE&&BE.treesToRender;}function B(BC,BD){return{act:"moveUnit",toKey:BC,unitType:BD};}function Af(BC){return BC.split("\u001E")[2];}function K(BD,BH){if(BD!==mstrmojo.DocDataService.UNDO_KEY){return BD;}if(!this.undoSectionKey){var BG=this.undoSectionKey=this.model.getNextKey(),BE=this.undoFGKey=this.model.getNextKey();BH.addActions({act:"addUndoSection",cbKey:this.cbKey,nodeKey:BG,fgKey:BE});var BF=this;BH.addCallbacks({failure:function BC(){delete BF.undoSectionKey;}});}return this.undoSectionKey;}function Aa(BE,BD){var BC={dsid:BE.dsid,formula:BE.tokenStreamXML,isTokenStream:!mstrmojo.string.isEmpty(BE.tokenStreamXML),name:BE.alias,afb:BE.afb,sfb:BE.sfb};if(BD){BC.Ids=["$GUID_135"];}return this.getAddDerivedMetricToDatasetAction(BC);}function AC(BF,BI,BD,BJ,BC,BE){var BG=[this.getNodeKeyFromKeyContext(BI)];if(!BE){BG=Ae(BJ).concat(BG);}var BH={act:BF,keyContext:BI,tgtKey:BD,partialRetrieval:{nodes:BG}};if(!BC){BH.partialUpdate={selectors:[Af(BI)]};}return BH;}mstrmojo.DocDataService=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._IsGraphDataService,mstrmojo._ImageHelper],{scriptClass:"mstrmojo.DocDataService",defaultStyle:{params:{treesToRender:2}},cmdMgr:null,stid:-1,blockRequests:false,init:function AY(BC){this._super(BC);this.cmdMgr=this.model.controller.cmdMgr;},wrapCallback:function AR(BG,BD){var BE=this;return q.wrapMethods({success:function BF(BH){if(BH){BE.model.bs=BE.rwb=BH.bs||BE.rwb;BE.msgId=BH.mid||BE.msgId;BE.cbKey=BH.cbKey||BE.cbKey;if(BH.stid!==undefined){BE.stid=BH.stid;}}BE.clearTxUpdates(BD);},failure:function BC(){BE.resetTxUpdates(BD);}},BG);},getNodeKeyFromKeyContext:function V(BC){return BC.split("\u001E")[1];},refresh:function Al(BE,BF){var BD=!!BE.useRefreshProgress,BC=BD?[mstrmojo.desc(10078,"Refreshing data. Please wait.")]:AD;delete BE.useRefreshProgress;BE=Ag(BE);Ab.call(this,A(BE,{taskId:"docRefresh",rwb:this.rwb,rePrompt:false,fresh:false,regenerate:false}),BF,{showProgress:true,hideProgress:true,progressStateText:BC,useRefreshProgress:BD});},saveRW:function Ao(BC,BD){Ab.call(this,A(BC,{taskId:"saveRW",msgID:this.msgId}),BD);},saveThresholds:function e(BD,BE,BC){Ab.call(this,A(BD,{taskId:"saveThresholds"}),BE,BC);},getThresholds:function A1(BD,BE,BC){Ab.call(this,A(BD,{taskId:"getThresholds"}),BE,BC);},browseElements:function z(BC,BD){Ab.call(this,A(BC,{taskId:"browseElements",styleName:"MojoAttributeStyle",blockBegin:1,blockCount:mstrApp.elementsBlockCount||30}),BD);},removeUnit:function U(BD,BE){var BC=A(BD,{act:"removeUnit"});this.submitTemplateUpdates(BC.nodeKey,BC,BE);},removeLayout:function AG(BD,BC,BE){this.submitUpdates({act:"removeLayout",unitKey:BD,isCurrent:BC},BE);},moveLayout:function o(BE,BC,BD){this.submitUpdates(this.getMoveNodeAction(BE,BC,BD),mstrmojo.DocDataService.EMPTY_CALLBACK,mstrmojo.DocDataService.SUPPRESS_DATA);},getMacroCopyNodeAction:function Ac(BD,BC,BF){var BE={act:"macroCopyUnit",newKey:BF,partialRetrieval:this.newRetrievalKeysConfig().addNode(BF)};L(BE,BD,BC);return BE;},getMacroMoveNodeAction:function v(BD,BC){var BE={act:"macroMoveUnit",partialRetrieval:this.newRetrievalKeysConfig().addNode(BD.k)};L(BE,BD,BC);return BE;},getMoveNodeAction:function k(BG,BC,BD){var BF=BG.defn,BE=BF?BF.t:mstrmojo.EnumRWUnitType.LAYOUT;var BH=B(BC,BE);BH.unitKey=BG.k;if(BD!==undefined){BH.index=BD;}return BH;},getMoveControlAction:function Z(BF,BD,BC){var BE=B(BD,mstrmojo.EnumRWUnitType.SELECTOR);BE.keyContext=BF;if(BC){BE.partialRetrieval={nodes:Ae(BC)};}return BE;},addMoveControlAction:function H(BF,BE,BD,BC){BF.addActions(this.getMoveControlAction(BE,K.call(this,BD,BF),BC));},getSetCtrlSourceAction:function AA(BD,BE,BC){return{act:"setControlSource",keyContext:BD,unitId:BE,unitType:BC,partialRetrieval:this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BD)),partialUpdate:{selectors:[Af(BD)]}};},getRemoveCtrlTargetAction:function F(BE,BD,BF,BC){return AC.call(this,"removeControlTarget",BE,BD,BF,BC);},getClearCtrlTargetAction:function Ax(BC){return{act:"clearControlTarget",keyContext:BC};},getAddCtrlTargetAction:function Aj(BG,BD,BH,BI,BC,BE){var BF=AC.call(this,"addControlTarget",BG,BD,BH,BC,BE);BF.isUC=!BI;return BF;},getAddCtrlTargetDatasetAction:function Au(BD,BC){return{act:"addControlTargetDataset",keyContext:BD,tgtDid:BC};},getRemoveCtrlTargetDatasetAction:function d(BD,BC){return{act:"removeControlTargetDataset",keyContext:BD,tgtDid:BC};},getClearCtrlTargetDatasetAction:function AF(BC){return{act:"clearControlTargetDataset",keyContext:BC};},getChangeControlElementSource:function A6(BD,BC){return{act:"changeControlElementSource",keyContext:BD,ctlElementSrc:BC};},getSetAttributesJoinTypeAction:function AV(BC,BD){return{act:"setAttributesJoinType",nodeKey:BC,value:BD,partialRetrieval:this.newRetrievalKeysConfig().addNode(BC)};},getSetMetricJoinTypeAction:function AN(BE,BG,BC,BD,BF){return{act:"setMetricJoinType",nodeKey:BE,unitId:BG,dataType:BC,unitType:BD,value:BF,partialRetrieval:this.newRetrievalKeysConfig().addNode(BE)};},getTxUpdates:function AK(BD){var BC=this.model;return BC&&BC.getTransactionUpdates&&BC.getTransactionUpdates(BD);},clearTxUpdates:function AZ(BD){var BC=this.model;if(BC&&BC.clearTransactionUpdates){BC.clearTransactionUpdates(BD);}},resetTxUpdates:function C(BD){var BC=this.model;if(BC&&BC.resetTransactionUpdates){BC.resetTransactionUpdates(BD);}},loadDocLayout:function J(BE,BG,BF){var BD={act:"setCurrentLayout",unitKey:BE.layoutKey,disablePU:true},BC={style:{params:{treesToRender:3}},params:Ag.call(this)};if(BF){BF.add(BD,BG,BC);}else{this.submitUpdates(BD,BG,BC);}},checkMissingCredentials:function r(BC,BD){Ab.call(this,A(BC,{taskId:"checkMissingCredentials"}),BD);},setCurrentDocLayout:function Ai(BC,BG,BF){var BE={act:"setCurrentLayout",unitKey:BC},BD={config:{silent:(BG===null)}};BG=BG||null;if(BF){BF.add(BE,BG,BD);}else{this.submitUpdates(BE,BG,BD);}if(window.mstrMobileApp!==undefined){mstrMobileApp.clearWebViewCache(false);}},fetchDocPage:function Ay(BC,BD){Ab.call(this,{taskId:"fetchDocPage",rwb:this.rwb,pos:BC},BD);},requestPanelChangeDeferred:function A5(BI,BH,BC,BD,BF,BG){var BE={act:"setCurrentPanel",unitKey:BH};if(BC){BE.partialRetrieval={nodes:BC.split(",")};}BI.add(BE,BG,{config:{showProgress:BF,hideProgress:BF,progressStateText:AD},style:{params:{treesToRender:BD?3:0}}});},getGraphSelectionAction:function D(BG,BC,BE,BJ,BI,BD){var BH=this.model.getCurrentLayoutDef(),BK=(BH&&BH.dzf)||1,BF={act:"graphSelector",nodeKey:BG,sliceID:BE,x:Math.round(BJ/BK),y:Math.round(BI/BK)};if(BD){BF.usePartialUpdate="0";}else{BF.partialUpdate={selectors:BC.split("\u001E")};}return BF;},getSelectorElementsAction:function l(BE){var BD={act:"setSelectorElements",keyContext:BE.ck,ctlKey:BE.ctlKey,elemList:mstrmojo.string.decodeHtmlString(BE.eid),isVisualization:!!BE.isDocVis},BC=BE.include;if(BC!==undefined){BD.include=!!BC;}if(BE.tks){BD.tks=BE.tks;}if(BE.disablePU){BD.usePartialUpdate="0";}else{if(BE.ignoreTargetData){BD.partialRetrieval=this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BE.ck));}else{BD.partialUpdate={selectors:BE.ctlKey.split("\u001F")};}}return BD;},getUpdateTransactionAction:function BA(BD){var BC={act:"updateTransaction"};if(BD){if(BD.ctlKey){BC.partialUpdate={selectors:[BD.ctlKey]};}}return BC;},getSelectorFromGMAction:function i(BD){var BC={act:"setSelectorFromGM",keyContext:BD.ck,ctlKey:BD.ctlKey,keepOnly:!!BD.keepOnly,selectorObjects:BD.selectorObjects,isVisualization:!!BD.isDocVis,include:!!BD.include};if(BD.tks){BC.tks=BD.tks;}if(BD.disablePU){BC.usePartialUpdate="0";}else{BC.partialUpdate={selectors:[BD.ctlKey]};}return BC;},getGMViewFilterAction:function y(BD){var BC={act:"keepOnlyGM",selectorObjects:BD.selectorObjects,isVisualization:!!BD.isDocVis,keepOnly:!!BD.keepOnly};if(BD.tks){BC.tks=BD.tks;}if(BD.disablePU){BC.usePartialUpdate="0";}else{BC.partialUpdate={selectors:[BD.ctlKey]};}return BC;},setMultiDocSelectorElements:function w(BC,BD,BF){var BE={taskId:"setMultiDocSelectorElements",rwb:this.rwb,multiSelect:BD,selectorObjects:BC};Ab.call(this,BE,BF,{showWait:true,hideWait:true,delay:true});},setDocSelectorTexts:function Q(BH,BJ,BL,BI,BK,BD,BC,BE,BG){var BF={taskId:"setDocSelectorTexts",rwb:this.rwb,unitKeyContext:BH,ctlTexts:BJ,ctlKey:BL,zoomFactor:BD};if(AL.isAndroid||BC){BF.taskId="androidSetDocSelectorElements";}if(BI!==null&&BI!==undefined){BF.include=BI;}if(BE!==null&&BE!==undefined){BF.usePartDisplay=BE;}if(BG!==null&&BG!==undefined){BF.treesToRender=BG;}Ab.call(this,BF,BK);},getSelectorExpressionAction:function m(BE){var BD={act:"setSelectorExpression",keyContext:BE.ck,ctlType:BE.type,objId:BE.srcid,objType:BE.srct,expFunction:BE.f,expFunctionType:BE.ft,include:!!BE.include,qt:BE.qt,unset:!!BE.unset};if(BE.disablePU){BD.usePartialUpdate="0";}else{BD.partialUpdate={selectors:[BE.ckey]};}if(BE.changeQual){BD.changeQual=BE.changeQual;}var BC=BE.cs;if(BC!==null&&BC!==undefined){BD.expConstants=BC;BD.dataType=BE.dtp;}if(BE.fid){BD.fid=BE.fid;}return BD;},getMultiUnitSelectorAction:function A3(BC){return{act:"multiUnitSelection",keyContext:BC.ck,sels:BC.selections,partialUpdate:{selectors:[BC.ctlKey]}};},getRemoveCtrlAction:function Ad(BD,BC){return{act:"removeControl",key:BD,partialUpdate:{selectors:[BD]},partialRetrieval:{nodes:Ae(BC)}};},getAddCtrlAction:function AU(BJ,BH,BD,BI,BE,BK,BC,BF,BL){if(isNaN(BL)){BL=1;}var BG={act:"addControl",parentKey:BJ,nodeKey:BH,ctlKey:BD,isUC:!!BE,unitType:BK||-1,unitId:BC||"",targetKeys:Ae(BF),ctlType:BL,gpType:BL,partialRetrieval:{nodes:Ae(BI)}};if(!BG.isUC){BG.partialUpdate={selectors:[BD]};}return BG;},getSaveGraphPropertiesAction:function h(BC,BD){return{act:"saveGraphProperties",nodeKey:BC,properties:BD};},getSelectorIncludeAction:function Aq(BD){var BC=BD.ckey;return{act:"setSelectorInclude",keyContext:BD.ck,ctlKey:BC,ctlType:BD.type,include:BD.include,partialUpdate:{selectors:[BC]}};},getSelectorShowAllAction:function O(BC){return{act:"setSelectorShowAll",keyContext:BC.ck,ctlKey:BC.ckey,ctlType:BC.type,showAll:BC.showAll,partialRetrieval:this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BC.ck))};},getUnsetSelectorAction:function c(BF){var BE=BF.ckey,BC=BF.ck,BD={act:"unsetSelector",keyContext:BC,ctlKey:BE,ctlType:BF.type};if(BF.ignoreTargetData){BD.partialRetrieval=this.newRetrievalKeysConfig().addNode(this.getNodeKeyFromKeyContext(BC));}else{BD.partialUpdate={selectors:[BE]};}return BD;},getChangeFilteringAction:function An(BC,BF,BE,BD){return{act:"changeFiltering",nodeKey:BC,filterMode:BF,isUC:BE,partialRetrieval:{nodes:(BD?Ae(BD):[])}};},getAddDerivedMetricToDatasetAction:function At(BC){return{act:"addDerivedMetricToDataset",dsid:BC.dsid,formula:BC.formula,isTokenStream:BC.isTokenStream,name:BC.name,newObjectIds:BC.Ids,afb:BC.afb,sfb:BC.sfb};},getEditDocUnitPropAction:function u(BC){return{act:"editDocUnitProp",dsid:BC.dsid,formId:BC.formId,unitId:BC.unitId,unitType:BC.unitType,prop:BC.prop,value:BC.value};},getRWGraphImage:function A9(BG,BK){var BF=mstrApp,BC=this.id,BD={taskId:"getRWGraphImage",taskEnv:"xhr",imgType:4,messageID:this.msgId,nodeKey:BG.k,sliceID:parseInt(BG.sid,10),width:parseInt(BG.w,10),height:parseInt(BG.h,10)};if(BF.onMobileDevice()&&BF.useBinaryFormat){window.setTimeout(function(){Ab.call(mstrmojo.all[BC],BD,BK,T());},0);}else{if(BG.encodeImage){BD.taskContentEncoding="base64";delete BD.taskEnv;Ab.call(this,BD,{success:function BL(BM){BK.success("data:image/png;base64,"+BM);},failure:function BE(BM){(BK.failure||BF.onerror)(BM);}},T());}else{var BI=BF.getConfiguration(),BH=BF.getCurrentProjectId(),BJ=new mstrmojo.StringBuffer();BD.__ts__=new Date().getTime();BD.sessionState=BF.getSessionState(BH);a.forEach(BD,function(BM,BN){BJ.append(BN+"="+encodeURIComponent(BM));});BK.success(BI.getTaskUrlByProject(BH)+"?"+BJ.toString("&"));}}},getImage:function A8(BD){var BE=mstrApp,BC=BE.getConfiguration();if(BC&&BD&&BD.indexOf("://")===-1){BD=BC.getHostUrlByProject(BE.getCurrentProjectId())+BD;}return(mstrApp.useBinaryFormat)?String(mstrMobileApp.getImage(BD)):BD;},setGridDisplayMode:function n(BE,BD,BF,BC){a.copy({params:{suppressData:true}},BC);this.submitUpdates({act:"setGridDisplayMode",unitKey:BE,displayMode:BD},BF,BC);},setDocZoom:function G(BC,BD){this.submitUpdates(A(BC,{act:"setDocZoom",disablePU:true}),BD,{style:{params:{treesToRender:3}}});},sortGrid:function AE(BC,BD){this.submitTemplateUpdates(BC.nodeKey,A({act:"sort"},BC),BD);},getAdvSortData:function AX(BC,BD){this.rwExecute(A(BC,{styleName:"RWGridStyle"}),BD);},rwExecute:function A0(BC,BD){Ab.call(this,A(BC,{taskId:"RWExecute",rwb:this.rwb,messageID:this.msgId}),BD);},pivot:function j(BC,BD){this.submitTemplateUpdates(BC.nodeKey,{act:"pivot",unitId:BC.unitId,unitType:BC.unitType,attFormId:BC.attFormId,axis:BC.axis,unitPos:BC.unitPos},BD);},resizeXtabColumn:function Aw(BC,BD){this.submitUpdates([this.getUpdateTemplateAction(BC.nodeKey,BC),{act:"format",unitType:52,unitKey:BC.nodeKey,formatType:1,format:{FormattingSize:{WidthMode:2}}}],BD);},showTotals:function S(BC,BD){this.submitTemplateUpdates(BC.nodeKey,{act:"showTotals",unitId:BC.unitId,unitType:BC.unitType,subtotalType:BC.subtotalType,clearSubtotalType:BC.clearSubtotalType},BD);},drillGrid:function AB(BC,BD){this.submitUpdates(this.getDrillGridAction(BC),BD,{config:{showProgress:true,hideProgress:true,progressStateText:AD,delay:true}});},getDrillGridAction:function A2(BD){var BC={act:"gridDrillWithin",messageID:this.msgId,nodeKey:BD.nodeKey,sliceId:BD.sliceId,drillPathIndex:BD.drillPathIndex,drillPathKey:BD.drillPathKey,elementList:BD.drillElements,retainParent:BD.retainParent,partialUpdate:{nodes:[BD.nodeKey]}};if(BD.x){BC.x=BD.x;BC.y=BD.y;}return BC;},changeDocGroupBy:function M(BE,BF,BC){var BD={act:"changeDocGroupBy",disablePU:true};if(BE.flags){BD.flags=BE.flags;}if(BE.groupbyKey){BD.gbKey=BE.groupbyKey;BD.elemId=BE.elementId;}else{BD.gbUnits=BE.gbUnits;}this.submitUpdates(BD,BF,{config:BC,style:{params:{treesToRender:3}},params:Ag.call(this)});},retrieveServerJson:function b(BE,BN,BF){var BH=this.model,BI=BH.controller,BL={},BC,BD,BJ;var BK=BE.nodes;if(BK){BL.partialRetrieval=BK;}var BM=BE.slices;if(BM){BL.slices=BM;}if(BF){BC=BF.style;BD=BF.config;BJ=BF.params;}if(!BD){BD={showProgress:true,hideProgress:true,progressStateText:AD};}var BO=BE.style=a.clone(this.defaultStyle);A(BC.params,BO.params);var BG={taskId:"getServerJSONResults",styleName:"ServerJsonRWDStyle",compress:1,rwb:this.rwb,messageID:this.msgId,stateID:-1,params:JSON.stringify(BL),treesToRender:BO.params.treesToRender};A(BJ,BG);BD.preserveUndo=(BF&&BF.preserveUndo)||false;Ab.call(this,BG,BN,BD);},downloadGridData:function I(BD,BE){var BC={act:"gridIncrementalFetch",nodeKey:BD.nodeKey,rowPosition:BD.rowPosition,maxRows:BD.maxRows,colPosition:BD.colPosition,sliceId:BD.sliceId,maxColumns:BD.maxColumns,partialRetrieval:this.newRetrievalKeysConfig().addNode(BD.nodeKey)};if(BD.partialUpdate){BC.partialUpdate=BD.partialUpdate;}this.submitUpdates(BC,BE,a.copy(T(),{noUpdate:true,config:{silent:true}}));},txMarkRows:function AJ(BC,BD){Ab.call(this,{taskId:"markRow",rwb:this.rwb,nodeKey:BC.nodeKey,sliceId:BC.sliceId,rowOrdinal:BC.rowOrdinal,actionType:BC.actionType},BD);},txChangeData:function p(BC,BD){Ab.call(this,{taskId:"changeData",rwb:this.rwb,nodeKey:BC.nodeKey,sliceId:BC.sliceId,cells:BC.cells,autoRefresh:BC.autoRefresh},BD);},sendTransactionActions:function Y(BD,BE){var BC={taskId:"DocTransaction",rwb:this.rwb,keyContext:BD.keyContext,actions:BD.actions,messageID:this.msgId};if(BD.txrcd){BC.isPending=BD.txrcd.pending;BC.timestamp=BD.txrcd.timestamp;}Ab.call(this,BC,BE,{silent:!!BE});},newUpdate:function As(BE,BD){var BC=new mstrmojo.DocDataService.Update(BD);BC.ds=this;BC.cmd=BE;return BC;},newUpdateWithoutCmd:function g(BD){var BC=new mstrmojo.DocDataService.Update(BD);BC.ds=this;return BC;},newRetrievalKeysConfig:function AT(){return new mstrmojo.rw.model.RetrievalKeysConfig();},newUpdateKeysConfig:function P(){return new mstrmojo.rw.model.UpdateKeysConfig();},submitCmd:function Az(BD,BC){this.newUpdate(BD,BC).submit();},submitUpdates:function AW(BL,BQ,BI){BL=Ae(BL);var BH={actions:BL},BC,BF,BN,BE=false;R.forEach(BL,function BK(BS){if(BS.disablePU){BE=true;delete BS.disablePU;}R.forEach(BS.actions,BK);return !BE;});if(!BE){var BD=mstrmojo.rw.model.RetrievalKeysConfig.getConsolidatedConfig(BL),BP=mstrmojo.rw.model.UpdateKeysConfig.getConsolidatedConfig(BL);if(!a.isEmpty(BD)){BH.partialRetrieval=BD;}if(!a.isEmpty(BP)){BH.partialUpdate=BP;}}if(BI){BC=BI.style;BF=BI.config;BN=BI.params;}if(!BF){BF={showProgress:true,hideProgress:true,progressStateText:AD};}if(!BC){BH.style=this.defaultStyle;}else{var BR=BH.style=a.clone(this.defaultStyle);A(BC.params,BR.params);}BH.style.name=(BC&&BC.name)||mstrApp.styleName;var BJ={taskId:"mojoRWManipulation",rwb:this.rwb,messageID:this.msgId,stateID:-1,params:JSON.stringify(BH)};A(BN,BJ);BF.preserveUndo=(BI&&BI.noUpdate)||false;var BM=this,BO=true,BG=q.override({success:function(BS,BT){if(BS.status===2){BO=false;BM.submitUpdates([],BQ,BI);}else{BO=true;return this._super(BS,BT);}},complete:function(){if(this._super&&BO){this._super();}}},A(BQ));if(!(BI&&BI.hideCancel)){BF.waitBoxCfg=a.copy({showCancel:true},BF.waitBoxCfg);}if(BI&&BI.message){BF.waitBoxCfg=a.copy({message:BI.message},BF.waitBoxCfg);}Ab.call(this,BJ,BG,BF);},submitTemplateUpdates:function s(BC,BE,BF,BD){this.submitUpdates(this.getUpdateTemplateAction(BC,BE),BF,BD);},getUpdateTemplateAction:function AQ(BC,BE,BD){return{act:"updateTemplate",keyContext:BC,partialRetrieval:this.newRetrievalKeysConfig().addNode(BC,BD),actions:Ae(BE)};},addUpdateTemplateAction:function A4(BE,BC,BD){BE.addActions(this.getUpdateTemplateAction(BC,BD));},applySegment:function AH(BD,BC,BE){Ab.call(this,{taskId:"applySegment",rwb:this.rwb,segmentID:BD,nodeKey:BC},BE);},getPageByTree:function AI(BC){mstrApp.serverRequest({taskId:"getPageByTree",msgID:this.msgId},BC);},getUserDICubeInfo:function W(BC,BD){Ab.call(this,{taskId:"getUserDICubeInfo",cubeIds:BC.join(",")},BD);},applySorts:function Ar(BD,BE,BC,BF){Ab.call(this,{taskId:"applySorts",key:BD,sortType:BE,sortList:BC},BF,mstrmojo.DocDataService.PROGRESS_CONFIG);},getAddNewDerivedMetricToDatasetSubmitFunc:function Ap(BD){var BC=this;return function(BG){var BH=BC.model,BF=BH.controller,BE=a.copy(BG,BD),BI=[Aa.call(BC,BE,false)],BJ=BH.getDatasetsUpdateCallback();BF.submitUndoRedoUpdates(BI,null,BJ,{style:{params:{treesToRender:1}}});};},getAddNewDerivedMetricToXtabSubmitFunc:function Ah(BD){var BC=this;return function(BH){var BI=BC.model,BG=BI.controller,BF=a.copy(BH,BD),BE=BF.idx,BK=[],BL=q.wrapMethods(BI.getDatasetsUpdateCallback(),BG._getXtabCallback(BF.host));BK.push(Aa.call(BC,BF,true));if(BF.replace){BK.push(BC.getUpdateTemplateAction(BF.nodeKey,[BF.host.model.getRemoveTemplateUnitAction({did:BF.replace.did,t:BF.replace.t})]));}else{BE++;}var BJ=BC.getUpdateTemplateAction(BF.nodeKey,[BF.host.model.getAddTemplateUnitAction({did:"$GUID_135",t:4},BF.dsid,BF.zoneid,BE),{act:"renameUnit",id:"$GUID_135",type:4,name:BF.alias,isDynamicAlias:true}]);BK.push(BJ);BG.submitUndoRedoUpdates(BK,null,BL);};},getAddNewDerivedMetricToDropzoneSubmitFunc:function x(BD){var BC=this;return function(BJ){var BK=BC.model,BL=BK.controller,BN=a.copy(BJ,BD),BP=BN.host.zonesModel,BQ=BN.idx,BI=[],BE=[],BO={id:BN.zoneid},BM={did:"$GUID_135",t:4},BR=q.wrapMethods(BK.getDatasetsUpdateCallback(),BL._getXtabCallback(BN.host));BI.push(Aa.call(BC,BN,true));if(BN.replace){var BG={did:BN.replace.did,t:BN.replace.t};BE.push(BP.getRemoveDropZoneUnitAction(BO,BG));}else{BQ++;}BE.push(BP.getAddDropZoneUnitAction(BO,BM,BQ,{datasetId:BN.dsid}));var BF=(BD.zoneid===4)?1:2,BH=BP.getAddMetricNameAction(BD.host,BF);if(BH){BI.push(BH);}if(!BN.replace&&BP.gmZones){BH=BP.gmZones.getUpdateGroupInfoActionForNewMetric(BD.zoneid,BQ,true);if(BH){BI.push(BH);}}BP.checkAndAddThresholdAction(BN.zoneid,BM,BE);BI.push(BC.getUpdateTemplateAction(BN.nodeKey,BE));BL.submitUndoRedoUpdates(BI,null,BR);};},getEditDerivedMetricSubmitFunc:function f(BD){var BC=this;return function(BG){var BI=BC.model,BF=BI.controller,BE=a.copy(BG,BD),BH=BD.nodeKey,BJ={act:"editDM",formula:BE.tokenStreamXML,isTokenStream:!mstrmojo.string.isEmpty(BE.tokenStreamXML),afb:BD.afb,sfb:BD.sfb,dsid:BE.dsid||"",did:BE.did},BK=[BI.addUpdateObjects(BJ,{id:BE.did,type:4,flag:mstrmojo.DocDataService.PARTIAL_UPDATE_FLAGS.DATA_CHANGE})],BL=q.wrapMethods(BI.getDatasetsUpdateCallback(),BF.getPartialUpdateCallback());if(BH){BK.push(BC.getUpdateTemplateAction(BH,[{act:"renameUnit",id:BE.did,type:4,name:BE.alias,isDynamicAlias:true}]));}else{BJ.name=BE.alias;}BF.submitUndoRedoUpdates(BK,null,BL);};},resetSelections:function Av(BD,BC,BE){Ab.call(this,{taskId:"resetSelections",rwb:this.rwb,unitKeyContext:BD||"",usePartDisplay:BC?"0":"1",treesToRender:BC?3:2},BE);},setPreference:function E(BC,BD){Ab.call(this,{taskId:"setPreference",prefs:BC},BD);},getObjectInfo:function AO(BC,BD){Ab.call(this,A(BC,{taskId:"getObjectInfo"}),BD,T());},addSuppressData:function Ak(BC){if(A7(BC)===mstrmojo.DocDataService.EnumTreesToRender.NONE){a.copy({params:{suppressData:true}},BC);}},uploadImageToServer:function(BE,BF){var BD={taskId:"importImage",imageFieldName:"imageData",isEdit:1,fieldKey:BE.fieldKey,fieldName:BE.fieldName,imageName:encodeURIComponent(BE.imageName),imageSize:BE.imageSize,nodeKey:BE.nodeKey,sectionKey:BE.sectionKey};if(mstrApp.isSingleTier){var BC=";base64,";BD.rwNodeKey=BE.fieldGroupKey;BD.imageData=BE.base64Str.split(BC)[1]||BE.base64Str;mstrApp.serverRequest(BD,BF);}else{BD.msgID=this.msgId;BD.imageData=BE.imageData;mstrmojo.xhr.upload("POST",mstrConfig.taskURL,BF,BD);}}});mstrmojo.DocDataService.Update=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.DocDataService.Update",actions:null,callback:null,extras:null,init:function AY(BC){A(BC,this);this.actions=this.actions||[];this.callback=this.callback||{};this.extras=this.extras||{};},addActions:function AS(BC){this.actions=this.actions.concat(Ae(BC));},addCallbacks:function Am(BC){this.callback=q.wrapMethods(this.callback,BC);},addExtras:function AM(BD){var BC=A7(BD),BE=A7(this.extras);this.extras=A(BD,this.extras);if(BC!==undefined&&BE!==undefined){this.extras.style.params.treesToRender|=BE;}},addUpdate:function AP(BC){this.add(BC.actions,BC.callback,BC.extras);},setTreesToRender:function BB(BC){if(BC){this.addExtras({style:{params:{treesToRender:BC}}});}return this.extras.style.params.treesToRender;},add:function X(BD,BE,BC){if(BD){this.addActions(BD);}if(BE){this.addCallbacks(BE);}if(BC){this.addExtras(BC);}},submit:function t(){var BD=this.actions,BE=this.callback,BC=this.extras;if(this.cmd){this.cmd.submit(BD,BE,BC);}else{this.ds.submitUpdates(BD,BE,BC);}}});mstrmojo.DocDataService.PUInfoType=null;mstrmojo.DocDataService.ExtrasType=null;mstrmojo.DocDataService.PROGRESS_CONFIG={showProgress:true,hideProgress:true,progressStateText:AD,delay:true};mstrmojo.DocDataService.UNDO_KEY="undo";mstrmojo.DocDataService.REQUEST_DEFN_DATA={style:{params:{treesToRender:3}}};mstrmojo.DocDataService.REQUEST_ONLY_DEFINITION={style:{params:{treesToRender:1}}};mstrmojo.DocDataService.REQUEST_ONLY_DATASETS={style:{params:{treesToRender:0}}};mstrmojo.DocDataService.SUPPRESS_DATA={params:{suppressData:true}};mstrmojo.DocDataService.EMPTY_CALLBACK={success:mstrmojo.emptyFn};mstrmojo.DocDataService.CopyMoveDestinationType=null;mstrmojo.DocDataService.PARTIAL_UPDATE_FLAGS={FORMAT_CHANGE:1,DATA_CHANGE:2};mstrmojo.DocDataService.EnumTreesToRender={NONE:0,DEFN:1,DATA:2,BOTH:3};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._Fetchable");mstrmojo.mstr.DocElementDataHelper=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._Fetchable],{scriptClass:"mstrmojo.mstr.DocElementDataHelper",source:null,items:null,browseConfig:null,concat:true,init:function(A){var B=A&&A.browseConfig;this.blockBegin=(B&&B.blockBegin)||1;this.blockCount=(B&&B.blockCount)||mstrApp.elementsBlockCount||30;if(this._super){this._super(A);}},getBrowseConfig:function(){if(!this.browseConfig){this.browseConfig={blockBegin:this.blockBegin,blockCount:this.blockCount};}return this.browseConfig;},_retrieveItems:function(C,B){var A=this.getBrowseConfig();A.blockBegin=C;mstrmojo.func.override({success:function(D){if(this._super){this._super(mstrmojo.hash.copy(D,{items:D.es,totalSize:D.sz}));}}},B);this.source.browseElements(A,B);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.func","mstrmojo.Obj");var K=mstrmojo.hash;var P=0;var F=[];var J={};var L=false;function I(T){var U=T.callback;if(U.submission){U.submission(T.id,this.userInteractionRequired(T),T);}this.submitRequest(T);}function G(){if(F.length&&!L){I.call(this,F.shift());}}mstrmojo.ServerProxy=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ServerProxy",transport:null,cnt:0,request:function E(d,a,U,V){if(U){this.cancelRequests();}var X=this.id,Y=this.transport,T=mstrmojo.now()+a.taskId+P++,W=d.canceled||mstrmojo.emptyFn;d.canceled=function(e){W();d.complete(true);return Y.cancelRequest(e);};d=mstrmojo.func.wrapMethods(d,{complete:function(e){mstrmojo.all[X].deleteRequest(e);}});var Z=!K.isEmpty(this._requests),b=this.createRequest(T,d,a,V),c=(L||Z)&&!V.doNotHold;if(c){F.push(b);}else{I.call(this,b);}return T;},hasRequests:function O(){return !K.isEmpty(this._requests)||L;},createRequest:function Q(V,X,W,T){var U=this._requests;if(!U){U=this._requests={};}U[V]={id:V,callback:X,params:W,config:T};return U[V];},submitRequest:function M(T){this.transport.serverRequest(this.id,T.id,T);},cancelRequests:function S(){var T=false;K.forEach(this._requests,function(U){if(U.gotResponse===undefined){T|=U.callback.canceled(U.id);}});this._requests={};F=[];return T;},cancelRequest:function B(X){var U=false,W=this._requests[X],V,T=F.length;for(V=0;V<T;V++){if(F[V]===W){break;}}if(V<T){F.splice(V,1);delete this._requests[X];U|=W.callback.canceled(W.id);}return U;},response:function A(X,T,V){$MAPF(false,"AndroidServerTransport","transportRequest");var W=this.getRequest(X);if(W){W.gotResponse=true;var Y=W.callback,U=(T&&!V.mstrerr)?"success":"failure";try{if(Y[U]){Y[U](V,W);}}finally{Y.complete(X);}}G.call(this);},deleteRequest:function N(U){var T=this._requests;delete T[U];},getRequest:function H(U){var T=this._requests;return T&&T[U];},userInteractionRequired:function C(T){return false;},addLoadingGraph:function D(T){J[T]=true;L=true;},removeLoadingGraph:function R(T){delete J[T];if(K.isEmpty(J)){L=false;G.call(this);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo.Binding","mstrmojo._HasBindings","mstrmojo._HasMarkup","mstrmojo._HasTooltip","mstrmojo.css");mstrmojo.Widget=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasBindings,mstrmojo._HasMarkup,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.Widget",domNode:null,hasRendered:false,visible:true,enabled:true,tooltip:"",cssClass:"",cssText:"",cssDisplay:"block",slot:"",alias:"",parent:null,init:function A(C){this._super(C);var D=this.parent;if(!D||D.hasInitBindings){this.initBindings();}},destroy:function B(C){if(this.hasRendered){this.unrender(C);}if(this.bindings){this.destroyBindings();}this._super();},invalidate:mstrmojo.emptyFn,widgetResized:mstrmojo.emptyFn});mstrmojo.Widget.cssTextMarkupMethod=function(){this.domNode.style.cssText=this.cssText||"";};mstrmojo.Widget.visibleMarkupMethod=function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";};mstrmojo.Widget.topMarkupMethod=function(){var C=this.top;if(C){this.domNode.style.top=C;}};mstrmojo.Widget.leftMarkupMethod=function(){var C=this.left;if(C){this.domNode.style.left=C;}};mstrmojo.Widget.heightMarkupMethod=function(){var C=this.height;if(C){this.domNode.style.height=C;}this.widgetResized();};mstrmojo.Widget.widthMarkupMethod=function(){var C=this.width;if(C){this.domNode.style.width=C;}this.widgetResized();};mstrmojo.Widget.enabledMarkupMethod=function(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");mstrmojo.StepperContentProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.StepperContentProvider",item:null,renderer:null,min:null,max:null,interval:1,minField:"min",maxField:"max",valField:"value",intField:"interval",canLoop:false,next:mstrmojo.emptyFn,prev:mstrmojo.emptyFn,hasPrev:mstrmojo.emptyFn,hasNext:mstrmojo.emptyFn,renderItemAt:mstrmojo.emptyFn,setVal:mstrmojo.emptyFn,getVal:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj");function B(J,I){this.raiseEvent({name:"viCompBuilt",type:J,widget:I});}mstrmojo.vi.models.VIComponentMap=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.vi.models.VIComponentMap",init:function G(I){this._super(I);this.relativePanels={};this.comps={};},addRelativePanel:function H(I){this.relativePanels[I]=true;},isRelativePanel:function F(I){return !!this.relativePanels[I];},isComponent:function C(J,I){return this.getComponentKey(J)===I;},getComponent:function A(I){return this.comps[I];},getComponentKey:function D(J){var I=this.getComponent(J);return(I&&I.k)||"";},createComponent:function E(L,K,J){B.call(this,L);var I=new K(J);this.comps[L]=I;B.call(this,L,I);return I;}});mstrmojo.vi.models.VIComponentMap.TYPES={FILTER_STACK:1,FILTER_PANEL:2,PAGEBY_STACK:3,PAGEBY_PANEL:4,VIZ_CONTENT:5,MAIN_CONTENT:6};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.color","mstrmojo.hash","mstrmojo.num","mstrmojo.array");var e=1,c=2,k=3,G=4,W=5,f=6,d=7,A=-1,H=-2,F=mstrmojo.color,K=mstrmojo.hash,Z=mstrmojo.array,E=mstrmojo.num,I,V;function j(s,r){return s.every(function(t){return r(t);});}function a(t,s,r){return j(t,function(u){return u.ttp===s||u.ttp===r;});}function Y(s){var r=s.toFixed(2);return parseFloat(r);}function i(r){this.raiseEvent(K.copy(r,{name:"modelEdit"}));}function m(r){this.raiseEvent(K.copy(r,{name:"selectedThresholdsChange"}));}function P(){var r=this.basedOnId||this.metricId;return Z.filterOne(this.data.gsi.mx,function(s){return s.did===r;});}function g(u){var r=u.expr.nds,s=r.length;if(s!==1){return false;}var t=r[0],AD=t.cs;if(!t.m||!AD){return false;}var AC=t.fnt,x=t.fn,AB=AD[0],z=AD[1],w=AB&&AB.v,v=z&&z.v,AA=E.parseNumeric(w)||parseFloat(w),y=E.parseNumeric(v)||parseFloat(v);switch(AC){case 2:case 3:switch(x){case 1:case 2:u.flr=AC===2?-Infinity:0;u.ceil=AA;u.ttp=AC===2?(x===1?W:G):(x===1?c:e);break;case 3:case 4:case 5:case 13:u.flr=AA;u.ceil=isNaN(y)?(AC===2?Infinity:100):y;u.ttp=AC===2?(x===4?W:(x===5?G:f)):(x===4?c:(x===5?e:k));break;default:return false;}break;default:switch(x){case 11:u.flr=-Infinity;u.ceil=AA;u.ttp=d;break;case 17:case 10:u.flr=AA;u.ceil=isNaN(y)?Infinity:y;u.ttp=d;break;default:return false;}}return true;}mstrmojo.threshold.MetricThresholdData=null;mstrmojo.threshold.ThresholdModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.threshold.ThresholdModel",data:undefined,thresholds:undefined,orgThresholds:undefined,selectedThresholds:[],metricId:undefined,basedOnId:undefined,editorMode:0,init:function l(s){this._super(s);var r=mstrApp.customization.getCustomThresholds();I=I||r.color;V=V||r.image;},ondataChange:function h(){this.thresholds=this.data.gsi.thresholds;this.saveOriginalData();},isAdvanced:function D(v){var s=this.thresholds;if(s){var y=s[v]||[],AM=false,AL,AF,AJ="The expression is not supported by the Simple Threshold Exception Parser.";if(y.length===0){return false;}if(y.some(function(AS){if(AS.ttp===A){return true;}try{if(!g(AS)){throw AJ;}AF=AS.expr.nds[0].m.did;}catch(AR){return true;}if(AL&&AL!==AF){return true;}AL=AF;var AQ=AS.rtp;if(AQ===3||AQ===10){return true;}var AN=AS.scope;if(AN&&AN!==1){return true;}var AP=AS.fmt||{};for(var AO in AP){if(AO!=="bc"&&AO!=="bgs"){return true;}else{AM=true;}}return false;})){return true;}if(AM&&!j(y,function(AN){return AN.fmt&&(AN.fmt.bc||AN.fmt.bgs);})){return true;}this.basedOnId=AL;var AG=false,AE=this.getSimpleThresholdType(v),x=y.length;if(x>0&&AE!==H){var AI,AA,AC;for(AI=0;AI<x-1;AI++){AA=y[AI];AC=y[AI+1];if(AA.ceil!==AC.flr&&AA.flr!==AC.ceil){AG=true;break;}}if(!AG){var r=y[0],t=y[x-1],AB=r.flr,AH=t.ceil,u=r.ceil,w=t.flr,z=this.getMetricsCount(),AD=this.getMetricsMinValue(),AK=this.getMetricsMaxValue();switch(AE){case W:case G:AG=!(((AB===0||AB===-Infinity)&&(AH===z||AH===Infinity))||((u===z||u===Infinity)&&(w===0||w===-Infinity)));break;case c:case e:AG=!((parseInt(AB,10)===0&&parseInt(AH,10)===100)||(parseInt(u,10)===100&&parseInt(w,10)===0));break;case d:AG=!(((AB===AD||AB===-Infinity)&&(AH===AK||AH===Infinity))||((u===AK||u===Infinity)&&(w===AD||w===-Infinity)));break;}}return AG;}else{return true;}}return false;},getSimpleThresholdType:function(s){var t=this.thresholds&&this.thresholds[s],r=H;if(t){if(a(t,k,c)){r=c;}else{if(a(t,k,e)){r=e;}else{if(a(t,f,G)){r=G;}else{if(a(t,f,W)){r=W;}else{if(a(t,d)){r=d;}}}}}}return r;},isImageBasedType:function L(r){var s=this.thresholds&&this.thresholds[r];return s&&!s.some(function(t){return t.rtp!==4;});},getMetricsMaxValue:function(){var r=P.call(this).max;return r===undefined?3000000:r;},getMetricsMinValue:function(){var r=P.call(this).min;return r===undefined?-3000000:r;},getMetricsCount:function(){var r=P.call(this).cnt;return r===undefined?100:r;},getFormatString:function(){var t=this.data.nf,s=this,r=Z.filterOne(t,function(u){return u.id===s.basedOnId;})||{};return r.nfs||"";},getDefaultColors:function p(){return I;},getDefaultImages:function J(){return V;},getNormalizedValue:function(t,s){var r=null;if(s===k||s===c||s===e){r=t/100;}if(s===f||s===W||s===G){r=t/(this.getMetricsCount());}if(s===d){r=(t-this.getMetricsMinValue())/(this.getMetricsMaxValue()-this.getMetricsMinValue());}if(r<0){r=0;}if(r>1){r=1;}return r;},getRealValue:function(s,r){if(r===k||r===c||r===e){return Y(s*100);}if(r===f||r===W||r===G){return Y(s*this.getMetricsCount());}if(r===d){return this.getMetricsMinValue()+s*(this.getMetricsMaxValue()-this.getMetricsMinValue());}return null;},getColorScheme:function(s){var r="custom",t,u,v;I.forEach(function(w){v=w.bands;u=s.length;if(u!==v.length){return ;}for(var x=0;x<u;x++){t=mstrmojo.color.fixFullHexValue(s[x]);if(v[x].bc!==t&&v[u-x-1].bc!==t){return ;}}r=w.id;});return r;},getImageSetName:function U(v){var u=V[0].id,r,t=function(w){return w===r.bands[0].url;};for(var s=0;s<V.length;s++){r=V[s];if(v.some(t)){u=r.id;break;}}return u;},getGridValueFormat:function M(){return this.data.gsi.fmts.va;},isMapReversed:function N(t,r,v){var u=(v?V:I).filter(function(w){return w.id===t;})[0],s=r[0];if(!v){s=F.fixFullHexValue(s);}return u&&u.bands[0][v?"url":"bc"]!==s;},setConditionData:function Q(u,s){var t=u.data,r=t.isNew;K.copy(s,K.clear(t));delete t.isNew;u.paint();u.tree.onConditionEdit(u,r);},hasSelectedThresholds:function o(){return this.selectedThresholds.length>0;},isThresholdSelected:function b(r){return this.selectedThresholds.indexOf(r)!==-1;},toggleThresholdSelected:function X(r,t){var x=this.selectedThresholds,w=x.indexOf(r),s=w!==-1,v=this.thresholds[this.metricId],u=v.indexOf(r)!==-1;if(u){if(t&&!s){x.push(r);}else{if(!t&&s){x.splice(w,1);}}m.call(this);}},addThresholds:function T(r){var s=this.thresholds[this.metricId];this.thresholds[this.metricId]=(s||[]).concat(r);i.call(this);},duplicateThreshold:function n(s){var u=this.thresholds[this.metricId],r=u[s],t=K.clone(r);u.push(t);if(this.isThresholdSelected(r)){this.toggleThresholdSelected(t,true);}i.call(this);},deleteThreshold:function q(r){var t=this.thresholds[this.metricId];var s=t.indexOf(r);if(s!==-1){this.toggleThresholdSelected(r,false);t.splice(s,1);}i.call(this);},moveThreshold:function C(s,u){var t=this.thresholds[this.metricId],r=t.splice(s,1);this.thresholds[this.metricId]=t.slice(0,u).concat(r,t.slice(u,t.length));i.call(this);},cleanUp:function O(){this.selectedThresholds=[];this.editorMode=mstrmojo.threshold.ThresholdModel.EDITOR_TYPES.AUTO;},clearData:function S(){var r=this.thresholds;if(r){r[this.metricId]=undefined;}},saveOriginalData:function R(){this.orgThresholds=K.clone(this.thresholds);},setAttIdToNDE:function B(t){if(!(t instanceof Array)){t=[t];}var s,y,u,r,x,v=function(z){z.att.forEach(function(AA){if(AA.did===x.did){x.attId=AA.attId;}});},w=function(z){z.conid=x.did;};for(s=0;s<t.length;s++){r=t[s];for(y in r){x=r[y];if(typeof x==="function"||!(x instanceof Object)){continue;}else{if(y==="a"){if(x.t===47&&x.st===12033){K.forEach(this.controller.datasets,v);u=r.fn;if(u===22||u===57){(r.es||[]).forEach(w);}}}else{this.setAttIdToNDE(r[y]);}}}}}});mstrmojo.threshold.ThresholdModel.SLIDER_MODE={COLOR_BASED:0,IMAGE_BASED:1};mstrmojo.threshold.ThresholdModel.REPLACE_SYMBOL=[{n:"&#9679;",v:"1"},{n:"&#9632;",v:"2"},{n:"&#9830;",v:"3"},{n:"&#9670;",v:"4"},{n:"&#10070;",v:"5"},{n:"&#9784;",v:"6"},{n:"&#10047;",v:"7"},{n:"&#8984;",v:"8"},{n:"&#8680;",v:"29"},{n:"&#8679;",v:"30"},{n:"&#8681;",v:"31"}];mstrmojo.threshold.ThresholdModel.FEATURES={SHOW_ADVANCED_EDITOR:1,SHOW_BASED_ON:2,SHOW_IMAGE:3,SHOW_VALUE_ITEM:4};mstrmojo.threshold.ThresholdModel.EDITOR_TYPES={AUTO:0,ADVANCED_EDITOR:1,SIMPLE_EDITOR:2};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash");var E=mstrmojo.hash;mstrmojo.threshold.PropertyModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.threshold.PropertyModel",threshold:undefined,gridValueFormat:undefined,submitChange:function F(){this.raiseEvent({name:"propertyModelChange",threshold:this.threshold});},updateControl:function D(H){var G=this.threshold,I=E.copy(G.fmt,this.gridValueFormat);H.textGroup.setFormatSource(G);H.charGroup.setFormatSource(I);H.containerGroup.setFormatSource(I);},changeFormatProperty:function B(H,I,K){var G=this.threshold,J=H==="threshold"?G:G.fmt;if(!J&&H==="fmt"){J=G.fmt={};}J[I]=K;},getReplaceTypeName:function A(){return"rtp";},getReplaceTextName:function C(){return"rtxt";}});}());(function(){mstrmojo.requiresCls("mstrmojo.threshold.ThresholdModel","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.models.FormatModel");var I=mstrmojo,E=mstrmojo.chart.model.enums.EnumDSSObjectType,F=1,C=["#97D2FC","#62B4EE","#2798EB","#2387CF","#1F77B4"],G=[0.2,0.4,0.6,0.8],B=I.models.FormatModel,H=B.ENUM_PROPERTY_NAMES;function D(L,K,M,N){K.reverse().forEach(function(O){N.push(L.getClearThresholdAction(M.did,M.t||E.DssTypeMetric,O.tid));});}mstrmojo.vi.util.ThresholdUtils=mstrmojo.provide("mstrmojo.vi.util.ThresholdUtils",{addClearAllThresholdsActions:function J(K,M,Q){var P=M.data.gsi,L=P.mx,N=P.thresholds,O;if(N){L.forEach(function(R){O=N[R.did];if(O){D(K,O,R,Q);}});P.thresholds={};}},addThresholds:function A(S,X,N,R,P,K,L,O){var Q,U=[],T=new mstrmojo.threshold.ThresholdModel({data:N.data}),V=T.data.gsi.thresholds,M=V&&V[R.did];P=P||[];if(!M||O){K=K||C;L=L||G;for(Q=0;Q<K.length;Q++){var W={};W.fmt=B.getFormatUpdate(H.BACKGROUND_COLOR,K[Q]);B.getFormatUpdate(H.FILL_STYLE,0,W.fmt);if(Q>0){W.flr=T.getRealValue(L[Q-1],F);}if(Q<L.length){W.ceil=T.getRealValue(L[Q],F);}U.push(W);}if(M){D(S,M,R,P);}P.push(S.getCreateSimpleThresholdAction(U,X.k,R.did,F,null,4));}T.destroy();return P;}});}());(function(){mstrmojo.requiresCls("mstrmojo.StepperContentProvider","mstrmojo.num");var A=mstrmojo.num;function B(G,F){var H=F?G.max:G.min,D=F?G.min:G.max,E=G.getVal(F?1:-1);return(H===null||(F?(E<=H):(E>=H))||(D!==null&&G.canLoop));}function C(H,G){var F=H.min,D=H.max,E=H.getVal(G?1:-1);if((G&&D!==null&&E>D)||(!G&&F!==null&&(E<F))){if(H.canLoop){E=((E-F)%(D-F+1))+F;E=(E>=F)?E:E+(D-F+1);}else{return ;}}H.item[H.valField]=H.curVal=E;H.onTraverse();}mstrmojo.NumStepperContentProvider=mstrmojo.declare(mstrmojo.StepperContentProvider,null,{scriptClass:"mstrmojo.NumStepperContentProvider",curVal:null,init:function(E){this._super(E);var F=this.item,D=function(I){var H=I&&F[I];return(H===null||H===undefined);},G=function(I,K,H){var J=H&&D.call(this,K)?null:F[K];if(J!==null&&J!==undefined){this[I]=J;}};G.call(this,"min",this.minField,true);G.call(this,"max",this.maxField,true);G.call(this,"interval",this.intField);this._initCurrent();},_initCurrent:function(){var E=this.item,F=this.curVal=E[this.valField];if(F===null||F===undefined){var D=this.min;this.curVal=D!==null?D:0;}},next:function(){C(this,true);},prev:function(){C(this,false);},hasPrev:function(){return B(this,false);},hasNext:function(){return B(this,true);},renderItemAt:function(F){var E=this.getVal(F),D=this.renderer;return D?D.render(E,this):E;},getVal:function(D){return this.curVal+(this.interval*(D||0));},setVal:function(F){var G=this.min,D=this.max,E=this.getVal();if(typeof F!=="number"||isNaN(F)||F===E||A.inNumericRange(F,G,D)!==0){return ;}this.item[this.valField]=this.curVal=F;this.onTraverse();},onTraverse:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Widget","mstrmojo._ListSelections");var E=mstrmojo.dom;mstrmojo.ListBase=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListSelections],{scriptClass:"mstrmojo.ListBase",selectionPolicy:null,itemRenderer:null,icnCssText:"",icnCss:"",markupString:'<div id="{@id}" tstid="{@tstid}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mousedown,mouseover,mouseout,contextmenu><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div>',markupSlots:{itemsContainerNode:function G(){return this.domNode.firstChild;},scrollboxNode:function A(){return this.domNode;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod},autoHide:false,itemsContainerNode:null,_markupPrefix:null,_markupSuffix:null,_itemPrefix:null,_itemSuffix:null,init:function J(K){this._super(K);if(this.autoHide){this.visible=!!(this.items&&this.items.length);}},buildRendering:function D(){this.itemsHtml="";var K=(this.renderOnScroll?this.items&&((this.renderIndex+1)*this.renderBlockSize):this.items&&this.items.length);if(K){this.itemsHtml=this._buildItemsMarkup(0,K-1,this._markupPrefix&&this._markupPrefix(),this._markupSuffix&&this._markupSuffix(),this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join("");}this._super();delete this.itemsHtml;this.addSlots({itemsNode:this.itemsContainerNode.firstChild});},_buildItemsMarkup:function B(K,N,U,L,V,M){var W=[],Q=0;W[Q++]=U||"";var P=this.itemRenderer,T=P&&P.render;if(T&&typeof T==="function"){var R=this.items,S=Math.min(N+1,((R&&R.length)||0)),O;for(O=K;O<S;O++){W[Q++]=V||"";W[Q++]=T(R[O],O,this);W[Q++]=M||"";}}W[Q+1]=L||"";return W;},onselectionChange:function H(V){if(!V){return ;}var S=this.itemRenderer;if(!S){return ;}var O=S.unselect,R=this.items||[],W=V.removed,N,M,L,P,X;if(O&&W){for(P=0,X=W.length;P<X;P++){N=W[P];if(typeof (N)==="object"){M=(N.idx==0)?0:N.positions;N=N.idx;}else{M=N;}L=this._getItemNode(M);if(L){O(L,R[N],M,this);}}}var K=S.select,U=V.added,Q,T;if(K&&U){for(Q=0,T=U.length;Q<T;Q++){N=U[Q];if(typeof (N)==="object"){M=(N.idx==0)?0:N.positions;N=N.idx;}else{M=N;}L=this._getItemNode(M);if(L){K(L,R[N],M,this);}}}if(this.onchange){this.onchange({added:V.added,removed:V.removed});}},_set_items:function C(N,K){this.renderIndex=0;if(this.autoHide){this.set("visible",!!(K&&K.length));}var M=this.items;this.items=K;if(M!==K){var L=this.hasRendered;if(L){this.unrender(false);}this.clearSelect();if(L){this.render();}return true;}return false;},onItemContextMenu:mstrmojo.emptyFn,oncontextmenu:function F(K){E.preventDefault(window,K.e);var M=K.getTarget(),L=this.getItemFromTarget&&this.getItemFromTarget(M);if(L){if(this.onItemContextMenu(L,K)){K.cancel();}}},_getItemNode:function I(K){var L=this.itemsContainerNode;return(L&&L.childNodes[K])||null;},renderOnScroll:false});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.string");var B=mstrmojo.string;mstrmojo.Label=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Label",allowHTML:false,text:"",title:"",markupString:'<div id="{@id}" class="mstrmojo-Label {@cssClass}" style="{@cssText}" title="{@title} "mstrAttach:click></div>',markupMethods:{ontitleChange:function(){this.domNode.title=this.title;},ontextChange:function(){var C=this.text;C=B.isEmpty(C)?"":C.toString();this.domNode.innerHTML=this.allowHTML?C:B.encodeHtmlString(C,true);},oncssTextChange:mstrmojo.Widget.cssTextMarkupMethod,onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Widget.enabledMarkupMethod},autoHide:false,_set_text:function A(E,C){if(this.autoHide){this.set("visible",(C!==null)&&(C!=="")&&(C!==undefined));}var D=this.text;this.text=C;return(D!==C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash","mstrmojo.css","mstrmojo.string");function A(C,B){return mstrmojo.hash.copy(B,{label:"",tabIndex:"",cssDisplay:"inline",name:null,markupString:'<span id="{@id}" class="'+C+' {@cssClass}" style="{@cssText}" title="{@tooltip}"><input id="{@id}_input"  type="{@type}" name="{@name}" value="{@value}" tabIndex="{@tabIndex}" mstrAttach:click tstid="{@tstid}"/><label for="{@id}_input">{@label}</label></span>',markupSlots:{inputNode:function(){return this.domNode.firstChild;},labelNode:function(){return this.domNode.childNodes[1];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";},onenabledChange:function(){this.inputNode.disabled=!this.enabled;mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,"disabled");},onlabelChange:function(){this.labelNode.innerHTML=mstrmojo.string.encodeHtmlString(this.label);},oncheckedChange:function(){this.inputNode.checked=this.checked;}},checked:false,preclick:function(){this.set("checked",this.inputNode.checked);},isChecked:function(){return this.inputNode.checked;}});}mstrmojo.CheckBox=mstrmojo.declare(mstrmojo.Widget,null,A("mstrmojo-CheckBox",{scriptClass:"mstrmojo.CheckBox",type:"checkbox"}));mstrmojo.ImageCheckBox=mstrmojo.declare(mstrmojo.Widget,null,A("mstrmojo-CheckBox mstrmojo-ImageCheckBox",{scriptClass:"mstrmojo.CheckBox",type:"image",cssDisplay:"block",preclick:function(){this.set("checked",!this.checked);},postCreate:function(){this.markupMethods=mstrmojo.hash.copy(this.markupMethods);this.markupMethods.oncheckedChange=function(){mstrmojo.css.toggleClass(this.inputNode,["checked"],this.checked);};},postBuildRendering:function(){this.inputNode.src=this.src||"../images/1ptrans.gif";if(this._super){return this._super();}return true;}}));mstrmojo.RadioButton=mstrmojo.declare(mstrmojo.Widget,null,A("mstrmojo-RadioButton",{scriptClass:"mstrmojo.RadioButton",type:"radio",postBuildRendering:function(){if(mstrmojo.dom.isIE){this.inputNode.checked=this.checked;}}}));}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom");var B="mstrmojo-Image";mstrmojo.Image=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Image",markupString:'<div id="{@id}" class="'+B+' {@cssClass}" style="{@cssText}" mstrAttach:click><image src="{@src}" mstrAttach:load /></div>',markupSlots:{imgNode:function(){return this.domNode.firstChild;}},markupMethods:{onsrcChange:function(){var C=this.imgNode;if(C){C.src=this.src||"../javascript/mojo/css/images/1ptrans.gif";}},oncssClassChange:function(){var C=this.domNode;if(C){C.className=this.cssClass||B;}},onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},src:"",getImageSize:function A(){var C=this.imgNode;return{w:C.clientWidth,h:C.clientHeight};}});mstrmojo.Image.baseCssClass=B;}());(function(){mstrmojo.requiresCls("mstrmojo.Widget");var C=mstrmojo.css,G=mstrmojo.array;function F(H,J){var I={searchMetadata:{taskId:"searchMetadata",styleName:this.searchStyleName,rootFolderID:this.rootID,searchPattern:this.searchPattern+"*",nameWildcards:(this.qse?16:1),quickSearch:this.qse,sortKey:(this.qse?-1:6),blockBegin:this.blockBegin||1,blockCount:this.blockCount,recursive:1,folderBrowserStyle:0,includeAncestorInfo:"true",includeObjectDesc:this.includeObjectDesc,searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseFolder:{taskId:"searchMetadata",rootFolderID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,recursive:this.hierarchical?0:(this.searchXML?"":1),folderBrowserStyle:this.hierarchical?1:0,includeAncestorInfo:String(!!this.hierarchical),searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseElements:{taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,filterXML:this.filterXML||"",searchPattern:this.searchPattern||"",matchCase:!!this.matchCase,dataSourcesXML:this.dataSourcesXML||"",includeFormNames:!!this.collectForms,includeFormValues:!!this.bIncludeFormValues,displayedForms:this.displayedForms||1,dimensionID:this.dimensionId||""}}[H]||{};if(typeof J==="object"){mstrmojo.hash.copy(J,I);}return I;}var B="##searchPattern";mstrmojo.SearchBox2=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.SearchBox2",taskId:"searchMetadata",rootID:null,searchStyleName:"MojoFolderStyle",objectTypes:"3,14,256,257,1024,1027,2048,3072,10",token:{searchMetadata:/\//,browseElements:/(^-)|(,)|( OR )|( AND)|([<>]=?)|(&)|( )|(["\[\]\/])/},blockCount:50,blockBegin:1,minSearchLength:2,matchCase:false,enableMatchCase:true,supportIncFetch:true,quickSearch:false,searchAfterSearchPatternRestored:false,includeObjectDesc:true,forceResetCache:false,onUpdateSearchParams:mstrmojo.emptyFn,markupString:'<table id={@id} cellspacing=0 cellpadding=0 class="mstrmojo-SearchBox-Wrapper {@cssClass}" style="{@cssText};"><tr><td><div class="mstrmojo-SearchBox" mstrAttach:click ><input class="mstrmojo-SearchBox-input" type="text" mstrAttach:keyup,blur /></div></td><td><div class="mstrmojo-SearchBox-bg"><div class="mstrmojo-SearchBox-search" id="{@id}sbSearch" mstrAttach:click ></div></div></td><td><div class="mstrmojo-SearchBox-options" style="{@cssTextShowMC}"><input id="{@id}sbMatchCase" type="checkbox" mstrAttach:click /><label for="{@id}sbMatchCase">'+mstrmojo.desc(4326,"Case Sensitive")+"</label></div></td></tr></table>",markupSlots:{inputNode:function(){return this.domNode.rows[0].cells[0].firstChild.firstChild;},searchNode:function(){return this.domNode.rows[0].cells[1].firstChild.firstChild;},optionNode:function(){return this.domNode.rows[0].cells[2].firstChild.firstChild;}},preBuildRendering:function(){this.cssTextShowMC=this.enableMatchCase?"":"display: none";},postBuildRendering:function(){if(this._super){this._super();}this.matchCase=this.optionNode.checked;},onkeyup:function E(H){var J=this;var I=J.searchTimer;if(I){window.clearTimeout(I);}J.searchTimer=window.setTimeout(function(){J.onkeyupDelayed(H);delete J._searchTimer;},parseInt(H.e.keyCode||H.e.charCode,10)===13?0:J.searchDelay);},onkeyupDelayed:function A(I){var H=I.hWin,K=I.e||H.event;var J=mstrmojo.string.trim(this.inputNode.value);if(this.searchNode){C.toggleClass(this.searchNode,["clear"],J.length>0);}this.showTaskError=false;this.click2Search=false;if(J.length==0||this.autoSubmit||this.onEnter&&K.keyCode===13){this._onsearch();}},onEnter:function(){this._onsearch();},onclick:function(I){var H=I.hWin,K=I.e||H.event,M=K.target||K.srcElement,L=M&&M.id;switch(L.replace(this.id,"")){case"sbDown":if(this.enableMatchCase){var J=this.optionNode.parentNode.style;J.display=J.display=="block"?"none":"block";}break;case"sbSearch":if(this.inputNode.value.length>0){this.clearSearch();}break;case"sbMatchCase":this.set("matchCase",this.optionNode.checked);break;case"sbSpinner":break;}},clearSearch:function(){this.inputNode.value="";C.removeClass(this.searchNode,["clear"]);var I=this.searchCache,H=this.rootID;if(I&&I[H]){I[H][B]="";}this._onsearch(true);},onmatchCaseChange:function(){this.matchCaseChanged=true;this._onsearch();},onrootIDChange:function(){this.rootChanged=true;this._setupCache(this.forceResetCache);var I=this.searchCache[this.rootID];if(I){var H=I[B]||"";this.inputNode.value=H;if(H.length>0){if(H.length>=this.minSearchLength&&this.searchAfterSearchPatternRestored){this._onsearch();}}}},getRootID:function(){},contentWidget:null,_notifyContentWidget:function(I){var H=this.contentWidget||this;H.set("items",I[0]);if(this.supportIncFetch){var J=I[1],L=I[2],K=this.blockCount;H.set("ifs",{np:Math.floor(J/K)+((J%K>0)?1:0),cp:Math.floor(L/K)+((L%K>0)?1:0)});}},_onsearch:function(H){this.getRootID();this._setupCache();var K=mstrmojo.string.trim(this.inputNode.value);if(K.length===0){H=true;}var L=this.token[this.taskId];if(L.test(K)){}if(this.searchPattern==K&&!this.rootChanged&&!this.matchCaseChanged&&!this.click2Search){return ;}var M=this.rootID,J=this.searchCache[M];if((K.length<this.minSearchLength&&!this.click2Search)&&!H){if(this.searchPattern&&this.searchPattern.length>=this.minSearchLength){this._notifyContentWidget(J[M]);this.searchPattern=K;}}else{this.searchPattern=K;J[B]=this.searchPattern;var I=this.filterCache(K,J,H);if((this.click2Search||I===null)&&!H){this.blockBegin=1;this.fetch();return ;}else{this._notifyContentWidget(I);}}J[B]=K;},_setupCache:function(J){var K=this.searchCache,I=this.rootID;if(K&&(J||!K[I])){K[I]=K[I]||{};var H=this.contentWidget&&this.contentWidget.items||this.rootCacheItems||[];K[I][I]=[H,this.totalSize||0,this.blockBegin||1].concat();}},taskCallId:0,path:mstrConfig.taskURL,method:"POST",serverRequest:function D(H,I){mstrmojo.xhr.request("POST",this.path,I,H,undefined,this.XServer,this.baseParams);},fetch:function(){this.rootChanged=false;this.matchCaseChanged=false;if(this.spinnerNode){this.spinnerNode.style.display="block";}if(this.preFetch){this.preFetch();}var H=this,I=F.apply(this,[this.taskId]);I.searchPattern=this.searchPattern;this.onUpdateSearchParams(I);var J={success:function(K){var L=K.items||K.es||[];L=[L,K.totalSize||K.sz||0,K.blockBegin||K.bb];mstrmojo.all[H.id].searchCache[H.rootID][(I.searchPattern.length==0?H.rootID:H.buildIndex(I.searchPattern))]=L;H._notifyContentWidget(L);},failure:function(K){if(H.showTaskError){mstrmojo.alert(mstrmojo.desc(8117,"Data request failed:")+" \n"+K.getResponseHeader("X-MSTR-TaskFailureMsg"));}},complete:function(){if(H.spinnerNode){H.spinnerNode.style.display="none";}if(H.postFetch){H.postFetch();}}};this.serverRequest(I,J);},fetchPage:function(H){this.blockBegin=H*this.blockCount+1;this.fetch();},filterCache:function(J,M,I){var H=M&&M[I?this.rootID:this.buildIndex(J)];if(H){return H;}var K=this.token[this.taskId];if(K.test(J)||this.totalSize>this.blockCount){return null;}var O=J.replace(/.$/,"");H=M&&M[this.buildIndex(O)];while(H===undefined&&(O=O.replace(/.$/,"")).length>0){H=M&&M[this.buildIndex(O)];}if(H!==undefined){if(H[1]>this.blockCount){return null;}var L=H[0],N=[];G.forEach(L,function(P){if(P.n.search(new RegExp(J,this.matchCase?"":"i"))>-1){N.push(P);}});this.totalSize=N.length;return(M[this.buildIndex(J)]=[N,N.length,this.blockBegin].concat());}return null;},buildIndex:function(H){if(H.replace(/^\s|\s$/g,"").length===0){return"";}return !this.matchCase?H.toUpperCase():H+"::0";},init:function(H){if(this._super){this._super(H);}this.qse=mstrApp.useQuickSearch&&mstrApp.useQuickSearch()||0;this.autoSubmit=this.quickSearch&&(mstrApp.searchAutoComplete&&mstrApp.searchAutoComplete()||false);this.searchDelay=mstrApp.searchAutoCompleteDelay&&mstrApp.searchAutoCompleteDelay()||0;this.xhr=new mstrmojo.SimpleXHR();this.searchCache=this.searchCache||{};},clear:function(){this.inputNode.value="";C.removeClass(this.searchNode,["clear"]);}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.string","mstrmojo.Widget");var R=["(",")","{","}","-","+","*","/","<",">","|","~",","],G={" ":true,"@":true},Q=null;function J(V){if(!Q){Q={};var U,T;for(U=0,T=R.length;U<T;U++){Q[R[U]]=true;}}return Q.hasOwnProperty(V);}function S(V){if(!V){return false;}var T=V.length,U,W;for(U=0;U<T;U++){W=V.charAt(U);if(J(W)||G[W]){return true;}}return false;}function A(T){return S(T)?"["+T+"]":T;}var M={8:true,9:true,10:true};var C=function(U,T){return M[U]&&!/^\".*\"$/.test(T)?'"'+T+'"':T;};var D=function(U,T,V){var W=typeof V==="undefined"?true:M[V];return U.tp===261&&T.length>=2&&W?(/^\s+$/.test(T.substr(1,T.length-2))?T:T.substr(1,T.length-2)):T;};mstrmojo.ME.MetricToken=mstrmojo.declare(mstrmojo.Widget,null,{data:null,markupString:'<span id={@id} class="mstrmojo-token {@cssClass}"></span>',active:false,markupMethods:{ondataChange:function(){var U=this.data,T=mstrmojo.string.encodeHtmlString(String(U.v));if(U.v===","){this.domNode.innerHTML=T+"&nbsp;";}else{if(U.tp===259&&U.v==="Desc"){this.domNode.innerHTML="&nbsp;"+T;}else{this.domNode.innerHTML=T;}}mstrmojo.css.toggleClass(this.domNode,["mstr"],this.isMstrO());mstrmojo.css.toggleClass(this.domNode,["nfn"],!this.isFunction());mstrmojo.css.toggleClass(this.domNode,["invalid"],U.sta===-1);},onactiveChange:function(){mstrmojo.css.toggleClass(this.domNode,["active"],this.active);}},isMstrO:function P(){return !!this.data.oi||!!this.data.rfd;},isFunction:function B(){return this.isMstrO()&&(this.data.oi&&this.data.oi.t==11);},brackets:A,length:function E(){return this.data.v.toString().length;},isDelimiter:function O(){return this.data.isDelimiter||(this.length()===1&&J(this.data.v));},split2Tokens:function H(W){var V=this.data,U=V&&V.v.toString(),X=U.substring(0,W),T=U.substring(W);return[{v:X,isNew:true},{v:T,isNew:true}];},mergeTo:function I(U){var W=this.data,V=W&&W.v.toString(),T=U.data.v.toString();return{v:V+T,isNew:true};},brackets:A,setItemInfo:function N(T){var U=this.data;U.v=this.brackets(T.n);U.oi=T;U.sta=1;U.isNew=true;this.set("data",U);this.paint();},spliceContent:function K(Z,X,U){var Y=this.data,W=Y&&Y.v.toString(),a=W.substring(0,Z);X=(X===null||X===undefined)?(W.length-Z):X;var T=W.substring(Z+X),V=a+(U||"")+T;Y.v=V;Y.isNew=true;Y.sta=1;Y.ift=(this.isAttributeToken()||Y.at)&&(Y.v.indexOf("@")>=0);if(Y.ift){Y.at=Y.oi||Y.at;}else{delete Y.at;}delete Y.oi;delete Y.exv;delete Y.extp;delete Y.tp;this.set("data",Y);this.paint();},isAttributeToken:function F(){return this.data&&this.data.oi&&this.data.oi.t===12;},setFormInfo:function L(U){var V=this.data,T=V.oi||V.at;V.v=this.brackets(T.n)+"@"+this.brackets(U.n);V.exv=U.did;V.extp=8;V.sta=1;V.isNew=true;V.oi=V.at;delete V.at;this.set("data",V);this.paint();}});mstrmojo.ME.MetricToken.isDelimiter=J;mstrmojo.ME.MetricToken.brackets=A;mstrmojo.ME.MetricToken.quotes=C;mstrmojo.ME.MetricToken.unquotes=D;mstrmojo.ME.MetricToken.QUOTABLE_DATATYPES=M;mstrmojo.ME.MetricToken.argDelimiter={".":",",",":";"}[mstrConfig&&mstrConfig.decimalSep]||",";})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo.hash","mstrmojo.css");var C=mstrmojo.dom,B=mstrmojo.hash,E=mstrmojo.css;mstrmojo.Button=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Button",iconClass:"",innerIconClass:"",title:"",text:"&nbsp;",enabled:true,selected:false,markupString:'<div id="{@id}" class="mstrmojo-Button {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:touchstart,click,mousedown,mouseup><div class="mstrmojo-Button-text {@innerIconClass}"></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:function(){E.toggleClass(this.domNode,"disabled",!this.enabled);},onselectedChange:function(){E.toggleClass(this.domNode,"selected",this.selected);},ontextChange:function(){this.textNode.innerHTML=this.text;},ontitleChange:function(){this.domNode.title=this.title;},onwidthChange:mstrmojo.Widget.widthMarkupMethod},oniconClassChange:function D(J){var K=this.domNode;if(this.hasRendered&&K){K.className=K.className.replace(J.valueWas,"")+" "+J.value;}},onclick:mstrmojo.emptyFn,ontouchend:function I(J){this.onclick(J);}});mstrmojo.Button.newIconButton=function H(L,O,M,J,N){var K={scriptClass:"mstrmojo.Button",title:L,cssClass:O,text:"",onclick:M};if(J){K.bindings=J;}B.copy(N,K);return K;};function F(M,N,J,P){var L=[];if(J){L.push(J);}var O=P&&P.cssClass;if(O){L.push(O);delete P.cssClass;}var K={scriptClass:"mstrmojo.Button",cssClass:L.join(" "),text:M};if(N){K.onclick=N;}return B.copy(P,K);}mstrmojo.Button.newInteractiveButton=function G(M,N,P,O){var L={glowClass:"glow"};if(P&&(C.isFF||C.isWK)){B.copy({onmousedown:function J(){E.applyShadow(this.domNode,0,0,10,P);},onmouseup:function K(){E.removeShadow(this.domNode);}},L);}return F(M,N,"mstrmojo-InteractiveButton",B.copy(O,L));};mstrmojo.Button.newWebButton=function A(K,J,M,L){return F(K,J,"mstrmojo-WebButton"+(M?" hot":""),L);};mstrmojo.Button.newActionButton=function(K,L,M){var J=mstrmojo.Button.newWebButton(K,L,false,M);J.cssClass=J.cssClass+" action-button";return J;};}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.css");var C=mstrmojo.Widget;mstrmojo.ui.Checkbox=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.ui.Checkbox",markupString:'<div id="{@id}" class="mstrmojo-ui-Checkbox {@cssClass}" mstrAttach:click></div>',markupMethods:{onvisibleChange:C.visibleMarkupMethod,oncheckedChange:function B(){mstrmojo.css.toggleClass(this.domNode,"checked",this.checked);},onenabledChange:C.enabledMarkupMethod},checked:false,onclick:function A(){this.set("checked",!this.checked);}});}());(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.Widget","mstrmojo.array","mstrmojo._HasChildren");var G=mstrmojo.array;function E(P){if(!this.shouldPropagateEnabled){return ;}var O=this._disabledChildren;G.forEach(P,function(Q){if(Q.enabled){O.push(Q.id);Q.set("enabled",false);}});}function J(){G.forEach(this._disabledChildren,function(O){var P=mstrmojo.all[O];if(P&&P.parent===this){P.set("enabled",true);}},this);this._disabledChildren=[];}mstrmojo.Container=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasChildren],{scriptClass:"mstrmojo.Container",defaultChildSlot:"containerNode",containerNode:null,preserveChildDomOrder:true,shouldPropagateEnabled:false,init:function M(P){this._super(P);this._disabledChildren=[];this.attachEventListener("addChild",this.id,function(Q){if(this.shouldPropagateEnabled&&!this.enabled){E.call(this,Q.value);}});if(this.children){this.initChildren();}var O=this.parent;if(!O||O.hasInitBindings){this.initBindings();}},destroy:function H(O){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(O);},unrender:function I(Q){var R=this.children,O=(R&&R.length)||0,P;for(P=O-1;P>-1;P--){R[P].unrender(true);}this._super(Q);},postBuildRendering:function A(){if(this._super()!==false){this.renderChildren();return true;}return false;},renderChildren:function L(){var Q=this.children,O=(Q&&Q.length)||0,P;for(P=0;P<O;P++){var R=Q[P];if(this.childRenderCheck(R)){R.render();}}},childRenderCheck:function D(P){if(P&&!P.hasRendered){var O=P.slot||this.defaultChildSlot;return !!this[O];}return false;},addChildren:function N(R,P,Q){var O=this._super(R,P,Q);if(O){this.childRenderOnAddCheck(O);}return O;},removeChildren:function F(V,R){var U=V?[V]:(this.children||[]),O=U.length,S;for(S=O-1;S>-1;S--){var Q=U[S],P=Q&&Q.domNode;if(P){var T=this[(Q.slot||this.defaultChildSlot)];if(P.parentNode===T){T.removeChild(P);}}}return this._super(V,R);},childRenderOnAddCheck:function B(Q){if(this.hasRendered&&Q){var O=Q.length,P;for(P=0;P<O;P++){var R=Q[P];if(this.childRenderCheck(R)){R.render();}else{if(R&&R.hasRendered){this.onchildRenderingChange(R);}}}}},onchildRenderingChange:function K(O){var W=O&&O.domNode;if(!W){return ;}var P=this.defaultChildSlot,V=O.slot||P,Y=this[V],Q=this.children;if(!Y){if(W.parentNode){W.parentNode.removeChild(W);}}else{if(W.parentNode===Y){return ;}if(!this.preserveChildDomOrder){Y.appendChild(W);}else{var R,U;for(U=Q.length-1;U>=0;U--){var X=Q[U];if(X===O){break;}if(V===(X.slot||P)){var Z=X.domNode;if(Z&&Z.parentNode===Y){R=Z;}}}if(R){Y.insertBefore(W,R);}else{Y.appendChild(W);}}}if(mstrmojo.publisher.hasSubs(this.id,"childrenRendered")){var S=Q.length,T;for(T=0;T<S;T++){if(!Q[T].domNode){return ;}}this.raiseEvent({name:"childrenRendered"});}},propagateChildProps:function C(S){var R=this[S],Q=this.children||[],O=Q.length,P;for(P=0;P<O;P++){Q[P].set(S,R);}}});mstrmojo.Container.enabledMarkupMethod=function(){mstrmojo.Widget.enabledMarkupMethod.apply(this,arguments);if(this.shouldPropagateEnabled){if(this.enabled){J.call(this);}else{E.call(this,this.children);}}};}());(function(){mstrmojo.requiresCls("mstrmojo.Widget");var E=mstrmojo.Widget;mstrmojo.ui._IsPulldown=mstrmojo.provide("mstrmojo.ui._IsPulldown",{scriptClass:"mstrmojo.ui._IsPulldown",markupString:'<div id="{@id}" style="{@cssText}" class="mstrmojo-ui-Pulldown {@cssClass}" mstrAttach:mousedown,click><div class="mstrmojo-ui-Pulldown-text {@cssTextClass}" title="{@title}" style="{@labelCssText}">{@value}</div><div class="container"></div></div>',markupSlots:{selectedNode:function D(){return this.domNode.firstChild;},containerNode:function A(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:E.visibleMarkupMethod,onheightChange:E.heightMarkupMethod,onwidthChange:E.widthMarkupMethod,onvalueChange:function F(){this.selectedNode.innerHTML=this.value||"";},onenabledChange:mstrmojo.Widget.enabledMarkupMethod},getPopupList:mstrmojo.emptyFn,anchorSlot:"selectedNode",postBuildRendering:function B(){this._super();this.getPopupList().set("items",this.items);var G=this.selectedIndex,H=this.selectedIndices;if(G!==undefined){this.set("selectedIndex",G);}if(H!==undefined){this.set("selectedIndices",mstrmojo.hash.copy(H||{}));}},onitemsChange:function C(){var G=this.getPopupList();if(G){G.set("items",this.items);}},onPopupWidgetOpened:function(){var G=this.getPopupList();if(G&&(!G.items||G.items.length===0)){G.close();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.ui._HasScroller","mstrmojo.css");var C=mstrmojo.css,E=mstrmojo.desc(14058,"Show Details"),A=mstrmojo.desc(14059,"Hide Details"),F=mstrmojo.desc(14060,"We are sorry for the inconvenience. Please {contact} your administrator for help.").replace("{",'<span class="dyn-link">').replace("}","</span>");mstrmojo.ui.editors.ErrorDialogContent=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",markupString:'<div class="mstrmojo-error-content" mstrAttach:click><div class="scroll-container"><div>{@shortDesc}</div><div>'+F+'</div><div class="toggle-details-link" >'+E+'</div><div class="error-details">{@en@longDesc}</div></div></div>',markupSlots:{scrollNode:function(){return this.domNode.firstChild;},contactNode:function(){return this.domNode.firstChild.children[1].getElementsByClassName("dyn-link")[0];},toggleDetailsNode:function(){return this.domNode.firstChild.children[2];}},markupMethods:{onshowDetailsChange:function(){var H=this.showDetails;this.toggleDetailsNode.innerHTML=H?A:E;C.toggleClass(this.domNode,"show-details",H);this.updateScrollbars();}},shortDesc:undefined,longDesc:undefined,showDetails:false,init:function G(H){this._super(H);this.shortDesc=this.shortDesc||mstrmojo.desc(14061,"An error has occurred");},onclick:function B(H){var J=H.getTarget(),I,K=this.longDesc;if(J===this.contactNode){I="mailto:?subject="+encodeURI("Issue: "+this.shortDesc)+(K?("&body="+encodeURI("Detail:\r\n"+K)):"");mstrApp.openPage(I,"_self");}else{if(J===this.toggleDetailsNode){this.set("showDetails",!this.showDetails);}}},setupScrollNodes:function D(){this.scrollNode=this.scrollNode;}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.css","mstrmojo.string");function C(H,D,E){var K=[];var G=H.optionRenderer,I=G&&G.render;if(I&&typeof I==="function"){var L=H.options,J=Math.min(E,((L&&L.length)||0)),F;for(F=D;F<J;F++){K.push(I(L[F],F,H));}}return K.join("");}mstrmojo.DropDownList=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.DropDownList",title:"",selectCssClass:"",tooltip:"",cssDisplay:"inline",value:"",unset:false,options:null,optionValueField:"v",optionNameField:"n",idx:-1,renderedOptions:"",markupString:'<span id="{@id}"  class="mstrmojo-DropDownList {@cssClass}">{@title}<select id="{@id}_select" class="mstrmojo-DropDownList-select {@selectCssClass}"  style="{@cssText}" title="{@tooltip}"onchange="mstrmojo.all[\'{@id}\'].set(\'selected\', this.options[this.selectedIndex].value);">{@renderedOptions}</select><div class = "strikeoutContainer"></div></span>',markupSlots:{selectNode:function(){return this.domNode.getElementsByTagName("select")[0];}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onidxChange:function(){var D=this.domNode.getElementsByTagName("select");if(D&&D.length){D[0].selectedIndex=this.idx;}},onvalueChange:function(){var I=this.selectNode,G=I.options,F=this.value,E,H;for(H=0;H<G.length;H++){var D=G[H].value.toString()===F;if(D){E=H;if(F!==""){mstrmojo.css.toggleClass(G[H],"selected",D);}break;}}if(I.length>0&&E>0&&this.unset){if(this.options[0].v==="-1"){I.remove(0);E--;}this.unset=false;}this.set("idx",E);},onwidthChange:function(){var D=this.width;if(D>=0){this.selectNode.style.width=D+"px";}}},_set_selected:function(G,D){var E=this.selectNode,F=this[G]!==D;this[G]=D;if(E){this.set("value",D);}return F;},preBuildRendering:function A(){var F=this;if(F.unset){F.idx=0;}var E=F.options,D=(E&&E.length)||0;if(D){F.renderedOptions=C(F,0,D);}return this._super();},optionRenderer:{render:function(E,D,F){return mstrmojo.string.apply(F.getOptionMarkup(E),F.getOptionProps(E,D));}},getOptionMarkup:function(D){return'<option value="{@en@v}" class="{@cls}" style="{@style}" {@sel}>{@en@n}</option>';},getOptionProps:function B(F,D){var G=this,H=F[G.optionValueField],E=D===parseInt(G.idx,10);G.selected=G.value=E?H.toString():G.value;return{cls:E?"selected":"",v:H===undefined?"":H,n:F[G.optionNameField]||"",style:"",sel:E?"selected":""};}});}());(function(){mstrmojo.requiresCls("mstrmojo.boxmodel","mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.Widget","mstrmojo.Arr","mstrmojo._HasLayout","mstrmojo._ListBase2Selections","mstrmojo.ListSelector","mstrmojo._TouchScrolling","mstrmojo._PagingList");var a=mstrmojo.hash,f=mstrmojo.array,e=mstrmojo.boxmodel,c=mstrmojo.dom;function A(i,k,h){var j=i.listSelector;if(j){j[k](i,i.itemsContainerNode,h);}}function L(i,h){var j=i.lastPagePos;if(!j||j.dragId!==h){j=e.offset(i.itemsContainerNode);j.dragId=h;i.lastPagePos=j;var k=i.scrollboxNode;i.lastScrollPos={left:k.scrollLeft,top:k.scrollTop,width:k.clientWidth,height:k.clientHeight};}}function O(k,n,i){var j=n&&n.node;if(j===k.dropCueNode||j===k.dropCueNode.firstChild){return k.dropCuePos;}var l=k.listMapper;var h=l&&l.whereDrop(k,k.itemsContainerNode,j,n.pos,{left:k.lastPagePos.left-k.lastScrollPos.left,top:k.lastPagePos.top-k.lastScrollPos.top,width:k.lastScrollPos.width,height:k.lastScrollPos.height});var m=k.dropCuePos;return((i!==false)&&m&&h&&(m.idx===h.idx)&&(m.left===h.left)&&(m.top===h.top))?m:h;}var g="attachEventListener";function D(i,h){if(i.makeObservable){h=h||[];if(!h[g]){mstrmojo.hash.make(h,i.itemsScriptClass||mstrmojo.Arr);}}return h;}function H(i,h){if(h&&h[g]){i._sub_its=h;i._sub_add=h[g]("add",i.id,"preadd");i._sub_rmv=h[g]("remove",i.id,"preremove");}}function G(h){if(h._sub_its){var i=mstrmojo.publisher;i.unsubscribe(h._sub_add);i.unsubscribe(h._sub_rmv);delete h._sub_add;delete h._sub_rmv;delete h._sub_its;}}mstrmojo.ListBase2=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListBase2Selections,mstrmojo._TouchScrolling,mstrmojo._PagingList,mstrmojo._HasLayout],{scriptClass:"mstrmojo.ListBase2",items:null,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keyup,keypress,mousedown,mouseup,dblclick><div class="mstrmojo-ListBase2-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode;},itemsContainerNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},ondropCuePosChange:function(){var i=this.dropCueNode,h=i&&i.style;if(!h){return ;}var k=this.dropCuePos,j=!!k;if(j){h.left=k.left+"px";h.top=k.top+"px";}h.display=j?"block":"none";},onpageChange:function(){if(this.usePaging&&!this._inScroll){this._inPaging=true;this.listMapper.toPage(this,this.page);this._inPaging=false;}},onwidthChange:function(){if(!isNaN(parseInt(this.width))){this.domNode.style.width=this.width;}},onheightChange:function(){if(!isNaN(parseInt(this.height))){this.domNode.style.height=this.height;}}},autoHide:false,renderOnScroll:false,firstRenderBlockSize:50,renderBlockSize:50,listMapper:null,listBuilder:null,listSelector:mstrmojo.ListSelector,animate:false,itemsEffect:null,containerResizable:true,init:function Z(m){this._super(m);this.items=this.initItems(this.items);var l=this.selectedIndices,j=this.selectedIndicesList,k=this.selectedIndex,n=this.selectedItem;this.selectedIndices={};this.selectedIndex=-1;delete this.selectedIndicesList;delete this.selectedItem;if(l||j||(k>-1)||n){this.initSelections(l,j,k,n);}if(this.postInitItems){this.postInitItems();}},initItems:function I(h){return D(this,h);},preBuildRendering:function W(){var l=this.listBuilder,o=l.newContext(this);this.ctxtBuilder=o;var i=this.markupSlots,k=!!(this.renderOnScroll&&this.renderBlockSize&&i&&i.scrollboxNode),j=this.items,h=(j&&j.length)||0,m=k?this.firstRenderBlockSize:h,n=k?this.firstRenderBlockSize:0;this._eros=k;this.paused=false;this.itemsHtml=this.listMapper.buildItemWrappers(j,l,this,o,m,n).join("");this.itemsContainerCssText="visibility: hidden";if(this._super){this._super();}},postBuildRendering:function E(){delete this.itemsHtml;var m=this.listMapper;if(m&&m.postBuildRendering){m.postBuildRendering(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder);}H(this,this.items);if(this._eros||this.usePaging){if(!this._cb_scroll){var p=this.id;this._cb_scroll=function(){var i=mstrmojo.all[p];i.onscroll();};}mstrmojo.dom.attachEvent(this.scrollboxNode,"scroll",this._cb_scroll);this.onscroll();}if(this.animate){for(var k=0,j=["itemsEffect","scrollEffect"],h=j.length;k<h;k++){var o=j[k],l=this[o];if(l&&l.constructor===Object){l=mstrmojo.insert(mstrmojo.hash.clone(l));l.widget=this;this[o]=l;}}if(this.itemsEffect){this.itemsEffect.play();}}this.itemsContainerNode.style.visibility="inherit";if(this.containerResizable&&this.itemsContainerNode.scrollWidth<this.domNode.scrollWidth){this.itemsContainerNode.style.width=this.domNode.scrollWidth+"px";}if(this._super){this._super();}},unrender:function X(l){G(this);if(this._eros){mstrmojo.dom.detachEvent(this.scrollboxNode,"scroll",this._cb_scroll);delete this._cb_scroll;}for(var j=0,k=["itemsEffect","scrollEffect"],h=k.length;j<h;j++){var m=this[k[j]];if(m&&m.isPlaying){m.cancel();}}this._super(l);},pauseScrollRendering:function P(j,h,i){if(j!==false){j=true;}if(this.paused===!!j){return ;}this.paused=!!j;if(j){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}}else{this.fill(h,i);}},onscroll:function K(){if(this.paused){return ;}if(this._eros){if(!this._fillTmr){var h=this;this._fillTmr=self.setTimeout(function(){h.fill();h=null;},50);}}if(this._super){this._super();}},fill:function b(h,l){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}var m=(this.items&&this.items.length)||0;if(!m){if(l){l();}}else{var j=this.scrollboxNode,n=this.itemsContainerNode,k=mstrmojo.boxmodel.offset(n,j),p=this.listMapper,o=p.findScrollRange(n,m,(this.usesTouches&&this.pos&&parseInt(this.pos.y,10))||j.scrollTop,j.clientHeight,(this.usesTouches&&this.pos&&parseInt(this.pos.x,10))||j.scrollLeft,j.clientWidth,k.left,k.top);if(this.fillAt(o.start,o.end)){if(h){h();}var i=this.id;this._fillTmr=window.setTimeout(function(){mstrmojo.all[i].fill(h,l);},100);}else{if(l){l();}}}},fillAt:function M(j,i){var h=this.listMapper;if(h){return h.fillItemWrappers(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder,j,i,this.renderBlockSize);}else{return false;}},add:function R(i,h){if(!i||!i.length){return -1;}var j=this.items;if(h==null){h=a.min(this.selectedIndices,false,true);if(h!==null&&h!==undefined){h++;}}if(h==null||h===-1){h=(j&&j.length)||0;}if(j&&j.add){j.add(i,h);}else{this.set("items",j?f.insert(j.concat(),h,i):i);}return h;},preadd:function B(k){if(this.hasRendered){var n=this.listMapper;if(n){n.onadd(this,this.itemsContainerNode,this.ctxtBuilder,k);}var m=this.listBuilder;if(m){m.onadd(this,this.ctxtBuilder,k);}var j=this.listSelector;if(j){j.onadd(this,k);}if(this._eros){this.onscroll();}else{var l=k.index,h=k.value.length;this.fillAt(l,l+h-1);}}if(this.onadd){this.onadd(k);}if(this._super){this._super(k);}},remove:function U(h){if(h==null){return -1;}if(h.constructor!==Array){return this._remove(h);}var k=this.items;if(k){var j;if(k.remove){for(j=h.length-1;j>-1;j--){k.remove(h[j],1);}}else{k=k.concat();for(j=h.length-1;j>-1;j--){k.splice(h[j],1);}this.set("items",k);}return h[0];}return -1;},_remove:function U(j){var i=this.items;if(!i||(j==null)){return -1;}var h;if(!isNaN(j)){h=j;}else{h=this.itemIndex(j);}if(h>-1){if(i.remove){i.remove(h,1);}else{i=i.concat();i.splice(h,1);this.set("items",i);}}return h;},duplicate:function Y(m,i,j){var k=this.items,h=-1;if(!k||(m==null)){return -1;}if(!isNaN(m)){if(i===null||i===undefined){i=m+1;}m=k[m];}else{if(i===null||i===undefined){i=this.itemIndex(m)+1;}}if(m){var l;l=a.copy(j,a.clone(m));h=this.add([l],i);}return h;},preremove:function N(i){if(this.hasRendered){var k=this.listMapper;if(k){k.onremove(this,this.itemsContainerNode,this.ctxtBuilder,i);}var j=this.listBuilder;if(j){j.onremove(this,this.ctxtBuilder,i);}var h=this.listSelector;if(h){h.onremove(this,i);}if(this._eros){this.onscroll();}}if(this.onremove){this.onremove(i);}if(this._super){this._super(i);}},move:function S(l,r){function p(s,i){s=parseInt(s,10);return i===1||(r>=s&&r<s+i);}var q=(this.items&&this.items.length)||0;if(r===-1||r==null||isNaN(r)){r=q;}else{r=Math.min(r,q);}var k,h,n,m;if(l.constructor===Array){h=l;n=l;m=(h&&h.length)||0;if(p(l[0],l.length)){return false;}k=f.get(this.items,l);}else{if(typeof (l)==="object"){k=[l];m=1;h=this.itemIndex(k[0]);n=[h];if(p(h,1)){return false;}}else{h=l;n=[l];m=1;if(p(h,1)){return false;}k=[this.items[h]];}}var o=0;for(var j=0;j<m;j++){if(n[j]<=r){r--;o++;}}if(o==n.length){r++;}if(k[0]!=null){this.remove(h);this.add(k,r);}return true;},itemIndex:function F(h){if(h==null){return -1;}var i=this.itemIdField;return i?f.find(this.items,i,h[i]):f.indexOf(this.items,h);},prechange:function T(k){if(this.hasRendered){var j=[this.listBuilder,this.listMapper];for(var l=0,h=j.length;l<h;l++){var m=j[l];if(m&&m.onchange){m.onchange(this,this.itemsContainerNode,this.ctxtBuilder,k);}}}},makeObservable:false,_set_items:function J(m,h){var l=this.items;h=this.initItems(h);this.items=h;if(l!==h){var k=this,j=function(){if(k.autoHide){k.set("visible",!!(h&&h.length));}k=null;},i=this.hasRendered;if(i){this.refresh(j);}else{j();}}return l!==h;},premousedown:function d(h){A(this,"premousedown",h);},premouseup:function Q(h){A(this,"premouseup",h);},scrollTo:function V(i){var h,j=this.listMapper;if(j&&j.toItem){if(!isNaN(i)){h=i;}else{h=this.itemIndex(i);}if(h>=0){j.toItem(this,h);}}},draggable:false,getDragData:function(l){L(this,l.id);var j=O(this,l.src),i=j&&j.idxActual;if((i>-1)&&this.selectedIndices[i]){var k=this.sortSelectedIndices(),h=f.get(this.items,k)||[];switch(h.length){case 1:return a.copy({html:h[0][this.itemDisplayField],index:k[0]},a.copy(h[0]));case 0:return null;default:return a.copy({html:h.length+" selections",indices:k},h);}}},dropZone:false,ondragenter:function(h){L(this,h.id);this.set("dropCuePos",O(this,h.tgt));},ondragover:function(h){this.set("dropCuePos",O(this,h.tgt));},ondragleave:function(h){this.set("dropCuePos",null);},isDragValid:function C(h){return h&&h.src&&h.src.data;},ondragstart:function(h){if(!(h&&h.src&&h.src.data)){return false;}},allowCopy:false,ondragend:function(k){var i=k&&k.tgt,h=i&&i.widget;if(h===this){}else{if(this.tree&&h&&h.tree===this.tree){if(!this.allowCopy||!c.ctrlKey(i.hWin,i.e)){var j=k.src&&k.src.data;if(j&&(j.indices||(j.index!==null))){this.remove(j.indices||j.index);}}}}},ondrop:function(q){var u=q&&q.src,p=u&&u.data;if(p){var k=O(this,q.tgt,false),r=k&&k.idx,l=(p&&p.constructor===Array),j=this.sortSelectedIndices();var n=this.items;r=Math.min(r,n&&n.length)||0;var t=true;if(u.widget===this){t=this.move(j,r);f.forEach(j,function(i){if(i<=r){r--;}});}else{this.add(l?p:[p],r);}if(t){var o=l?p.length:1,h={};for(var m=0;m<o;m++){h[r+m]=true;}this.set("selectedIndices",h);}}this.set("dropCuePos",null);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget");mstrmojo.WaitIcon=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.WaitIcon",cssFloat:"left",visible:false,markupString:'<div id="{@id}" class="mstrmojo-WaitIcon {@cssClass}" style="float:{@cssFloat};{@cssText};"></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},markupSlots:{}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.color","mstrmojo.dom");var H=mstrmojo.color,F=mstrmojo.dom;var G=68.5,I=77.5,C=83;function A(L,K){var J=F.getMousePosition(L,window);return{x:J.x-K.x-I,y:J.y-K.y-I};}function B(L){var K=this._hsl,J=K[0],N=K[1],P=K[2],Q=J*2*Math.PI;var M=this.hueHandleNode.style;M.left=Math.round(Math.sin(Q)*G+I)+"px";M.top=Math.round(-Math.cos(Q)*G+I)+"px";var O=this.slHandleNode.style;O.left=Math.round(C*(0.5-N)+I)+"px";O.top=Math.round(C*(0.5-P)+I)+"px";this.slNode.style.backgroundColor=H.hsl2hex(J,1,0.5);if(!L){this.onColorPicked(H.hsl2hex(J,N,P));}}mstrmojo.ui.editors.controls.ColorWheel=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.ui.editors.controls.ColorWheel",markupString:'<div id="{@id}" class="mstrmojo-ui-ColorWheel {@cssClass}" style="{@cssText}" mstrAttach:mousedown><div class="cwHue"></div><div class="cwColorField"></div><div class="cwHandle"><div></div></div><div class="cwHandle"><div></div></div></div>',markupSlots:{slNode:function(){return this.domNode.childNodes[1];},hueHandleNode:function(){return this.domNode.childNodes[2];},slHandleNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,oncolorChange:function(){this._hsl=H.hex2hsl(this.color);B.call(this,true);}},slNode:null,hueHandleNode:null,slHandleNode:null,color:"#ffffff",onColorPicked:function E(J){},onmousedown:function D(M){var O=this,J=F.position(this.domNode),P=this._hsl,L=M.e,N=A(L,J),Q=Math.max(Math.abs(N.x),Math.abs(N.y))*2>C,K=function(S){var V=A(S,J),R=P[0],T=P[1],U=P[2];if(Q){R=Math.atan2(V.x,-V.y)/(2*Math.PI);if(R<0){R+=1;}}else{T=Math.max(0,Math.min(1,-(V.x/C)+0.5));U=Math.max(0,Math.min(1,-(V.y/C)+0.5));}O._hsl=[R,T,U];B.call(O);F.stopPropogation(window,S);return false;};F.attachMouseMoveEvents(K);K(L);}});}());(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.css","mstrmojo.string","mstrmojo._IsExprNode","mstrmojo._HasPopup","mstrmojo.Widget");var O=mstrmojo.dom,B=mstrmojo.css,E=mstrmojo.string.htmlAngles,M=mstrmojo.expr,N=M.ET,K=M.FN,A=M.BRANCH_FNS[K.NOT],D={};D[K.BETWEEN]=1;D[K.NOT_BETWEEN]=1;var C={"*":function(Q,P){return Q?('<span class="mstrmojo-unknown">'+(E(Q.n||Q.xml)||"...")+"</span>"):null;}};function H(Q,P,S,R){return S&&((R?'<span class="mstrmojo-ListIcon t'+R+'"></span>':"")+'<span class="mstrmojo-text mstrmojo-embedobj">'+E(S)+"</span>");}C[N.R]=function(Q,P){return H(Q,P,Q.r&&Q.r.n,Q.r&&Q.r.t);};C[N.F]=function(Q,P){return H(Q,P,Q.f&&Q.f.n,Q.f&&Q.f.t);};C[N.XML]=function(Q,P){return H(Q,P,Q.n||Q.p&&Q.p.n||Q.xml,Q.p&&Q.p.t);};C[N.AE]=function(V,S){var R=[];if(V&&V.a&&V.a.n){R.push('<span class="mstrmojo-text mstrmojo-attr">'+E(V.a.n)+"</span>");if(V.fn!==M.FN.IN_LIST){R.push('<span class="mstrmojo-text mstrmojo-fn">'+E(M.fnName(V.et,V.fn,V.fnt))+"</span>");}var U=V.es,P=U&&U.length||0;if(P){R.push('<span class="mstrmojo-elems">');var Q=R.length;for(var T=0;T<P;T++){R[Q++]='<span class="mstrmojo-text mstrmojo-elem">';R[Q++]=E(U[T].n);if(T<P-1){R[Q++]=", ";}R[Q++]="</span>";}R[Q++]="</span>";}else{R.push('<span class="mstrmojo-text mstrmojo-emptyelems">(Empty)</span>');}}return R.join("");};C[N.AQ]=function(W,X){var T=[];if(W&&W.a&&W.a.n){T.push('<span class="mstrmojo-text mstrmojo-attr">'+E(W.a.n)+"</span>");if(W.fm&&W.fm.n){T.push('<span class="mstrmojo-text mstrmojo-form">'+E(W.fm.n)+"</span>");if(W.fn!=null){T.push('<span class="mstrmojo-text mstrmojo-fn">'+E(M.fnName(W.et,W.fn,W.fnt,W.fm.dtp))+"</span>");var P=M.fnCstCount(W.fn,W.fnt);if(W.et===N.AC){if(P>=1){if(W.a2&&W.a2.n){T.push('<span class="mstrmojo-text mstrmojo-attr2">'+E(W.a2.n)+"</span>");if(W.fm2&&W.fm2.n){T.push('<span class="mstrmojo-text mstrmojo-form2">'+E(W.fm2.n)+"</span>");}}if(P>1){T.push('<span class="mstrmojo-text mstrmojo-btwn">'+X.betweenText+"</span>");if(W.a3&&W.a3.n){T.push('<span class="mstrmojo-text mstrmojo-attr3">'+E(W.a3.n)+"</span>");if(W.fm3&&W.fm3.n){T.push('<span class="mstrmojo-text mstrmojo-form3">'+E(W.fm3.n)+"</span>");}}}}}else{if(W.et===N.AL){var U=W.cs,Y=[];for(var R=0,V=U.length;R<V;R++){Y.push(U[R].v);}T.push('<span class="mstrmojo-text mstrmojo-c1">'+Y.join(mstrConfig.listSep)+"</span>");}else{if(P>=1){var U=W.cs,S=U&&U[0];T.push('<span class="mstrmojo-text mstrmojo-c1">'+E(S&&S.p&&S.p.n||S&&S.v)+"</span>");if(P>1){var Q=U&&U[1];T.push('<span class="mstrmojo-text mstrmojo-btwn">'+X.betweenText+"</span>");T.push('<span class="mstrmojo-text mstrmojo-c1">'+E(Q&&Q.p&&Q.p.n||Q&&Q.v)+"</span>");}}}}}}}return T.join("");};C[N.AC]=C[N.AQ];C[N.AL]=C[N.AQ];C[N.MQ]=function(f,g){var e=[],Z=f&&f.m,j=Z&&Z.n;if(j){var Q=f.fnt,U=M.FNT.PER,c=M.FNT.RANK;j=Q===U?mstrmojo.desc(2787,"Percentage of ##").replace("##",j):Q===c?mstrmojo.desc(2788,"Rank of ##").replace("##",j):j;e.push('<span class="mstrmojo-text mstrmojo-metric">'+E(j)+"</span>");if(f.fn!=null){e.push('<span class="mstrmojo-text mstrmojo-fn">'+E(M.fnName(f.et,f.fn,Q,M.DTP.REAL))+"</span>");var X=M.fnCstCount(f.fn,Q);if(f.et==M.ET.MC){if(X>=1){var i=(f.m2&&f.m2.n)||"?";e.push('<span class="mstrmojo-text mstrmojo-m2">'+E(i)+"</span>");if(X>1){e.push('<span class="mstrmojo-text mstrmojo-btwn">'+g.betweenText+"</span>");var S=(f.m3&&f.m3.n)||"?";e.push('<span class="mstrmojo-text mstrmojo-m3">'+E(S)+"</span>");}}}else{if(X>=1){var R=f.cs,a=R&&R[0];var P=function(h){var d=h.v;if(f.fnt==U){if(d.replace){h.v=d.replace(/%$/,"");}d=h.v+"%";}return d;};e.push('<span class="mstrmojo-text mstrmojo-c1">'+E(a&&a.p&&a.p.n||a&&a.v&&P(a))+"</span>");if(X>1){var Y=R&&R[1];e.push('<span class="mstrmojo-text mstrmojo-btwn">'+g.betweenText+"</span>");e.push('<span class="mstrmojo-text mstrmojo-c2">'+E(Y&&Y.p&&Y.p.n||Y&&Y.v&&P(Y))+"</span>");}}}var b=f.dmy&&f.dmy.uts,W=b&&b.length;if(W){e.push('<span class="mstrmojo-text mstrmojo-at">'+g.atText+"</span>");e.push('<span class="mstrmojo-dmy">');for(var V=0;V<W;V++){var T=b[V];e.push('<span class="mstrmojo-text mstrmojo-dmyunit">');e.push(E(T.utgt?T.utgt.n:T.n));if(V<W-1){e.push(",");}e.push("</span>");}e.push("</span>");}}}return e.join("");};C[N.MC]=C[N.MQ];function G(P){var Q=P.data;if(Q.not){return'<span class="mstrmojo-text mstrmojo-not">'+A+"</span>";}return"";}function F(P){var R=P.data,Q=C[R&&R.et]||C["*"];return G(P)+((Q&&Q(R,P))||('<span class="mstrmojo-text">'+P.emptyText+"</span>"));}mstrmojo.ConditionNode=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._IsExprNode,mstrmojo._HasPopup],{scriptClass:"mstrmojo.ConditionNode",data:null,editable:false,prefixedAndOrEditable:false,markupString:'<div id="{@id}" class="mstrmojo-cond mstrmojo-ConditionNode {@cssClass}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-cond-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-onhoverparent mstrmojo-cond-contents {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-text {@cssClass}" mstrAttach:click></span><span class="mstrmojo-cond-text-postfix {@cssClass}"></span><span class="mstrmojo-rel mstrmojo-cond-popupNode {@cssClass}"></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" tooltip="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" /></span></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},condNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.childNodes[1].firstChild;},textPostfixNode:function(){return this.domNode.childNodes[1].childNodes[1];},popupNode:function(){return this.domNode.childNodes[1].childNodes[2];}},markupMethods:{onprefixedAndOrEditableChange:function(){B.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},oneditableChange:function(){B.toggleClass(this.textNode,["editable"],this.editable);},onselectedChange:function(){B.toggleClass(this.condNode,["selected"],this.selected);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();this.textNode.innerHTML=F(this);this.textPostfixNode.innerHTML=this.getConditionTextPostfix();}},betweenText:mstrmojo.desc(308,"and"),atText:mstrmojo.desc(5923,"at"),emptyText:mstrmojo.desc(7930,"Empty condition"),init:function L(P){this._super(P);this.markupString=this.markupString.replace("{@_prefixAndOrToolsMarkup}",this.getPrefixAndOrToolsMarkup());},getConditionTextPostfix:function(){return"";},del:function J(){var P=this.parent;if(P&&P.remove&&this.data){P.remove(this.data);}},isEmpty:function(){var Q=this.data,P=Q&&Q.et,R=P&&mstrmojo.expr.ET2TGT[P];return !(R&&Q[R]);},isSelectableArea:function(P){return O.contains(this.condNode,P,true);},preclick:function I(P){var R=null,Q=O.eventTarget(P.hWin,P.e);if(O.contains(this.prefixNode,Q,true)){R="andor";}else{if(O.contains(this.textNode,Q,true)){R="condition";}else{if(O.contains(this.textPostfixNode,Q,true)){O.stopPropogation(P.hWin,P.e);return false;}}}P.part=R;}});mstrmojo.ConditionNode.getFunctionNode=F;})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash");function A(H,E,G,F){var D=mstrmojo.hash.copy(F,{props:{left:{isStyle:true,start:H,stop:E,suffix:"px",ease:mstrmojo.ease.linear}},duration:G});(new mstrmojo.fx.AnimateProp(D)).play();}function B(K,N,G,L){var I=K.domNode,M=I.offsetWidth,D=K.scrollableIncFetch;var E=K.hasAnimation&&(!(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent))||Number(RegExp.$1)>3.5),J=L?1:-1,F=parseInt(M,10)*J,H=E?500:0;A(0,-F,H,{target:G,duration:H,preStart:function(){this.target.style.overflowY="hidden";},onEnd:function(){this.target.style.display="none";}});A(F,0,H,{target:N,preStart:function(){this.target.style.display="block";this.target.style.overflowY=(D?"visible":"auto");}});if(K.waiting){A(0,-F,H,{widget:K,slot:"loaderNode",onEnd:function(){this.widget.waiting=false;}});}}var C=function(D){var E=D.currentPage;if(E===D.p1Node){E=D.p2Node;}else{E=D.p1Node;}D.currentPage=E;};mstrmojo.Booklet=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Booklet",pageClass:"mstrmojo-BookletPage",markupString:'<div id="{@id}" class="mstrmojo-Booklet {@cssClass}" style="{@cssText}"><div id="{@id}_p1" class="mstrmojo-BookletPage" ></div><div id="{@id}_p2" class="mstrmojo-BookletPage" style="left:-100%;"></div><div id="{@id}_ldr" class="mstrmojo-BookletLoader" ></div></div>',markupSlots:{containerNode:function(){return this.domNode;},p1Node:function(){return this.domNode.firstChild;},p2Node:function(){return this.domNode.childNodes[1];},loaderNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onnextChange:function(){var G=this.next;if(!G){return ;}var D=this.currentPage,F=this.p1Node,E=this.currentPage=(D==F)?this.p2Node:F;if(!(G instanceof mstrmojo.Obj)){G=this.next=mstrmojo.insert(G);}if(!G.hasRendered){G.placeholder=E.appendChild(document.createElement("span"));G.render();}else{if(E.firstChild){E.replaceChild(G.domNode,E.firstChild);}else{E.appendChild(G.domNode);}}this.set("waiting",false);if(E&&D){B(this,E,D,this.turnDirFwd);}else{if(this.scrollableIncFetch){E.style.overflowY="visible";}}},onwaitingChange:function(D){this.loaderNode.style.left=(this.waiting)?0:"-100%";},onheightChange:function(D){if(this.height){this.domNode.style.height=this.height;}},onwidthChange:function(D){if(this.width){this.domNode.style.width=this.width;}}},enabled:true,waiting:false,next:null,currentPage:null,turnDirFwd:true,hasAnimation:true,scrollableIncFetch:false,FORWARD:true,REVERSE:false,turnFwd:function(D){this.turn(D,this.FORWARD);},turnBack:function(D){this.turn(D,this.REVERSE);},turn:function(D,E){this.set("turnDirFwd",E);this.set("next",D);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._IsExprNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo._HasEditableText","mstrmojo.css","mstrmojo.string","mstrmojo.dom");var C=mstrmojo.css,A=mstrmojo.dom,F=mstrmojo.string,E=function(H){this._super&&this._super(H);A.stopPropogation(H.hWin,H.e);},G=mstrmojo.fe._IsRelationTreeNode.createSetHtml;mstrmojo.fe.DynamicNode=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._IsExprNode,mstrmojo.fe._IsRelationTreeNode,mstrmojo._HasEditableText],{scriptClass:"mstrmojo.fe.DynamicNode",markupString:'<div id="{@id}" class="mstrmojo-dynamic {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-dynamic-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-dynamic-prefix-text"  mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">'+G+'<span class="mstrmojo-indent" onclick="mstrmojo.all[\'{@id}\'].ind()">'+mstrmojo.desc(5895,"Group conditions")+'</span><span class="mstrmojo-outdent" onclick="mstrmojo.all[\'{@id}\'].out()">'+mstrmojo.desc(5896,"Ungroup Conditions")+'</span></span></div><div class="mstrmojo-onhoverparent mstrmojo-dynamicNode" title="'+mstrmojo.desc(13229,"Add this condition to the target list of a selector.")+'"><span class="mstrmojo-dynamicNode-info"><span class="mstrmojo-textset"></span></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" title="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" ></img></span><span class="mstrmojo-textset mstrmojo-rename-text" mstrAttach:click >'+mstrmojo.desc(1388,"Rename")+"</span>"+G+"</div></div>",markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},dynamicNode:function(){return this.domNode.lastChild;},textNode:function(){return this.domNode.lastChild.firstChild.lastChild;},createSetOptNode:function(){return this.domNode.firstChild.childNodes[1].firstChild;},createSetNode:function(){return this.domNode.lastChild.lastChild;},renameNode:function(){return this.domNode.lastChild.childNodes[2];}},markupMethods:{onprefixedAndOrEditableChange:function(){C.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},onselectedChange:function(){C.toggleClass(this.dynamicNode,["selected"],this.selected);},onisEditingChange:function(){C.toggleClass(this.domNode,["renaming"],this.isEditing);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();this.textNode.innerHTML=this.data.ph.n;},onglowChange:function(){var H=this;C.toggleClass(H.dynamicNode,["glow"],this.glow);if(this.glow){setTimeout(function(){C.toggleClass(H.dynamicNode,["glow"],false);H.glow=false;},1000);}},onnoRelationOperatorChange:function(){C.toggleClass(this.prefixHoverNode,["noRelation"],this.noRelationOperator);},onnoRelationChange:function(){C.toggleClass(this.dynamicNode,["noRelation"],this.noRelation);}},editableSlot:"textNode",editButtonSlot:"renameNode",init:function(H){var J=H.data;if(J){var I=H.tree.nameFactory;if(J.ph.n){I.setName(J.ph.n,this);}else{J.ph.n=I.getNewName(this,mstrmojo.desc(12033,"Dynamic Condition")+" ");}}this._super(H);},_set_data:function(K,H){var I=this.data,J=(I!==H);if(J){this.data=H;this.text=H.ph.n;}return J;},preclick:function D(H){var J=null,I=A.eventTarget(H.hWin,H.e);if(A.contains(this.prefixNode,I,true)){J="andor";}else{if(A.contains(this.createSetOptNode,I,true)&&!this.noRelationOperator&&!this.noRelation){J="createSetOpt";}else{if(A.contains(this.createSetNode,I,true)&&!this.noRelation){J="createSet";}else{if(A.contains(this.renameNode,I,true)){this.set("isEditing",true);}}}}H.part=J;},isEmpty:function(){var I=this.data,H=I&&I.ph;return !(H&&H.n);},del:function B(){var I=this.parent,H=this.tree.nameFactory;if(I&&I.remove&&this.data){I.remove(this.data);H.removeName(this.data.ph.n);}},onkeyup:E,onkeydown:E,onTextEditComplete:function(){var J=this.tree,K=J.nameFactory,H=F.trim(this.text||""),I=this.data.ph.n;if(H&&H!==I){if(K.isNameExist(H)){K.names[H].set("glow",true);this.set("isEditing",true);}else{K.changeName(I,H,this);this.data.ph.n=H;}}},isSelectableArea:function(H){return mstrmojo.dom.contains(this.dynamicNode,H,true);},avatarCssCls:"mstrmojo-FE mstrmojo-dynamicNode",getAvatarNode:function(){return this.dynamicNode.cloneNode(true);}});})();(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.hash","mstrmojo.ServerProxy","mstrmojo.XHRServerTransport");var BasicAggMap={"8107C31BDD9911D3B98100C04F2233EA":"Sum","548C68A0F60811D3ACC300C04F0423DE":"StdevP","8107C31FDD9911D3B98100C04F2233EA":"Max","8107C331DD9911D3B98100C04F2233EA":"GeoMean",B2C0FA4220C711D6AD1400C04F0423DE:"First","8107C32CDD9911D3B98100C04F2233EA":"Product",B2C0FA4020C711D6AD1400C04F0423DE:"Greatest","8107C330DD9911D3B98100C04F2233EA":"Var","8107C32FDD9911D3B98100C04F2233EA":"Stdev","8107C32DDD9911D3B98100C04F2233EA":"Median",B2C0FA4320C711D6AD1400C04F0423DE:"Last","8107C31CDD9911D3B98100C04F2233EA":"Count","8107C31DDD9911D3B98100C04F2233EA":"Avg","8107C31EDD9911D3B98100C04F2233EA":"Min","8107C32EDD9911D3B98100C04F2233EA":"Mode",D64F1B10F6C011D3ACC300C04F0423DE:"VarP",B2C0FA4120C711D6AD1400C04F0423DE:"Least"},RankMap={"8107C326DD9911D3B98100C04F2233EA":"Rank"},OLAPAggMap={D221F90EB35540E3A1204ED6CC9A8267:"Avg",D221F90FB35540E3A1204ED6CC9A8267:"Count",D221F910B35540E3A1204ED6CC9A8267:"Max",D221F911B35540E3A1204ED6CC9A8267:"Min",D221F90DB35540E3A1204ED6CC9A8267:"Sum"},MovingAggMap={"8107C32ADD9911D3B98100C04F2233EA":"Avg","8107C350DD9911D3B98100C04F2233EA":"Count","8107C34BDD9911D3B98100C04F2233EA":"Max","8107C34CDD9911D3B98100C04F2233EA":"Min","8107C32BDD9911D3B98100C04F2233EA":"Sum"},RunningAggMap={"8107C329DD9911D3B98100C04F2233EA":"Avg","8107C354DD9911D3B98100C04F2233EA":"Count","8107C351DD9911D3B98100C04F2233EA":"Max","8107C352DD9911D3B98100C04F2233EA":"Min","8107C328DD9911D3B98100C04F2233EA":"Sum"},BandingMap={"8107C337DD9911D3B98100C04F2233EA":"Banding","8107C338DD9911D3B98100C04F2233EA":"BandingC","8107C339DD9911D3B98100C04F2233EA":"BandingP"};function _sortFunctions(fcts){var fs=function(a,b){return mstrmojo.array.stringSorter(a.n,b.n);},i,len;fcts=fcts.sort(fs);for(i=0,len=fcts.length;i<len;i++){fcts[i].fns=fcts[i].fns.sort(fs);}return fcts;}function getFuncCatIndex(fcts,funcDid){var len=fcts.length,ci;for(ci=0;ci<len;ci++){var fns=fcts[ci].fns;if(mstrmojo.array.find(fns,"did",funcDid)>-1){return ci;}}return -1;}function buildTaskParams(params){var qse=mstrApp&&mstrApp.useQuickSearch&&mstrApp.useQuickSearch();params=mstrmojo.hash.copy(params,{taskId:"searchMetadata",recursive:true,styleName:"MojoFolderStyle",includeObjectDesc:true,includeAncestorInfo:false});if(qse){params.quickSearch=qse;params.nameWildcards=16;params.sortKey=-1;}return params;}function serverRequest(callback,taskParams){if(mstrApp.serverRequest){mstrApp.serverRequest(taskParams,callback);}else{window.$MAPF=function(){return false;};this.getServerProxy().request(callback,taskParams,false,{});}}mstrmojo.ME.MetricDataService=mstrmojo.provide("mstrmojo.ME.MetricDataService",{rootFolderTypes:{ALL:39,FILTERS:4,METRICS:5,FACTS:29,SCHEMA:24,ATTRIBUTES:26,TRANSFORMATIONS:38},blockCount:10,suggestCount:10,suggestDelay:200,noCache:true,functions:null,metricComponents:null,functionsDetails:null,getServerProxy:function getServerProxy(){if(!this.serverProxy){this.serverProxy=new mstrmojo.ServerProxy({transport:mstrmojo.XHRServerTransport});}return this.serverProxy;},getMetricDefintion:function getMetricDefintion(params,callbacks){var taskParams={taskId:"getMetricDefinition",metricId:params.id,outputFlags:65599};if(params.msgID){taskParams.msgID=params.msgID;}serverRequest.call(this,callbacks,taskParams);},validateMetric:function validateMetric(params,callbacks){var taskParams={taskId:"validateMetric",metricId:params.metricId,tokenStreamXML:params.tokenStreamXML,metricXML:params.metricXML,outputFlags:327695};if(mstrmojo.string.isEmpty(params.metricId)){taskParams.isNew=true;}if(params.msgID){taskParams.msgID=params.msgID;}if(params.formID){taskParams.frmid=params.formID;}if(params.isIDForm){taskParams.isIDForm=params.isIDForm;}if(params.objectType){taskParams.objectType=params.objectType;}serverRequest.call(this,callbacks,taskParams);},getMetricComponents:function getMetricComponents(params,callbacks){var me=this,mc=this.metricComponents;if(!this.noCache&&mc&&mc.items.length==mc.sz){callbacks.success(mc);return ;}callbacks.success=mstrmojo.func.composite([callbacks.success,function(res){if(me.metricComponents&&me.metricComponents.items){me.metricComponents.items.push(res.items);}else{me.metricComponents=res;}}]);var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||24,objectType:params.objectType||"12,13,43"});serverRequest.call(this,callbacks,taskParams);},getAttributes:function getAttributes(params,callbacks){var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||26,objectType:12});serverRequest.call(this,callbacks,taskParams);},getFacts:function getFacts(params,callbacks){var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||29,objectType:13});serverRequest.call(this,callbacks,taskParams);},getMetrics:function getMetrics(params,callbacks){var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||5,objectType:4});if(params.isVerify){taskParams.nameWildcards=2;}serverRequest.call(this,callbacks,taskParams);},getFunctions:function getFunctions(callbacks){var me=this,wss=window.sessionStorage,fcts=this.functions||(wss&&wss.getItem("functions")),localeId=wss&&wss.getItem("mstrLocaleId"),cLocaleId=mstrApp&&mstrApp.localeId;if(fcts&&localeId==cLocaleId){fcts=_sortFunctions(eval("("+fcts+")").fncs);callbacks.success(fcts);}else{var cb={failure:callbacks.failure,textResponse:true},taskParams={taskId:"getSystemFunctions",includeFunctionDetails:true,functionFlags:2|2147483648,includeFunctionHelpTopic:true};cb.success=function(res){if(typeof res==="string"||!mstrApp.isSingleTier){if(wss){wss.setItem("functions",res);wss.setItem("mstrLocaleId",cLocaleId);}me.functions=res;fcts=_sortFunctions(eval("("+res+")").fncs);}else{fcts=_sortFunctions(res.fncs);me.functions=JSON.stringify(res);}callbacks.success(fcts);};serverRequest.call(this,cb,taskParams);}},getAggFunctions:function getAggFunctions(){if(this._aggFunctions){return this._aggFunctions;}var fcts=this.functions||(window.sessionStorage&&window.sessionStorage.getItem("functions"));if(!fcts){mstrmojo.alert("We shall not reach this point!");}fcts=_sortFunctions(eval("("+fcts+")").fncs);fcts=mstrmojo.array.filter(fcts[this.getBasicCategoryIndex(fcts)].fns,function(item){var did=item.did,retVal;if(did!=="B2C0FA4020C711D6AD1400C04F0423DE"&&did!=="B2C0FA4120C711D6AD1400C04F0423DE"){retVal=BasicAggMap[did];}return retVal;});return fcts;},getOLAPAggFunctions:function getOLAPAggFunctions(type){var fcts=this.functions||(window.sessionStorage&&window.sessionStorage.getItem("functions"));if(!fcts){mstrmojo.alert("We shall not reach this point!");}fcts=_sortFunctions(eval("("+fcts+")").fncs);fcts=mstrmojo.array.filter(fcts[this.getOLAPCategoryIndex(fcts)].fns,function(item){switch(type){case"moving":return MovingAggMap[item.did];case"running":return RunningAggMap[item.did];case"olap":default:return OLAPAggMap[item.did];}return false;});return fcts;},getFunctionCatList:function getFunctionCatList(){if(this._functionCatList){return this._functionCatList;}var fcts=this.functions||(window.sessionStorage&&window.sessionStorage.getItem("functions"));if(!fcts){mstrmojo.alert("We shall not reach this point!");}fcts=_sortFunctions(eval("("+fcts+")").fncs);fcts=mstrmojo.hash.make(fcts,mstrmojo.Arr);this._functionCatList=fcts;return fcts;},getCategoryIndex:function getCategoryIndex(funcDid,fcts){return getFuncCatIndex(fcts||this.getFunctionCatList(),funcDid);},getBasicCategoryIndex:function getBasicCategoryIndex(fcts){var Agg_Func_Greatest="B2C0FA4020C711D6AD1400C04F0423DE";return getFuncCatIndex(fcts||this.getFunctionCatList(),Agg_Func_Greatest);},getDataMiningCatIndex:function getDataMiningCatIndex(fcts){var DataMining_Func_MiningModel="F17CD4F3FF134D91B80DDAB9CA73C919";return getFuncCatIndex(fcts||this.getFunctionCatList(),DataMining_Func_MiningModel);},getDateTimeCategoryIndex:function getDateTimeCategoryIndex(fcts){var DateTime_Func_Date="C50F2A4F75AE49D6B20E00224967B500";return getFuncCatIndex(fcts||this.getFunctionCatList(),DateTime_Func_Date);},getStringCategoryIndex:function getStringCategoryIndex(fcts){var String_Func_Concat="6F7DF5FF449111D5BEA300B0D01A55EF";return getFuncCatIndex(fcts||this.getFunctionCatList(),String_Func_Concat);},getOLAPCategoryIndex:function getBasicCategoryIndex(fcts){var OLAP_Func_Avg="D221F90EB35540E3A1204ED6CC9A8267";return getFuncCatIndex(fcts||this.getFunctionCatList(),OLAP_Func_Avg);},getInternalCategoryIndex:function getInternalCategoryIndex(fcts){var INTER_Func_Band="8107C337DD9911D3B98100C04F2233EA";return getFuncCatIndex(fcts||this.getFunctionCatList(),INTER_Func_Band);},getFunctionDetails:function getFunctionDetails(params,callbacks){var taskParams={taskId:"getSystemFunctions",functionId:params.did,includeFunctionDetails:true,includeFunctionHelpTopic:true};serverRequest.call(this,callbacks,taskParams);},getTransformations:function getTransformations(params,callbacks){var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||38,objectType:43});serverRequest.call(this,callbacks,taskParams);},getFilters:function getFilters(params,callbacks){var taskParams=buildTaskParams({blockBegin:params.blockBegin,blockCount:params.blockCount,searchPattern:params.pattern,rootFolderType:params.rootFolderType||4,objectType:1});serverRequest.call(this,callbacks,taskParams);},getAttributeForms:function getAttributeForms(params,callbacks){var taskParams={taskId:"getAttributeForms",attributeID:params.attributeID,displayedForms:params.displayedForms,styleName:"WidgetElementListStyle"};serverRequest.call(this,callbacks,taskParams);},getSubtotalFunctions:function getSubTotalFunctions(params,callbacks){var taskParams=buildTaskParams({objectType:"1025,1026",searchPattern:""});serverRequest.call(this,callbacks,taskParams);},isBasicAggMap:function isBasicAggMap(did){var retVal=!!BasicAggMap[did];if(did==="B2C0FA4020C711D6AD1400C04F0423DE"||did==="B2C0FA4120C711D6AD1400C04F0423DE"){retVal=false;}return retVal;},isOLAPAgg:function isOLAPAgg(did){return !!OLAPAggMap[did];},isMovingAgg:function isMovingAgg(did){return !!MovingAggMap[did];},isRunningAgg:function isRunningAgg(did){return !!RunningAggMap[did];},isBanding:function isBanding(did){return !!BandingMap[did];},isOLAP:function isOLAP(did){var fcts=this.getFunctionCatList(),olapFns=fcts[this.getOLAPCategoryIndex(fcts)].fns;return mstrmojo.array.find(olapFns,"did",did)>-1;},isRank:function isRank(did){return !!RankMap[did];},isScalar:function isScalar(fctOi){return(fctOi||{}).sqt===3;},getFunctionHelpTopic:function getFunctionHelpTopic(h){return'<a href="'+((mstrApp.helpUrl||"../help/")+"FunctionsRef/index.html?context=functionsref&topic="+(h||""))+'" target="_new">'+mstrmojo.desc(5811,"Details ...")+"</a>";},sortFunctions:function sortFunctions(functions){var allfuncs={},fs=function(a,b){return mstrmojo.array.stringSorter(a.n,b.n);};mstrmojo.array.forEach(functions,function(funcs){mstrmojo.array.forEach(funcs&&funcs.fns,function(func){if(func&&func.did){allfuncs[func.did]=func;}});});return mstrmojo.hash.valarray(allfuncs).sort(fs);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.func","mstrmojo.DocDataService");var R=mstrmojo.hash.copy,c=mstrmojo.array.forEach,k=mstrmojo.func,I=k.wrapMethods;var F=2,U=1,f=1,i=2,a=3;var A={FIRST:1,MIDDLE:2,LAST:3};var j={BUSY:1,INTERIM:2,DONE:3,SILENT:4,CANCELED:5};var S=R(mstrmojo.DocDataService.SUPPRESS_DATA,{preserveUndo:true,config:{silent:true}});function G(){c(this._delayRemovedCmds,function(r){r.discard();});this._delayRemovedCmds=null;}function V(){this.cmds=this.cmds.concat(this._delayRemovedCmds);this._delayRemovedCmds=null;}function J(s){var r=this.cmds,t=this.pos;this._delayRemovedCmds=r.splice(t+1);if(t>=this.size-1){r.shift().discard();}r.push(s);this.pos=r.length-1;}function p(r,s){r.reset();throw new Error(s||"Invalid state.");}mstrmojo.vi.controllers.UICmdMgr=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.vi.controllers.UICmdMgr",cmds:null,pos:-1,size:20,_delayRemovedCmds:null,controller:null,dataService:null,model:null,state:U,STATE:{EXECUTING:F,IDLE:U},CMD_PHASE:A,init:function l(r){R(r,this);this.cmds=[];},execute:function d(t){if(this.state===F){p(this);}try{t=R(t,{mgr:this,undoUIState:this.model.getUIState(),action:i});var r=this.curCmd=new mstrmojo.vi.controllers.UICmd(t);J.call(this,r);this.state=F;r.execute();}catch(s){this.reset();throw s;}},getInterimCmd:function B(){if(this.state===F){var r=this.cmds[this.pos];if(r.state===j.INTERIM){return r;}}return null;},undo:function T(t){if(this.canUndo()){this.state=F;try{var r=this.curCmd=this.cmds[this.pos--];r.action=f;r.redoUIState=this.model.getUIState();r.undoRedo(t);}catch(s){this.reset();throw s;}}},redo:function H(){if(this.canRedo()){this.state=F;try{var r=this.curCmd=this.cmds[++this.pos];r.action=a;r.undoUIState=this.model.getUIState();r.undoRedo();}catch(s){this.reset();throw s;}}},onSuccess:function b(r){if(this.state===U){p(this);}if(r!==this.curCmd){p(this,"Wrong command");}this.state=U;G.call(this);this.controller.onCmdMgrChanged();},onFailure:function o(){G.call(this);this.reset();},onCancel:function Z(s,t){this.state=U;var r=!!s.submitCount;if(r){this.undo(t);}else{this.pos--;}this.cmds.pop();s.discard();if(r){G.call(this);}else{V.call(this);}this.controller.onCmdMgrChanged();},reset:function e(){c(this.cmds,function(r){r.discard();});this.cmds.length=0;this.pos=-1;this.state=U;this.controller.onCmdMgrChanged();},resetState:function Y(){this.state=U;},canUndo:function X(){return this.state===U&&this.pos>=0;},canRedo:function L(){return this.state===U&&this.pos<this.cmds.length-1;},onSubmitUpdates:function P(){if(this.state===U){this.cmds.splice(this.pos+1);this.controller.onCmdMgrChanged();}},isUndoRedo:function C(){var r=this.curCmd||{};if(this.state===F&&(r.action===f||r.action===a)){return true;}return false;}});function W(r,t,s){if(t.stid==="undefined"){s.submission=function(x,u,v){var y=v.params,w=JSON.parse(y.params);w.actions[0].stid=r.action===f?r.undoStateId:r.redoStateId;y.params=JSON.stringify(w);};}return s;}function E(s,w){var t=s.mgr;w.disablePU=true;var v=W(s,w,{success:function u(){s.state=j.DONE;},failure:function r(){t.onFailure();}});s.state=j.SILENT;t.dataService.submitUpdates(w,v,S);t.onSuccess(s);}function g(AB,w){var AA=AB.urInfo,z=AA.puKeys,AG=AA.puObjs,x=AA.puFilters,AC=AB.mgr,y=AC.model,AD=AC.dataService;if(z||AG){if(z){w.partialRetrieval={nodes:z,filters:x};}if(AG){y.addUpdateObjects(w,AG);}}else{w.disablePU=true;}var u=W(AB,w,{success:function AF(){AB.state=j.DONE;AC.onSuccess(AB);y.restoreUIState(AB.action===f?AB.undoUIState:AB.redoUIState);},failure:function t(){AC.onFailure();},complete:function s(){AC.resetState();}}),r=AA.callback||y.getRebuildCallback(),AE=I(r,u),v=R(AA.extras);if(w.act==="undo"&&v!==undefined){v.hideCancel=true;if(w.killJob){v.message=mstrmojo.desc(14586,"Canceling...");}}AB.state=j.BUSY;AD.submitUpdates(w,AE,v);}function N(u){var r=u.urInfo,s=u.mgr.model;if(!r.extras){var t=(r.treesToRender!==undefined)?r.treesToRender:u._treesFromRes;if(!r.disablePU&&!u._hasFullUpdate&&(!r.puKeys||!r.puKeys.length)){t=0;r.callback=I(s.getDatasetsUpdateCallback(),r.callback);}r.extras={style:{params:{treesToRender:t}}};}}mstrmojo.vi.controllers.UICmd=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.vi.controllers.UICmd",mgr:null,redoStateId:null,undoStateId:null,execute:mstrmojo.getMissingFn(),discard:mstrmojo.emptyFn,action:null,state:j.INTERIM,urInfo:null,getStateValue:function Q(s,r){return this.action===f?r:s;},init:function l(r){R(r,this);this._treesFromRes=0;this.urInfo=this.urInfo||{};this.submitCount=0;},undoRedo:function h(x){var t=this,v,s=this.urInfo,r=s.silent,y,u=this.mgr,w=u.dataService;if(t.action===a){v={act:"redo",stid:t.redoStateId};y=s.redo;}else{if(t.action===f){v={act:"undo",stid:t.undoStateId,killJob:x};y=s.undo;}else{p(this.mgr);}}if(y){w.blockRequests=true;try{r=!!y.call(t)||r;}finally{w.blockRequests=false;}}if(r){E(t,v);}else{g(t,v);}},submitUpdate:function O(s,r){this.submit(s.actions,s.callback,s.extras,r);},submit:function M(v,AF,u,AD){var AA=this,AB=AA.mgr,x=AB.model,AC=AB.dataService,z=mstrmojo.array.ensureArray(v);AF=AF?R(AF):x.getRebuildCallback();AA.state=j.BUSY;function w(AG,AH){return !(AG&&AG[AH]&&AG[AH].length);}if(AA._hasFullUpdate||z.some(function(AG){return AG.disablePU;})||z.every(function(AH){var AI=AH.partialRetrieval,AG=AH.partialUpdate;return w(AI,"nodes")&&w(AG,"nodes")&&w(AG,"selectors")&&w(AG,"objects");})){AA._hasFullUpdate=true;}k.override({submission:function t(){if(AA.submitCount===0){AA.undoStateId=AC.stid;}AA.submitCount++;},success:function AE(AK,AL){if(AA.action!==i){p(AB);}AA.redoStateId=AK.stid;var AJ=!AD||AD===A.LAST;if(AJ){AA.state=j.DONE;}else{AA.state=j.INTERIM;}var AI=AA.urInfo;if(!AI.disablePU){var AG=AI.puKeys||[],AM=AK.pukeys&&AK.pukeys.split("\u001E");if(AM&&AM.length){AG=AG.concat(AM);var AH=AI.extraPuKeys;if(AH){AG=AG.concat(AH);delete AI.extraPuKeys;}}if(AG.length){AI.puKeys=AG;}}AA._treesFromRes|=(AK.defn?1:0)|(AK.data?2:0);if(this._super){this._super(AK,AL);}if(AJ){AA.completeSubmit();}},failure:function s(AG,AJ){var AI=(u&&u.skipUICmdMgrOnFailure)||[],AH=parseInt(AG.code||(AG.getResponseHeader&&AG.getResponseHeader("X-MSTR-TaskErrorCode"),10));if(AI.indexOf(AH)===-1&&AI.indexOf(mstrmojo.mstr.EnumWebAPIErrorCodes.E_UNUSED)===-1){AB.onFailure();}if(this._super){this._super(AG,AJ);}},canceled:function y(AG){if(this._super){this._super(AG);}window.setTimeout(function(){AA.cancel(true);},0);},complete:function r(){if(!AD||AD===A.LAST){AB.resetState();}if(this._super){this._super();}}},AF);AC.submitUpdates(v,AF,u);},submitInterim:function n(s,t,r){this.submit(s,t,r,A.MIDDLE);},resetCmdMgrOnComplete:function m(){this._resetMgr=true;},completeSubmit:function K(){var s=this,t=s.mgr,r=t.model;if(!s.completed){s.completed=true;s.state=j.DONE;t.onSuccess(s);N(s);s.redoUIState=r.getUIState();if(s._resetMgr){t.reset();}}},cancel:function D(r){this.state=j.CANCELED;N(this);this.mgr.onCancel(this,r);},submitSilent:function q(t){var v=this,w=v.mgr,u=w.model,x=w.dataService;v.state=j.SILENT;w.onSuccess(v);v.redoUIState=u.getUIState();var y={submission:function s(){v.undoStateId=x.stid;v.submitCount++;},success:function z(AA){v.state=j.DONE;v.redoStateId=AA.stid;},failure:function r(){w.onFailure();}};x.submitUpdates(t,y,S);}});mstrmojo.vi.controllers.UICmd.CMD_PHASE=A;mstrmojo.vi.controllers.UICmd.STATES={BUSY:F,IDLE:U};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.DocDataService");mstrmojo.requiresDescs(5421,5422);var P=mstrmojo.hash,L=mstrmojo.array,F=mstrmojo.desc,G=mstrmojo.DocDataService,B=mstrmojo.string;function K(f,g,c,Y){var h=f.selCells,d=[],b=f.model.getCellTitleInfo(g).title,e,a,Z=function(i){var j=f.getCellForNode(i);d.push(f.getCellUnitIndex(j));e=j.dpt;},X;if(typeof Y==="string"&&Y.indexOf(";")>0){a=parseInt(Y.substring(Y.indexOf(";")+1),10);Y=parseInt(Y.substring(0,Y.indexOf(";")),10);}if(a===1&&!c){h.reverse().forEach(Z);}else{if(a===1){X=1;h.forEach(Z);}else{h.forEach(Z);}}return{oId:b.id,oTp:b.otp,depth:e,ordinals:d.join(","),sliceId:f.sid,viewKey:f.k,funcVal:Y,switchOrder:X};}function C(Z,Y,b){var e=Z.getDEInfo(Y),d=e&&e.deObject&&e.deObject.des,c=1,a=b===-1?F(5187,"Group"):F(5188,"Calculation"),X=function(f){return f.n===a+" "+c;};while(true&&d){if(d.some(X)){c++;}else{break;}}Z.controller.onAddQuickDE(Z,P.copy(K(Z,Y,false,b),{act:"addQuickDE",deName:a+" "+c}));}function W(X,Y){for(did in X){if(L.find(X[did].att,"did",Y)>-1){return did;}}return undefined;}function A(i,Y,f,b,X){var e=f.es,Z=f.id,d;X.forEach(function(j){d=j[0];if(d.eid.indexOf(Z)<0){e.push({n:B.decodeHtmlString(d.v,true),t:mstrmojo.vi.enums.EnumDerivedElementType.LIST,v:d.eid.split(";")[0].slice(1)});}});var a=i.controller,h=i.model&&i.model.docModel,g=a._getXtabCallback(i),c={act:"applyDEChanges",deId:Y.did,attId:Y.attId,attName:Y.attName,dsId:Y.dsId,k:i&&i.k,actions:[U(f,b)]};h.addUpdateObjects(c,{id:c.deId||c.attId,type:47,flag:G.PARTIAL_UPDATE_FLAGS.DATA_CHANGE});g=mstrmojo.func.wrapMethods(g,h.getDatasetsUpdateCallback(),{success:function(){h.callOnNDECreated([f]);}});a.submitUndoRedoUpdates(c,{},g);}function U(Y,X){return{act:"update",position:X+1,item:Y};}function E(Z,Y,c,b,a){var X=Z.model.getCellTitleInfo(Y).title;Z.controller.onSetDEHierachyOptions(Z,{act:"setDEHierarchyOptions",oId:X.id,eId:c.id,splice:b,expand:a});}function O(b,Y){var X=[],a=Y.t,Z=Y.did;b.getDropZones().zones.forEach(function(c){((c&&c.items)||[]).forEach(function(e){var f=e.t,d=e.did;if(f!==21&&d!=="-1"&&d!=="00000000000000000000000000000000"&&((f===4&&a===4)||(f!==4&&a!==4))&&d!==Z&&L.find(X,"did",d)===-1){X.push(e);}});});b.docModel.getDatasetUnits(a===4?["mx"]:["att"]).forEach(function(c){if(L.find(X,"did",c.did)===-1&&c.did!==Z&&!c.hide){X.push(c);}});return mstrmojo.vi.ui.DatasetUnitMenuUtils.getSortedDatasetUnits(X);}mstrmojo.vi.ui.rw._XtabDE=mstrmojo.provide("mstrmojo.vi.ui.rw._XtabDE",{scriptClass:"mstrmojo.vi.ui.rw._XtabDE",derivedElementGroup:function M(X){C(this,X,-1);},addElementsToGroup:function N(Z,a,Y,X){A(this,Z,a,Y,X);},derivedElementCalculation:function D(Y,X){C(this,Y,X);},separateOthers:function Q(X,Y){E(this,X,Y,1,1);},renameDEList:function I(X){this.controller.onEditQuickDEList(this,P.copy(K(this,X,true,-1),{act:"editQuickDEList",deName:X.v}));},editQuickDECalculationNumberFormat:function J(Y,Z){var X=K(this,Y);X.deId=Z.de.id;X.act="editQuickDECalculationNumberFormat";this.controller.editQuickDECalculationNumberFormat(this,P.copy(X,this.model.docModel.createNumberFormatParams(Z)));},editDECalculation:function H(Y,X){if(X!==undefined&&X!==null){this.controller.editQuickDECalculation(this,P.copy(K(this,Y,true,X),{act:"editQuickDECalculation"}));}else{this.controller.onEditQuickDECalculation(this,P.copy(K(this,Y,true),{act:"editQuickDECalculation",deName:Y.v}));}},removeQuickDE:function S(d,h){var a=h&&h.deObject,b=(a&&a.des)||[],i=this,k=2,g=L.filter(b,function(l){return !l.ido;},{max:k+1}),j={success:function(n){var o=i.controller.view.getLayouts(),l=o.length,m;for(m=0;m<l;m++){i.controller.model.data.layouts[m].loaded=false;o[m].defn.loaded=false;}}};if(a&&(b.length<=k||g.length<=k)){var c=[],f=this.zonesModel.getZoneForObject(a.did),Z=O(this.zonesModel,a),Y=L.find(Z,"did",a.attId),X=Y>=0?Z[Y]:null,e={};if(X&&f){c.push(this.model.getAddTemplateUnitAction(X,a.dsId,f.id,L.find(f.items,"dsId",a.dsId)));c=[this.zonesModel.getUpdateTemplateAction(c)];e=this.controller._getXtabCallback(this);}c.push({act:"removeNDEFromDS",dsid:a.dsId,oid:a.did,partialRetrieval:{nodes:this.model.docModel.getSourceFilterKeys(this.zonesModel.getHost().k)}});e=mstrmojo.func.wrapMethods(e,this.controller.model.getDatasetsUpdateCallback(),this.controller.getReloadLayoutViewCallback(),j);this.controller.submitUndoRedoUpdates(c,null,e,G.REQUEST_DEFN_DATA);}else{this.controller.removeQuickDE(this,P.copy(K(this,d),{act:"removeQuickDE"}));}},derivedElementsEdit:function T(f,a){if(!a){a=this.getDEInfo(f);}var b=this.model,Y=b.getCellTitleInfo(f).title,Z=a&&a.deObject,e=a&&a.de,X,d,c;if(!Z){X=this.gridData.datasetId||W(b.docModel.datasets,Y.id);d=Y.id;c=Y.n;}this.controller.openDEEditor(this,{dsId:X,attId:d,attName:c,deObj:Z,elemId:e&&e.id,dispName:f.n});},getDEInfo:function V(Y){var Z=this.model,X=Z.getCellTitleInfo(Y).title,a=Y.dei,b,c;if(X.ost!==12033){return null;}b=Z.docModel.getDEObject(X.id);if(b&&a!==undefined){c=b.des[a];}return{deObject:b,de:c,ttl:X};},getOthersDEInfo:function R(Y){var X;L.forEach(Y.des,function(Z){if(Z.t===4){X=Z;return false;}});return X;}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.boxmodel","mstrmojo.Model","mstrmojo._CanProxyCallback","mstrmojo.EnumRWUnitType","mstrmojo.models.template.DataInterface","mstrmojo.StringBuffer","mstrmojo.EnumReadystate");var Af=mstrmojo.EnumRWUnitType,K=mstrmojo.EnumReadystate,R=mstrmojo.hash,As=R.forEach,Aq=mstrmojo.func.wrapMethods,Ao=mstrmojo.Obj.free,M=mstrmojo.array,AF=mstrmojo.boxmodel,C=mstrmojo.mixin,b="\u001E";var F={},T={},N=[11826975,1381846,1810715,950271,12407690,2276796,13614615,8355711,15255470,9869567,9101208,7912447,14004421,9296859,15063710,13092807];mstrmojo.MultiRWUnitFormatEventsType=null;var AG={isObservable:function(A0){var Az=A0&&A0.t;if((!Az&&Az!==Af.LAYOUT)||!this.hasOwnProperty(Az)||A0.scriptClass){return false;}return(Az!==Af.SUBSECTION||!A0.dt);},makeObservable:function(Az){var A0=Az.audibles=this[Az.t]||{};if(A0.hasOwnProperty("readyState")){Az.readyState=K.IDLE;}return new mstrmojo.Model(Az);}};AG[Af.PANELSTACK]={"*":false,selKey:true,readyState:true};AG[Af.GRID]={"*":false,readyState:true,ds:true};AG[Af.GRAPH]={"*":false,readyState:true,ds:true};AG[Af.GRIDGRAPH]={"*":false,qsm:true,ds:true};AG[Af.SUBSECTION]={"*":false,resize:true,adjustSize:true};AG[Af.VISUALIZATION]={"*":false,ds:true};AG[Af.SELECTOR]={"*":false,cek:true,ds:true,readyState:true};AG[Af.MOJOVISUALIZATION]={"*":false,ds:true};AG[Af.LAYOUT]={"*":false,readyState:true};var Aa={};function Ah(Az){return Aa[Az]||Aa["*"];}Aa["*"]={update:function k(A0,A1,Az,A2){R.copy(Az,A1);}};Aa[Af.PANEL]=C({update:function k(A0,A1,Az,A2){delete A1.layoutXML;this._super(A0,A1,Az);}},Aa["*"]);function f(A4,A5){var A0=A4.layoutMap&&A4.layoutMap[A5];if(A0){if(!A0.t){A0.t=Af.LAYOUT;}if(AG.isObservable(A0)){A0=A4.layoutMap[A5]=this.addDisposable(AG.makeObservable(A0));}return A0;}var Az=A4.layouts,A3=(Az&&Az.length)||0,A2;for(A2=0;A2<A3;A2++){if(Az[A2].k===A5){var A1=Az[A2];if(!A1.t){A1.t=Af.LAYOUT;}if(AG.isObservable(A1)){Az[A2]=this.addDisposable(AG.makeObservable(A1));}return Az[A2];}}return null;}function w(A2,A4,A1,A0){var Az=f.call(this,A2,A4);if(A1===A4){Az._lkz=A4;return Az;}if(Az){var A3=Az.units[A1];if(A3){if(parseInt(A3.t,10)===Af.GRIDGRAPH){if(!Az.units[A1+"_0"]){Az.units[A1+"_0"]={ck:A3.ck,fmts:A3.fmts.gd,txi:A3.txi,t:Af.GRID};Az.units[A1+"_1"]={ck:A3.ck,fmts:A3.fmts.gp,t:Af.GRAPH};}}if(!A0&&AG.isObservable(A3)){A3=Az.units[A1]=AG.makeObservable(A3);this.disposables.push(A3);}A3._lkz=A4;}}return Az&&Az.units[A1];}function AM(A3,A2,A1,Az){var A0=this.getChildren(A3,A2,0);return(mstrApp.isMobile?(M.filter(A0,function(A6){var A4=A1&&A1.indexOf(A6.defn.t),A5=A6.defn.dk;return Az?(A4>-1&&A5===-1):(A4<0||A5!==-1);})):(Az?[]:A0));}var I=function(Az,A0){var A1=new mstrmojo.StringBuffer();if(A0){A1.append("*l"+A0);}A1.append("*k"+Az.k);if(Az.hasOwnProperty("wid")){A1.append("*x"+Az.wid);}A1.append("*t"+this.buildTime);return A1.toString();};function AC(A1){var A0,Az,A4=this.delta,A2=this.pendingUpdate=this.pendingUpdate||{},A3=[];if(!R.isEmpty(A4)){A3.push("<updates>");for(A0 in A4){if(A4.hasOwnProperty(A0)){Az=A4[A0];A3.push(Az.getUpdates());}}A2[A1]=A4;this.delta={};A3.push("</updates>");}return A3.join("");}function Av(A4,A0){var A3;if(A4){var Az=M.isArray(A4)?A4:A4.split(A0||b),A2=Az.length,A1;for(A1=0;A1<A2;A1++){A3=A3||{};A3[Az[A1]]=w.call(this,this.defn,this.currlaykey,Az[A1]);}}return A3;}function n(Az,A0){return mstrmojo.all[I.call(this,{k:Az,wid:A0},this.currlaykey)];}function Ab(A0,Az){var A1=this.getLayoutUnitDefn(A0,Az);return(A1&&A1.t===Af.PANELSTACK&&A1.ifw);}function Ad(A0,Az){return !Az||(A0.wid===Az);}function e(A3,BB){var A6=this,BC=A6.getSliceCallback(BB),A1=BC.shared,BD=BB.tks,A0=BB.eid,A9=A6.getDataService();if(!BD){return ;}var A8=w.call(A6,A6.defn,A6.currlaykey,A0);if(!A8){return ;}var A5=A0,A7=A1.tgtDefs[BD],Az=function(){A7.set("selKey",A0);},A2;A7.newSelKey=A0;if(A8.l){var A4=A8.dirtyKeys;if(!!A4){A5=R.keyarray(A4).join(",");A1.orignalTargetDefs=A1.tgtDefs=Av.call(A6,A5,",");A2=function(){Az();As(A1.dataCacheUpdate.upd,function(BE,BF){var BG=mstrmojo.all[BF];if(BG&&BG.setDirty){BG.setDirty(false);}});};}else{if(BB.skipServerCall){Az();return ;}A9.requestPanelChangeDeferred(A3,A0,null,false,false,A6.newCallback({method:"slice",success:Az}));return ;}}else{A2=function(){Az();A8.l=true;};}var BA=BC.success;BC.success=function(BF){if(!A6.checkStatus(BF)){return ;}A6.updateDefnCache(BF.defn,[A0]);BA(BF);A2();var BE=n.call(A6,BB.tks,0);if(BE){BE.clearDirtyChild(A0);}};A9.requestPanelChangeDeferred(A3,A0,A5,true,!BB.hasLoader,BC);}function W(A0,Az){if(A0.defn&&A0.defn.t>=Af.GRID){mstrmojo.models.template.DataInterface.inflateGridData(A0.data);}Az[A0.id]=A0;return A0;}function AJ(BI,A8,Az,A5){var BB=this.currlaykey,A2;if(BI){A2=BI.defn;BB=(A2&&A2._lkz)||BI.k;}var BT=this.getLayoutDataCache(BB),BJ=(!Az&&!R.isEmpty(BT)),BP;if(!BI){BP=this.data;}else{var A7=BI.data||BI;if(BJ){BP=BT[I.call(this,A7,BB)];BP=(BP&&BP.data)||BP||A7;}else{BP=A7;}}if(!!BP.sections){this._buildingLayoutKey=BP.k;}var A0=BP?this.extractChildren(BP):[],BD=[];var BM=(A0&&A0.length)||0;if(BM){A2=this.defn;var BF=!BI,BA=BI?BB:null,A4=(BI&&((BI.defn)?BI.defn.t:w.call(this,A2,BA,BI.k).t));var A1=(A4===Af.GRIDGRAPH),BN=(A4===Af.DETAILS),BL,BK;A0=A8(A0);for(BL=0,BK=A0.length;BL<BK;BL++){var BR=A0[BL];if(A1){BR.k=BI.k;BR.wid=BI.data.wid;}var BV=BR.k,BH=I.call(this,BR,BA),BQ;if(!BF&&!Az&&Ab.call(this,BV,BA)){var BO=this.getLayoutUnitDefn(BV),BE=W({data:BR,defn:BO,id:BH,k:BV,p:BP},BT);if(!this.infoWinByKey||!this.infoWinByKey[BV]){var A3=this.infoWindows=this.infoWindows||{};var BS=this.infoWinByKey=this.infoWinByKey||{};A3[BO.n]=BS[BV]=BE;}continue;}if(A1){BH+="_"+BL;BQ=w.call(this,A2,BA,BR.k+"_"+BL);}else{BQ=w.call(this,A2,BA||BR.k,BR.k);}if(BN){BQ.dt=true;}if(BT===null&&(BQ.t===Af.LAYOUT)){BT=this.getLayoutDataCache(BR.k);}var BU;if(BQ.t===Af.PANEL&&BT[BH]&&BJ){var A6=this.extractChildren(BR)||[],BC=this.extractChildren(BT[BH].data)||[],A9=false;if(A6.length!=BC.length){M.forEach(BC,function(BX){var BW=M.find(A6,"k",BX.k);if(BW>-1){A6[BW]=BX;A9=true;}});if(A9){BC.splice(0,BC.length);M.forEach(A6,function(BW){BC.push(BW);});}}BU=BR;}else{BU=BJ?(BT[BH]&&BT[BH].data)||BR:BR;}var BG={k:BR.k,id:BH,defn:BQ,data:BU};if(!BT[BH]){W(BG,BT);}BD.push(BG);}}return A5?{nodes:BD,total:BM}:BD;}function Aw(A5,A0,A4){var Az=AF.px2Inches,A1=this.getZoomProps(),A3=1,A2=2;if((A4&A3)>0){A5.FormattingPosition={Left:Az(A1,A0.x||0),Top:Az(A1,A0.y||0)};}if((A4&A2)>0){A5.FormattingSize={Height:Az(A1,A0.h||0),Width:Az(A1,A0.w||0)};}}function r(A0){function Az(A2,A1){return A2<A1?-1:(A2>A1?1:0);}A0.sort(function(A2,A1){var A3=Az(A2.levelID,A1.levelID);return A3!==0?A3:Az(A2.elemID,A1.elemID);});return A0;}function At(Az,A0){return Az.map(function(A1){return A1[A0];}).join(b);}function J(Az){return At(Az,"levelID");}function Au(Az){return At(Az,"elemID");}function AD(A0){if(A0){T={};}F={};var Az=this.defn.epm;if(Az){Az.forEach(function(A1){A1.epmv.forEach(function(A2){var A4=r(A2.k.chn.map(function(A7){var A6=A7.emt!==2;return{levelID:A6?A7.at.did:"-1",elemID:A6?A7.ei:A7.mt.did};})),A5=J(A4),A3=Au(A4);if(!F[A5]){F[A5]={};}F[A5][A3]=JSON.parse(A2.v.vv);});});}}function a(Az){if(Az){Az=mstrmojo.rw.model.RetrievalKeysConfig.parseResponseFilters(Az);}return Az;}function z(){var A0=this.data&&this.data.layouts,Az=A0[M.find(A0,"k",this.getCurrentLayoutKey())],A2=Az&&Az.gbys&&Az.gbys.groupbys,A1=false;M.forEach(A2,function(A3){if(A3.unit&&A3.unit.elms&&A3.unit.elms[A3.unit.idx].v==="u;"){A1=true;return false;}});return A1;}mstrmojo.DocModel=mstrmojo.declare(mstrmojo.Model,[mstrmojo._CanProxyCallback],{scriptClass:"mstrmojo.DocModel",audibles:{"*":false,data:true,tsp:true},features:null,dataCache:null,searchElemsCache:null,controller:null,sdp:null,dpi:96,keySeed:0,currlaykey:"",init:function AO(Az){this._super(Az);if(!this.features){this.features=new mstrmojo.Model();this.disposables.push(this.features);}this.ondefnChange();AD.call(this);this.buildTime=mstrmojo.now();},hasFeatures:function AL(A3){var A1=this.features;if(!A1){return false;}var A0=A3.split(","),Az=A0.length,A2;for(A2=0;A2<Az;A2++){var A4=A0[A2],A5=A4.match(/^!/);if(A5){A4=A4.replace("!","");}if(!!A5===!!A1[A4]){return false;}}return true;},makeObservable:function AN(Az){return AG.makeObservable(Az);},checkStatus:function Ap(Az){if(parseInt(Az.status,10)===4){Az.message=mstrmojo.desc(5781,"Request timed out.");mstrmojo.err(Az);return false;}return true;},getDataService:function AY(){var A0=this.dataService;if(!A0){var Az={rwb:this.bs,msgId:this.mid,stid:this.stid,cbKey:this.cbKey,model:this};if(mstrApp.modelFactory){A0=mstrApp.modelFactory.newDataService("Document",Az);}else{A0=mstrApp.viewFactory.newDocDataService(Az);}this.dataService=A0;this.disposables.push(A0);}return A0;},getNextKey:function Ag(){return"W"+this.keySeed++;},resetKeySeed:function D(Az){this.keySeed=Az;},getWidgetId:function H(Az,A0){return I.call(this,Az,A0||this.getCurrentLayoutKey());},getUIState:function S(){return{};},ondefnChange:function s(){var A4=this.defn,A1=A4&&A4.layouts,A0={};if(A4){A4.layoutMap=A0;var A3=(A1&&A1.length)||0,A2;for(A2=0;A2<A3;A2++){var Az=A1[A2];A0[Az.k]=Az;}}},extractChildren:function t(Az){return(Az.sections||Az.subsections||Az.objects||Az.panels||Az.layouts||Az.children);},getChildren:function O(A1,A0,A4,Az,A3){A4=A4||0;var A2=function(A5){return A5.slice(A4,A4+(Az||A5.length));};return AJ.call(this,A1,A2,A0,A3);},getChildrenByKey:function AI(A1,A0,Az,A3){var A2=function(A5){var A4=[],A6;M.forEach(Az,function(A7){A6=M.find(A5,"k",A7);if(A6!==-1){A4.push(A5[A6]);}});return A4;};return AJ.call(this,A1,A2,A0,A3);},getTargetDefn:function AH(Az){return Av.call(this,Az);},getUnitDefinitions:function(A0,Az){return Av.call(this,A0,Az);},getUnitInstance:function p(Az,A0){return mstrmojo.all[I.call(this,{k:Az,wid:A0},this.currlaykey)];},getFirstUnitInstanceByName:function u(A2){var Az=f.call(this,this.defn,this.currlaykey);if(Az){var A0=Az.units,A1;for(A1 in A0){var A3=A0[A1];if(A3.n===A2){return this.getUnitInstance(A1,1);}}}return null;},getLayoutUnitDefn:function B(A0,Az){return w.call(this,this.defn,Az||this.currlaykey,A0);},getRawLayoutUnitDefn:function U(A0,A1,Az){return w.call(this,A1||this.defn,Az||this.currlaykey,A0,true);},getSelectedKey:function Ak(Az){return(!Az&&this.currlaykey)||null;},getCurrentLayoutKey:function o(){return this.currlaykey;},getLayoutDefn:function AQ(Az){var A0=this.defn,A1=A0&&A0.layouts;return A1&&A1[M.find(A1,"k",Az)];},getCurrentLayoutDef:function AT(){return this.getLayoutDefn(this.getCurrentLayoutKey());},replaceLayout:function Ar(A7,A0,A8){var A4=this.defn,A3=this.data,A1=A0&&A0.defn,Az=A0&&A0.data,A9=this.dataCache;if(A9&&A9[A7]){A9[A7]={};}var A6=(A3&&A3.layouts)||(A4&&A4.layouts),A2,A5=false;for(A2=(A6&&A6.length-1)||0;A2>=0;A2--){if(A6[A2].k===A7){break;}}if(A8&&A2<0){A2=M.find(Az.layouts||A1.layouts,"k",A7);A5=true;}this.bs=A0.bs;if(Az){if(A5){M.insert(A3.layouts,A2,[Az.layouts[A2]]);}else{A3.layouts[A2]=Az.layouts[A2];}A3.elems=Az.elems;}if(A1){if(A5){M.insert(A4.layouts,A2,[A1.layouts[A2]]);}else{A4.layouts[A2]=A1.layouts[A2];}this.ondefnChange();}},loadLayout:function Z(Az,A1,A0){this.replaceLayout(Az.currlaykey,Az);this.raiseEvent({name:"rebuildLayout",unloadCache:!!A1,restoreIW:!!A0});},getLayoutDataNode:function Ax(A0){var Az=this.data&&this.data.layouts;return M.filterOne(Az,function(A1){return A1.k===A0;});},getLayoutDataCache:function l(A0){if(!A0){return null;}var Az=this.dataCache;if(!Az){Az=this.dataCache={};}if(!Az[A0]){Az[A0]={};}return Az[A0];},saveRW:function Ai(A0,A2){var A1=mstrmojo.desc,Az=this.getDataService();Az.saveRW({objName:A0||this.n,folderID:this.pfid,saveAsFlags:1},A2||{success:function(A3){mstrmojo.alert(A1(3819,"Document Saved")+": "+A3.n);}});},saveAsRW:function Ay(A1,A0){var Az=this,A2=mstrmojo.hash.copy(A1,{evt:3102,applyChanges:false,executionMode:2,parentFolderID:mstrApp.saveFolderId||Az.sfid||Az.pfid,saveFromDesignMode:false,rwb:Az.bs});if(A0){A2.target=A0;A2.saveAsOrigin=13;}mstrmojo.form.send(A2,null,"post");},saveDocProps:function AB(Az,A0,A1,A5){var A4=this.getDataService(),A3=A1?null:mstrmojo.DocDataService.SUPPRESS_DATA,A2=[{act:"setDocumentProperties",props:Az}];R.forEach(Az.RWDocumentProperties,function(A7,A6,A8){A8[A6]=String(A7);});if(A0){this.controller.cmdMgr.execute({execute:function(){this.submit(A2,A5||{},A3);},urInfo:A0});}else{A4.submitUpdates(A2,A5||{},R.copy(A3,{preserveUndo:true}));}},partialUpdate:function x(A4,Az,A2,A1,A0){if(A2){this.updateDefnCache(A2,A1,A0);}if(A4){var A3=this.updateDataCache(A4,Az,undefined,A0);this.raiseEvent({name:"partialUpdate",tree:A4,ids:A3});return A3;}},refreshDefinition:function Y(A2,A1,A0,A3){var Az=this.getLayoutUnitDefn(A2,A0||this.getCurrentLayoutKey());if(!Az){return ;}Ah(Az.t).update(this,Az,A1,A3);},loadPartialData:function v(A4,A0){var A2={};A2[A0]=w.call(this,this.defn,this.currlaykey,A0);var A1=this.updateDataCache(A4,A2),Az=this.getLayoutDataCache(this.getCurrentLayoutKey()),A3=this;M.forEach(A4.layouts,function(A5){var A6=A5&&A5.xtabStyles;if(A6){A3.raiseEvent({name:"updateStyles",key:A5.k,updatedStyles:A6});}});As(A1,function(A6,A5){if(A5==="upd"){As(A6,function(A8,A9){var A7=mstrmojo.all[A9];if(A7&&A7.update){A7.update(Az[A9]);}});}});},updateDefnCache:function A(A0,A6,A3){var A9=this.currlaykey,A2=f.call(this,A0,A9),BB=f.call(this,this.defn,A9),A7=function(BC,BD){var BE;for(BE in BD){if(BC[BE]===undefined){BC[BE]=BD[BE];}}},BA=A2&&A2.units,A8=BB&&BB.units,A1=A2&&A2.cgbMap,Az=BB&&BB.cgbMap,A4=A3&&a(A3).defn,A5=this;M.forEach(A6,function(BC){A5.refreshDefinition(BC,BA[BC],null,A4&&A4[BC]);});if(BA){A7(A8,BA);}if(A1){A7(Az,A1);this.raiseEvent({name:"CGBMapChange",cgbMap:Az});}},deleteDataCache:function P(A0){var Az=this.getLayoutDataCache(this.getCurrentLayoutKey());if(Az[A0]){delete Az[A0];}},updateDataCache:function AP(A8,A7,Az,A3){var A1=this.getLayoutDataCache(this.getCurrentLayoutKey()),A0=A3&&a(A3).data,A9={ifws:{},upd:{},tgts:{},def:{},secs:{}},A4=function(BF,BA){var BE=A1[BF];if(A0){var BD=mstrmojo.all[BF];if(BD){var BB=BE.k,BC=A0[BB];if(BC){if(!R.isEmpty(BC.exclude)){R.copy(BA.data,BE.data);}else{BA.data=R.copyProps(BC.serialized.split(";"),BA.data,BE.data);}}}}W(BA,A1);};function A6(BO,BT,BB,BE){var BG=false,BL=this.getChildren(BO,true),BK;if(!BL.length){return ;}if(BB){BK=mstrmojo.all[BO.id];BG=!BO.id||!!BK;}var BF=BO.defn,BC=BO.data,BQ;if(BF&&BF.t===Af.PANELSTACK&&BF.od){BQ=BC.selKey;}var BP,BJ,BU=function(BV){return(BV.k===BJ);};for(BP in BL){var BM=BL[BP],BN=BM.id,BD=null,BR;BJ=BM.k;if(BT){var BH=this.extractChildren(BT);if(BH){BR=M.filterOne(BH,BU);if(!BR){BH.push(R.clone(BM.data));}}else{R.copy(R.clone(BO.data),BT);}}if(mstrmojo.all[BN]){BG=true;}if(A7.hasOwnProperty(BJ)){if(Ab.call(this,BJ)&&Ad(BM.data,Az)){A4(BN,BM);if(!BE){A9.ifws[BJ]=this.infoWinByKey[BJ].id;}}BD=BJ;if(BG){if(BQ&&BQ!==BJ){continue;}if(!BE){A9.tgts[BN]=true;}var BA=BK&&BK.defn,BS=BA&&BA.t,BI=BA&&BA.ck;if(BS===Af.SUBSECTION&&(BI&&BI.hasOwnProperty(BJ))){A9.secs[BK.id]=true;}}}if((BE||BD)&&(!BQ||BQ===BJ)){A4(BN,BM);A9.def[BJ]=true;if(BG){A9.upd[BN]=true;}}A6.call(this,BM,BR,BG,BE||BD);}}if(A8&&A8.layouts&&A7){var A2=M.filterOne(A8.layouts,function(BA){return(BA.loaded);}),A5=this.data.layouts;if(A2){A6.call(this,A2,A5[M.find(A5,"k",A2.k)],true);}}return A9;},getDimensionAndPositionAction:function Q(A0,Az,A2){var A1=this.getUnitFormatAction(A0,null,null,A2);Aw.call(this,A1.format,Az,3);return A1;},getDimensionAction:function Q(A0,Az,A2){var A1=this.getUnitFormatAction(A0,null,null,A2);Aw.call(this,A1.format,Az,2);return A1;},getUnitFormatAction:function d(A7,A0,A6,A2){var A4=A7.defn,A8=A4.t||1,A5=A7.k,A3=[A5];var Az={act:"format",unitKey:A5,unitType:A8===115?521:A8,formatType:A0||1,format:A6||{}};if(!A2){Az.partialRetrieval={nodes:A3};}if(A8===Af.SELECTOR){var A9=A4.ck;Az.keyContext=A9;A3[0]=this.getDataService().getNodeKeyFromKeyContext(A9);}if(A8===Af.TEXTFIELD||A8===Af.IMAGE||A8===Af.HTMLCONTAINER){var A1=A7.nk||A4.fgk;Az.fieldKey=A5;Az.nodeKey=A1;Az.keyContext=A8+b+A1+b+A5;A3[0]=A1;}return Az;},updateUnitFormat:function Ae(A0,A2,A3,A4,Az){var A1=this.getUnitFormatAction(A0,A2,A3);this.getDataService().submitUpdates(A1,A4,Az);},selectPanelDeferred:function(A4,A3,A2,A1,A0,Az){e.call(this,A4,{type:3,tks:A3,eid:A2,sid:A1||1,ck:A3,hasLoader:A0,skipServerCall:Az});},getSearchElemsCache:function An(){var Az=this.searchElemsCache;if(!Az){Az=this.searchElemsCache={};}return Az;},getCGBMap:function AV(){var Az=f.call(this,this.defn,this.currlaykey);return Az&&Az.cgbMap;},getSliceCallback:function AA(Az){var A2=this,A3={};A3.dataCacheUpdate=null;A3.tgtDefs=Az.tks?Av.call(this,Az.tks):null;A3.orignalTargetDefs=A3.tgtDefs;var A1=A3.tgtDefs,A0=function(A6){var A7=A1;if(Az.disablePU){A7=Av.call(A2,A2.currlaykey);}As(A7,function(A8){if(A8&&A8.set){A8.set("readyState",A6);}});},A5=this.newCallback({method:"slice",shared:A3,submission:function(){A0(K.WAITING);},success:function(A7){if(!A2.checkStatus(A7)){return ;}if(Az.disablePU){A2.loadLayout(A7,Az.isUConDS,Az.restoreIW);return ;}if(A7.pukeys){A3.tgtDefs=Av.call(A2,A7.pukeys);}A3.dataCacheUpdate=A2.updateDataCache(A7.data,A3.tgtDefs,Az&&Az.sid,A7.puFilters);if(typeof A7==="object"){R.copyProps(["bs","exopt","dty"],A7,A2);}var A6={name:"partialUpdate",tree:A7.data,ids:A3.dataCacheUpdate,unloadCache:Az.isUConDS};if(!mstrmojo.hash.isEmpty(A6.ids.ifws)){if(Az&&!Az.suppressIW&&(Az.type===Af.GRID||Az.type===Af.GRAPH)){A6.anchor=Az.anchor;}else{A6.ids.ifws={};}}A2.raiseEvent(A6);},complete:function(){A0(K.IDLE);}}),A4={success:function(){As(A3.orignalTargetDefs,function(BG,BE){var BF=n.call(A2,BE,1);if(!BF){if(!!A2.sdp&&!!A2.sdp[BE]){var BD=A2.getLayoutDataCache(A2.getCurrentLayoutKey());var BH=I.call(A2,{k:BE,wid:1},A2.currlaykey);A2.raiseEvent({name:"secondaryDataSliced",key:BE,data:BD[BH].data});}return ;}if(A3.dataCacheUpdate&&!A3.dataCacheUpdate.def.hasOwnProperty(BE)){if(BF.setDirty){BF.setDirty(true);}}else{if(parseInt(BG.t,10)===Af.PANELSTACK){BF.setDirtyChildren();}}});var A6=n.call(A2,Az.ctlKey,1);if(A6&&A3.dataCacheUpdate&&!A3.dataCacheUpdate.upd.hasOwnProperty(A6.id)){var BB=(A6.children&&A6.children[0].selectedIndices)||{},A9=A6.node.data,BC=mstrmojo.DocSelector.STYLES,BA=[];if(A6.style===BC.SEARCH_BOX){var A7=(A6.children&&A6.children[0].items)||[];M.forEach(A7,function(BD){BA.push(R.clone(BD));});}else{R.forEach(BB,function(BE,BD){if(BE){BA.push(A9.elms[BD]);}});}var A8=M.find(BA,"v",mstrmojo.elementHelper.ELEM_ALL_ID);if(A8>-1){BA=[BA[A8]];}A9.ces=BA;A6.selIdx=BB;}}};if(Az.isUConDS||(parseInt(Az.type,10)===Af.GRAPH&&Az.tty===1)){A5.success=function(A6){A2.controller.setData(A6,true);};return A5;}if((parseInt(Az.type,10)===3)){return A5;}return Aq(A5,A4);},slice:function X(Az){var A0=this.getDataService(),A1=A0.newUpdateWithoutCmd();this.sliceDeferred(A1,Az);if(A1.actions&&A1.actions.length>0){A0.addSuppressData(A1.extras);A1.submit();}},sliceDeferred:function(A2,BB){var Az={};try{if(!BB||(!mstrmojo.dom.isAndroid&&!BB.tks&&!BB.multiSelect&&(BB.type===3||(BB.type===Af.GRAPH&&parseInt(BB.tty,10)!==1)))){return Az;}var BC=this.getSliceCallback(BB),A8=this,BA=this.getDataService();var BE=parseInt(BB.type,10);if(BE===3){e.call(A8,A2,BB);return ;}if(BB.multiSelect){if(BB.selectorObjects.length>0){BA.setMultiDocSelectorElements(BB.selectorObjects,BB.multiSelect,BC);}return ;}if(BE===Af.GRAPH){A2.add(BA.getGraphSelectionAction(BB.src,BB.cks,BB.sid,BB.x,BB.y,(BB.tty===1)),BC);if(!!BB.showLoadingIcon){A2.addExtras({config:mstrmojo.DocDataService.PROGRESS_CONFIG});}return ;}var BD=BB.events||{K0:BB},A1=[],A4,A0={config:mstrmojo.DocDataService.PROGRESS_CONFIG},A7=A0.params={},A3,A6={},A9=function(BG,BF){if(BG){A6[BF]=BG.visName;}};for(A3 in BD){BB=BD[A3];if(!BB){break;}if(BB.hasOwnProperty("eid")){if(BB.isUConDS){BB.disablePU=true;}if(z.call(this)){BB.disablePU=true;BB.restoreIW=true;}A4=BA.getSelectorElementsAction(BB);if(A8.sdp){A6={};As(A8.sdp,A9);A7.sdpKeys=JSON.stringify(A6);}if(BB.disablePU){A7.disablePU=true;}}else{if(BB.fromGM){A4=BA.getSelectorFromGMAction(BB);}else{if(parseInt(BB.srct,10)===4||BB.fid){if(BB.fid&&z.call(this)){BB.disablePU=true;}A4=BA.getSelectorExpressionAction(BB);}else{if(BB.unset){A4=BA.getUnsetSelectorAction(BB);}else{if(parseInt(BB.ct,10)===6){A4=BA.getMultiUnitSelectorAction(BB);A8.hasUnitSelector=BB.selections&&BB.selections.hasElements;}else{A4=BA.getSelectorIncludeAction(BB);}}}}}A1.push(A4);}A2.add(A1,BC,A0);}catch(A5){mstrmojo.err(A5);}},getInfoWindow:function q(A0){var Az=this.infoWindows;return Az&&Az[A0];},getTargetInfoWin:function(A0){var Az=[],A1=Av.call(this,A0);if(A1){var A2;for(A2 in A1){if(A1[A2]&&A1[A2].ifw){Az.push(A2);}}}return Az;},showInfoWin:function m(A2,A1,Az,A3,A4){var A0=this.infoWinByKey&&this.infoWinByKey[A2];if(A0===undefined){return ;}this.raiseEvent({name:"showInfoWin",psId:A0.id,psKey:A0.k,anchor:A1,anchorOrientation:Az,anchorPosition:A4,invalidate:A3});},getSelectedXtabStyles:function j(A1){var A0=A1||this.currlaykey;var A3={};var Az=this.data&&this.data.layouts,A2;for(A2 in Az){if(Az[A2].k===A0){A3=Az[A2].xtabStyles;break;}}return A3;},downloadGridData:function E(A3){var A1=this,A0=A3.xtabId,Az=A3.memo,A2=mstrmojo.all[A0];this.getDataService().downloadGridData(A3,this.newCallback({success:function(BB){function A4(BF,BH){var BI=A1.getChildren(BF,true),BG=BI.length,BE;for(BE=0;BE<BG;BE++){var BJ=BI[BE];if(BH===BJ.id){return BJ;}var BD=A4(BJ,BH);if(BD){return BD;}}return null;}var A8=BB.data&&f.call(A1,BB.data,A1.currlaykey);if(A8){var A7=A4(A8,A0);if(A7){mstrmojo.models.template.DataInterface.inflateGridData(A7.data);if(A2){A2.dataDownloaded(A7,Az);}}var BA=A8.xtabStyles;if(BA){A1.raiseEvent({name:"updateStyles",key:A8.k,updatedStyles:BA});}}var A9=w.call(A1,A1.defn,A1.currlaykey,A3.nodeKey);if(A9&&A9.t===Af.GRIDGRAPH&&Az.recalculating){var A6=A2.parent,BC=A6&&A6.getGraphWidget();if(BC&&A6.updateGraph){A6.updateGraph(A4(A8,BC.id));}}if(BB.pukeys){var A5=Av.call(A1,BB.pukeys);delete A5[A3.nodeKey];if(!R.isEmpty(A5)){A1.partialUpdate(BB.data,A5);}}},failure:A2.dataDownloadErr||mstrmojo.emptyFn}));},clearDisposables:function AU(){var Az=[];M.forEach(this.disposables,function(A0){if(A0._lkz){Ao(A0);}else{Az.push(A0);}});this.disposables=Az;},getFixedHeaders:function(A0,Az){return AM.call(this,A0,Az,[Af.PAGEHEADER],true);},getFixedFooters:function(A0,Az){return AM.call(this,A0,Az,[Af.PAGEFOOTER],true);},getNonFixedSections:function(A0,Az){return AM.call(this,A0,Az,[Af.PAGEHEADER,Af.PAGEFOOTER],false);},addAutoWidthID:function g(A1){var A0=this.aws||{},Az=A0[this.currlaykey]||[];Az.push(A1);A0[this.currlaykey]=Az;this.aws=A0;},getAutoWidthIDs:function L(){var A1=this.aws,Az=this.currlaykey;var A0=A1&&A1[Az];if(A0){delete A1[Az];}return A0;},getTransactionUpdates:function i(Az){return this.txDiscardTargets?"":AC.call(this,Az);},clearTransactionUpdates:function AE(Az){this.clearTxDeltaUpdate(Az);},resetTransactionUpdates:function AZ(Az){var A0=this.pendingUpdate,A1=this.delta;if(A0&&A0[Az]){As(A0[Az],function(A2,A3){if(A1&&!A1[A3]){A1[A3]=A2;}});delete A0[Az];}},transactionUpdate:function Am(A1,A0){if(!A1.data){return null;}var A3;if(A0&&A0.tks){A3=Av.call(this,A0.tks);}if(A1.pukeys){A3=Av.call(this,A1.pukeys);var A4;for(A4 in A3){if(A3[A4]&&A3[A4].cek){A3[A4].cek=null;}}}if(A1.txrcd){this.txrcd=A1.txrcd;}else{delete this.txrcd;}var A2=this.updateDataCache(A1.data,A3,A0&&A0.sid),Az={name:"partialUpdate",tree:A1.data,ids:A2};if(!R.isEmpty(A2.ifws)){if(A0&&A0.type===Af.GRID){Az.anchor=A0.anchor;}else{A2.ifws={};}}this.raiseEvent(Az);return A2;},deltaUpdate:function AX(Az){var A0=this.delta;if(!A0){A0=this.delta={};}A0[Az.id]=Az;},clearTxDeltaUpdate:function V(A0){var A3=this.txDiscardTargets,Az=!A3,A2=this.pendingUpdate,A1=this;if(!Az){As(A3,function(A4,A5){if(A1.delta&&A1.delta[A5]){A1.delta[A5].clear();delete A1.delta[A5];}});}if(A2&&A2[A0]){As(A2[A0],function(A4){A4.clear();});delete this.pendingUpdate[A0];}},sendTransactionActions:function G(A0,Az,A2){var A1=this;if(!A2){A2={success:function(A3){A1.transactionUpdate(A3);}};}A1.getDataService().sendTransactionActions({keyContext:A0,actions:Az,txrcd:this.txrcd},A2);},sendTransactionUpdates:function AS(Az){var A1=this.getSliceCallback(Az),A0=this.getDataService();A0.submitUpdates([A0.getUpdateTransactionAction(Az)],A1);},addSDP:function Aj(A0,Az){if(!A0||!Az){return ;}if(!this.sdp){this.sdp={};}this.sdp[A0]={k:Az.k,visName:Az.visName};},removeSDP:function Ac(Az){if(!Az||!this.sdp[Az]){return ;}delete this.sdp[Az];},getUpdateColorMapCallback:function c(){var Az=this;return{success:function(A0){Az.defn.epm=A0.defn&&A0.defn.epm;AD.call(Az);Az.raiseEvent({name:"colorMapChanged"});}};},getUpdateThemePaletteCallback:function AW(Az){var A0=this;return{success:function(A1){A0.thm=A1.thm;A0.plt=A1.plt;A0.defmts=A1.defmts;AD.call(A0,!Az);}};},getCurrentPaletteColors:function AK(){return(this.plt&&this.plt.colors)||N;},getColorBy:function(A5,Az){var A3=Az.map(function(A7,A6){return{levelID:A5[A6].toString(),elemID:A7};});if(A3&&A3.length>1){r(A3);}var A4=J(A3),A2=Au(A3),A1=T[A4];if(!A1){A1=T[A4]={_currentColorIdx:0};}if(!A1[A2]){var A0=this.getCurrentPaletteColors();A1[A2]=A0[A1._currentColorIdx];A1._currentColorIdx=(A1._currentColorIdx+1)%A0.length;}if(F[A4]&&F[A4][A2]){return{color:F[A4][A2].color,isManual:true};}return{color:A1[A2],isManual:false};},getZoomFactor:function y(){return this.getCurrentLayoutDef().zf||1;},getZoomProps:function AR(){return{dpi:this.dpi,zf:this.getZoomFactor()};},executeLink:function h(Az,A1,A2){if(Az.indexOf("prevMsgID")>0){var A0="prevMsgID="+this.mid;Az=Az.replace(/prevMsgID=0($|&)/g,function(A3,A4){if(A4==="&"){return(A0+"&");}return A0;});if(mstrmojo.dom.isIE){Az+="&cb"+mstrmojo.now()+"=1";}}Az=mstrmojo.addCSRFTokenToURL(Az);this.controller.onLink(this,{url:Az,target:A1,src:A2||null,submitAsPost:!mstrmojo.isUrlExternal(Az)});},getDatasetUnits:function Al(A0,Az,A2,A4){var A3=this.datasets,A1=[];R.keyarray(A3).forEach(function(A6){if(!A2||A6===A2){var A7=A3[A6],A5=A7,A8=[];A0.forEach(function(A9){if(A4!==undefined){A5=A7.tables[A4];}(A5[A9]||[]).forEach(function(BA){if(!Az||Az(BA)){A8.push(BA);}});});A1=A1.concat(A8.map(function(A9){return mstrmojo.hash.copyProps(["did","n","t","st","formType","dt","f","hide","usedInDropZones","card","lock","fs"],A9,{ds:A7.name,dsId:A6,dm:!!A9.um,da:!!A9.da,de:!!A9.de});}));}});return A1;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.dom");function Z(a,c){if(!mstrmojo.DocInfoWindow){return ;}var b=a;while(b){if(b instanceof mstrmojo.DocInfoWindow){b[c?"registerScrollLock":"releaseScrollLock"](this);break;}b=b.parent;}}var L=mstrmojo.array,C=mstrmojo.dom,P=mstrmojo.hash,W=mstrmojo.css,F="px";var B=false;function K(a,c){if(!mstrmojo.DocInfoWindow){return ;}var b=a;while(b){if(b instanceof mstrmojo.DocInfoWindow){b[c?"registerLock":"releaseLock"](this);this.lockIW=c?b:null;break;}b=b.parent;}}var A=mstrmojo.ui.PopupConfig.ENUM_CORNERS,T=A.TOP_LEFT,R=A.TOP_RIGHT,H=A.BOTTOM_RIGHT,G=A.BOTTOM_LEFT;function I(a){return(a===G||a===T);}function X(a){return(a===R||a===H);}function N(a){return(a===H||a===G);}function Q(a){return(a===R||a===T);}function U(h,c,n,s){var v=n.x,u=n.y,r=n.w||0,j=n.h||0,b=s.w,o=s.h,q=h.alignment,f=q.popup,e=q.host,t=X(e),w=N(e),p=false,l=false,d=false,m=false;if(I(f)){var g=v+b+(t?r:0);p=c.w<g;}if(Q(f)){var k=u+o+(w?j:0);l=c.h<k;}if(X(f)){var i=v-b+(t?r:0);d=i<0;}if(N(f)){var a=u-o+(w?j:0);m=a<0;}return{top:m,bottom:l,left:d,right:p};}function E(b){var a=this.popupConfig;if(a){P.forEach(a.popupHandlers,function(d,e){var c=d[b?"open":"close"];if(c){c.call(mstrmojo.all[e]||c,!!b);}});}}function J(b){var a=this.popupConfig;if(a&&!a.isHostedWithin){var c=this.hostProxy;if(c){c.style.display=b?"":"none";}}}function Y(a){return a!==undefined&&a!==null&&!isNaN(a);}mstrmojo._IsPopup={visible:false,lockIWForScroll:false,disposable:true,opener:null,onOpen:mstrmojo.emptyFn,onClose:mstrmojo.emptyFn,popupConfig:null,hostProxy:undefined,open:function M(c,a){E.call(this,true);if(this.updatePopupConfig){this.updatePopupConfig(a,c);}else{P.forEach(a,function(f,e){this.set(e,f);},this);}var b="popup-mid-render";this.set("opener",c);if(!this.hasRendered){var d=this.visible;this.visible=false;this.render();W.addClass(this.domNode,b);this.set("visible",d);}if(this.nudge){this.domNode.style.top="-10000px";}J.call(this,true);this.set("visible",true);if(this.lockIWForScroll){Z.call(this,this.opener,true);}if(a&&a.lockIW){K.call(this,a.lockIW,true);}if(this.nudge){this.nudge();}this.adjustCornersForPopupOverflow();this.onOpen();W.removeClass(this.domNode,b);},adjustCornersForPopupOverflow:function V(){var k=this.popupConfig;if(!k){return false;}var AG=(k.includeScroll!==undefined)?k.includeScroll:true;var n=k.position||C.position(k.anchorElement||k.hostElement,AG);if(!k.isHostedWithin){var w=this.hostProxy,q=this.hostProxy=document.createElement("div");document.body.appendChild(q);q.appendChild(this.domNode);if(w){w.parentNode.removeChild(w);}var e=q.style,r={x:"left",y:"top",w:"width"};q.className=k.hostProxyCssClass;e.position="absolute";e.background="none";e.height="0";L.forEach(["x","y","w"],function(AJ){var AI=n[AJ];if(Y(AI)){e[r[AJ]]=AI+F;}});}var AD=k.ENUM_CORNERS,u=AD.BOTTOM_LEFT,i=AD.BOTTOM_RIGHT,h=AD.TOP_RIGHT,z=AD.TOP_LEFT;var AA=U(k,C.position(document.body),n,C.position(this.domNode)),v=AA.right,o=AA.bottom,d=AA.left,t=AA.top,y=k.alignment,p=y.popup,AH=y.host,g=p,c=AH;if(v||d){if(I(c)){c=Q(c)?h:i;}else{if(X(c)){c=Q(c)?z:u;}}if(v&&I(g)){g=Q(g)?h:i;}else{if(d&&X(g)){g=Q(g)?z:u;}}}if(o||t){if(I(c)){c=Q(c)?u:z;}else{if(X(c)){c=Q(c)?i:h;}}if(o&&Q(g)){g=I(g)?u:i;}else{if(t&&N(g)){g=I(g)?z:h;}}}if(t||v||o||d){if(B){console.log("Overflow directions: "+JSON.stringify(AA));}this._orgalgn={host:AH,popup:p};k.setAlignment(c,g);}if(!k.isHostedWithin){if(Y(n.y)&&Y(n.h)){this.hostProxy.style.top=(n.y+(N(g)?(k.alignWithAnchor===true?n.h:0):(k.alignWithAnchor===true?0:n.h)))+F;}}var x=N(c),AC=X(c),AB=N(g),m=X(g),j="auto",b="100%",a="0";var s=j,AE=j,l=j,f=j;if(AB){l=x?a:b;}else{s=x?b:a;}if(m){AE=AC?a:b;}else{f=AC?b:a;}var AF=this.domNode.style;AF.top=s;AF.right=AE;AF.bottom=l;AF.left=f;return true;},close:function O(b){if(this.onClose){this.onClose(b);}J.call(this,false);if(this.lockIWForScroll){Z.call(this,this.opener,false);}this.set("visible",false);this.set("opener",null);if(this.lockIW){K.call(this,this.lockIW,false);}E.call(this,false);var a=this._orgalgn;if(a){this.popupConfig.setAlignment(a.host,a.popup);}},buildRendering:function D(){var a=this._super();if(a){if(!this.parent&&!this.domNode.parentElement){document.body.appendChild(this.domNode);}}return a;},unrender:function S(a){if(this.popupConfig&&!this.popupConfig.isHostedWithin&&this.hostProxy){document.body.removeChild(this.hostProxy);delete this.hostProxy;}this._super(a);}};}());(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var C=1;mstrmojo._hasWidgetListMapper={buildItemWrappers:function A(H,G,F,E,J,I){E.first=J;E.last=I;return this._super(H,G,F,E,0,0);},postBuildRendering:function B(K,I,H,G,F){var J=F.first;if(J){this.fillItemWrappers(K,I,H,G,F,0,J);}if(F.last){var E=I&&I.length||0,L=Math.max(Math.max(0,E-F.last),J);this.fillItemWrappers(K,I,H,G,F,L,E);}if(this._super){this._super(K,I,H,G,F);}},fillItemWrappers:function D(F,N,K,R,M,E,I,Q){var L=(N&&N.length)||0,P=this.wrapperNodes(F),S=M.itemStatus;for(var J=E,O=Math.min(I+1,L),H=0;J<O;J++){if(S[J]!==C){var G=K.build(R,M,N[J],J);if(G){G.placeholder=P[J].firstChild;G.render();}H++;if(H===Q){break;}}}return H;},onchange:null};mstrmojo.WidgetListMapper=mstrmojo.provide("mstrmojo.WidgetListMapper",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.WidgetListMapper.RENDERED=C;mstrmojo.requiresCls("mstrmojo.ListMapperHoriz");mstrmojo.WidgetListMapperHoriz=mstrmojo.provide("mstrmojo.WidgetListMapperHoriz",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperHoriz)));})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");mstrmojo.ListMapperTable=mstrmojo.provide("mstrmojo.ListMapperTable",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table">',markupSuffix:"</table>",itemWrapperPrefix:function(E){return'<tbody class="'+this.getWrapperCss(E)+'">';},itemWrapperPrefill:"<tr><td>&nbsp;</td></tr>",itemWrapperSuffix:"</tbody>",wrapperNodes:function D(E){return this.wrapperParentNode(E).tBodies;},wrapperParentNode:function C(E){return E.getElementsByTagName("table")[0];},createWrapperNode:function B(E){var F=E.ownerDocument,G=F.createElement("tbody");return G;},findIndex:function A(G,J,I){if(J&&I){var F=G.domNode,E=this.wrapperParentNode(J),H=I.parentNode;while(H){if(H===E){return mstrmojo.array.findBin(this.wrapperNodes(J),I,"offsetTop",G.items&&G.items.length);}else{if(H===F){break;}}I=H;H=I.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.requiresCls("mstrmojo.WidgetListMapper");mstrmojo.WidgetListMapperTable=mstrmojo.provide("mstrmojo.WidgetListMapperTable",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperTable)));})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.dom","mstrmojo._IsPopup","mstrmojo._CanAutoClose");var C=mstrmojo.dom;mstrmojo.ui.PopupWidget=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.PopupWidget",markupString:'<div id="{@id}" class="mstrmojo-ui-PopupWidget {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout,click><div class="pw-content"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},autoCloses:true,locksHover:true,closeOnClick:true,visible:true,onclick:function B(D){C.stopPropogation(null,D.e);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._IsPopup","mstrmojo._CanAutoClose");function A(B){return function(){this.domNode.style[B]=this[B]||"";};}mstrmojo.Popup=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.Popup",shadowNodeCssClass:"mstrmojo-popup-shadow",titleNodeCssClass:"mstrmojo-popup-title",contentNodeCssClass:"mstrmojo-popup-content",cssDisplay:"block",markupString:'<div id="{@id}" class="mstrmojo-Popup {@cssClass}" style="{@cssText}"><div class="mstrmojo-Popup-shadow {@shadowNodeCssClass}"></div><div class="mstrmojo-Popup-title {@titleNodeCssClass}">{@title}</div><div class="mstrmojo-Popup-content {@contentNodeCssClass}"></div></div>',markupSlots:{containerNode:function(){return this.domNode.lastChild;},shadowNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onleftChange:A("left"),ontopChange:A("top"),onzIndexChange:A("zIndex")}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.Container","mstrmojo._IsPopup","mstrmojo.boxmodel","mstrmojo.dom","mstrmojo.ui._HasScroller");var L=mstrmojo.boxmodel,I=mstrmojo.dom,M=mstrmojo.css,O="mstrmojo-Tooltip",A="mstrmojo-scrollNode",E=20;function C(S,T,R){var U="connectScrollbox";if(R){U="dis"+U;}var Q=S&&S.parent;while(Q){if(Q[U]){Q[U](T);}Q=Q.parent;}}function G(){if(!this._paintHandle){var R=this.id,Q=function(V){var Z=mstrmojo.all[R];if(!Z){return ;}delete Z._paintHandle;var T=[O],a=Z.cssClass;if(a){T.push(a);}var S=mstrApp.getThemeClassName&&mstrApp.getThemeClassName(),X=Z.opener;if(X&&X.getTooltipThemeClass){S=X.getTooltipThemeClass();}T.push(S);Z.domNode.className=T.join(" ");var Y=Z.content,U=Z.contentNode,W=Z.arrowNode;U.className=(O+"-content "+A+" "+Z.contentNodeCssClass);U.style.cssText=Z.contentNodeCssText;U.innerHTML=Y;W.style.cssText="";Z.domNode.style.visibility=!!Y?"visible":"hidden";Z.updatePosition();if(!V&&Z.optimizePos){Z.optimizePos();}Z.updateScrollbars();};if(!this._hasPaint){Q(true);this._hasPaint=true;}else{this._paintHandle=window.setTimeout(Q,0);}}}function B(h,c,a,Y){var T=c&&(c.richTooltip||c.tooltip),f=a?I.getMousePosition(a,Y||self):null,Q=T&&(typeof T==="string");var U="",g="",d="",Z=T,X=null,W=mstrmojo.tooltip.POS_TOPLEFT,S=null,b=null;var V=false,R=false;if(T&&!Q){g=T.cssClass||g;U=T.contentNodeCssClass||U;d=T.contentNodeCssText||d;Z=T.content||"";X=T.refNode||X;W=T.posType||W;S=T.left||0;b=T.top||0;V=T.keepArrowXPos||V;R=T.keepArrowYPos||R;}h.set("contentNodeCssClass",U);h.set("cssClass",g);h.set("contentNodeCssText",d);h.set("content",Z);h.set("refNode",X);h.set("posType",W);h.set("left",Q?((f&&f.x)||h.left):S);h.set("top",(Q||!T)?((f&&(f.y+E))||h.top):b);h.set("keepArrowXPos",V);h.set("keepArrowYPos",R);}mstrmojo.Tooltip=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.Tooltip",content:null,top:null,left:null,refNode:null,keepArrowXPos:false,keepArrowYPos:false,posType:"TL",markupString:'<div id="{@id}" class="'+O+' {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout><div class="'+O+'-shadow {@shadowNodeCssClass}"></div><div class="'+O+'-contentWrapper"><div class="'+O+"-content "+A+' {@contentNodeCssClass}" style="{@contentNodeCssText}"></div></div><div class="'+O+'-arrow"></div></div>',markupSlots:{containerNode:function(){return this.domNode.children[1];},contentNode:function(){return this.domNode.children[1].firstChild;},shadowNode:function(){return this.domNode.firstChild;},arrowNode:function(){return this.domNode.children[2];}},setupScrollNodes:function D(){this.scrollNode=this.contentNode;this.scrollbarHostNode=this.containerNode;},_previousVisible:false,markupMethods:{onvisibleChange:function(){var R=this.domNode.style,Q=!!this.visible;if(this._previousVisible!==Q){R.visibility="hidden";}R.display=Q?"block":"none";this._previousVisible=Q;if(Q){this.updatePosition();if(this.content){G.call(this);}}},onleftChange:G,ontopChange:G,onrefNodeChange:G,onposTypeChange:G,oncontentNodeCssClassChange:G,oncontentNodeCssTextChange:G,oncontentChange:G,oncssClassChange:G},preBuildRendering:function N(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));}return this._super();},updatePosition:function H(V){if(!this.visible&&!V){return ;}var U=this.refNode,T=U?L.offset(U,document.body):{left:I.getHorizontalScroll(),top:I.getVerticalScroll()},k=this.domNode.style,e=this.containerNode,g=e.offsetWidth,Y=e.offsetHeight,R=this.posType,b=R.indexOf("R")>-1,W=R.indexOf("B")>-1,a=this.top!==null?parseInt(this.top,10)+T.top-(W?Y:0):null,S=this.left!==null?parseInt(this.left,10)+T.left-(b?g:((R.indexOf("C")>-1)?Math.floor(g/2):0)):null,i=false,Z=false,c,X,h=I.windowDim(),f=I.getHorizontalScroll()+h.w,Q=I.getVerticalScroll()+h.h,d=this.arrowNode,j=null;if(S!==null){c=Math.min(Math.max(S,0),f-g);k.left=c+"px";i=S!==c;}if(a!==null){X=Math.min(Math.max(a,0),Q-Y);k.top=X+"px";Z=a!==X;}if(i||Z){if((this.keepArrowXPos&&i)||(this.keepArrowYPos&&Z)){j=M.getComputedStyle(d);}if(this.keepArrowXPos&&i){d.style.left=(parseInt(j.left,10)+S-c)+"px";}if(this.keepArrowYPos&&Z){d.style.top=(parseInt(j.top,10)+a-X)+"px";}}M.toggleClass(this.domNode,"offset",i||Z);},_on_tooltip_change:function(Q){B(this,Q&&Q.src);},_set_opener:function(T,S){var R=this.opener,Q=S!==R;if(Q){if(S){C(S,this);}if(R){C(S,this,true);}if(R&&R.detachEventListener){R.detachEventListener(this._richSubs);R.detachEventListener(this._ttpSubs);}if(S&&S.attachEventListener){this._richSubs=S.attachEventListener("richTooltipChange",this.id,"_on_tooltip_change");this._ttpSubs=S.attachEventListener("tooltipChange",this.id,"_on_tooltip_change");}this.opener=S;}return Q;},updatePopupConfig:function(Q,R){B(this,R,Q&&Q.e,Q&&Q.win);},onscroll:function K(){if(this.visible&&this.nudge){this.nudge();}this._super();},onmouseover:mstrmojo.emptyFn,onmouseout:mstrmojo.emptyFn});var J=null;mstrmojo.tooltip={POS_TOPLEFT:"TL",POS_BOTTOMLEFT:"BL",POS_TOPRIGHT:"TR",POS_BOTTOMRIGHT:"BR",POS_BOTTOMCENTER:"BC",POS_TOPCENTER:"TC",open:function F(R,T,S,Q){if(!J||!mstrmojo.all[J.id]){J=new mstrmojo.Tooltip();}Q=Q||{};Q.e=T;Q.win=S;J.open(R,Q);R.tooltip=J;},close:function P(){if(J){if(J.opener){J.opener.tooltip=null;}J.close();}}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.dom","mstrmojo.func","mstrmojo.vi.controllers.UICmdMgr");var R=mstrmojo.func,N=mstrmojo.hash,K=mstrmojo.array,H=mstrmojo.vi.controllers.UICmd.STATES,F={SHARED:0,SEPARATE:1},I={AND:19,OR:20},X=function X(b,a){var Y={},Z=function(e,d){var c=[];if(!d){return e;}K.forEach((d||[]),function(f){c.push(f);});K.forEach((e||[]),function(g){var f=K.find(d,"id",g.id);if(!~f){c.push(g);}});return c;};N.forEach(a,function(c,d){Y[d]=c;});N.forEach(b,function(c,d){Y[d]=Z(c,a[d]);});return Y;},D=function D(Y){var Z=[];N.forEach(Y,function(a){Z.push({ft:I.AND,d:a});});return Z;},G=function(Z){var Y={},a=function(b){var c=N.keyarray(b)[0];return{id:c,d:b[c][0]};};N.forEach(Z,function(e){var d={},b=a(e),c=d[b.id];if(b.id){if(!c){d[b.id]=c=[];}c.push(b.d);}Y=X(Y,d);},this);return[{ft:I.OR,d:Y}];},C=function C(e){var a=this.model,d,c=[],Z=this.getSelectionType(),Y=mstrmojo.vi.ui.rw.SelectionType,f=true,b=false;if(!N.isEmpty(e)){if(Z===Y.METRICS){d=D.call(this,e);}else{d=G.call(this,e);}}N.forEach(d,function(g){f=false;var h=[];N.forEach(g.d,function(i,m){if(a.supportsViewFilterActions(m)){b=true;var j=[],l={id:m,elems:j},k=a.getObjectInfo(m);if(k){l.t=k.t;l.st=k.st;if(k.st===12033){l.attId=k.attId;}}K.forEach((i||[]),function(n){j.push(n.id);});h.push(l);}});if(h.length){c.push({ft:g.ft,d:h});}});c.hasElements=b;c.clearSelections=f;return c;},U=function U(b){var c=this.selectorControl,Z,Y,a=this;if(c){if(b.clearSelections||b.hasElements){Z=this.controller;c.exp=null;if(Z.onGridSelector){Y=function(){Z.onGridSelector(a,{type:mstrmojo.EnumRWUnitType.GRID,ck:c.ck,tks:c.tks,ctlKey:c.ckey,sliceId:this.sid,isUConDS:c.isUConDS,ct:c.ct,selections:b});};if(this.multiUnitCtrlInterval){window.clearInterval(this.multiUnitCtrlInterval);this.multiUnitCtrlInterval=null;}if(Z.cmdMgr.state===H.BUSY){this.multiUnitCtrlInterval=window.setInterval(function(){if(Z.cmdMgr.state!==H.BUSY){window.clearInterval(a.multiUnitCtrlInterval);if(!a.destroyed){a.multiUnitCtrlInterval=null;Y();}}},1000);}else{Y();}}}}},B=function B(a){var Y={type:mstrmojo.vi.ui.rw.SelectionType.ATTS,data:a},Z=function(b,c){if(parseInt(b.fn,10)===22&&parseInt(c,10)===19){Y.type=mstrmojo.vi.ui.rw.SelectionType.METRICS;}K.forEach((b.nds||[]),function(d){Z(d,b.fn);});};Z(a,null);return Y;},V=function V(){return this.parent.model.getCurrentLayoutDef().cgbMap;},J=function J(){var Y=V.call(this),Z=[];N.forEach(Y,function(b,a){if(this.k===b){Z.push(a);}},this);return Z;},W=function W(){var Y=this.controller&&this.controller.cmdMgr;if(Y&&Y.isUndoRedo()){return true;}return false;};mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl",{_mixinName:"mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl",selectorControl:null,multiUnitCtrlInterval:null,postBuildRendering:function S(){this._super&&this._super();var Y=this.findSelectorControl();if(W.call(this)){this.clearSelections();}if(Y&&!N.isEmpty(Y.exp)&&this.addSelectionsFromExpression){this.addSelectionsFromExpression(B(Y.exp));if(this.highlight){this.highlight(this.getSelectionType(),this.getSelectionHash(),true);}}},findSelectorControl:function Q(){if(this._super){return this._super();}else{this.throwAbstractMethodError("findSelectorControl");}},handlesMultiSelection:function E(Y){return(this._super&&this._super(Y))||!!this.selectorControl;},onSelectionChange:function L(Z){var b=(this.model.getSelectorControlMapInfo?this.model.getSelectorControlMapInfo():[]),a=false;if(this._super){a=this._super(Z);}if(b.length>0){this.singleUnitSelect();a=true;}else{if(!!this.selectorControl){var Y=C.call(this,Z);U.call(this,Y);return true;}}return a;},singleUnitSelect:function A(){if(this._super){this._super();}},clearAllSelections:function P(){return this.selectorControl&&this.selectorControl.showall;},onClearBrushing:function T(Y){if(this.selectorControl){return true;}if(this._super){return this._super(Y);}return false;},getFilterType:function M(){return this.defn.ins||F.SHARED;},switchFilterType:function O(i){var f=this,h,g=f.getFilterType(),d=f.parent.model,c,b={actions:[]},j,a=V.call(f),Y,e=false;if(g!==i){h=J.call(f);if(h.length>0&&g===F.SHARED){j=h[0];c=d.getSourceControls(f.parent,j);K.forEach(c,function(l,m){if(m!==0){Y=d.getNextKey();a[Y]=f.k;b.actions.push(d.redoFilterAssociations(true,l.control.ckey,l.sourceKey,f.k,j,Y));e=true;}}.bind(f));}else{var Z;K.forEach(h,function(l,m){c=d.getSourceControls(f.parent,l);if(m===0){Z=l;}else{delete a[l];b.actions.push(d.redoFilterAssociations(false,c[0].control.ckey,c[0].sourceKey,f.k,l,Z));e=true;}}.bind(f));}b.actions.push(d.getUnitFormatAction(f,1,{FormattingSelector:{IndependentNodeSelector:i}},true));var k=false;b.callback=({success:function(){f.defn.ins=k?g:i;k=!k;}});if(e){b.callback=R.wrapMethods(b.callback,d.getRebuildCallback());}}b.extras={style:{params:{treesToRender:3}}};return b;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ConditionNode","mstrmojo.dom");var B=mstrmojo.dom;mstrmojo.threshold.ConditionNode=mstrmojo.declare(mstrmojo.ConditionNode,null,{scriptClass:"mstrmojo.threshold.ConditionNode",emptyText:mstrmojo.desc(5893,"New Condition"),cssClass:"adv-threshold",avatarCssCls:"mstrmojo-thresholdRow",markupString:'<div id="{@id}" class="mstrmojo-cond mstrmojo-ConditionNode {@cssClass} mstrAttach:mousedown"><div class="mstrmojo-onhoverparent mstrmojo-cond-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-onhoverparent mstrmojo-cond-contents {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-text {@cssClass}" mstrAttach:click></span><span class="mstrmojo-cond-text-postfix {@cssClass}"></span><span class="mstrmojo-rel mstrmojo-cond-popupNode {@cssClass}"></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" tooltip="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" /></span><span class="mstrmojo-add-cond" mstrAttach:click>'+mstrmojo.desc(1994,"Add Condition")+"</span></div></div>",markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},condNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.childNodes[1].firstChild;},textPostfixNode:function(){return this.domNode.childNodes[1].childNodes[1];},popupNode:function(){return this.domNode.childNodes[1].childNodes[2];},addConditionNode:function(){return this.domNode.childNodes[1].childNodes[4];}},preclick:function A(C){var F=null,E=B.eventTarget(C.hWin,C.e),D=this._super(C);if(B.contains(this.addConditionNode,E,true)){F="addCondition";}C.part=F||C.part;return D;},onmouseover:function(){this.toggleGroupBorder(true);},onmouseout:function(){this.toggleGroupBorder(false);}});})();(function(){mstrmojo.requiresCls("mstrmojo.ConditionNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo.dom","mstrmojo.css");var A=mstrmojo.dom,B=mstrmojo.css,D=mstrmojo.fe._IsRelationTreeNode.createSetHtml;mstrmojo.fe.ConditionNode=mstrmojo.declare(mstrmojo.ConditionNode,[mstrmojo.fe._IsRelationTreeNode],{scriptClass:"mstrmojo.fe.ConditionNode",emptyText:mstrmojo.desc(5893,"New Condition"),markupString:'<div id="{@id}" class="mstrmojo-cond mstrmojo-ConditionNode {@cssClass}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-cond-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-onhoverparent mstrmojo-cond-contents {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-text {@cssClass}" mstrAttach:click></span><span class="mstrmojo-cond-text-postfix {@cssClass}"></span><span class="mstrmojo-rel mstrmojo-cond-popupNode {@cssClass}"></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topright mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" tooltip="'+mstrmojo.desc(7931,"Delete condition")+'" onclick="mstrmojo.all[\'{@id}\'].del()" /></span><span class="mstrmojo-add-cond" mstrAttach:click>'+mstrmojo.desc(1994,"Add Condition")+"</span>"+D+"</div></div>",getPrefixAndOrToolsMarkup:function(){return(D+this._super());},markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},condNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.childNodes[1].firstChild;},textPostfixNode:function(){return this.domNode.childNodes[1].childNodes[1];},popupNode:function(){return this.domNode.childNodes[1].childNodes[2];},createSetNode:function(){return this.domNode.childNodes[1].lastChild;},createSetOptNode:function(){return this.domNode.firstChild.childNodes[1].firstChild;},addConditionNode:function(){return this.domNode.childNodes[1].childNodes[4];}},markupMethods:mstrmojo.hash.copy({onnoRelationOperatorChange:function(){B.toggleClass(this.prefixHoverNode,["noRelation"],this.noRelationOperator);},onnoRelationChange:function(){B.toggleClass(this.condNode,["noRelation"],this.noRelation);},onnoCreateSetChange:function(){B.toggleClass(this.condNode,["noRelation"],this.noCreateSet);}},mstrmojo.hash.copy(mstrmojo.ConditionNode.prototype.markupMethods)),init:function(E){if(this._super){this._super(E);}var F=this.data&&this.data.et;if(F){this.set("noCreateSet",F===10||F===12);}},preclick:function C(E){var H=null,G=A.eventTarget(E.hWin,E.e),F=this._super(E);if(A.contains(this.createSetOptNode,G,true)&&!this.noRelationOperator&&!this.noRelation){H="createSetOpt";}else{if(A.contains(this.createSetNode,G,true)&&!this.noRelation){H="createSet";}else{if(A.contains(this.addConditionNode,G,true)){H="addCondition";}}}E.part=H||E.part;return F;},onmouseover:function(){this.toggleGroupBorder(true);},onmouseout:function(){this.toggleGroupBorder(false);}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapperHoriz","mstrmojo.ListBuilder");mstrmojo.ListHoriz=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.ListHoriz",renderOnScroll:true,listMapper:mstrmojo.ListMapperHoriz,listBuilder:mstrmojo.ListBuilder,itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapper","mstrmojo.ListBuilder","mstrmojo.ListSelector");mstrmojo.List=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.List",renderOnScroll:true,listMapper:mstrmojo.ListMapper,listBuilder:mstrmojo.ListBuilder,listSelector:mstrmojo.ListSelector,itemIdField:"dssid",itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2");function B(E){var I=E.ctxtBuilder;if(I){var H=I.itemWidgets,G;for(G=H.length-1;G>-1;G--){var F=H[G];if(F){F.destroy(true);}}}}mstrmojo.WidgetListBase=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.WidgetListBase",unrender:function C(G){var I=this.ctxtBuilder;if(I){var H=I.itemWidgets,F;for(F=H.length-1;F>-1;F--){var E=H[F];if(E&&E.hasRendered){E.unrender(true);}}}this._super(G);},refresh:function A(E){B(this);if(this._super){this._super(E);}},destroy:function D(E){B(this);this._super(E);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.css");var F="",B="row-",E=mstrmojo.css.DISPLAY_TABLE;mstrmojo.Table=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Table",cellCssClass:"",rows:-1,cols:-1,_trows:-1,cellPadding:0,cellSpacing:0,layout:null,markupString:'<table id="{@id}" class="mstrmojo-Table {@cssClass}" style="{@cssText}" cellpadding="{@cellPadding}" cellspacing="{@cellSpacing}">{@tableHtml}</table>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?E:"none";}},preBuildRendering:function G(){var I=[],P=this.cellCssClass;if(this.layout){var Q=this._trows=this.layout.length;for(var K=0;K<Q;K++){var H=this.layout[K],R=H.cells,O=R.length,L=[];for(var J=0;J<O;J++){var N=R[J],M="";M+=((N.cssClass||P)?' class="'+(N.cssClass||P)+'"':"");M+=(N.cssText?' style="'+N.cssText+'"':"");M+=(N.rowSpan?' rowspan="'+N.rowSpan+'"':"");M+=(N.colSpan?' colspan="'+N.colSpan+'"':"");L[J]="<td"+M+"></td>";}var S="";S+=(H.cssClass?' class="'+H.cssClass+'"':"");S+=(H.cssText?' style="'+H.cssText+'"':"");I[K]="<tr"+S+">"+L.join("")+"</tr>";}}else{this._trows=this.rows;var M=(P?' class="'+P+'"':""),L=[];for(var K=0;K<this.rows;K++){for(var J=0;J<this.cols;J++){L[J]="<td"+M+"></td>";}I[K]="<tr>"+L.join("")+"</tr>";}}this.tableHtml=I.join("");if(this._super){this._super();}},postBuildRendering:function C(){if(this._trows){var M={},I=this.containerNode.rows,N=I.length;for(var L=0;L<N;L++){var K=I[L].cells,H=K.length;M[B+L]=I[L];for(var J=0;J<H;J++){M[F+L+","+J]=K[J];}}this.addSlots(M);}this._super();},childRenderCheck:function D(I){if(I&&!I.hasRendered){var H=I.slot||this.defaultChildSlot;return !!this[H]||H.match(/^([\d]+),([\d]+)$/);}return false;},on_child_change_rendering:function A(L){var H=(L&&L.src)||L,O=H&&H.domNode;if(O){var U=H.slot;if(!this[U]){var M=U&&U.match(/^([\d]+),([\d]+)$/);if(M){var R=parseInt(M[1],10),V=parseInt(M[2],10),Q=this.containerNode,T=this[(B+R)],N=[];if(!T){var J=Q.rows,S=J&&J.length||0;for(var K=S;K<=R;K++){N[B+K]=Q.insertRow();}T=N[B+R];}var P=T.cells&&T.cells.length||0;for(var K=P;K<=V;K++){var I=T.insertCell(K);N[F+R+","+K]=I;if(this.cellCssClass){I.className=this.cellCssClass;}}this.addSlots(N);}}}this._super(L);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout");var D=' style="display:inline-block;vertical-align:middle;"';mstrmojo.ui.editors.controls.TwoColumnContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",markupString:'<div id="{@id}" class="mstrmojo-vi-TwoColumnProp {@cssClass}" style="{@cssText}"><div class="vi-col1"'+D+'></div><div class="divider"'+D+'></div><div class="vi-col2"'+D+"></div></div>",markupSlots:{col1Node:function C(){return this.domNode.firstChild;},dividerNode:function B(){return this.domNode.childNodes[1];},col2Node:function A(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Container.enabledMarkupMethod},layoutConfig:{w:{col1Node:"40%",dividerNode:"5px",col2Node:"60%"},xt:true},shouldPropagateEnabled:true,col1Width:"40%",dividerWidth:"5px",col2Width:"60%",init:function F(G){this._super(G);var H=this.layoutConfig=JSON.parse(JSON.stringify(this.layoutConfig)),I=H.w;I.col1Node=this.col1Width;I.dividerNode=this.dividerWidth;I.col2Node=this.col2Width;},getControl:function E(G){return(this.children||[]).filter(function(H){return H.slot==="col"+G+"Node";})[0];}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var B=mstrmojo.func,C=mstrmojo.dom,F="mstrmojo-popup-widget-hosted";mstrmojo.ui.PopupButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.ui.PopupButton",onPopupWidgetClosed:mstrmojo.emptyFn,onPopupWidgetOpened:mstrmojo.emptyFn,anchorSlot:"domNode",isHostedWithin:true,hostedCSSClass:"",destroy:function H(L){if(this._listenerProc){C.detachEvent(window,"resize",this._listenerProc);}this._super(L);},getPopupWidget:mstrmojo.emptyFn,postCreateChildren:function D(){var L=this.getPopupWidget();if(!L||L._pbCfg){return ;}var M=function M(O,N){return function(){O.apply(N,arguments);};};L.onOpen=B.composite([M(this.onPopupWidgetOpened,this),L.onOpen||mstrmojo.emptyFn]);L.onClose=B.composite([M(this.onPopupWidgetClosed,this),L.onClose||mstrmojo.emptyFn]);L._pbCfg=true;},onclick:function K(L){var N=L.getTarget();if(N===this[this.anchorSlot]||N.parentNode===this[this.anchorSlot]){var M=this.getPopupWidget();if(!M.visible){this.openPopup(M);}else{this.closePopup();}}},onPopupAutoClosed:function I(M,L){if(C.contains(this[this.anchorSlot],C.eventTarget(L,M),true)){return false;}},getPopupHostNode:function J(){return this.containerNode;},getPopupConfig:function G(){var M=[F],L=this.hostedCSSClass;if(L){M.push(L);}return new mstrmojo.ui.PopupConfig({hostId:this.id,hostElement:this.getPopupHostNode(),anchorElement:this[this.anchorSlot],isHostedWithin:this.isHostedWithin,hostProxyCssClass:M.join(" ")});},unrender:function E(L){if(this._listenerProc){C.detachEvent(window,"resize",this._listenerProc);delete this._listenerProc;}this._super(L);},postBuildRendering:function A(){var P=this.getPopupWidget();if(P){var R=this.getPopupConfig();if(!R.isHostedWithin){var N=this.parent||this.opener,M=R.hostProxyCssClass.split(" ");M.push(this.domNode.className);while(N){var Q=N.themeClassName;if(Q){M.push(Q);break;}N=N.parent||N.opener;}R.hostProxyCssClass=M.join(" ");}P.popupConfig=P.addDisposable(R);}var L=P.id,O=this._listenerProc=function(){var S=mstrmojo.all[L];if(S&&S.visible&&S.adjustCornersForPopupOverflow){S.adjustCornersForPopupOverflow();}};if(this.isHostedWithin===false){C.attachEvent(window,"resize",O);}return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.Container");mstrmojo.VBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.VBox",markupString:'<table id="{@id}" class="mstrmojo-VBox {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0"><tr><td></td></tr></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container");var A=mstrmojo.Widget;mstrmojo.Box=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Box",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:A.visibleMarkupMethod,onheightChange:A.heightMarkupMethod,onwidthChange:A.widthMarkupMethod}});}());(function(){mstrmojo.requiresCls("mstrmojo.color","mstrmojo.dom","mstrmojo.css","mstrmojo._HasOwnAvatar","mstrmojo.Container","mstrmojo.threshold.ThresholdModel");var Q=mstrmojo.color,F=mstrmojo.dom,I=mstrmojo.css;function G(T){var S=this.parent,R=S.width,U=Math.min(Math.max(T.last.x-F.position(this.domNode).x,0),R-1);return U/R;}mstrmojo.threshold.MarkersNode=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.threshold.MarkersNode",cssClass:"markers",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}"  mstrAttach:click,mousedown,mouseover,mouseout></div>',markupSlots:{containerNode:function D(){return this.domNode;}},dropZone:true,draggable:true,avatarCssClass:"marker-drag-avatar",addMarker:function J(R){this.parent.parent.switchToCustomScheme();var V=this.parent,T=F.position(this.containerNode).w,S=V.getPalette(),X=V.addMarkerToMap(R/T),U=S.length;if(U===(X+1)){X--;}var Y=S[X+1],W=X===-1?Y:S[X];S.splice(X+1,0,Q.findMidColorHex(W,Y));V.update();},remove:function H(T){var S=this.parent.getComp(),R=this.parent.getPalette();S.splice(T,1);R.splice(T+1,1);},onclick:function O(S){if(this.parent.sliderMode===mstrmojo.threshold.ThresholdModel.SLIDER_MODE.COLOR_BASED&&S.getTarget()===this.domNode){var T=F.position(this.containerNode),R=S.e.clientX-T.x;this.addMarker(R);}},premousedown:function N(){this.parent.unselectAll();},createAvatar:function B(U,T){var S;for(S=0;S<this.children.length;S++){if(this.children[S].id===U.id){T.tgtNode=this.children[S];T.i=S;}}var R=U.cloneNode(true),V=document.createElement("div");I.addClass(V,"bar");R.appendChild(V);return R;},positionAvatar:function L(X){var R=this.avatar,T=R.style,V=this.restrictedToAxis,S=F.position(this.domNode),U=S.y;if(R){if(V!=="y"){var W=X.x;if(W<S.x){W=S.x;}if(W>S.x+S.w){W=S.x+S.w-1;}T.left=W-2+"px";}if(V!=="x"){T.top=U+"px";}}},isDragValid:function K(R){return R.src.node!==this.domNode;},ondragstart:function C(S){this._super(S);var R=this.parent.getComp();this.removeChildren(this.children[S.i]);R.splice(S.i,1);},ondragmove:function A(R){this._super(R);this.parent.editableBubble.showBubble(G.call(this,R));},ondragend:function E(T){var S=this.parent,R=S.addMarkerToMap(G.call(this,T));S.update();this.children[R].set("selected",true);this._super(T);},onmouseover:function P(S){if(this.parent.sliderMode===mstrmojo.threshold.ThresholdModel.SLIDER_MODE.COLOR_BASED&&!this._cursorAvatar){var V=document,U=this.domNode,T=this._cursorAvatar=V.createElement("div"),R=this._mouseMoveHandler=function(Z){var Y=F.eventTarget(self,Z),X=F.getMousePosition(Z,self),W=T.style;W.top=X.y+12+"px";W.left=X.x+12+"px";W.display=(Y===U&&mstrApp.isInteractive())?"block":"none";};V.body.appendChild(T);I.addClass(T,"mstrmojo-SimpleThresholdEditor add-cursor");F.attachEvent(U,"mousemove",R);}if(this._super){return this._super(S);}},onmouseout:function M(R){if(this.parent.sliderMode===mstrmojo.threshold.ThresholdModel.SLIDER_MODE.COLOR_BASED){F.detachEvent(this.domNode,"mousemove",this._mouseMoveHandler);var S=this._cursorAvatar;S.parentNode.removeChild(S);delete this._cursorAvatar;delete this._mouseMoveHandler;}if(this._super){return this._super(R);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom");var M=mstrmojo.Widget,G=mstrmojo.dom,N=mstrmojo.global.document,C=50,B=500;mstrmojo.Stepper=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Stepper",orientation:"vertical",provider:null,title:"",markupString:'<div id="{@id}" class="mstrmojo-Stepper {@orientation} {@cssClass}" mstrAttach:click,mousedown,selectstart><div class="title">{@title}</div><div class="next">+</div><div class="text">{@itemHtml}</div><div class="prev">-</div></div>',markupSlots:{titleNode:function(){return this.domNode.firstChild;},nextNode:function(){return this.domNode.children[1];},textNode:function(){return this.domNode.children[2];},prevNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:M.visibleMarkupMethod,onheightChange:M.heightMarkupMethod,onwidthChange:M.widthMarkupMethod,onenabledChange:function I(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);}},preBuildRendering:function J(){this.itemHtml=this.provider.renderItemAt();this._super();},processEvent:function A(O){if(G.contains(this.textNode,O)||O===this.titleNode){return ;}var Q=this.provider,P=((O===this.nextNode)?"Next":"Prev");if(Q["has"+P]()){Q[P.toLowerCase()]();this.updateDisplayText();}},updateDisplayText:function E(){this.textNode.innerHTML=this.provider.renderItemAt();},startStepperInterval:function F(O,P){var Q=this;this._holdTimer=setInterval(function(){Q[P](O);},C);},stopStepperInterval:function H(){if(this._holdTimer){clearInterval(this._holdTimer);delete this._holdTimer;}},onclick:function L(O){this.processEvent(O.e.target);},onmousedown:function D(O){if(!this._holdTimer&&!this._startHoldTimer){var P=this;this._startHoldTimer=setTimeout(function(){delete P._startHoldTimer;P.startStepperInterval(O,"onclick");},B);G.attachOneTimeEvent(N,"mouseup",function(){if(P._startHoldTimer){clearTimeout(P._startHoldTimer);delete P._startHoldTimer;}P.stopStepperInterval();},true);}},onselectstart:function K(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Widget","mstrmojo.css","mstrmojo.dom");var Y=mstrmojo.css,F=mstrmojo.dom;var Z={9:"Tab",13:"Enter",27:"Esc",38:"ArrowUp",40:"ArrowDown"};function A(){var c=this.value,b=this.inputNode,d=b.value,a=(c!==null&&c!==undefined)?String(c):"";if(a!==d&&(!this.keepEmpty||d!==this.emptyText)){b.value=a;}if(b.mstrmojoEmpty){Y.removeClass(b,[this.emptyClass]);b.mstrmojoEmpty=null;}}function X(){var a=this.inputNode;a.value=this.emptyText||"";Y.addClass(a,[this.emptyClass]);a.mstrmojoEmpty=true;}function N(){var a=this.inputNode;if(a){this.readingDom=true;this.set("value",a.value);this.readingDom=false;}}function U(a){var b=this;if(a===-1){N.call(this);}else{if(this._lastTimeoutId){window.clearTimeout(this._lastTimeoutId);}this._lastTimeoutId=window.setTimeout(function(){delete b._lastTimeoutId;N.call(b);},a||100);}}mstrmojo.TextBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.TextBox",value:"",type:"text",hint:"",readOnly:false,size:"",maxLength:"",cssDisplay:"inline",tabIndex:"",emptyText:"",keepEmpty:false,emptyClass:"mstrmojo-empty",valueChangeDelay:-1,textValid:true,autoComplete:true,autoCorrect:true,autoCapitalize:true,markupString:'<input id="{@id}" class="mstrmojo-TextBox {@cssClass}"  style="{@cssText}" title="{@tooltip}" type="{@type}" value="" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}"min="{@min}" max="{@max}" placeholder="{@hint}" mstrAttach:focus,keyup,blur,paste,cut,input,click,keydown  tstid="{@tstid}"/>',markupSlots:{inputNode:function D(){return this.domNode;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,oncssClassChange:function S(){this.inputNode.className="mstrmojo-TextBox "+(this.cssClass||"");},onhintChange:function O(){this.inputNode.setAttribute("placeholder",this.hint);},onenabledChange:function E(){var a=this.inputNode;a.disabled=!this.enabled;Y.toggleClass(a,"disabled",!this.enabled);},onvalueChange:function P(){var a=this.value,b=(a===undefined)||(a===null)||(a==="");if(b){if(!this.hasFocus){X.call(this);}else{this.inputNode.value="";}}else{A.call(this);}if(F.isIE9){this.inputNode.type=b?"text":this.type;}},ontooltipChange:function R(){this.domNode.title=this.tooltip;},onreadOnlyChange:function H(){this.inputNode.readOnly=this.readOnly;},ontextValidChange:function B(){Y.toggleClass(this.inputNode,["err"],!this.textValid);}},postBuildRendering:function V(){this._super();var a=this.inputNode;a.setAttribute("autocomplete",this.autoComplete?"on":"off");a.setAttribute("autocorrect",this.autoCorrect?"on":"off");a.setAttribute("autocapitalize",this.autoCapitalize?"on":"off");},focus:function Q(){if(this.inputNode&&this.inputNode.offsetParent){try{this.inputNode.focus();}catch(a){}}},prefocus:function M(){this.hasFocus=true;A.call(this);},blur:function T(){this.inputNode.blur();},preblur:function W(){window.setTimeout(function(){},200);this.hasFocus=false;N.call(this);var a=this.value;if(((a===null||a==="")&&this.emptyText)||(this.keepEmpty&&a===this.emptyText)){X.call(this);}},prekeyup:function I(b){var a=b.hWin,c=b.e||a.event;U.call(this,this.valueChangeDelay);var d=Z[c.keyCode];if(this["on"+d]){this["on"+d](b);}},preinput:function J(){U.call(this,this.valueChangeDelay);},prepaste:function K(){U.call(this);},precut:function G(){U.call(this);},setInvalidState:function C(a){this.set("textValid",true);if(a){this.domNode.setAttribute("title",a);}},cleanUp:function L(){this.inputNode.value="";this.set("textValid",false);this.domNode.setAttribute("title",this.tooltip);}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.Container");var D="slot";mstrmojo.HBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.HBox",cellCssClass:"",cellSpacing:0,cellPadding:0,markupString:'<table id="{@id}" class="mstrmojo-HBox {@cssClass}" style="{@cssText}" cellspacing="{@cellSpacing}" cellpadding="{@cellPadding}">{@colHTML}<tr>{@tableHtml}</tr></table>',colHTML:"",markupSlots:{containerNode:function(){return this.domNode.rows[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},buildRendering:function B(){this.tableHtml="";var N=[],F=this.children,K=(F&&F.length)||0,I;if(K){var G=0,J=this.cellCssClass?' class="mstrmojo-HBox-cell '+this.cellCssClass+'" ':"",M="<td "+J+"></td>";for(I=0;I<K;I++){N[G++]=M;F[I].slot=D+I;}this.tableHtml=N.join("");}this._super();if(K){var L={},H=this.containerNode.cells;for(I=0;I<K;I++){L["slot"+I]=H[I];}this.addSlots(L);}},addChildren:function E(K,F,G){if(!K){return K;}if(F===undefined||isNaN(F)||F<0){var J=this.children;F=(J&&J.length)||0;}var I=0,H;if(K.constructor===Array){for(I=0,H=K.length;I<H;I++){K[I].slot=D+(F+I);}}else{K.slot=D+F;}return this._super(K,F,G);},childRenderCheck:function C(G){if(G&&!G.hasRendered){var F=G.slot||this.defaultChildSlot;return !!this[F]||F.match(/^slot[\d]+$/);}return false;},onchildRenderingChange:function A(I){var F=(I&&I.src)||I,L=F&&F.domNode;if(L){var Q=F.slot;if(!this[Q]){var J=Q&&Q.match(/^slot([\d]+)$/);if(J){var O=parseInt(J[1],10),N=this.containerNode,P=N.cells,M=(P&&P.length)||0,K={};for(var H=M;H<=O;H++){var G=N.insertCell(H);K["slot"+H]=G;if(this.cellCssClass){G.className=this.cellCssClass;}}this.addSlots(K);}}}this._super(I);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout");var D=' style="display:inline-block;vertical-align:middle;"';mstrmojo.ui.editors.controls.ThreeColumnContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.ThreeColumnContainer",markupString:'<div id="{@id}" class="mstrmojo-vi-ThreeColumnProp {@cssClass}" style="{@cssText}"><div class="vi-col1"'+D+'></div><div class="divider1"'+D+'></div><div class="vi-col2"'+D+'></div><div class="divider2"'+D+'></div><div class="vi-col3"'+D+"></div></div>",markupSlots:{col1Node:function C(){return this.domNode.firstChild;},divider1Node:function H(){return this.domNode.childNodes[1];},col2Node:function A(){return this.domNode.childNodes[2];},divider2Node:function B(){return this.domNode.childNodes[3];},col3Node:function E(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Container.enabledMarkupMethod},layoutConfig:{w:{col1Node:"30%",divider1Node:"5px",col2Node:"30%",divider2Node:"5px",col3Node:"40%"},xt:true},shouldPropagateEnabled:true,col1Width:"30%",divider1Width:"5px",col2Width:"30%",divider2Width:"5px",col3Width:"40%",init:function G(I){this._super(I);var J=this.layoutConfig=JSON.parse(JSON.stringify(this.layoutConfig)),K=J.w;K.col1Node=this.col1Width;K.divider1Node=this.divider1Width;K.col2Node=this.col2Width;K.divider2Node=this.divider2Width;K.col3Node=this.col3Width;},getControl:function F(I){return(this.children||[]).filter(function(J){return J.slot==="col"+I+"Node";})[0];}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var D=function(){var F=this.opener;if(F.direction.toLowerCase()==="up"){this.domNode.style.top=-F.domNode.offsetHeight+"px";}};mstrmojo.DropDownButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DropDownButton",height:"19px",text:"",direction:"down",enabled:true,title:"",markupString:'<div id="{@id}" class="mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><div class="mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode">{@text}</div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.firstChild.firstChild;},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onheightChange:function(){this.boxNode.style.height=this.height||"";},ontextChange:function(){this.iconNode.innerHTML=this.text;},ontitleChange:function(){this.boxNode.title=this.title;},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},preBuildRendering:function B(){if(this._super){this._super();}var F=this.popupRef;if(F){if(F.nudge){F.nudge=mstrmojo.func.composite([F.nudge,D]);}else{if(this.direction.toLowerCase()!=="down"){F.nudge=D;}}}},popupRef:null,popupOpenConfig:null,destroy:function C(F){var G=this.popupRef;if(G&&G.hasRendered){G.destroy(false);}if(this._super){this._super(F);}},togglePopup:function E(){var F=this._lastOpened;if(F&&F.visible){this.closePopup();}else{this.openPopup("popupRef",this.popupOpenConfig);}},premousedown:function A(F){this.togglePopup();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.css","mstrmojo.hash");var H=mstrmojo.css,D=mstrmojo.hash,B="glow";var F=mstrmojo.android.ui.Button=mstrmojo.declare(mstrmojo.Button,[mstrmojo._TouchGestures],{scriptClass:"mstrmojo.android.ui.Button",onclick:mstrmojo.emptyFn,touchBegin:function E(){if(this.enabled){H.addClass(this.domNode,B);}},touchTap:function C(J){if(this.enabled){this.onclick({e:J.evt});}},touchSelectBegin:mstrmojo.emptyFn,touchSelectEnd:function A(J){if(this.enabled){this.onclick({e:J.evt});}},touchEnd:function I(){H.removeClass(this.domNode,B);}});F.prototype.markupString=F.prototype.markupString.replace(new RegExp(" mstrAttach:[a-zA-Z,]*"),"");F.newButton=function G(M,L,K){var J={scriptClass:"mstrmojo.android.ui.Button",text:M};if(L){J.onclick=L;}D.copy(K,J);return J;};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Button","mstrmojo.EnumRWUnitType","mstrmojo.vi.models.VIComponentMap","mstrmojo.VisEnum");mstrmojo.requiresDescs(14292,14293,14607);var F=mstrmojo.array,B=12,A=1,E=2,D=mstrmojo.Button.newWebButton,C=mstrmojo.vi.models.VIComponentMap.TYPES;mstrmojo.vi.models._CheckDataCards=mstrmojo.provide("mstrmojo.vi.models._CheckDataCards",{_mixinName:"mstrmojo.vi.models._CheckDataCards",CARDLIMIT:mstrmojo.VisEnum.VIS_CARDLIMIT.NON_GRID,isUnitRestrictedInViz:function(){var G=this.docModel,H=[],I=G.getVIComponent(C.FILTER_PANEL),J=I&&I.parent;H=H.concat((J&&J.getFilterDefinitions())||[]);return H.length;},_addInLargeItems:[],_columnCardinalityCount:1,clearCardinalityFlags:function(){this._addInLargeItems=[];this._columnCardinalityCount=1;},existLargeOrManyItems:function(){return(!!this._addInLargeItems.length||this._columnCardinalityCount>this.CARDLIMIT);},findTotalColumnCount:function(L,M){var N=this,P,I=1,K=0,O=this.getHost().gridData;N._columnCardinalityCount=1;if(O){if(M&&M.id===A){var G=O.rw,Q=G&&G.row;N._columnCardinalityCount=(Q&&Q.tc)||1;return ;}var H=O.ghs,J=H&&H.chs;F.forEach(J&&J.items,function(R){if(R.items){I=Math.max(I,R.items.length);}});}F.forEach(L,function(R){if(M&&M.id===E){M.items.every(function(S){if(S.t===B&&S.did===R.did&&S.card){K++;I=I/S.card;return false;}return true;});}P=R.cardg>0?R.cardg:R.card;if(!P&&R.otp===B&&R.es){P=R.es.length+1;}if(P){I=I*P;}});N._columnCardinalityCount=(K===L.length)?1:I;},findLargeItemsForAddUnits:function(G,H,J){var I=this,K;if((!H&&!I.isUnitRestrictedInViz())||H){G.forEach(function(M){var L=M.cardg>0?M.cardg:M.card;K=!!J?J:I.CARDLIMIT;if(L&&L>K){I._addInLargeItems.push(M.n+" ("+L+")");}});}},warnAndExecCallBackForAddUnits:function(M,L,I){if(this.existLargeOrManyItems()){var J=this._addInLargeItems,K=J.length,H;if(K>1){H=mstrmojo.desc(14292,"The following attributes contain a large number of elements: ##. This action may impact dashboard performance.").replace("##",J);}else{if(K===1){H=mstrmojo.desc(14293,"The attribute ## has too many elements. This action may impact dashboard performance.").replace("##",J);}else{H=mstrmojo.desc(14607,"The dashboard will attempt to display more than ### columns. This can affect performance and stability.").replace("###",this.CARDLIMIT);}}var G=[];if(K&&L){G.push(D(mstrmojo.desc(7977,"Move to Rows"),function(){L();},true));}G.push(D(mstrmojo.desc(212,"Continue"),function(){M();}));G.push(D(mstrmojo.desc(2140,"Cancel"),function(){if(I){mstrmojo._DocToolbarActions.close.call({model:{isnew:false}});}}));mstrmojo.warn(H,{},{buttons:G});J.splice(0,J.length);return ;}M();},checkAndWarnLargeItemsForAddUnits:function(J,M,L,G,I,H,K){this.clearCardinalityFlags();if(!I||I.id===E){this.findLargeItemsForAddUnits(J,H,K);}if(G){this.findTotalColumnCount(J,I);}this.warnAndExecCallBackForAddUnits(M,L,H);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Button");mstrmojo.HTMLButton=mstrmojo.declare(mstrmojo.Button,null,{scriptClass:"mstrmojo.HTMLButton",markupString:'<input id="{@id}" type="button" class="mstrmojo-text mstrmojo-HTMLButton mstrButton {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:click />',markupSlots:{inputNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"inline":"none";},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onselectedChange:function(){mstrmojo.css[this.selected?"addClass":"removeClass"](this.domNode,["selected"]);},ontextChange:function(){this.inputNode.value=this.text!=null?this.text:"";},oniconClassChange:function(){this.domNode.className="mstrmojo-text mstrmojo-HTMLButton mstrButton "+this.cssClass+" "+this.iconClass+(this.enabled?"":" disabled");}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._HasMarkup","mstrmojo.Image");mstrmojo.threshold.ImageBand=mstrmojo.declare(mstrmojo.Image,null,{scriptClass:"mstrmojo.threshold.ImageBand",cssClass:"mstrmojo-Image color-band"});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.threshold.ImageBand,{onwidthChange:mstrmojo.Widget.widthMarkupMethod,onleftChange:mstrmojo.Widget.leftMarkupMethod});}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo._HasEditableText","mstrmojo.css");var B=mstrmojo.css;mstrmojo.EditableLabel=mstrmojo.declare(mstrmojo.Label,[mstrmojo._HasEditableText],{scriptClass:"mstrmojo.EditableLabel",autoApplyDelay:-1,markupString:'<div id="{@id}" class="mstrmojo-EditableLabel {@cssClass}" title="{@title}" contenteditable="{@isEditing}" style="{@cssText}" mstrAttach:click,mousedown,blur,keydown,keyup></div>',onkeyup:function C(D){this._super(D);if(this._autoApplyTimer){window.clearTimeout(this._autoApplyTimer);}if(this.autoApplyDelay!==-1){var E=this;this._autoApplyTimer=window.setTimeout(function(){E.set("isEditing",false);},this.autoApplyDelay);}},selectable:true});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.EditableLabel,{onselectableChange:function A(){var E=this[this.editableSlot],D=!!this.selectable;E.selectable=D;E.setAttribute("unselectable",!D?"on":"off");B.toggleClass(E,"unselectable",!D);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");var A;mstrmojo.ui.editors.controls.ColorList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.ui.editors.controls.ColorList",init:function D(E){this._super(E);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-ColorList");},getItemMarkup:function C(F,E){if(!A){A=this._super(F,E).replace(">{@en@n}<",">{@en@msg}<");}return A;},getItemProps:function B(G,E){var F=this._super(G,E);if(G.id==="transparent"){F.msg=mstrmojo.desc(5774,"No Fill");F.addCls("noFill");}else{F.msg="";G.title=G.n;F.addStyle("background-color:"+G.id);}return F;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");var D=mstrmojo.dom,F=mstrmojo.array,E=mstrmojo.hash;var A;mstrmojo.SuggestionList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.SuggestionList",itemField:"n",getItemMarkup:function(H,G){if(!A){var I=this.itemField;A=this._super(H).replace(">{@en@n}<",' title="{@en@'+I+'}">{@en@'+I+"}<");}return A;},getItemProps:function C(I,G){var H=this._super(I,G),J=this.itemField;H[J]=I[J];return H;},onclick:function B(G){if(this.disableClick){return false;}var L=this,I=this.parent,K=I.opener,H=D.isMetaKey(G.hWin,G.e);if(H&&!this.multiSelect){this.multiSelect=K.parent.defn.multi;if(this.multiSelect){D.attachOneTimeEvent(document.documentElement,"keyup",function(){var N=L.selectedIndices;if(K){K.suggestionShown=false;if(N&&!E.isEmpty(N)){var M=[];E.forEach(L.selectedIndices,function(P,O){M.push(L.items[O]);});K.handleSuggestionItemSelect(M);}I.close();}L.multiSelect=false;});}}this._super(G);if(!this.multiSelect){K.suggestionShown=false;var J=this.selectedItem;if(J){K.handleSuggestionItemSelect(J);}I.close();}},bindings:{itemField:"this.parent.opener.itemField",items:"this.parent.opener.suggestionItems",disableClick:"this.parent.opener.disableClick"}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");mstrmojo.ui.List=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.ui.List",postselectionChange:function C(D){var G=D.added||[],F=G.length,I=D.removed||[],E=I.length;if(E){this.selectionRemoved({added:G,removed:I,isReselect:false});}if(F){var H=function(J){return[].concat(J).sort().join(",");};this.selectionAdded({added:G,removed:I,isReselect:H(G)===H(I)});}},selectionAdded:function A(D){},selectionRemoved:function B(D){}});mstrmojo.ui.List.SelectionChangeEvtType=null;}());(function(){mstrmojo.requiresClsP("mstrmojo","ListBase","_IsList");mstrmojo.VisMenuList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.VisMenuList",prevSelection:{},itemField:"v",selectionPolicy:"toggle",multiSelect:false,init:function C(D){this._super(D);},getItemProps:function A(F,D){var E=this._super(F,D);E.tag="a";E.addCls("mstrmojo-ui-Menu-item");return E;},onselectionChange:function B(D){this._super(D);this.parent.data.set("valid",true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase");mstrmojo.SelectBox=mstrmojo.declare(mstrmojo.ListBase,null,{scriptClass:"mstrmojo.SelectBox",size:10,cssDisplay:"inline",markupString:'<select id="{@id}" class="mstrmojo-SelectBox {@cssClass}" style="{@cssText}" size="{@size}" {@multipleHtml} mstrAttach:keyup,change tstid="{@tstid}">{@itemsHtml}</select>',markupSlots:{itemsContainerNode:function(){return this.domNode;},scrollboxNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onenabledChange:function(){this.domNode.disabled=!this.enabled;}},itemCssClass:"mstrmojo-selectbox-item",itemDisplayField:"n",itemIdField:"v",showItemTooltip:false,itemRenderer:{render:function(E,D,F){var G=mstrmojo.string.htmlAngles((F.getItemName)?F.getItemName(E,D):(F.itemDisplayField&&E[F.itemDisplayField]));return'<option class="'+F.itemCssClass+'" value="'+((F.getItemValue)?F.getItemValue(E,D):(F.itemIdField&&E[F.itemIdField]))+'" '+((F.selectedIndices[D])?'selected="true" ':"")+((F.showItemTooltip)?'title="'+mstrmojo.string.encodeXMLAttribute(G)+'"':"")+">"+G+"</option>";},select:function(E,F,D,G){E.selected=true;},unselect:function(E,F,D,G){E.selected=false;}},buildRendering:function C(){this.multipleHtml=this.multiSelect?' multiple="true" ':"";this._super();delete this.multipleHtml;},_getItemNode:function(D){var E=this.scrollboxNode;return E&&E.options[D];},prechange:function A(E){if(this._syncDom){return ;}this._syncDom=true;var H=this.scrollboxNode;if(this.multiSelect){var I=H.options,F=[];for(var G=0,D=I.length;G<D;G++){if(I[G].selected){F.push(G);}}this.select(F);}else{this.singleSelect(H.selectedIndex);}delete this._syncDom;},prekeyup:function(E){var H=this.scrollboxNode,F=false;if(this.multiSelect){var I=H.options;for(var G=0,D=I.length;G<D;G++){if(I[G].selected!==!!this.selectedIndices[G]){F=true;break;}}}else{if(H.selectedIndex!==this.selectedIndex){F=true;}}if(F){var J=E;J.name="change";this.raiseEvent(E);}},onselectionChange:function B(D){if(!this._syncDom){this._super(D);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.css");var B=mstrmojo.css;var A;var D;mstrmojo.ui.ButtonBar=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.ui.ButtonBar",markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onenabledChange:function G(){B.toggleClass(this.domNode,"disabled",!this.enabled);}},cssDisplay:"table",icnCssText:"display:table-row;",items:null,showIcon:true,init:function F(I){this._super(I);var H=["mstrmojo-ui-ButtonBar"];if(!this.showIcon){H.push("btn-text");}B.addWidgetCssClass(this,H);},getItemMarkup:function E(H){if(!D){D=this._super(H);}if(!A){A=D.replace(">{@en@n}<",'title="{@en@n}"><div>&nbsp;</div><');}return this.showIcon?A:D;},getItemProps:function C(J,H){var I=this._super(J,H);var K=J.css;if(K){I.addCls(K);}I.n=J.n||"";return I;}});mstrmojo.ui.ButtonBar.ItemType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.string");mstrmojo.DivItemRenderer={render:function(E,C,F){var D=mstrmojo.string.encodeHtmlString((F.getItemName?F.getItemName(E,C):(F.itemDisplayField&&E[F.itemDisplayField])));return'<div mstridx="'+C+'" class="'+F.itemCssClass+(F.selectedIndices[C]?" "+F.itemSelectedCssClass:"")+(E.cssClass?" "+E.cssClass:"")+'" style="'+F.itemCssText+'">'+D+"</div>";},select:function(D,E,C,F){D.className+=" selected";},unselect:function(D,E,C,F){D.className=D.className.replace(/selected/g,"");},rowHeight:21};mstrmojo._RendersItemDivs={tableCssClass:"mstrmojo-ListBox-table",tableCssText:"",rowCssClass:"",rowCssText:"",cellCssClass:"mstrmojo-ListBox-cell",cellCssText:"",itemCssClass:"mstrmojo-ListBox-item",itemSelectedCssClass:"selected",itemDisplayField:"n",itemRenderer:mstrmojo.DivItemRenderer,rangeSelected:false,_findMatch:function(C,D){return mstrmojo.dom.findAncestorByAttr(mstrmojo.dom.eventTarget(C,D),"mstridx",true,this.itemsNode);},premousedown:function A(C){if(mstrmojo.dom.shiftKey(C.hWin,C.e)){mstrmojo.dom.preventDefault(C.hWin,C.e);}},preclick:function B(L){var H=L.hWin,I=L.e,G=this._findMatch(H,I);if(G){var E=G.node,K=parseInt(G.value,10),J=mstrmojo.dom,C=J.ctrlKey(H,I),D=J.shiftKey(H,I);if(C||D){J.clearBrowserHighlights(H);}if(this.multiSelect&&(this.selectionPolicy==="toggle"||C)){var F=this.rangeSelected||this.selectedIndex===-1;this.toggleSelect(K);if(F&&K<this.items.length&&this.selectedIndices[K+1]){K++;}this.selectedIndex=K;this.rangeSelected=false;}else{if(this.multiSelect&&D){this.rangeSelected=true;this.rangeSelect(K);}else{this.singleSelect(K);this.rangeSelected=false;}}}}};mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._RendersItemDivs");mstrmojo.ListBoxBase=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._RendersItemDivs],{scriptClass:"mstrmojo.ListBoxBase",cssClass:"mstrmojo-ListBox",itemCssClass:"mstrmojo-ListBox-item",_markupPrefix:function(){var C=this.itemRenderer;return(C&&C.markupPrefix)||('<table class="'+this.tableCssClass+'" style="'+this.tableCssText+'" cellspacing="0" cellpadding="0"><tbody>');},_markupSuffix:function(){var C=this.itemRenderer;return(C&&C.markupSuffix)||"</tbody></table>";},_itemPrefix:function(){var C=this.itemRenderer;return(C&&C.itemPrefix)||('<tr class="'+this.rowCssClass+'" style="'+this.rowCssText+'"><td class="'+this.cellCssClass+'" style="'+this.cellCssText+'">');},_itemSuffix:function(){var C=this.itemRenderer;return(C&&C.itemSuffix)||"</td></tr>";},_getItemNode:function(C){var E=this.itemsNode,D=E&&E.rows,F=D&&D[C];return F&&F.cells[0].firstChild;}});}());(function(){mstrmojo.requiresCls("mstrmojo.NumStepperContentProvider","mstrmojo.num","mstrmojo.array");var A=mstrmojo.num,E=mstrmojo.array;var C="?";function B(H,G){var J=G?H.max:H.min,F=G?H.min:H.max,I=H.getValGroup(G?1:-1);return(J===null||(G?(I.every(function(K){return K<=J;})):(I.every(function(K){return K>=J;})))||(F!==null&&H.canLoop));}function D(I,H){var G=I.min,F=I.max,J=I.getValGroup(H?1:-1)||[];if((H&&F!==null&&J.some(function(K){return K>F;})||(!H&&G!==null&&J.some(function(K){return K<G;})))){if(I.canLoop){J.forEach(function(L,K){L=((L-G)%(F-G+1))+G;L=(L>=G)?L:L+(F-G+1);J[K]=L;});}else{return ;}}I.item[I.valField]=I.curValGroup=J;I.onTraverse();}mstrmojo.NumGroupStepperContentProvider=mstrmojo.declare(mstrmojo.NumStepperContentProvider,null,{scriptClass:"mstrmojo.NumGroupStepperContentProvider",curValGroup:null,init:function(F){this._super(F);},_initCurrent:function(){var H=this.item,F=this.curValGroup=H[this.valField];if(F===null||F===undefined){var G=this.min;this.curValGroup=G!==null?[G]:0;}this.curValGroup=E.ensureArray(this.curValGroup);},next:function(){D(this,true);},prev:function(){D(this,false);},hasPrev:function(){return B(this,false);},hasNext:function(){return B(this,true);},getValGroup:function(I){var F=this.curValGroup,G=this.interval,H=[];(F||[]).forEach(function(K,J){H[J]=F[J]+(G*(I||0));});return H;},getVal:function(){var F=null;(this.curValGroup||[]).forEach(function(G){if(F===null){F=G;}else{if(F!==C&&G!==F){F=C;}}});return F;},setVal:function(H){var I=this.min,G=this.max,F=this.curValGroup;if(typeof H!=="number"||isNaN(H)||A.inNumericRange(H,I,G)!==0){return ;}(F||[]).forEach(function(K,J){F[J]=H;});this.onTraverse();},_set_curValGroup:function(J,I){var H=this.min,G=this.max,F=this.getValGroup();if(I.some(function(K){return typeof K!=="number";})||I.some(function(K){return isNaN(K);})||I.every(function(L,K){return L===F[K];})||I.every(function(K){return A.inNumericRange(K,H,G)!==0;})){return false;}this.item[this.valField]=this.curValGroup=I;return true;}});}());(function(){mstrmojo.requiresCls("mstrmojo.NumStepperContentProvider","mstrmojo.date");var A=mstrmojo.date;mstrmojo.DateStepperContentProvider=mstrmojo.declare(mstrmojo.StepperContentProvider,null,{scriptClass:"mstrmojo.DateStepperContentProvider",curVal:null,init:function(F){this._super(F);var G=this.item,E=G[this.intField],I=G[this.valField],H=this.minField,D=this.maxField,C=G[H],B=G[D];this.min=C&&A.getDateFromDateInfo(C);this.max=B&&A.getDateFromDateInfo(B);this.curVal=I?A.getDateFromDateInfo(I):(this.min?new Date(this.min):new Date());this.createChildProviders();},createChildProviders:function(){var B=this;mstrmojo.array.forEach(["year","month","day"],function(C){B[C+"CP"]=new mstrmojo.NumStepperContentProvider({item:{interval:1},canLoop:true,updateConfig:function(E,D,F){this.curVal=E;this.max=D;this.min=F;},onTraverse:function(){B.traverse(C,this.curVal);}});});this.updateChildProviders();},updateChildProviders:function(){var I=this.max,D=this.min,G=this.curVal.getFullYear(),F=this.curVal.getMonth(),H=this.curVal.getDate(),C=I&&(G===I.getFullYear()),E=D&&(G===D.getFullYear()),J=C&&(F===I.getMonth()),B=E&&(F===D.getMonth());this.yearCP.updateConfig(G,I?I.getFullYear():null,D?D.getFullYear():null);this.monthCP.updateConfig(F+1,C?I.getMonth()+1:12,E?D.getMonth()+1:1);this.dayCP.updateConfig(H,J?I.getDate():mstrmojo.date.getDaysOfMonth(G,F+1),B?D.getDate():1);},traverse:function(E,D){var C=this.curVal,G=(E==="year")?D:this.curVal.getFullYear(),B=(E==="month")?D:this.curVal.getMonth()+1,F=(E==="day")?D:this.curVal.getDate();F=Math.min(mstrmojo.date.getDaysOfMonth(G,B),F);C.setFullYear(G,B-1,F);if(this.max){C=Math.min(this.max,C);}if(this.min){C=Math.max(this.min,C);}this.curVal=new Date(C);this.updateChildProviders();if(this.onTraverse){this.onTraverse();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.viz.GraphMatrixHelper","mstrmojo.vi.viz.GoogleMapHelper","mstrmojo.vi.viz.ESRIMapHelper","mstrmojo.vi.viz.KnownVisualizations","mstrmojo.vi.util.ThresholdUtils","mstrmojo.gm.GMEnums");var N=mstrmojo,K=N.array,P=N.vi.viz,B=P.GraphMatrixHelper,A=P.EnumDSSDropZones,H=P.KnownVisualizations,I=N.vi.util.ThresholdUtils,L=mstrmojo.gm.EnumABLDirection;function C(Q){return Q&&Q.getHostModel&&Q.getHostModel();}function M(R){var Q=false;if(R.t!==4){K.forEach(R.fs||[],function(S){if(S.ftr||S.bftp===1||S.bftp===8||S.bftp===9){Q=true;return false;}});}return Q;}function F(m,V,q,Z,c){var U=q.dz,o=q.gsi||{},R=[],W=false,Q=false,S=false,a=function(r){return r.shape==="Pie"||r.shape==="Ring";},l=function(){var r=Z.getHost();return r&&r.GMController&&r.GMController.isBubbleOrScatter();},h=function(r,v){R.push({act:"addDropZoneUnit",zoneId:r,datasetId:V,unitId:m.did,unitType:m.t,unitPos:v||0});W=true;S=(r===A.ColorBy);Q=(r===A.AdditionalMetrics);var u=["Reserved","Rows","Columns","XAxis","YAxis","BreakBy","SliceBy","ColorBy","SizeBy"],t=u[r],s=m.t===4?"TemplateMetric":"TemplateUnit";if(U[t]){if(!U[t][s]){U[t][s]=[];}U[t][s].push(m);}},g=function(r,s){R.push({act:"removeDropZoneUnit",zoneId:r,unitId:s.did,unitType:s.t});},k=function(r){R.push({act:"addDropZoneUnit",zoneId:r,unitId:"00000000000000000000000000000000",unitType:0});},n=new P.GraphMatrixHelper({data:q}),p=function(r){if(!n.shape){n.shape=r;c=true;}},X=function(r,x){h(r,x);if(!n.metricsDropZone){if(r===A.XAxis&&n.xAxisObjects.length){k(A.Columns);}else{if(r===A.YAxis&&n.yAxisObjects.length){k(A.Rows);}}}var u=Z.getHost(),v=u.GMController,t,w=v.getChartInfo(),s={dndGM:false};if(v.shallWeUseGroupInfo){t=v.getGroupInfo();if((w.dirc===L.VERTICAL&&r===A.YAxis)||(w.dirc===L.HORIZONTAL&&r===A.XAxis)){t=Z.fillGroupInfo(s,t,m.did,true);}v.setGroupInfo(t);c=true;}};n.setData(q.dz);n.setMetricsDropZone(q.dz);if(m.t===4){if(n.exists(m,"yAxisObjects")||n.exists(m,"xAxisObjects")||n.exists(m,"sizeByObjects")||n.exists(m,"colorByObjects")||n.exists(m,"angleObjects")){var j=!n.exists(m,"yAxisObjects")&&!n.exists(m,"xAxisObjects");if(j&&(!n.yAxisObjects.length||n.yAxisObjects[0].t===4)){X(A.YAxis);}else{if(j&&(!n.xAxisObjects.length||n.xAxisObjects[0].t===4)){X(A.XAxis);}else{if(!n.angleObjects.length&&a(n)){h(A.Angle);}else{if(!n.colorByObjects.length){h(A.ColorBy);}else{if(!n.sizeByObjects.length||(!n.exists(m,"sizeByObjects")&&l())){h(A.SizeBy);}}}}}}else{if(!n.angleObjects.length&&a(n)){h(A.Angle);}else{if((!n.yAxisObjects.length)&&(!n.xAxisObjects.length)){X(A.YAxis);p(B.PROP_SHAPE_BAR);}else{if(n.yAxisObjects.length&&!n.xAxisObjects.length){if(!n.exists(m,"yAxisObjects")){X(A.XAxis);p(Z.isMetricZone(A.YAxis)?B.PROP_SHAPE_CIRCLE:B.PROP_SHAPE_BAR);}}else{if((!n.yAxisObjects.length)&&n.xAxisObjects.length){if(!n.exists(m,"xAxisObjects")){X(A.YAxis);p(Z.isMetricZone(A.XAxis)?B.PROP_SHAPE_CIRCLE:B.PROP_SHAPE_BAR);}}else{if((n.xAxisObjects[0].t!==4)&&(n.yAxisObjects[0].t===4)&&!n.exists(m,"yAxisObjects")&&!n.exists(m,"sizeByObjects")&&!n.exists(m,"colorByObjects")){X(A.YAxis);if(n.metricsDropZone!==B.PROP_COLUMNS&&n.metricsDropZone!==B.PROP_ROWS&&(!n.colorByObjects.length||n.colorByObjects[0].t!==4)){k(A.ColorBy);}}else{if((n.xAxisObjects[0].t===4)&&(n.yAxisObjects[0].t!==4)&&!n.exists(m,"xAxisObjects")&&!n.exists(m,"sizeByObjects")&&!n.exists(m,"colorByObjects")){X(A.XAxis);if(n.metricsDropZone!==B.PROP_COLUMNS&&n.metricsDropZone!==B.PROP_ROWS&&(!n.colorByObjects.length||n.colorByObjects[0].t!==4)){k(A.ColorBy);}}else{if((n.xAxisObjects[0].t===4)&&(n.yAxisObjects[0].t===4)&&!n.exists(m,"xAxisObjects")&&!n.exists(m,"yAxisObjects")&&!n.exists(m,"sizeByObjects")&&!n.exists(m,"colorByObjects")){if(!n.colorByObjects.length&&n.metricsDropZone!==B.PROP_COLORBY){h(A.ColorBy);}else{if(!n.sizeByObjects.length&&n.shape!=="Area"){h(A.SizeBy);}else{if(n.xAxisObjects.length===1){X(A.XAxis);}else{if(n.yAxisObjects.length===1){X(A.YAxis);}else{if(n.sizeByObjects.length===1&&n.shape!=="Area"){h(A.SizeBy);}else{if(!n.exists(m,"tooltipMetrics")){h(A.AdditionalMetrics);}}}}}}}else{if(!n.colorByObjects.length&&n.metricsDropZone!==B.PROP_COLORBY){h(A.ColorBy);}else{if(!n.sizeByObjects.length){h(A.SizeBy);}else{if(!n.exists(m,"tooltipMetrics")){h(A.AdditionalMetrics);}}}}}}}}}}if((!Q)&&W){if(n.exists(m,"tooltipMetrics")){var f=K.find(n.tooltipMetrics,"did",m.did);if(f>-1){n.tooltipMetrics.splice(f,1);g(A.AdditionalMetrics,m);}}}}if(W&&S){var e=Z.getHost();I.addThresholds(e.model,e,e.node,m,R);}}else{if((o.rows||[]).concat(o.cols||[]).some(function(r){return r.did===m.did;})){if(!n.colorByObjects.length||(n.colorByObjects[0].t!==4&&!n.exists(m,"colorByObjects"))){h(A.ColorBy);}}else{if(!n.sliceObjects.length&&a(n)){h(A.SliceBy);if(!n.colorByObjects.length){h(A.ColorBy);}}else{if((!n.yAxisObjects.length)&&(!n.xAxisObjects.length)){h(A.XAxis);p(M(m)?B.PROP_SHAPE_LINE:B.PROP_SHAPE_BAR);}else{if((n.yAxisObjects.length)&&(!n.xAxisObjects.length)){h(A.XAxis);p(M(m)&&n.yAxisObjects[0]===4?B.PROP_SHAPE_LINE:B.PROP_SHAPE_BAR);}else{if((!n.yAxisObjects.length)&&(n.xAxisObjects.length)){h(A.YAxis);p(M(m)&&n.xAxisObjects[0]===4?B.PROP_SHAPE_LINE:B.PROP_SHAPE_BAR);}else{if((n.xAxisObjects[0].t!==4)&&(n.yAxisObjects[0].t===4)){if(!n.colorByObjects.length){h(A.ColorBy);if(!n.exists(m,"breakByObjects")){h(A.BreakBy);}}else{h(A.Columns);}}else{if((n.xAxisObjects[0].t===4)&&(n.yAxisObjects[0].t!==4)){if(!n.colorByObjects.length){h(A.ColorBy);if(!n.exists(m,"breakByObjects")){h(A.BreakBy);}}else{h(A.Rows);}}else{if((n.xAxisObjects[0].t!==4)&&(n.yAxisObjects[0].t!==4)){h(A.Columns);}else{if((n.xAxisObjects[0].t===4)&&(n.yAxisObjects[0].t===4)){if(!n.colorByObjects.length){h(A.ColorBy);if(!n.exists(m,"breakByObjects")){h(A.BreakBy);}}else{if(!n.columnObjects.length&&n.rowObjects.length&&n.rowObjects[0].t!==4){h(A.Rows);}else{h(A.Columns);}}}}}}}}}}}}var Y=[];if(R.length){var d=Z.getUpdateTemplateAction(R);var T=Z.docModel,i=T.controller.view.builder,b=i.getLayoutVIMap(T.getCurrentLayoutKey()).getComponent(mstrmojo.vi.models.VIComponentMap.TYPES.FILTER_STACK);if(b){d.partialRetrieval.nodes.push(b.k);}Y.push(d);}if(c){Y.push({act:"setProperty",nodeKey:q.k,prs:"FormattingWidget",pri:4,v:mstrmojo.string.encodeXMLAttribute(n.getXml())});}if(Y.length){Z.clearCardinalityFlags();Z.findLargeItemsForAddUnits([m]);}return Y;}function J(T,V,U,Q){var R,S=true;function W(a,c,Z){var b=Q.getZoneModelByZoneId(a);if(Q.getUnitIndexInZone(b,T)===-1&&(!Z||Z(b))){var Y=c?0:b.items.length;R=Q.getAddItemActions(b,[T],Y,false,c?b.items[Y]:null,V);b.items.push(T);return false;}return true;}function X(Y){return Y.items.length===0;}if(!Q.isMetric(T)){S=W(A.ColorBy,false,function(Y){return X(Y)&&Q.getItemCountInZone(A.Grouping)>=2;});S=S&&W(A.Grouping);if(R){Q.clearCardinalityFlags();Q.findLargeItemsForAddUnits([T]);}}else{S=W(A.ColorBy,false,X);S=S&&W(A.SizeBy,false,X);S=S&&W(A.SizeBy,true,function(Y){return Y.items[0].did===Q.getZoneModelByZoneId(A.ColorBy).items[0].did;});S=S&&W(A.AdditionalMetrics,false,function(){return Q.getUnitIndexInZone(Q.getZoneModelByZoneId(A.SizeBy),T)===-1&&Q.getUnitIndexInZone(Q.getZoneModelByZoneId(A.ColorBy),T)===-1;});}return R?[Q.docModel.getDataService().getUpdateTemplateAction(Q.getHost().k,R)]:[];}function D(S,U,T,Q){var R=null,V=!Q.isMetric(S)?[A.FromItem,A.ToItem]:[A.ColorBy,A.ItemSize,A.SizeBy];K.forEach(V,function(W){var X=Q.getZoneModelByZoneId(W);if(X.items.length===0){R=Q.getAddItemActions(X,[S],0,U);X.items.push(S);return false;}});if(R){Q.clearCardinalityFlags();Q.findLargeItemsForAddUnits([S]);return[Q.docModel.getDataService().getUpdateTemplateAction(Q.getHost().k,R)];}return[];}function G(S,U,T,Q){var R=null,V=!Q.isMetric(S)?[A.GeoAttribute,A.Layout]:[A.ColorBy,A.SizeBy,A.AdditionalMetrics];K.forEach(V,function(W){var X=Q.getZoneModelByZoneId(W);if((W===A.AdditionalMetrics||X.items.length===0)&&Q.isZoneAvalaible(W)){R=Q.getAddDropZoneUnitsActions(X,[S],0,{datasetId:U});return false;}});return R?[Q.docModel.getDataService().getUpdateTemplateAction(Q.getHost().k,R)]:[];}function E(h,V,k,Z,S){var i=k.gsi||{},Y=Z.getHost(),a=[],c=false,e=Z.getZoneModelByZoneId(A.ColorBy),f=Z.getZoneModelByZoneId(A.SizeBy),T=Z.getZoneModelByZoneId(A.AdditionalMetrics),g=mstrmojo.vi.viz,b=g.MapHelper,W=false,X=function(p,o,n,q){if(p){a.push(Z.getUpdateTemplateAction([{act:"addDropZoneUnit",zoneId:n,unitId:p,unitType:o,datasetId:q}]));if(n===A.ColorBy){a.push(Z.getUpdateTemplateAction(I.addThresholds(Y.model,Y,Y.node,h)));}}switch(n){case A.GeoAttribute:S.geoAttribute=p;break;case A.Latitude:S.latitude=p;break;case A.Longitude:S.longitude=p;break;case A.ColorBy:S.colorBy=p;break;case A.SizeBy:S.sizeBy=p;break;case A.AdditionalMetrics:S.tooltip.push(p);break;}W=true;},m=function(p,o,n){if(p){a.push(Z.getUpdateTemplateAction([{act:"removeDropZoneUnit",zoneId:n,unitId:p,unitType:o}]));}switch(n){case A.geoAttribute:S.geoAttribute="";break;case A.Latitude:S.latitude="";break;case A.Longitude:S.longitude="";break;case A.ColorBy:S.colorBy="";break;case A.SizeBy:S.sizeBy="";break;case A.AdditionalMetrics:S.tooltip=K.filter(S.tooltip,function(q){return q!==p;},{max:S.tooltip.length});break;}},j=function(n,o){a.push(Z.getUpdateTemplateAction({act:"addForm",unitId:n,attFormId:o,unitPos:1}));};S.setWidget(Y);K.forEach((i.rows||[]).concat(i.cols||[]),function(n){if(n.did===h.did){c=true;return false;}});if(c){return[];}switch(h.t){case 4:if(e&&!e.items.length){X(h.did,h.t,A.ColorBy,V);}else{if(f&&!f.items.length){X(h.did,h.t,A.SizeBy,V);}else{if(T){X(h.did,h.t,A.AdditionalMetrics,V);}}}break;default:var Q=!S.geoAttribute&&!S.latitude&&!S.longitude,R=S.getGeoForm(h,function(n){return b.isGeoRoleSupportArea(n.fgr);}),d=function(){var n=S.mapType,o=S.tooltip;if(!b.canShowSizeByZone(n)&&S.sizeBy&&o.indexOf(S.sizeBy)<0){X(S.sizeBy,4,A.AdditionalMetrics);m(S.sizeBy,4,A.SizeBy);}if(!b.canShowColorByZone(n)&&S.colorBy&&o.indexOf(S.colorBy)<0){X(S.colorBy,4,A.AdditionalMetrics);m(S.colorBy,4,A.ColorBy);}};if(Q&&S.supportAreaMap&&R){S.setMapType(b.MTP_AREA);S.setUseAttributeForm(false);X(h.did,h.t,A.GeoAttribute,V);j(h.did,R.fid);}else{var U=S.getLatitudeForm(h),l=S.getLongitudeForm(h);if(U&&l&&Q){X(h.did,h.t,A.GeoAttribute,V);S.setMapType(b.getMapTypeByElementCount(h.card));S.setUseAttributeForm(true);j(h.did,U.fid);j(h.did,l.fid);X(U.fid,21,A.Latitude,V);X(l.fid,21,A.Longitude,V);}else{if((U||b.isLatitude(h.n))&&(!l&&!b.isLongitude(h.n))&&!S.geoAttribute&&!S.latitude){X(h.did,h.t,A.Latitude,V);S.setMapType(b.getMapTypeByElementCount(h.card));S.setUseAttributeForm(false);}else{if((!U&&!b.isLatitude(h.n))&&(l||b.isLongitude(h.n))&&!S.geoAttribute&&!S.longitude){X(h.did,h.t,A.Longitude,V);S.setMapType(b.getMapTypeByElementCount(h.card));S.setUseAttributeForm(false);}else{if(S.tooltip.indexOf(h.did)<0){X(h.did,h.t,A.AdditionalMetrics,V);}}}}}if(W){d();}break;}if(W){a.push({act:"setProperty",nodeKey:k.k,prs:"FormattingWidget",pri:4,v:mstrmojo.string.encodeXMLAttribute(S.getXml())});}return a;}function O(b,U,T,Z){var Y=T.gsi||{},c=Y.rows||[],W=Y.cols||[],V=Y.mx||[],S=[],R,X,Q,a;Z.clearCardinalityFlags();if(K.find(c.concat(W).concat(V),"did",b.did)===-1){a=!!K.filterOne(W,function(d){return d.t!==4;});Q=!!K.filterOne(c,function(d){return d.t!==4;});if(b.t===4){R=-1;if(V.length===0){if(!Q&&!!a){R=1;X=c.length;}else{R=2;X=W.length;}}X=V.length;}else{if(a&&!Q){R=2;X=W.length;Z.findLargeItemsForAddUnits([b]);Z.findTotalColumnCount([b],null);}else{R=1;X=c.length;}}S.push({act:"updateTemplate",keyContext:T.k,actions:[Z.getHost().model.getAddTemplateUnitAction(b,U,R,X)]});}return S;}mstrmojo.vi.models.DatasetDoubleClick=mstrmojo.provide("mstrmojo.vi.models.DatasetDoubleClick",{addObject:function(X,S,W){var R=C(W),Q=[],V=W.getHost();if(!X||!R){return Q;}var Y=R.visName||"Grid";switch(H.getDefinition(Y).id){case H.GRAPHMATRIX:Q=F(X,S,R,W);break;case H.ESRIMAP:Q=E(X,S,R,W,new P.ESRIMapHelper({data:R}));break;case H.GOOGLEMAP:Q=E(X,S,R,W,new P.GoogleMapHelper({data:R}));break;case H.HEATMAP:Q=J(X,S,R,W);break;case H.NETWORK:Q=D(X,S,R,W);break;case H.IMAGELAYOUT:Q=G(X,S,R,W);break;case H.CUSTOM:Q=(W.getCustomDropZones&&W.getCustomDropZones())?[]:O(X,S,R,W);break;default:Q=O(X,S,R,W);break;}if(S!==R.datasetId){var U=W.getHost().model.data.gsi;var T=U?(U.rows||[]).concat(U.cols||[]).concat(U.mx||[]):[];if(S&&(Q.length||mstrmojo.array.find(T,"did",X.did)!==-1)){Q.push({act:"editNode",nodeKey:V.k,datasetId:S});}}return Q;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.hash","mstrmojo.array","mstrmojo.date","mstrmojo.Stepper","mstrmojo.android.ui.Button","mstrmojo.DateStepperContentProvider","mstrmojo.NumStepperContentProvider");var U=mstrmojo.array,Q=mstrmojo.date,L=mstrmojo.hash,R=mstrmojo.android.ui.Button.newButton,I=mstrmojo.expr.DTP,D={interval:1},G={min:1,max:12,interval:1,value:12},N={min:0,max:23,interval:1,value:0},E={min:0,max:59,interval:1};function C(){var W=this.dtp,Z=this.stepperClass,X=this[this.valueField],M=[],Y,H;if(this._hasDate){M.push({scriptClass:Z,slot:"monthNode",alias:"monthStepper",title:mstrmojo.desc(871,"month"),provider:this.dateProvider.monthCP},{scriptClass:Z,slot:"dayNode",alias:"dayStepper",title:mstrmojo.desc(872,"day"),provider:this.dateProvider.dayCP},{scriptClass:Z,slot:"yearNode",alias:"yearStepper",title:mstrmojo.desc(873,"year"),provider:this.dateProvider.yearCP});}if(this._hasTime){M.push({scriptClass:Z,slot:"hourNode",alias:"hourStepper",provider:this.hourProvider},{scriptClass:Z,slot:"minNode",alias:"minStepper",provider:this.minProvider});}if(!this.hideSwitchers){if(W!==I.TIME){Y=(X&&X.date)?Q.formatDateInfo(X.date,mstrmojo.locales.datetime.DATEOUTPUTFORMAT):mstrmojo.desc(2052,"Date");M.push(R(Y,function(){this.parent.toDateView();},{alias:"dateToggle",slot:"switcherNode",cssClass:"",selected:true}));}if(W!==I.DATE){H=(X&&X.time)?Q.formatTimeInfo(X.time,mstrmojo.locales.datetime.TIMEOUTPUTFORMAT):mstrmojo.desc(2170,"Time");M.push(R(H,function(){this.parent.toTimeView();},{alias:"timeToggle",slot:"switcherNode",cssClass:"",selected:W==I.TIME}));}}if(this._hasDate){this.viewCssClass="dateView";}else{if(this._hasTime){this.viewCssClass="timeView";}}this.addChildren(M);}function P(){var a=[this.valueField,"min","max"],M=L.copy(D),Z=this.is24HourMode?L.copy(N):L.copy(G),Y=L.copy(E),X=this[this.valueField],H=X&&X.time,W=this;U.forEach(a,function(b){M[b]=L.copy(W[b]);});if(this._hasDate){this.dateProvider=new mstrmojo.DateStepperContentProvider({item:M,valField:this.valueField,canLoop:true,onTraverse:function(){W.updateDate();}});}if(this._hasTime){if(this.minuteInterval!==undefined){Y.interval=this.minuteInterval;}delete this.minuteInterval;if(H){if(!this.is24HourMode){Z.value=H.hour%12||12;this.set("meridiem",(H.hour<12));}else{Z.value=H.hour;}Y.value=H.min;}this.hourProvider=new mstrmojo.NumStepperContentProvider({item:Z,valField:"value",canLoop:true,onTraverse:function(){W.updateTime();}});this.minProvider=new mstrmojo.NumStepperContentProvider({item:Y,valField:"value",canLoop:true,renderer:{render:function(b){return String(b).length===1?("0"+b):b;}},onTraverse:function(){W.updateTime();}});}}mstrmojo.DateTimePicker=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.DateTimePicker",value:null,min:null,max:null,meridiem:true,hideSwitchers:false,minuteInterval:null,is24HourMode:false,dtp:mstrmojo.expr.DTP.TIMESTAMP,viewCssClass:"",valueField:"value",stepperClass:"mstrmojo.Stepper",markupString:"<div id='{@id}' class='mstrmojo-DateTimePicker' style='{@cssText}'><div class='switcher'></div><div class='{@viewCssClass}'><span class='stepNode month'></span><span class='stepNode day'></span><span class='stepNode year'></span><span class='stepNode hour'></span><span class='stepNode min'></span><span class='meridiem' mstrAttach:click></div></div></div>",markupSlots:{switcherNode:function(){return this.domNode.firstChild;},viewNode:function(){return this.domNode.children[1];},monthNode:function(){return this.domNode.children[1].children[0];},dayNode:function(){return this.domNode.children[1].children[1];},yearNode:function(){return this.domNode.children[1].children[2];},hourNode:function(){return this.domNode.children[1].children[3];},minNode:function(){return this.domNode.children[1].children[4];},meridiemNode:function(){return this.domNode.children[1].children[5];}},markupMethods:{onmeridiemChange:function(){if(this.is24HourMode){this.meridiemNode.display="none";}else{this.meridiemNode.innerHTML=this.meridiem?mstrmojo.locales.datetime.AM_NAME:mstrmojo.locales.datetime.PM_NAME;}},onviewCssClassChange:function(){this.viewNode.className=this.viewCssClass;}},init:function O(M){this._super(M);var H=this.dtp;this._hasDate=(H===I.DATE||H===I.TIMESTAMP);this._hasTime=(H===I.TIME||H===I.TIMESTAMP);P.call(this);C.call(this);},getDateTime:function B(){return{date:this.getDate(),time:this.getTime()};},getDate:function F(){if(this._hasDate){var H=this.dateProvider.curVal;return{year:H.getFullYear(),month:H.getMonth()+1,day:H.getDate()};}return null;},getTime:function S(){if(this._hasTime){return{hour:!this.is24HourMode?Q.capitalHour(this.hourProvider.curVal,this.meridiem?" AM":" PM"):this.hourProvider.curVal,min:this.minProvider.curVal};}return null;},getDateTimeString:function K(){var H="";if(this._hasDate){H+=Q.formatDateInfo(this.getDate(),mstrmojo.locales.datetime.DATEOUTPUTFORMAT);}if(this._hasDate&&this._hasTime){H+=" ";}if(this._hasTime){H+=Q.formatTimeInfo(this.getTime(),mstrmojo.locales.datetime.TIMEOUTPUTFORMAT);}return H;},updateDate:function A(){if(this.hasRendered){var H=this;U.forEach(["year","month","day"],function(M){H[M+"Stepper"].updateDisplayText();});}if(this.dateToggle){this.dateToggle.set("text",Q.formatDateInfo(this.getDate(),mstrmojo.locales.datetime.DATEOUTPUTFORMAT));}},updateTime:function J(){if(this.timeToggle){this.timeToggle.set("text",Q.formatTimeInfo(this.getTime(),mstrmojo.locales.datetime.TIMEOUTPUTFORMAT));}},toDateView:function T(){this.set("viewCssClass","dateView");this.dateToggle.set("selected",true);var H=this.timeToggle;if(H){H.set("selected",false);}},toTimeView:function V(){this.set("viewCssClass","timeView");var H=this.dateToggle;if(H){H.set("selected",false);}this.timeToggle.set("selected",true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._ListSelections");mstrmojo.ListBoxHoriz=mstrmojo.declare(mstrmojo.ListBoxBase,[mstrmojo._ListSelections],{scriptClass:"mstrmojo.ListBoxHoriz",cssClass:"mstrmojo-ListBoxHoriz",tableCssClass:"mstrmojo-ListBox-table",tableCssText:"",rowCssClass:"",rowCssText:"",cellCssClass:"",cellCssText:"",cellSpacing:0,cellPadding:0,_markupPrefix:function(){var A=this.itemRenderer;return(A&&A.markupPrefix)||('<table class="'+this.tableCssClass+'" style="'+this.tableCssText+'" cellspacing="'+this.cellSpacing+'" cellpadding="'+this.cellPadding+'"><tbody><tr class="'+this.rowCssClass+'" style="'+this.rowCssText+'">');},_markupSuffix:function(){var A=this.itemRenderer;return(A&&A.markupSuffix)||"</tr></tbody></table>";},_itemPrefix:function(){var A=this.itemRenderer;return(A&&A.itemPrefix)||('<td class="'+this.cellCssClass+'" style="'+this.cellCssText+'">');},_itemSuffix:function(){var A=this.itemRenderer;return(A&&A.itemSuffix)||"</td>";},_getItemNode:function(A){if(A<0){return null;}var B=this.itemsNode,C=B&&B.rows[0];return C&&C.cells[A].firstChild;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBoxBase","mstrmojo._HasScrollbox");mstrmojo.ListBox=mstrmojo.declare(mstrmojo.ListBoxBase,[mstrmojo._HasScrollbox],{scriptClass:"mstrmojo.ListBox",renderAllItems:false,renderPause:10,numPagesRendered:0,pageStatus:null,_rc:null,_totalPages:null,_rh:null,_rhMin:8,_rowsPerPage:null,_defaultRowsPerPage:100,_minRowsPerPage:100,_pageHeight:null,buildRendering:function K(){if(this.renderAllItems===true){this._super();return true;}this._initPageSettings();var L=this.items;this.items=this._rc?this.items.slice(0,Math.min(this._rowsPerPage,this._rc)):[];this._super();this.items=L;this.postRenderPage(0,true);if(this._rc>this._rowsPerPage){this.itemsContainerNode.style[mstrmojo.css.MINHEIGHT]=(this._rh*this._rc)+"px";if(!this.connectedScrollbox){this.connectScrollbox(this);this.connectedScrollbox=true;}}else{this.postRenderingCleanup();}},_initPageSettings:function E(){var L=this.items;this._rc=(L&&L.length)||0;var N=this.itemRenderer;this._rh=(N&&N.rowHeight)||this._rhMin||3;var M=this._defaultRowsPerPage;if(!isNaN(this.scrollboxHeight)){M=Math.ceil(this.scrollboxHeight/this._rh);M=Math.max(M,this._minRowsPerPage);}this._rowsPerPage=M;this._totalPages=Math.ceil(this._rc/this._rowsPerPage);this._pageHeight=this._rh*this._rowsPerPage;this._pageStatus=new Array(this._totalPages);this._numPagesRendered=0;},onscroll:function J(){if(!this._renderingRows){this._startPageRenderThread();}},_startPageRenderThread:function F(){this.renderingRows=true;var M=this,L=this._renderTimer=self.setInterval(function(){if(!M){self.clearInterval(L);return ;}var N=M.getPagesToRender();if(N.length>0){M.renderPages(N);}else{M.renderingRows=false;self.clearInterval(M._renderTimer);delete M._renderTimer;if(M.isRenderingComplete()){M.postRenderingCleanup();}M=null;}},this.renderPause);},getPagesToRender:function I(){var P=[],Z=this._pageHeight,b=null,W=this._pageStatus,Y=this;function R(c){var d=W[c];if(d&&d.filled){if(!d.height){if(!b){b=Y.itemsNode.tBodies;}d.height=b[c].offsetHeight;}return d.height;}else{return Z;}}var a=0,S=null,O=null,M=this.scrollboxTop;for(var V=0,X=this._totalPages;V<X;V++){a+=R(V);if(a>=M){S=V;break;}}if(S==null){S=O=X-1;}else{var L=this.scrollboxBottom;for(var T=S+1;T<X;T++){if(a>=L){O=T-1;break;}a+=R(T);}}if(O==null){O=X-1;}for(var N=this._numPagesRendered;N<S;++N){P.push({idx:N,fill:false});}for(var Q=S;Q<=O;++Q){var U=W[Q];if(!U||!U.filled){P.push({idx:Q,fill:true});}}return P;},renderPages:function D(M){for(var N=0,L=M.length;N<L;++N){this.renderPage(M[N].idx,M[N].fill);}},renderPage:function B(R,M){var V=this._pageStatus,P=(this._numPagesRendered>=R+1);if(P){if(!M||(V[R]&&V[R].filled)){return ;}}var U=this._rowsPerPage,L=R*U,N=Math.min(L+U,this._rc)-1;var T=this.tempTableCont;if(!T){T=this.tempTableCont=this.domNode.ownerDocument.createElement("div");}var Q=M?this._buildItemsMarkup(L,N,'<table><tbody idx="'+R+'">',"</tbody></table>",this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join(""):'<table><tbody idx="'+R+'"><tr><td style="height:'+this._pageHeight+'px">&nbsp;</td></tr></tbody></table>';T.innerHTML=Q;var O=T.firstChild.tBodies[0],S=this.itemsNode;if(!P){S.appendChild(O);}else{S.replaceChild(O,S.tBodies[R]);}this.postRenderPage(R,M);},postRenderPage:function G(M,O){if(M+1>this._numPagesRendered){this._numPagesRendered=M+1;}var L=this._pageStatus,N=L[M];if(!N){N=L[M]={};}if(O){N.filled=true;}if(M>0&&M==this._totalPages-1){this.itemsContainerNode.style[mstrmojo.css.MINHEIGHT]="";}},isRenderingComplete:function C(){if(this._numPagesRendered==this._totalPages){for(var L=this._pageStatus,M=this._totalPages-1;M>-1;M--){if(!L[M]||!L[M].filled){return false;}}return true;}return false;},postRenderingCleanup:function A(){if(this.connectedScrollbox){this.disconnectScrollbox(this);this.connectedScrollbox=false;}},unrender:function(L){this.postRenderingCleanup();this._super(L);},refresh:function H(){if(!this.hasRendered){return ;}var N=this.domNode,L=N&&N.parentNode;if(!this.parent&&L){var M=N.ownerDocument.createElement("span");L.insertBefore(M,N);}this.unrender();if(!this.parent&&L){this.domNode=M;}this.render();if(this.defn&&this.defn.set){this.defn.set("readyState",mstrmojo.EnumReadystate.IDLE);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.ui.ButtonBar");mstrmojo.vi.ui.TextAlignButtonBar=mstrmojo.declare(mstrmojo.ui.ButtonBar,null,{scriptClass:"mstrmojo.vi.ui.TextAlignButtonBar",includeJustify:true,init:function B(E){this._super(E);mstrmojo.css.addWidgetCssClass(this,"txtAlign");var D=this.itemsValueMap,C=this.items;if(!this.includeJustify){C=C.filter(function(F){return F.id!=="justify";});}this.items=C.map(function(G){var F=mstrmojo.hash.copy(G);F.v=D[F.id];return F;});},onValueChange:mstrmojo.emptyFn,itemsValueMap:{left:0,center:2,right:1,justify:6},items:[{n:mstrmojo.desc(3049,"Left"),id:"left"},{n:mstrmojo.desc(2193,"Center"),id:"center"},{n:mstrmojo.desc(2166,"Right"),id:"right"},{n:mstrmojo.desc(2068,"Justify"),id:"justify"}],getItemProps:function A(E,C){var D=this._super(E,C);D.addCls(E.id);return D;},postselectionChange:function(C){var D=this.items,E=D[C.added[0]],F=D[C.removed&&C.removed[0]];this.onValueChange(E.v,F&&F.v);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.List","mstrmojo.ui._HasScroller","mstrmojo.css");var F=mstrmojo.css;var C;mstrmojo.ui.CheckList=mstrmojo.declare(mstrmojo.ui.List,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.CheckList",markupString:'<div id="{@id}" class="mstrmojo-ui-CheckList {@cssClass}" style="{@cssText}" mstrAttach:click,contextmenu><div class="scroll-container"><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{scrollboxNode:function A(){return this.domNode.firstChild;},itemsContainerNode:function I(){return this.domNode.firstChild.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onheightChange:mstrmojo.Widget.heightMarkupMethod,onwidthChange:mstrmojo.Widget.widthMarkupMethod,onorientationChange:function L(){F.toggleClass(this.domNode,"horizontal",this.orientation!=="v");},onmultiSelectChange:function J(){F.toggleClass(this.domNode,"radio",!this.multiSelect);},onenabledChange:function H(){F.toggleClass(this.domNode,"disabled",!this.enabled);}},multiSelect:true,orientation:"v",minimumSelectCnt:0,icnCss:"icn",items:null,getItemMarkup:function K(M){if(!C){C=this._super(M).replace(">{@en@n}<",'title="{@tt}"><span>{@en@n}</span><');}return C;},getItemProps:function G(O,M){var N=this._super(O,M);var P=O.css;if(P){N.addCls(P);}N.tt=O.tt||"";N.n=O.n||" ";return N;},setupScrollNodes:function D(){this.scrollNode=this.scrollboxNode;},preselectionChange:function B(N){var O=this.minimumSelectCnt,M=this.getSelectedItems().length,P=N.removed;if(P&&O){if(M<O){this.select(P,true);return false;}}F.toggleClass(this.itemsContainerNode,"disableSelected",M<=O);return true;},buildRendering:function E(){this._super();F.toggleClass(this.itemsContainerNode,"disableSelected",this.getSelectedItems().length<=this.minimumSelectCnt);}});mstrmojo.ui.CheckList.ItemType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.ui.List","mstrmojo.ui._HasScroller");mstrmojo.ui.ScrollableList=mstrmojo.declare(mstrmojo.ui.List,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableList",markupString:'<div id="{@id}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mousedown,mouseover,mouseout,contextmenu><div class="list-content"><div class="items-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function C(){return this.domNode.firstChild.firstChild;},scrollboxNode:function D(){return this.domNode.firstChild;},scrollNode:function E(){return this.domNode.firstChild;}},postBuildRendering:function B(){if(this.renderOnScroll){if(!this.onScrollEnd){var G=this.id;this.onScrollEnd=function F(){var H=mstrmojo.all[G];H.doScroll();H.updateScrollbars();};}}if(this._super){this._super();}},renderBlockSize:150,renderIndex:0,onScrollEnd:undefined,doScroll:function A(){if(this.renderOnScroll){var G,H=this.scrollNode,F=(this.renderIndex+1)*this.renderBlockSize;if(F>=this.items.length){return ;}if(mstrmojo.dom.position(H).h===H.scrollHeight){G=this.domNode;}else{G=H;}if((mstrmojo.dom.position(G).h+G.scrollTop)>=G.scrollHeight){this.renderIndex++;var I=this._buildItemsMarkup(this.renderIndex*this.renderBlockSize,((this.renderIndex+1)*this.renderBlockSize)-1,this._markupPrefix&&this._markupPrefix(),this._markupSuffix&&this._markupSuffix(),this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join("");G.innerHTML+=I;this.itemsContainerNode.innerHTML+=I;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.SuggestionList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var C=function(S,U,T){var R=S.parent.opener,J=R&&R.showDesc,Q=R&&R.showPath,I=U[S.itemField];var P=mstrmojo.string.escape4HTMLText,V="";if(Q){var M=U.anc&&U.anc.items,O=M&&M.length;if(O>0){for(var L=0;L<O-1;L++){V+=M[L].n+" > ";}V+=P(M[O-1].n);}else{if(U.path){V+=U.path;}}}if(!T){V+=(V.length===0?"":" > ")+P(I);}if(J){var N=U[S.itemDescField],K=120;if(N){V+="\r\n\r\n<br>"+P(N.substring(0,K)+(N.length>K?"...":""));}}return V;};var A=function(I,J,K){I.path=null;if(!J||!K||K.path){if(K&&K.path){I.set("path",K.path);}return ;}window.clearTimeout(this.pathTmr);this.pathTmr=window.setTimeout(function(){var L=J.path||J.getAttribute("path");if(L){I.set("path",K.path);return ;}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(M){var N=H(M.toString())||"";K.path=N;I.set("path",N);}},{taskId:"getObjectDetails",objectID:K.did,objectType:K.t},undefined);},200);};var H=function(K){var N;if(window.DOMParser){N=(new DOMParser()).parseFromString(K,"text/xml");}else{N=new ActiveXObject("Microsoft.XMLDOM");N.async="false";N.loadXML(K);}var P=N.getElementsByTagName("path")[0],L=P.childNodes,O="";if(L){for(var J=0,I=L.length;J<I;J++){var M=L[J].childNodes&&L[J].childNodes[0];if(M){O+=mstrmojo.string.escape4HTMLText(M.nodeValue)+(J<I-1?"> ":"");}}}return O;};mstrmojo.LegacySuggestionList=mstrmojo.declare(mstrmojo.SuggestionList,null,{scriptClass:"mstrmojo.LegacySuggestionList",useRichTooltip:false,itemDescField:"desc",getItemMarkup:function(K,I){var J=this.parent.opener,L=this.useRichTooltip?"":this.buildTooltip(K);return'<div class="mstrmojo-suggest-text '+((J&&J.item2textCss(K))||"")+'" idx="'+I+'" title="'+L+'">'+J.getHighlightedText(J.getSearchPattern(),mstrmojo.string.escape4HTMLText(K[this.itemField]))+"</div>";},getItemProps:function E(){return{};},onmouseover:function(J){var M=this.parent.opener;if(M&&M.showPath){var K=mstrmojo.dom.eventTarget(J.hWin,J.e),I=K.getAttribute("idx"),L=I!=null?this.items[I]:null;if(L&&L.t>-1){this.targetEl=K;this.targetItem=L;this.requestPath(K,L);}}},requestPath:function D(I,K){var J=this.parent.opener;if(K.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function&&J.showFunctionSyntaxAsPath){this.buildFunctionSyntax(K);}else{A(this,I,K);}},buildFunctionSyntax:function G(J){var K=J.path;if(!K&&J.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function){var I=function I(P){if(P.did<0){return P.n;}var O=P.pars,M=[],N,L;M.push(P.n);if(O){M.push("(");for(N=0,L=O.length;N<L;N++){M.push(O[N].n);if(N!==(L-1)){M.push(", ");}}M.push(")");}return M.join("");};J.path=I(J);}this.set("path",{path:J.path,excludeSelf:true});},buildTooltip:function B(I,J){return C(this,I,J);},onpathChange:function F(){var I=this.targetEl;I.path=1;var J=this.buildTooltip(this.targetItem,this.path.excludeSelf);if(this.useRichTooltip){this.useRichTooltip=true;this.hasOpenTooltip=false;if(!I.ttp){I.ttp=J;this.showTooltip();}}else{I.title=J;}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.string","mstrmojo.dom","mstrmojo.Popup","mstrmojo.List","mstrmojo.DropDownButton");var B=mstrmojo.dom;mstrmojo.Pulldown=mstrmojo.declare(mstrmojo.DropDownButton,null,{scriptClass:"mstrmojo.Pulldown",cssClass:"mstrmojo-Pulldown",items:null,itemIdField:"dssid",itemField:"n",itemCSS:"css",itemTitleField:null,defaultSelection:0,defaultText:null,title:"",value:null,popupToBody:false,popupCssClass:"",popupZIndex:null,fixWidth:false,fixHeight:false,_set_items:function(H,F){var G=this.items;this.items=F||[];return G!==this.items;},markupMethods:mstrmojo.hash.copy({onvalueChange:function(){var G=this.value,F=this.selectedIndex,I=this.items||[],J,H;if(F===undefined||(G!==null&&(F===-1||(F!==-1&&I[F]&&I[F][this.itemIdField]!==G)))){F=mstrmojo.array.find(I,this.itemIdField,G);F=(F>-1)?F:this.defaultSelection;this.selectedIndex=F;}else{if(G===null){this.selectedIndex=this.defaultSelection;}}this.selectedItem=J=I[this.selectedIndex];if(J){H=J[this.itemField];}else{H=this.defaultText||"";}this.set("text",H);}},mstrmojo.hash.copy(mstrmojo.DropDownButton.prototype.markupMethods)),prevalueChange:function D(){var G=this.value,F=-1;if(G!==null){F=mstrmojo.array.find(this.items,this.itemIdField,G);}if(F>-1){this.selectedItem=this.items[F];this.selectedIndex=F;}},togglePopup:function E(){if(this.popupToBody){var I=B.position(this.popupNode,true),H=this.popupRef,F={left:Math.round(I.x)+"px",top:Math.round(I.y)+"px"};if(!H.hasRendered){delete H.slot;F.placeholder=document.body.appendChild(document.createElement("div"));}this.popupOpenConfig=this.popupOpenConfig||{};mstrmojo.hash.copy(F,this.popupOpenConfig);}else{this.popupRef.slot="popupNode";}if(this._super){this._super();}var G=this.popupRef.domNode;if(G){if(this.fixWidth){G.style.width=(this.domNode.offsetWidth-2)+"px";}else{G.style.minWidth=(this.domNode.offsetWidth-2)+"px";}}},premousedown:function A(F){if(B.getButton(F.hWin,F.e)===B.MOUSE_BUTTON.LEFT){this.togglePopup();}},unrender:function C(F){var G=this.popupRef;if(this.popupToBody&&G.hasRendered){G.unrender(false);}if(this._super){this._super(F);}},itemName:function(H,F,G){return mstrmojo.string.encodeHtmlString(H[G.itemField]);},popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",cssClass:"mstrmojo-Pulldown-Popup",autoCloses:false,modal:false,autoClose:true,locksHover:true,onOpen:function(){var H=this.opener,G=H&&H.popupZIndex,I=(H&&H.popupCssClass)||"",F=this.domNode;if(G){F.style.zIndex=G;}if(I){mstrmojo.css.addClass(F,[I]);}if(H&&H.fixWidth){mstrmojo.css.addClass(F,["fix-width"]);}if(H&&H.fixHeight){mstrmojo.css.addClass(F,["fix-height"]);}},children:[{scriptClass:"mstrmojo.List",alias:"list",itemMarkupFunction:function(I,F,G){var H=I[G.itemCSS]||G.parent.opener.item2textCss&&G.parent.opener.item2textCss(I)||"",J=G.parent.opener.itemName;return'<div class="mstrmojo-Pulldown-listItem"><div class="mstrmojo-text '+H+'" title="'+I[G.itemTitleField||G.itemField]+'">'+(J(I,F,G)||"&nbsp;")+"</div></div>";},renderOnScroll:false,bindings:{itemIdField:"this.parent.opener.itemIdField",itemField:"this.parent.opener.itemField",itemCSS:"this.parent.opener.itemCSS",itemTitleField:"this.parent.opener.itemTitleField",items:"this.parent.opener.items",selectionPolicy:"this.parent.opener.selectionPolicy",selectedIndex:"this.parent.opener.selectedIndex"},onmousedown:function(){this.parent.close();},onchange:function(){var H=this.parent,I=H.visible,F=H.opener,G=this.selectedItem;if(!F||!G||!I){return ;}F.set("value",G[this.itemIdField]);}}]}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Button","mstrmojo.DropDownButton","mstrmojo.Label","mstrmojo.WaitIcon");mstrmojo.IncFetch=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.IncFetch",markupString:'<div id="{@id}" class="mstrmojo-IncFetch {@cssClass}" style="{@cssText}"><div class="mstrmojo-IncFetch-content"></div><div class="mstrmojo-clearMe"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},preBuildRendering:function A(){var J=[],F=this.ds,M=this.cp,P=this.np,C=this.ps,E=this.id,G=2;var L=function(){mstrmojo.all[E].set("cp",this.text);};var H={f:1,p:Math.max(M-1,1),n:Math.min(M+1,P),l:P};for(var O in H){J.push(new mstrmojo.Button({iconClass:"arrow "+O,title:F[O],enabled:(H[O]!==M),text:H[O],onclick:L}));}var D=Math.max(Math.min(M-2,P-4),1),I=Math.min(D+4,P);for(var K=D;K<=I;K++){var N;if(K===M){if(I-D===4&&P!==5){N=new mstrmojo.DropDownButton({height:"13px",title:F.a?F.a:"",text:K,direction:"up",popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",contentNodeCssClass:"goto",autoCloses:false,locksHover:true,children:[{scriptClass:"mstrmojo.VBox",children:[{scriptClass:"mstrmojo.Label",cssText:"float:left;",text:F.gt},{scriptClass:"mstrmojo.TextBox",cssText:"float:left;",size:3,maxLength:String(P).length,onEnter:function(){var R=this.inputNode.value,T=this.parent.parent;if(R===""){T.close();return ;}var Q=parseInt(R,10),S=!(isNaN(Q)||Q<1||Q>P);if(S){mstrmojo.all[E].set("cp",Q);T.close();}else{this.setInvalidState(F.v.replace("###",P).replace("##",1).replace(" #",""));}}},{scriptClass:"mstrmojo.Button",cssText:"float:left",iconClass:"apply",title:F.ap?F.ap:"",onclick:function(){this.parent.children[1].onEnter();}}]}],onOpen:function(){mstrmojo.css.addClass(this.parent.domNode,["open"]);var Q=this.children[0].children[1].inputNode;window.setTimeout(function(){Q.focus();},0);},onClose:function(){mstrmojo.css.removeClass(this.parent.domNode,["open"]);this.children[0].children[1].cleanUp();}}});}else{N=new mstrmojo.Button({iconClass:"pg on",text:K});}}else{N=new mstrmojo.Button({iconClass:"pg",text:K,onclick:L});}J.splice(G++,0,N);}J.splice(G++,0,new mstrmojo.Label({text:F.pgs.replace("###",P).replace("##",""),cssText:"float:left;margin:1px 1px 1px 3px;"}));this._iWait=new mstrmojo.WaitIcon({cssText:"margin-top:-2px;"});J.push(this._iWait);this.addChildren(J);return this._super?this._super():true;},_set_cp:function B(D,C){if(parseInt(C,10)!==this.cp){this.raiseEvent({name:"fetch",v:C,iWait:this._iWait});}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.func","mstrmojo.array","mstrmojo.Button","mstrmojo.HBox","mstrmojo.dom","mstrmojo.Box");var D=mstrmojo.dom;mstrmojo.Dialog=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Dialog",title:"",buttons:null,alignment:"center",btnAlignment:"right",zIndex:10,modal:true,markupString:'<div id="{@id}" class="mstrmojo-Dialog {@cssClass}" style="z-index: 1100;" tabindex="0" mstrAttach:click><div class="win mstrmojo-Editor" style="{@cssText}"><div class="mstrmojo-Editor-titlebar"><div class="mstrmojo-Editor-title">{@title}</div></div><div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div><div class="mstrmojo-Editor-tip"></div></div>',markupSlots:{editorNode:function(){return this.domNode.firstChild;},curtainNode:function(){return this.domNode.childNodes[1];},titleNode:function(){return this.domNode.firstChild.firstChild;},containerNode:function(){return this.domNode.firstChild.childNodes[1];},buttonNode:function(){return this.domNode.firstChild.lastChild;},tipNode:function(){return this.domNode.lastChild;}},editorNode:null,btnHbox:null,markupMethods:{onzIndexChange:function(){this.editorNode.style.zIndex=this.zIndex;this.curtainNode.style.zIndex=this.zIndex-1;},onwidthChange:function(){this.editorNode.style.width=this.width||"auto";},onvisibleChange:function(L){if(L){return ;}var J=this.visible,K=J?"block":"none";this.editorNode.style.display=K;if(this.modal){this.curtainNode.style.display=K;}},onleftChange:function(){this.editorNode.style.left=this.left||"";},ontopChange:function(){this.editorNode.style.top=this.top||"";},ontitleChange:function(){this.titleNode.firstChild.innerHTML=this.title||"";}},preBuildRendering:function F(){var J;var K=this.buttons;if(K&&!this.btnHbox){for(J in K){K[J].cssClass=(K[J].cssClass||"")+(this.noButtonCls?"":" mstrmojo-Editor-button");}this.addChildren([{scriptClass:"mstrmojo.HBox",cssText:"float:"+this.btnAlignment,slot:"buttonNode",alias:"btnHbox",children:K},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-clearMe",slot:"buttonNode"}]);}if(this.modal){this.cssClass+=" modal";}return this._super();},buildRendering:function B(){var J=this.placeholder;if(this._super()){if(!this.parent&&!J){document.body.appendChild(this.domNode);}return true;}return false;},getResizeHandler:function E(){var J=this.id;return function(){var K=mstrmojo.all[J];K.resizeDialog();K.positionDialog();};},postBuildRendering:function A(){this._super();if(this.modal&&this.visible){this.curtainNode.style.display="block";}if(!this._resizeHandler){var K=this._resizeHandler=this.getResizeHandler();D.attachEvent(window,"resize",K);}this.resizeDialog();this.positionDialog();try{this.domNode.focus();}catch(J){}return true;},resizeDialog:function G(){if(this.modal){this.resizeCurtain();}},resizeCurtain:function C(){var K=this,O=K.curtainNode,J=document.body,M=document.documentElement,N=O.style,L=K.curtainPosition;N.width=Math.max(J.clientWidth,M.scrollWidth)+"px";if(L&&L.h){N.height=L.h+"px";}else{N.height=Math.max(J.clientHeight,M.scrollHeight)+"px";}if(L&&L.y){N.top=L.y+"px";}K.raiseEvent({name:"resizeCurtain"});},positionDialog:function H(){var K=this.editorNode,M=this.left,L=this.top;if(!M||!L){D.center(K);var J=K.style;if(this.alignment==="top"){J.top="10px";}if(M){J.left=M;}if(L){J.top=L;}}},destroy:function(K){var J=this._resizeHandler;if(J){D.detachEvent(window,"resize",J);}this._super(K);}});mstrmojo.toast=function I(O,M,Q,J){var P="mojoToast9",N,L=M||3000;if(J&&J.id){P=J.id+"-"+P;}try{mstrmojo.all[P].destroy();}catch(K){}mstrmojo.insert({id:P,scriptClass:"mstrmojo.Label",cssClass:(J&&J.cssClass)?J.cssClass:"toastCss",text:O}).render();N=mstrmojo.all[P].domNode;if(J&&J.dom){J.dom.appendChild(N);}else{document.body.appendChild(N);D.bottomCenter(N);}window.setTimeout(function(){if(Q){Q();}try{mstrmojo.all[P].destroy();}catch(R){}},L);};mstrmojo.mask={show:function(){var J=mstrmojo.mask.win=mstrmojo.insert({scriptClass:"mstrmojo.Box",cssClass:"fullscreen-mask"});J.render();document.body.appendChild(J.domNode);},hide:function(){mstrmojo.mask.win.destroy();}};}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo._HasBuilder");mstrmojo.ToolBar=mstrmojo.declare(mstrmojo.HBox,[mstrmojo._HasBuilder],{scriptClass:"mstrmojo.ToolBar",cellCssClass:"mstrmojo-ToolBar-cell",markupString:'<table id="{@id}" class="mstrmojo-ToolBar {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0"><tr><td class="mstrmojo-ToolBar-outercell"><table class="mstrmojo-ToolBar-innertable" cellspacing="0" cellpadding="0"><tr>{@tableHtml}</tr></table></td></tr></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0].firstChild.rows[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},buildChildren:function A(){var B=this.buildConfig;if(!B){this.buildConfig={};B=this.buildConfig;}B.target=this.target;return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.dom","mstrmojo.TextBox");var A=mstrmojo.css,C=mstrmojo.dom;mstrmojo.TextArea=mstrmojo.declare(mstrmojo.TextBox,null,{scriptClass:"mstrmojo.TextArea",markupString:'<textarea id="{@id}" class="mstrmojo-TextArea {@cssClass}"  style="{@cssText}" title="{@tooltip}" placeholder="{@placeholderText}" rows="{@rows}" cols="{@cols}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keydown,keyup,blur></textarea>',maxLength:256,onkeydown:function B(K){var I=this.inputNode,J=this.value,E=this.maxLength,F=(J&&J.length)||0,M=K.e,L=M.keyCode;this.isDeleteKeys=L===8||L===46;this.isArrowKeys=L===37||L===38||L===39||L===40;if(E!==undefined&&E<=F){var G=I.selectionEnd,H=(G!==undefined)?(G-I.selectionStart)>0:document.selection.createRange().text.length>0;if(!this.isDeleteKeys&&!this.isArrowKeys&&!H){if(C.isIE7||C.isIE8||C.isIE9){I.blur();window.setTimeout(function(){I.focus();},1);}C.preventDefault(window,M);return false;}}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.TextArea,{oncssClassChange:function D(){A.addClass(this.domNode,this.cssClass||"");}});})();(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo.hash");var A="mstrmojo-TextBoxWithLabel";mstrmojo.TextBoxWithLabel=mstrmojo.declare(mstrmojo.TextBox,null,{scriptClass:"mstrmojo.TextBoxWithLabel",label:"",rightLabel:"",cssDisplay:"inline",type:"text",markupString:'<div class="'+A+' {@cssClass}" style="{@cssText}"><span class="mstrmojo-TextBox-label">{@label}</span><input id="{@id}" class="mstrmojo-TextBox {@inputNodeCssClass}"  style="{@inputNodeCssText}" title="{@tooltip}" type="{@type}" value="{@value}" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keyup,blur/><span class="mstrmojo-TextBox-label-right">{@rightLabel}</span></div>',markupSlots:{inputNode:function(){return this.domNode.firstChild.nextSibling;},lblNode:function(){return this.domNode.firstChild;}}});mstrmojo.TextBoxWithLabel.prototype.markupMethods=mstrmojo.hash.copy({oncssClassChange:function(){var B=this.cssClass;this.domNode.className=A+(B?" "+B:"");},onlabelChange:function(){this.lblNode.innerText=this.label||"";}},mstrmojo.hash.copy(mstrmojo.TextBoxWithLabel.prototype.markupMethods));}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.ui.editors._HostsControls","mstrmojo._HasLayout","mstrmojo.css");mstrmojo.ui.editors.controls.ControlGroup=mstrmojo.declare(mstrmojo.Box,[mstrmojo.ui.editors._HostsControls,mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.ControlGroup",layoutConfig:{w:{containerNode:"100%"},xt:true},shouldPropagateEnabled:true,init:function A(B){this._super(B);mstrmojo.css.addWidgetCssClass(this,"ctrl-group");}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.ui.editors.controls.ControlGroup,{onenabledChange:mstrmojo.Container.enabledMarkupMethod});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.ui._HasScroller","mstrmojo.css");var B=mstrmojo.css;mstrmojo.ui.ColumnContainer=mstrmojo.declare(mstrmojo.Box,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ColumnContainer",markupString:'<div id="{@id}" class="mstrmojo-ui-ColumnContainer {@cssClass}"><div></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;},scrollNode:function(){return this.domNode.firstChild;}},markupMethods:{onnextChange:function A(){B.toggleClass(this.domNode,"hasNext",!!this.next);}},active:false,next:null,idx:undefined,updateColumnContainer:function D(){var E=this.next;if(E){E.updateColumnContainer();}},onactiveChange:function C(){B.toggleClass(this.domNode,"active",this.active);var E=this.next;if(E){E.updateColumnContainer();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo._HasLayout","mstrmojo.css");var B=mstrmojo.css;mstrmojo.vi.ui.editors.EditorGroup=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.vi.ui.editors.EditorGroup",layoutConfig:{w:{containerNode:"100%"},xt:true},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onenabledChange:mstrmojo.Container.enabledMarkupMethod},showDivider:true,isNested:false,isContainer:false,init:function D(E){this._super(E);B.addWidgetCssClass(this,["mstrmojo-vi-EditorGroup","ctrl-group"]);},preBuildRendering:function A(){var E=[];if(this.showDivider){E.push("divide");}if(this.isContainer){E.push("container");}if(E.length){B.addWidgetCssClass(this,E);}return this._super();},getLayoutOffsets:function C(){return{h:0,w:this.isNested?0:18};}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo._IsPopup","mstrmojo._CanAutoClose","mstrmojo.ui.PopupConfig","mstrmojo.css");mstrmojo.ui.editors.ToolbarPopup=mstrmojo.declare(mstrmojo.Box,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.editors.ToolbarPopup",popupConfig:null,anchorElement:null,autoCloses:false,locksHover:true,init:function B(C){this._super(C);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-ToolbarPopup");this.popupConfig=new mstrmojo.ui.PopupConfig({isHostedWithin:false,hostProxyCssClass:(mstrApp&&mstrApp.getThemeClassName())||"",anchorElement:this.anchorElement});},open:function A(D,C){D.closePopup();this._super(D,C);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo._HasOwnAvatar","mstrmojo.css","mstrmojo.dom");var E=mstrmojo.css,D=mstrmojo.dom;function F(K){var L=K.src.node,M=this.children.filter(function(N){return D.contains(N.domNode,L,true,this.domNode);});return M[0];}function J(K){var N=K.tgt,V=this.children,R=D.getMousePosition(N.e,N.hWin),Q,S,U,M,T,P,L=R.y;for(var O=V.length-1;O>=0;O--){U=V[O];Q=D.position(U.domNode);T=Q.h;M=Q.y;P=M+T/2;if(P<L&&(O===V.length-1||L<=M+T)){S=O;break;}else{if((O===0||M<L)&&L<=P){S=O-1;break;}}}return S;}function I(K){return K===-1?"top":"bottom";}mstrmojo.threshold.ThresholdRowPanel=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.threshold.ThresholdRowPanel",dropZone:true,draggable:true,restrictedToAxis:"y",avatarCssClass:"threshold-drag-avatar",getDragData:function H(K){return{row:F.call(this,K)};},createAvatar:function B(M,L){var K=L.src.data.row.domNode.cloneNode(true);K.style.left=D.position(this.domNode).x+"px";return K;},isDragValid:function G(K){var L=K.getCtxtDragData().row;return !(this.children.length===1||!L||L.draggableNode!==K.src.node)||this._super(K);},ondragstart:function(K){this._super(K);this.removeChildren(K.getCtxtDragData().row);},ondragmove:function A(M){var O=M.getCtxtDragData(),N=this.children,L=J.call(this,M);var K=O.lastRowIdx;if(K!==L){if(K!==undefined){E.removeClass(N[Math.max(K,0)].domNode,I(K));}E.addClass(N[Math.max(L,0)].domNode,I(L));O.lastRowIdx=L;}this._super(M);},ondragend:function C(L){var M=L.src.data,K=M.lastRowIdx;if(K!==undefined){E.removeClass(this.children[Math.max(K,0)].domNode,I(K));}this._super(L);this.parent.parent.model.moveThreshold(L.getCtxtDragData().row.idx,K+1);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupButton","mstrmojo._HasLayout");mstrmojo.ui.editors.controls.PreviewButton=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.PreviewButton",markupString:'<div id="{@id}" class="mstrmojo-ui-PreviewButton {@cssClass}" style="{@cssText}"><div class="cf" mstrAttach:click><div class="preview"></div><div class="btn">&nbsp;</div></div><div class="host"></div></div>',markupSlots:{previewNode:function(){return this.domNode.firstChild.firstChild;},btnNode:function(){return this.domNode.firstChild.lastChild;},widgetHostNode:function(){return this.domNode.lastChild;},clickableNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},layoutConfig:{h:{previewNode:"100%",btnNode:"100%",widgetHostNode:"0px"},w:{previewNode:"100%",btnNode:"20px",widgetHostNode:"all"},xt:true},isHostedWithin:false,getLayoutOffsets:function B(){return{h:2,w:2};},anchorSlot:"clickableNode",updatePreview:function C(){throw new Error(this.scriptClass+" must implement updatePreview.");},getPopupHostNode:function A(){return this.widgetHostNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetListBase","mstrmojo.WidgetListMapper","mstrmojo.WidgetListBuilder");mstrmojo.WidgetList=mstrmojo.declare(mstrmojo.WidgetListBase,null,{scriptClass:"mstrmojo.WidgetList",renderOnScroll:true,listMapper:mstrmojo.WidgetListMapper,listBuilder:mstrmojo.WidgetListBuilder,itemConfig:null,itemFunction:null,initBindings:function(){this._super();var E=this.ctxtBuilder,D=E&&E.itemWidgets;if(D){for(var C=0,A=D.length;C<A;C++){var B=D[C];if(B&&B.initBindings){B.initBindings();}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.List","mstrmojo._IsDial");mstrmojo.Dial=mstrmojo.declare(mstrmojo.List,[mstrmojo._IsDial],{scriptClass:"mstrmojo.Dial",markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onhasSelectionChange:function(){mstrmojo.css.toggleClass(this.domNode,["hasSelection"],!!this.hasSelection);},hideIfEmpty:function(){this.onadd();}},hideIfEmpty:false,onadd:function(A){if(this._super){this._super(A);}if(this.hideIfEmpty){if(this.domNode){this.domNode.style.display=(!this.items||this.items.length==0)?"none":"block";}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListSelector","mstrmojo.List","mstrmojo.string");mstrmojo.OBList=mstrmojo.declare(mstrmojo.List,null,{scriptClass:"mstrmojo.OBList",cssClass:"mstrmojo-OBList",itemClass:"mstrmojo-OBListItem",iconClass:"mstrmojo-OBListItemIcon",textClass:"mstrmojo-OBListItemText",iconCssPrefx:"mstrmojo-OBIcon_",itemMarkupFunction:function(C,A,B){return'<div class="'+B.itemClass+(C[B.itemType]?" t_"+C[B.itemType]:"")+(C[B.itemSubType]?" st_"+C[B.itemSubType]:"")+(C[this.itemISC]?" isc":"")+(C[B.itemViewMedia]?" vm_"+C[B.itemViewMedia]:"")+'"><table cellspacing="0" cellpadding="0"><tbody><tr><td>'+B.getIcon(C)+'</td><td><div class="'+B.textClass+'" title="'+B.getTooltip(C)+'">'+mstrmojo.string.htmlAngles(C.n)+"</div></td></tr></tbody></table></div>";},getIcon:function(F){var E=F[this.itemType],D=F[this.itemSubType],B=" t"+E,C=(parseInt(E,10)===1||parseInt(E,10)===3||parseInt(D,10)===14082)?" st"+D:"",G=F[this.itemISC]?'class="mstrmojo-ListIcon isc"':"",A=(F[this.itemViewMedia]===2048||F[this.itemViewMedia]===8192)?" hvi":"";return'<span class="mstrmojo-ListIcon '+B+C+A+'"><span '+G+"></span></span>";},getTooltip:function(C){var D="",F=C.anc&&C.anc.items,A=F&&F.length,B;if(A>0){for(B=0;B<A-1;B++){D+=F[B].n+" > ";}D+=F[A-1].n;}var E=C.desc,G=128;if(E){D+="\r\n\r\n"+E.substring(0,G)+(E.length>G?"...":"");}return D;},listSelector:mstrmojo.ListSelector,selectionPolicy:"reselect",itemType:"t",itemSubType:"st",itemISC:"isc",itemViewMedia:"dvm",useDblSelect:false});}());(function(){mstrmojo.requiresCls("mstrmojo.ListHoriz","mstrmojo.fx");mstrmojo.FishEye=mstrmojo.declare(mstrmojo.ListHoriz,null,{scriptClass:"mstrmojo.FishEye",width:16,size:10,step:16,speed:2,cssClass:"mstrmojo-FishEye",cssClassItem:"mstrmojo-dot",itemMarkupFunction:function(B,A,C){return'<div class="mstrmojo-fisheye-item '+C.cssClassItem+'" title="'+B.n+'" idx="'+A+'" did="'+B.did+'">&nbsp;</div>';},onchange:function(){this.scroll2();this.parent.set("selectedIndex",this.selectedIndex);},as:new mstrmojo.fx.AnimateProp(),onitemsChange:function(){if(this._super){this._super();}this.last=this.items.length-1;this.first=Math.max(0,this.last-this.size);if(this.items.length>this.size){this.scroll("left",this.width);}},scroll2:function(){var A=this.selectedIndex-this.last;if(this.selectedIndex==this.first&&this.first>0){this.scroll("right",this.width);}else{if(this.selectedIndex==this.last&&this.last<this.items.length-1){this.scroll("left",this.width);}else{if(this.selectedIndex>this.last){A=this.selectedIndex-this.last;this.scroll("left",this.width*A,A);this.last=Math.min(this.items.length-1,this.last+A);}else{if(this.selectedIndex<this.first){A=this.first-this.selectedIndex;this.scroll("right",this.width*A,A);this.first=Math.max(0,this.first-A);}}}}},scroll:function(C,F,E){var B=this.itemsContainerNode,I=B&&B.style;var D=this.as,H=parseInt(mstrmojo.css.getStyleValue(B,{left:"right",right:"left"}[C]),10),H=isNaN(H)?0:H,A=parseInt(I.left,10)||0,G=A+(C=="left"?-1:1)*(F||(Math.min(this.step,(-1)*H)));D.target=B;D.props={left:{start:A,stop:G,duration:100,interval:10,suffix:"px"}};D.play();E=E===undefined?1:E;this.first+=(C=="left"?1:-1)*E;this.last=this.first+this.size-1;this.parent.set("scrollable",this.last<this.items.length-1);this.parent.set("rightScrollable",this.first>0);return G;},srcId:null,postBuildRendering:function(){if(this._super){this._super();}this.hasRendered=!!this.domNode;var E=this.itemsContainerNode,A=E&&E.firstChild,B=A&&A.rows&&A.rows[0],D=B&&B.cells&&B.cells[0];this.first=0;this.last=this.size-1;var C=this.srcId;if(C&&mstrmojo.all[C]&&mstrmojo.all[C].attachEventListener){mstrmojo.all[C].attachEventListener("change",this.id,function(F){if(this.items[this.items.length-1]!=F.src.selectedItem){this.items.add([mstrmojo.hash.copy(F.src.selectedItem)]);this.set("selectedIndex",this.items.length-1);}if(this.items.length>this.size){this.set("rightScrollable",this.items.length>this.size);this.scroll("left",this.width*(this.selectedIndex-this.last),(this.selectedIndex-this.last));}});}this.itemsContainerNode.style.left=Math.min(0,(this.size-this.items.length+1))*this.width+"px";}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.Widget","mstrmojo.tooltip","mstrmojo.string","mstrmojo.array");var O=0,I=mstrmojo.array,B=mstrmojo.string;function P(){var U=this.textNode,W=this.imgNode;if(this.eg!=null){W.style.display="none";U.innerHTML=this.eg||"";U.style.display="block";}else{U.style.display="none";W.style.display="block";if(this.tooltip){W.setAttribute("ttl",this.tooltip);}var V=this.getFormats();this.retrieveGraphSrc(V.height,V.width);}}var T={6:"poly",7:"rect",100:"circle"};function H(){var d=this.as,Z=d&&d.length;if(!Z){return ;}var Y=this.id,c=Y+"_map"+O++,W=[],b=-1,X;for(X=0;X<Z;X++){var V=d[X];V.id=Y;V.aid=X;V.tooltip=B.multiReplace(V.tooltip||"",{"&#13":"<br />","&#32":" ",'"':"&quot;"});if(!isNaN(V.shape)){V.shape=this.getAreaShapeName(V.shape);}if(V.tks||V.tks===""||V.tty===1){V.extra=' href="#" ';}W[++b]=B.apply(this.areaMarkup,V);}var a='<map id="'+c+'" name="'+c+'">'+W.join("")+"</map>";if(!this.domNode){this.att='usemap="#'+c+'" ';this.map=a;}else{var U=document.createElement("div");U.innerHTML=a;if(this.mapNode){U=U.firstChild;this.mapNode.innerHTML=U.innerHTML;}else{this.imgNode.setAttribute("usemap","#"+c);this.mapNode=this.domNode.appendChild(U.firstChild);}}}var A=mstrmojo.GraphBase=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.GraphBase",cssClassPrefix:"mstrmojo-GraphBase",markupString:'<div id="{@id}" class="{@cssClassPrefix} {@cssClass}" title="{@tooltip}" style="{@domNodeCssText};"><div class="{@cssClassPrefix}-txt"></div><img {@att}src="../images/1ptrans.gif" class="{@cssClassPrefix} {@cssImageClass}" hidefocus="true" />{@map}</div>',att:"",map:"",cAreaIdx:-1,useRichTooltip:true,markupSlots:{imgNode:function J(){return this.domNode.childNodes[1];},mapNode:function F(){return this.domNode.childNodes.length>2?this.domNode.childNodes[2]:null;},textNode:function M(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:function K(){this.domNode.style.display=(this.visible)?"block":"none";}},preBuildRendering:function C(){H.call(this);return this._super();},postBuildRendering:function Q(){P.call(this);return this._super();},setModel:function L(U){this.model=U;},updatingTooltipHelper:function R(Y,h,b){var V=Y&&Y.getAttribute("aid"),U=Y&&Y.getAttribute("ttl"),X=Y.getAttribute("SC"),a={refNode:this.domNode,posType:mstrmojo.tooltip.POS_BOTTOMLEFT,contentNodeCssClass:"gp-tooltip"},g=(this.model.getZoomFactor?this.model.getZoomFactor():(this.model.docModel?this.model.docModel.getZoomFactor():1))+"em";if(V==this.cAreaIdx){return ;}this.cAreaIdx=V;a.content=U||this.defaultTooltip;var W="font-size:"+g+";";if(X){W+="border-color:#"+X;}a.contentNodeCssText=W;var d=Y.getAttribute("coords"),f=99999,e=99999;if(!b){if(d&&d.length>0){d=d.split(",");var Z=0;while(Z+1<d.length){f=Math.min(f,parseInt(d[Z++],10));e=Math.min(e,parseInt(d[Z++],10));}}}if(f===99999){f=h.x;}if(e===99999){e=h.y;}a.top=e;a.left=f;this.richTooltip=null;this.set("richTooltip",a);},redraw:function N(){if(!this.hasRendered){return false;}P.call(this);var U=this.getFormats();if(this.as&&U.height&&U.width){this.refreshMap();}return true;},refreshMap:function G(){if(this.as){H.call(this);}},getAreaShapeName:function D(U){return T[parseInt(U,10)]||"default";}});var S=A.tooltipCLS="mstrmojo-mobileGraph-Tooltip-content",E=A.canvasCLS="mobile-graph-highlight-canvas";A.hideTooltips=function(){I.forEach(document.getElementsByClassName(S),function(U){U.style.display="none";});I.forEach(document.getElementsByClassName(E),function(U){U.getContext("2d").clearRect(0,0,U.width,U.height);U.width=U.width;});};}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.tooltip","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.hash","mstrmojo.string");mstrmojo.requiresDescs(11038,11935,11936,11937,11856,11938,13138,13230,13260,14633,14636);var C=mstrmojo.hash.copy,P=mstrmojo.css,J=mstrmojo.dom,N=mstrmojo.array,E=mstrmojo.string,Q=function Q(V,T){if(!V){return ;}var S=T&&T.length||0,U;for(U=S;U>0;U--){V=V.replace(new Array(U+2).join("#"),T[U-1]);}return V;},L=function L(T){if(!T){return ;}var Z=this,V=J.position(T.refNode||Z.refNode),Y=J.position(Z.domNode),X=T.position||R.RIGHT,U=0,a=0,S=9+(T.margin!==undefined?T.margin:0),W=" ";switch(X){case R.TOP:a=-Y.h-S;W+="t";break;case R.BOTTOM:a=V.h+S;W+="b";break;case R.LEFT:U=-Y.w-S;W+="l";break;case R.RIGHT:U=V.w+S;W+="r";break;}mstrmojo.hash.forEach(C(T,{left:U,top:a,contentNodeCssClass:W,visible:false}),function(b,c){this[c]=b;},this);this.set("visible",T.invalid);},A=function A(S){var W=this,U,V=S.errorCode,X=S.errorMsg,T=S.args,Y=mstrmojo.vi.ui.rw.selectors.EnumWarningMessages;if(S.invalid){U={content:V!==null?(W.generateContentHTML(Q(Y[V],T))||Y["*"]):X};}return U;};mstrmojo.vi.ui.rw.selectors.EnumWarningMessages=C(mstrmojo.locales.validation,{"*":mstrmojo.desc(11038,"Invalid"),invalidValueVIWarning:mstrmojo.desc(11935,"Invalid characters"),emptyValueVIWarning:mstrmojo.desc(11936,"Please enter a number"),notIntegerVIWarning:mstrmojo.desc(11937,"Please enter an integer"),outOfRangeVIWarning:mstrmojo.desc(11856,"Please enter value between ## and ###."),noMultiSelectionVIWaring:mstrmojo.desc(11938,"This selector does not support multiple selections."),continuousSelectionVIWaring:mstrmojo.desc(13138,"This selector does not support non-continuous selections."),bigDecimalMetricSliderVIWaring:mstrmojo.desc(13230,"Cannot qualify on big decimal value. Please change qualification type to Rank"),unableDisplaySelectionVIWarning:mstrmojo.desc(13260,"Filter cannot display actual selections."),imageSizeExceedLimitVIWarning:mstrmojo.desc(14633,"Cannot embed an image larger than ##MB. Your image is still ###MB after compression. Enter a URL to the image instead."),imageFileTypeNotSupportedVIWarning:mstrmojo.desc(14636,"Invalid image format. Please use .png, .jpg, .jpeg, .gif or .bmp."),imageOverSizeNoCompessionVIWarning:mstrmojo.desc(14665,"Cannot embed an image larger than ##MB. Enter a URL to the image instead.")});mstrmojo.vi.ui.rw.selectors.EnumWarningPosition={TOP:1,BOTTOM:2,LEFT:3,RIGHT:4};var R=mstrmojo.vi.ui.rw.selectors.EnumWarningPosition;mstrmojo.vi.ui.rw.selectors._HasWarningMessage=mstrmojo.provide("mstrmojo.vi.ui.rw.selectors._HasWarningMessage",{_mixinName:"mstrmojo.vi.ui.rw.selectors._HasWarningMessage",warningSlotName:"warning",showWarning:function G(U){var Y=this,a=Y.warningSlotName,c=Y[a],S=U&&U.lasting||6000,X=U.refNode||this.domNode,T=U.highlight!==false,b=U.closeOnClick===false?false:true,Z;if(!c){c=new mstrmojo.Tooltip({refNode:X,highlight:T,closeOnClick:b,updatePopupConfig:null,cssClass:"vi-warning vi-tooltip-V"});Y.addDisposable(c);Y[a]=c;Z=Y.closeOnClick=Y.getCloseOnClickListener();J.attachEvent(document.body,"click",Z);}var W=U.position||R.TOP,V="vi-warning vi-tooltip-";switch(W){case R.TOP:c.cssClass=V+"V";break;case R.BOTTOM:c.cssClass=V+"A";break;case R.LEFT:c.cssClass=V+"D";break;case R.RIGHT:c.cssClass=V+"C";break;}c.open(Y,A.call(Y,U));this.adjustPosition(U);if(T){P.toggleClass(c.refNode,"mstrmojo-Warning",true);}window.clearTimeout(Y._warningTimeOut);Y._warningTimeOut=window.setTimeout(function(){Y.hideWarning();},S);},hideWarning:function H(){var T=this,S=T[T.warningSlotName];if(S&&S.visible&&S.close){if(S.highlight){P.toggleClass(S.refNode,"mstrmojo-Warning",false);}S.close();window.clearTimeout(T._warningTimeOut);delete T._warningTimeOut;}},getCloseOnClickListener:function I(){var S=this;return function(){var T=S[S.warningSlotName];if(T.closeOnClick){S.hideWarning();}};},adjustPosition:function M(S){var T=this;L.call(T[T.warningSlotName],S);},generateContentHTML:function D(S){return E.encodeHtmlString(S,true);},bindWarningHandler:function F(){N.forEach(arguments,function S(U){if(!U||!U.attachEventListener){return ;}var V=U._validationEventListener,T;if(V){U.detachEventListener(V);delete U._validationEventListener;}T=this.getValidationEvtListener();if(T){U._validationEventListener=U.attachEventListener("validationChange",this.id,T);}},this);},getValidationEvtListener:function B(){var T=this;return function S(U){var V=U.value;T[(V&&V.invalid?"show":"hide")+"Warning"](V);};},unrender:function K(S){var T=this[this.warningSlotName];if(T){T.unrender();}this._super(S);},destroy:function O(S){J.detachEvent(document.body,"click",this.closeOnClick);return this._super(S);}});}());(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.array","mstrmojo.tooltip");var E=mstrmojo.dom,D=mstrmojo.string,F=mstrmojo.hash,H=mstrmojo.array,C=mstrmojo.tooltip;mstrmojo.ui._HasListTooltip=mstrmojo.provide("mstrmojo.ui._HasListTooltip",{_mixinName:"mstrmojo.ui._HasListTooltip",tooltipOrientation:"horizontal",tooltipOffset:8,tooltipMarkup:'<div class="content" style="{@style}">{@c}</div>',tooltipCss:{},tooltipContrast:false,getTooltipText:function A(I){return I&&(I.ttp||I.n);},showTooltip:function G(W,M){var O=this;if(!O.hasOpenTooltip&&!(O._lastOpened&&O._lastOpened.visible)){var b=E.eventTarget(M,W),X=O.getItemFromTarget(b),R=O.getItemNodeFromTarget(b),d=O.getTooltipText(X),N=O.tooltipCss;if(!d){return ;}var c=E.position(R),V,P,L,T="",U=O.tooltipOffset;if(this.tooltipOrientation==="vertical"){V=c.x+c.w/2;L=C.POS_TOPCENTER;P=c.y+c.h+U;O.tooltipCss=F.copy({cssClass:"vi-regular vi-tooltip-A A-center"},N);}else{var K=E.windowDim(),S=40,Y=c.x+c.w+U,J=c.x-U,a=J-S,I=K.w-(Y+S),Z="vi-regular vi-tooltip-",Q;P=c.y;if(I>=a){V=Y;Q=I;L=C.POS_TOPLEFT;N.cssClass=Z+"C  "+N.rightCssClass;}else{V=J;Q=a;L=C.POS_TOPRIGHT;N.cssClass=Z+"D  "+N.leftCssClass;}T="max-width: "+Q+"px;";}if(O.tooltipContrast){N.cssClass=N.cssClass+" contrast";}if(N&&N.getItemCssClass){N.cssClass=H.filter([N.cssClass,N.getItemCssClass(X)],function(e){return !!e;}).join(" ");}O.richTooltip=F.copy(O.tooltipCss,{content:D.apply(O.tooltipMarkup,{c:d,style:T}),top:P,left:V,posType:L});O.richTooltip.keepArrowXPos=!!O.keepArrowXPos;O.richTooltip.keepArrowYPos=!!O.keepArrowYPos;this._super(W,M);}},onclick:function B(I){var J=this;window.setTimeout(function(){if(J.hasOpenTooltip){J.hideTooltip();}window.clearTimeout(J._tooltipTimeOut);},0);this._super(I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupWidget","mstrmojo.ui.menus._IsMenuPopup","mstrmojo.css");mstrmojo.ui.menus.MenuPopup=mstrmojo.declare(mstrmojo.ui.PopupWidget,[mstrmojo.ui.menus._IsMenuPopup],{scriptClass:"mstrmojo.ui.menus.MenuPopup",popupConfig:null,init:function B(D){this._super(D);var C=this.popupConfig;if(!C.contents){throw new Error("Cannot open popup without contents.");}this.cssClass=C.cssClass||"";this.addChildren(C.contents);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-MenuPopup");},shouldPropagateLockHover:function A(){return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.MenuPopup");mstrmojo.ui.menus.PopupConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,null,{scriptClass:"mstrmojo.ui.menus.PopupConfig",cssClass:"",contents:null,clear:function A(){this._super();this.contents=null;},close:function C(){([].concat(this.contents)[0]).parent.closeAllMenus();},newInstance:function B(){return new mstrmojo.ui.menus.MenuPopup({popupConfig:this});}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.MenuPopup","mstrmojo.Button","mstrmojo.dom");mstrmojo.requiresDescs(1442,2140);var E=mstrmojo.dom,G=mstrmojo.array;function B(I,K){var H=2140,M="Cancel",L="this.parent.popupConfig."+(I?"ok":"cancel"),J=K&&K[(I?"ok":"cancel")+"BtnText"];if(I){H=1442;M="Ok";}return mstrmojo.Button.newWebButton(J||mstrmojo.desc(H,M),function(O){var P=this.parent,N=P.popupConfig;P.closeAllMenus();N["fn"+M](N.data,P);E.stopPropogation(O.hWin,O.e);},I,{slot:"btnNode",bindings:{enabled:L+"Enabled",visible:L+"Visible"},cssDisplay:"inline-block"});}mstrmojo.ui.menus.MenuEditor=mstrmojo.declare(mstrmojo.ui.menus.MenuPopup,null,{scriptClass:"mstrmojo.ui.menus.MenuEditor",markupString:'<div id="{@id}" class="mstrmojo-ui-MenuEditor {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout,click><div class="me-content"></div><div class="me-buttons"></div><div class="me-bottom"></div></div>',markupSlots:{containerNode:function A(){return this.domNode.firstChild;},btnNode:function D(){return this.domNode.children[1];},bottomNode:function D(){return this.domNode.children[2];}},popupConfig:null,init:function F(J){this._super(J);var I=this.popupConfig,H=I.bottomNode;this.data=I.data||{};if(I.onOpen){this.onOpen=I.onOpen;}this.addChildren([B(true,I),B(false)]);if(H){H.slot="bottomNode";this.addChildren(H);}},onOpen:function C(){G.forEach(this.children,function(H){if(H.scriptClass==="mstrmojo.ui.ScrollableContainer"&&H.onOpen){H.onOpen();}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.ScrollableList","mstrmojo._IsPopup","mstrmojo._CanAutoClose","mstrmojo.ui._HasListTooltip");mstrmojo.ui.PopupList=mstrmojo.declare(mstrmojo.ui.ScrollableList,[mstrmojo._IsPopup,mstrmojo._CanAutoClose,mstrmojo.ui._HasListTooltip],{scriptClass:"mstrmojo.ui.PopupList",autoCloses:true,locksHover:true,closeOnClick:true,parentDomNode:undefined,markupString:'<div id="{@id}" class="mstrmojo-PopupList {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mouseover,mouseout,contextmenu><div class="mstrmojo-popupList-scrollBar"><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function D(){return this.domNode.firstChild.firstChild;},scrollboxNode:function F(){return this.domNode.firstChild;}},setupScrollNodes:function E(){this.scrollNode=this.scrollboxNode;},onOpen:function B(){this._super();this.updateScrollbars();},postBuildRendering:function C(){var H=this._super();if(!this.parent){var G=this.parentDomNode=this.parentDomNode||document.body;G.appendChild(this.domNode);}return H;},closePopup:function A(){this.set("visible",false);}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.ui.menus._HasMenuPopup","mstrmojo._CanAutoClose","mstrmojo._IsPopup","mstrmojo.ui.menus._IsMenuPopup","mstrmojo.ui.PopupConfig","mstrmojo.ui._HasScroller","mstrmojo.ui._HasUITheme","mstrmojo.dom","mstrmojo.css","mstrmojo.ui._HasListTooltip");var D=mstrmojo.dom,P=mstrmojo.css,I=mstrmojo.ui.PopupConfig.directionCfg;var Q={};var K=false;function F(V,W){if(V.pop){if(W&&V.ax){window.clearTimeout(this._popupAxTimeout);V.actionFn();this.closeAllMenus();}else{var T=V.fn.call(mstrmojo.all[V.scope],V.ctxt);var U=T.ENUM_CORNERS;T.setAlignment(U.TOP_RIGHT,U.TOP_LEFT);T.hostId=this.id;T.hostElement=this._getItemNode(V._renderIdx);this.openPopup(T.newInstance());}}else{if(V.dsbld!==true){if(V.fn(V,this)!==false){this.closeAllMenus();}}}}function G(T){var U=parseInt(T);return U===null||isNaN(U)?0:U;}mstrmojo.ui.menus.Menu=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList,mstrmojo.ui.menus._HasMenuPopup,mstrmojo._IsPopup,mstrmojo.ui.menus._IsMenuPopup,mstrmojo._CanAutoClose,mstrmojo.ui._HasListTooltip,mstrmojo.ui._HasScroller,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.ui.menus.Menu",selectionPolicy:"reselect",locksHover:true,closeOnClick:true,themeClassName:"mojo-theme-dark",icnCss:"mstrmojo-ui-Menu-item-container",popupConfig:null,tooltipCss:{leftCssClass:"menuTooltip",rightCssClass:"menuTooltip"},setupScrollNodes:function(){if(this.popupConfig&&this.popupConfig.supportsScroll){this.scrollNode=this.itemsContainerNode;this.scrollbarHostNode=this.domNode;}},updateScrollbars:function(){this._super();if(this.popupConfig&&this.popupConfig.supportsScroll&&this.hasCustomScrollbar){var V=this.scrollNode;if(!V){return ;}var T=(getComputedStyle&&getComputedStyle(V,null))||V.currentStyle,U=V.offsetWidth-G(T.borderLeftWidth)-G(T.borderRightWidth)-V.clientWidth;V.style.marginRight=-U+"px";V.style.paddingRight=0;}},onscroll:function(){this.closePopup();this._super();},init:function L(V){this._super(V);var T=this.popupConfig;this.items=T.getMenuItems();var U=["mstrmojo-ui-Menu","unselectable"],W=T.menuCssClass;if(W){U.push(W);}P.addWidgetCssClass(this,U);if(T&&T.supportsScroll&&T.maxHeight>0){this.icnCssText=(this.icnCssText||"")+";max-height:"+T.maxHeight+"px";}this.useRichTooltip=!!T.useTooltip;this.tstid=T.tstid;},markupMethods:{onvisibleChange:function J(){var T=this.visible;if(!K||T){P.toggleClass(this.domNode,"visible",T);}}},getItemMarkup:function C(X,T){if(X.getItemMarkup){return X.getItemMarkup.apply(this,[X,T]);}var V=!!X.pop,W=V?"submenu":"item",U=Q[W];if(!U){U=this._super(X,T).replace("{@en@n}",'<div class="micn"></div>{@en@n}');if(V){U=U.replace("{@en@n}",'{@en@n}<div class="arw"></div>');}Q[W]=U;}if(X.tstid){U=U.replace("{@tag}","{@tag} "+mstrmojo.tstid(X)+" ");}return U;},getItemProps:function R(V,T){var U=this._super(V,T);U.tag="a";U.addCls("mstrmojo-ui-Menu-item");U.addCls(V.cls);return U;},adjustCornersForPopupOverflow:function O(){var V=this._super(),Z=this.domNode,Y,X,T,U,W;if(V){Y=D.position(Z);T=Y.y;X=Z.style;U=this.popupConfig;W=U.position||D.position(U.hostElement);if(T<0||(T+Y.h>D.position(document.body).h)){X.top=(-W.y+5)+"px";X.bottom="auto";}}return V;},onmouseover:function E(T){var Y=T.getTarget(),X=this.getItemFromTarget(Y),W=this,V=W._lastOpened,a=V&&this.getItemFromTarget(V.popupConfig.hostElement)._renderIdx,Z=this.getItemNodeFromTarget(Y),U=(a!==undefined&&D.contains(this._getItemNode(a),Y,true,this.domNode));if(X){this._lastHoverIx=X._renderIdx;window.clearTimeout(this._popupTimeOut);window.clearTimeout(this._popupAxTimeout);if(this._lastHoverIx!==a&&!U){this._popupTimeOut=window.setTimeout(function(){if(W._lastOpened&&W._lastOpened.visible){W.closePopup();}if(W.visible&&X.pop){if(X.ax){W._popupAxTimeout=window.setTimeout(function(){P.removeClass(Z,"hlt-ax");F.call(W,X);},0);}else{F.call(W,X);}}},400);if(X.pop&&X.ax){P.addClass(Z,"hlt-ax");}}}},onclick:function S(T){this._evtTarget=T.getTarget();this._super(T);T.cancel();},postselectionChange:function H(T){var U=T.added;if(U){var V=this.items[U[0]];F.call(this,V,!(V.ax&&this._evtTarget.className==="arw"));delete this._evtTarget;}},oncontextmenu:function M(T){D.preventDefault(window,T.e);return false;},postBuildRendering:function N(T){this._super(T);if(this.popupConfig.supportsScroll){var U=this;window.setTimeout(function(){U.updateScrollbars();},10);}},showTooltip:function B(X,W){var V=D.eventTarget(W,X),U=this.getItemNodeFromTarget(V),T=this.getItemFromTarget(V);if(U&&((T&&T.ttp)||(U.scrollWidth>U.clientWidth))){this._super(X,W);}},onClose:function A(T){if(this._super){this._super(T);}this.closePopup();}});}());(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo._CanValidate","mstrmojo.css","mstrmojo.validation","mstrmojo.vi.ui.rw.selectors._HasWarningMessage");var H=mstrmojo.css,E=mstrmojo.validation,G=E.TRIGGER,J=E.STATUSCODE;function F(L){if((this.constraints.trigger&L)>0){this.validate();}}mstrmojo.ValidationTextBox=mstrmojo.declare(mstrmojo.TextBox,[mstrmojo._CanValidate,mstrmojo.vi.ui.rw.selectors._HasWarningMessage],{scriptClass:"mstrmojo.ValidationTextBox",validationDelay:500,getInvalidMsg:function K(L){return(L&&L.msg?L.msg:"");},postBuildRendering:function A(){this._super();this._original_tooltip=this.inputNode.title;},prekeyup:function I(L){this._super(L);var P=(this.constraints.trigger&G.ONKEYUP)>0;if(P){var M=this.validationDelay;if(M){this.clearValDelayTimer();var O=this._validateHandler;if(!O){var N=this;this._validateHandler=O=function(){N.validate();if(N._valDelayTimer){window.clearTimeout(N._valDelayTimer);delete N._valDelayTimer;}};}this._valDelayTimer=window.setTimeout(O,M);}else{this.validate();}}},preinput:function D(L){this._super(L);F.call(this,G.ONKEYUP);},preblur:function B(L){this._super(L);F.call(this,G.ONBLUR);},clearValidation:function C(){this._super();var L=this.inputNode;H.removeClass(L,this.constraints.invalidCssClass||"mstrmojo-TextBox-ErrValidation");L.title=this._original_tooltip;},clearValDelayTimer:function(){var L=this._valDelayTimer;if(L){window.clearTimeout(L);}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.ValidationTextBox,{onvalidationStatusChange:function(){var P=this.validationStatus;if(!P){return ;}var N=this.inputNode,L=(P.code>J.VALID),M=this.constraints.invalidCssClass;H.toggleClass(N,M||"mstrmojo-TextBox-ErrValidation",L);var O=L?this.getInvalidMsg(P):this._original_tooltip;if(!this.useRichTooltip&&O!==undefined&&O!==null){N.setAttribute("title",O);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Arr","mstrmojo.Button","mstrmojo.HBox","mstrmojo.FishEye");var A=function(B){return mstrmojo.hash.copy(B,{scriptClass:"mstrmojo.Button",text:"",enabled:false,dir:"left",cssClass:"mstrmojo-icon left",onclick:function(){var D=this.parent.fishEyeList,C=D&&D.scroll(this.dir,D.step);}});};mstrmojo.FishEyeContainer=mstrmojo.declare(mstrmojo.HBox,null,{scriptClass:"mstrmojo.FishEyeContainer",cssClass:"mstrmojo-FishEyeContainer",selectedIndex:-1,setItems:function(B){this.fishEyeList.set("items",B);},setSelectedIndex:function(B){this.fishEyeList.set("selectedIndex",B);},scrollable:false,rightScrollbale:false,children:[A({bindings:{enabled:"!!this.parent.scrollable"}}),({scriptClass:"mstrmojo.FishEye",alias:"fishEyeList",items:mstrmojo.Arr.makeObservable([]),srcId:"obList"}),A({alias:"feScrollRight",cssClass:"mstrmojo-icon right",dir:"right",bindings:{enabled:"!!this.parent.rightScrollable"}})]});mstrmojo.css=mstrmojo.hash.copy({getStyleValue:function(D,E){var B=null;if(D.currentStyle){E=(E==="float"?"styleFloat":E);B=D.currentStyle[E];}if(document.defaultView&&document.defaultView.getComputedStyle){E=(E==="float"?"cssFloat":E);var C=document.defaultView.getComputedStyle(D,null);B=C?C[E]:null;}return B;},setStyleValue:function(D,F,E){var B=function(G){return !!(G&&(typeof G==="object")&&(typeof G.length==="number"));};if(B(F)&&B(E)){var C;for(C in F){D.style[F[C]]=E[C];}}else{D.style[F]=E;}}},mstrmojo.css);}());(function(){mstrmojo.requiresCls("mstrmojo.OBList","mstrmojo.ui._IsIncFetchList","mstrmojo.ui._HasScroller");var F=mstrmojo.array,A=mstrmojo.chart.model.enums.EnumDSSObjectType;function D(G){return{browseConfig:null,parent:G,next:function(J){var I=this.browseConfig;if(!I){return ;}I.blockBegin+=I.blockCount;var H={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockBegin:I.blockBegin,blockCount:I.blockCount,includeAncestorInfo:true};if(I.folderLinksContextId){H.folderLinksContextId=I.folderLinksContextId;}if(I.includeObjectDesc){H.includeObjectDesc=I.includeObjectDesc;}if(I.rootFolderID){H.rootFolderID=I.rootFolderID;}else{if(I.rootFolderType){H.rootFolderType=I.rootFolderType;}}if(I.browsableTypes){H.objectType=I.browsableTypes;}if(I.searchPattern){H.searchPattern=I.searchPattern;if(I.recursive){H.recursive=I.recursive;}}this.parent.set("waiting",true);if(I.dataProvider){I.dataProvider.serverRequest(H,J);}else{mstrmojo.xhr.request("POST",mstrConfig.taskURL,J,H);}},hasNext:function(){var H=this.browseConfig;return(H.blockBegin+H.blockCount-1)<H.totalSize;}};}mstrmojo.mstr.ui.IncFetchOBList=mstrmojo.declare(mstrmojo.OBList,[mstrmojo.ui._IsIncFetchList,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.mstr.ui.IncFetchOBList",cssClass:"mstrmojo-OBList mstrmojo-IF-OBList",makeObservable:true,renderOnScroll:false,waiting:false,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:keypress,mousedown,mouseup,dblclick><div class="scroll-box" style="{@scrollBoxCssText}"><div class="mstrmojo-ListBase2-itemsContainer" style="{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild.firstChild;},dropCueNode:function(){return this.domNode.firstChild.lastChild;}},markupMethods:{onwaitingChange:function(){this.onwaitingChange();}},init:function E(G){if(this._super){this._super(G);}this.ifDataHelper=D(this);if(G.browseConfig){this.ifDataHelper.browseConfig=G.browseConfig;}},onwaitingChange:mstrmojo.emptyFn,addItems:function B(G){var H=this.browseConfig.browsableViewMedias;if(G&&H){var I={};F.forEach(H.split(","),function(J){I[parseInt(J,10)]=true;});G=F.filter(G,function(J){return(J.t!==A.DssTypeDocumentDefinition)||I[J.dvm];});}this.add(G,-1);this.set("waiting",false);if(this._super){this._super(G);}if(this.scrollNode){this.updateScrollbars();}},setupScrollNodes:function C(){this.scrollNode=this.scrollboxNode;}});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.dom","mstrmojo.TreeNodeSelector");var B=mstrmojo.dom,A={0:"closed",1:"opened",2:"leaf"};mstrmojo.TreeNode=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.TreeNode",markupString:'<li id="{@id}" class="mstrmojo-TreeNode {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseover><div class="mstrmojo-TreeNode-div"><img class="mstrmojo-TreeNode-state" src="../images/1ptrans.gif" /><span class="mstrmojo-TreeNode-text {@textCssClass}"></span></div><ul class="mstrmojo-TreeNode-itemsContainer">{@itemsHtml}</ul></li>',markupSlots:{stateNode:function(){return this.domNode.firstChild.firstChild;},textNode:function(){return this.domNode.firstChild.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild;}},markupMethods:{ontextChange:function(){this.textNode.innerHTML=mstrmojo.string.encodeHtmlString(this.text);},onstateChange:function(){this.stateNode.className="mstrmojo-TreeNode-state "+(A[this.state]||"closed");this.itemsContainerNode.style.display=(this.state===1)?"block":"none";},onselectedChange:function(){var D=this.selected?"addClass":"removeClass";mstrmojo.css[D](this.domNode.firstChild,["selected"]);},ondropCuePosChange:mstrmojo.WidgetList.prototype.markupMethods.ondropCuePosChange},renderOnScroll:false,listSelector:mstrmojo.TreeNodeSelector,premousedown:function C(D){var E=this._super(D),F=B.eventTarget(D.hWin,D.e);if(F===this.stateNode){if(this.state!==2){this.set("state",this.state===1?0:1);}}return E;},preclick:function(D){mstrmojo.dom.stopPropogation(D.hWin,D.e);},prechange:function(D){var E=this._super(D);if(E!==false){var F=this.tree;if(F&&F.onnodechange){F.onnodechange(D);}}return E;}});}());(function(){mstrmojo.requiresCls("mstrmojo.dnd","mstrmojo.ui._HasScroller");function Z(f){var h=document.createElement("div"),g=h.style,e=f.domNode;h.className="mstrmojo-DataGrid-avatar";g.height=e.clientHeight+"px";e.appendChild(h);f.avatar=h;return h;}function Q(e){var f=mstrmojo.dom.position(e.domNode,true);return f.x;}function O(e){return'<div class="mstrmojo-DataGrid-resizeHandle" unselectable="on" onselectstart="return false" rh="'+e+'"></div>';}function b(g){var f=g.getAttribute("rh"),e=f&&parseInt(f,10);return e;}function Y(f,i,e){var h=e.src,j=h&&h.data,g=j&&j.resizingIdx;if(!(g&&g>0)){return i&&i.apply(f,[e]);}}mstrmojo.RESIZE_NEXT_COLUMN_MODE={getRange:function G(h,g){var e=h.colSizeArray;var f=[-e[g-1]+h.minColWidth,(g==e.length-1)?e[g]-h.resizeHandleWidth-h.minColWidth:e[g]-h.minColWidth];return f;},updateSize:function F(h,g,f){var e=h.colSizeArray;e[g-1]=e[g-1]+f;e[g]=e[g]-f;},updateColumnWidth:function T(h,f,i,g){var e=h.colSizeArray;f[g-1].style.width=e[g-1]+"px";i[g-1].style.width=e[g-1]+"px";f[g].style.width=e[g]+"px";i[g].style.width=e[g]+"px";}};mstrmojo.RESIZE_ALL_COLUMN_MODE={getRange:function G(k,j){var l=k.minColWidth+k.resizeHandleWidth,e=k.colSizeArray,g=0;for(var h=j;h<e.length;++h){g+=e[h]-l;}var f=[-e[j-1]+l,g];return f;},updateSize:function F(h,m,f){var l=h.minColWidth+h.resizeHandleWidth,j=h.colSizeArray;j[m-1]=j[m-1]+f;var e=[];for(var g=0;g<j.length-m;++g){e[g]=m+g;}e.sort(function(i,o){return j[i]-j[o];});for(var g=0;g<e.length;++g){var n=f/(e.length-g);var k=j[e[g]];f-=(k>=n+l)?n:k-l;j[e[g]]=(k>=n+l)?k-n:l;}},updateColumnWidth:function T(j,f,k,h){var e=j.colSizeArray;for(var g=h-1;g<e.length;++g){f[g].style.width=e[g]+"px";k[g].style.width=e[g]+"px";}}};mstrmojo._CanResizeColumn=mstrmojo.provide("mstrmojo._CanResizeColumn",{draggable:true,dropZone:false,avatar:null,colSizeArray:null,resizableColumns:true,resizeHandleWidth:10,minColWidth:5,resizeColumnBehavior:mstrmojo.RESIZE_NEXT_COLUMN_MODE,createColSizeArray:function c(){var f,k,h,g,j,e;k=this.headerContainerNode;h=k&&k.getElementsByTagName("table")[0];g=h.rows[0].cells;f=[];for(j=0,e=g.length;j<e;j++){f.push(g[j].offsetWidth);}return f;},postBuildRendering:function V(){if(this._super){this._super();}if(this.avatar){this.domNode.appendChild(this.avatar);}this.colSizeArray=null;},getDragData:function E(e){var g=e.src,h=g.node,f=b(h);if(f&&f>0){return{resizingIdx:f,startingX:g.pos.x,baseX:Q(this)};}if(this._super){return this.dropZone&&this._super(e);}return null;},allowDrop:function K(e){var g=e.src,h=g&&g.data,f=h&&h.resizingIdx;if(f&&f>0){return true;}return this.dropZone;},ondragenter:function R(e){Y(this,this._super,e);},ondragover:function S(e){Y(this,this._super,e);},ondragleave:function B(e){Y(this,this._super,e);},ondrop:function W(e){Y(this,this._super,e);},isDragValid:function C(e){var g=e.src,h=g&&g.data,f=h&&h.resizingIdx;if(f&&f>0){return true;}if(this._super){return this._super(e);}return false;},ondragstart:function X(e){var h=e.src,i=h&&h.data,g=i&&i.resizingIdx;if(g&&g>0){var f=this.avatar||Z(this);this.ownAvatar=true;f.style.left=(i.startingX-i.baseX)+"px";f.style.display="block";document.body.style.cursor="col-resize";if(!this.colSizeArray){this.colSizeArray=this.createColSizeArray();this._firstTimeResize=true;}i.resizingRange=this.resizeColumnBehavior.getRange(this,g);return ;}if(this._super){this._super(e);}},ondragmove:function P(f){var m=f.src,g=m&&m.data,k=g&&g.resizingIdx;if(k&&k>0){var l=f.tgt,h=this.avatar,j=g.resizingRange,i=l.pos.x-g.startingX,e=Math.min(j[1],Math.max(i,j[0]));g.deltaX=e;if(h){h.style.left=(g.startingX-g.baseX+e)+"px";}}else{if(this._super){this._super(f);}}},ondragend:function L(j){var q=j.src,k=q&&q.data,o=k&&k.resizingIdx;if(o&&o>0){var e=this.titleColGroup,p=e&&e.childNodes,m=this.dataColGroup,n=m&&m.childNodes,h=p.length,l=this.colSizeArray,f=k.deltaX;this.resizeColumnBehavior.updateSize(this,o,f);if(this._firstTimeResize){var g;for(g=0;g<h;g++){p[g].style.width=l[g]+"px";n[g].style.width=l[g]+"px";}this._firstTimeResize=false;}else{this.resizeColumnBehavior.updateColumnWidth(this,p,n,o);}this.avatar.style.display="none";document.body.style.cursor="";this.ownAvatar=false;}else{if(this._super){this._super(j);}}}});mstrmojo.requiresCls("mstrmojo._CanResizeColumn","mstrmojo.ListMapperTable","mstrmojo.WidgetList");function J(g){var k=document.createElement("colgroup"),e=g.length,f,j;for(j=0;j<e;j++){var h=document.createElement("col");f=g[j];if(f.colWidth){h.style.width=f.colWidth+"px";}h.className=f.colCss||("col"+j);k.appendChild(h);}return k;}function I(f){var g=f._headerWidgets_,e=g&&g.length;if(e>0){var h;for(h=0;h<e;h++){g[h].destroy(true);}}}function A(i,e,h,k,f){var g=[],j=i.headerWidget;h=h?(" "+h):"";k=k||this._headerWidgets;f=f?(" "+f):' w="1"';g.push("<td"+h+">");if(e>0&&this.resizableColumns){g.push(O(e));}g.push('<div class="mstrmojo-DataGrid-headerText');g.push(i.headerCss?" "+i.headerCss:"");if(j){k.push(mstrmojo.hash.copy(j));g.push('"'+f+">");}else{g.push('">');}g.push(i.headerText||"&nbsp");g.push("</div>");g.push("</td>");return g.join("");}function a(e,m){var g,k,l,f,n,j,h=[];e=e||"_headerWidgets";m=m||"1";g=this[e];k=g.length;if(k>0){l=this.headerContainerNode.getElementsByTagName("div");f=mstrmojo.array.filter(l,function(i){return i.getAttribute("w")==m;});for(j=0;j<k;j++){g[j].placeholder=f[j].firstChild;g[j].dataGrid=this;n=mstrmojo.registry.ref(g[j]);n.render();h.push(n);}}this[e+"_"]=h;}mstrmojo.DataGrid=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._CanResizeColumn,mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.DataGrid",banding:true,resizableColumns:true,columns:null,items:null,listMapper:mstrmojo.WidgetListMapperTable,lockHeader:false,contentWidth:"",renderHook:{},markupString:'<div id="{@id}" class="mstrmojo-DataGrid {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseup><div class="mstrmojo-DataGrid-headerContainer">{@headerHtml}</div><div class="mstrmojo-DataGrid-itemsScrollBox" style="position:relative;"><div class="mstrmojo-DataGrid-itemsContainer" style="{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild.firstChild;},dropCueNode:function(){return this.domNode.lastChild.lastChild;},headerContainerNode:function(){return this.domNode.firstChild;}},markupMethods:{oncontentWidthChange:function(){var f=this.contentWidth,g=this.headerContainerNode,e=this.itemsContainerNode;if(f&&g&&e){g.style.width=f;e.style.width=f;}},onlockHeaderChange:function(){mstrmojo.css.toggleClass(this.domNode,"lockHeader",this.lockHeader);},onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";}},setupScrollNodes:function M(){this.scrollNode=this.scrollboxNode;},itemFunction:function(g,e,f){var h=new mstrmojo.DataRow({columns:f.columns,data:g,idx:e,dataGrid:f,parent:f});return h;},preBuildRendering:function D(){var k=this.renderHook;if(k&&k.pre){k.pre.apply(this,[A]);}else{var f=this.columns,e=f.length,g=['<table class="mstrmojo-DataGrid-headerTable" cellspacing="0" cellpadding="0"><tr>'],j;this._headerWidgets=[];var h;for(h=0;h<e;h++){j=A.apply(this,[f[h],h]);g.push(j);}g.push("</tr></table>");this.headerHtml=g.join("");}if(this._super){this._super();}},postBuildRendering:function V(){if(this._super){this._super();}var g=this.renderHook;if(g&&g.post){g.post.apply(this,[J,a]);}else{a.apply(this);this.titleColGroup=J(this.columns);}var e=this.titleColGroup,l=e.cloneNode(true),i=this.headerContainerNode,k=i&&i.getElementsByTagName("table")[0],m=this.itemsContainerNode,j=this.scrollboxNode,h=this.domNode,f=m&&m.getElementsByTagName("table")[0];this.dataColGroup=l;if(k&&f){k.insertBefore(e,k.firstChild);f.insertBefore(l,f.firstChild);}if(this.lockHeader){j.style.height=h.offsetHeight-i.offsetHeight+"px";mstrmojo.dom.attachEvent(j,"scroll",function(n){i.style.left=-j.scrollLeft+"px";});}},refresh:function H(e){I(this);if(this._super){this._super(e);}},destroy:function d(e){I(this);this._super(e);},unrender:function U(j){var g=this._headerWidgets_,f=g&&g.length,e;if(f>0){var h;for(h=0;h<f;h++){e=g[h];if(e&&e.hasRendered){e.unrender(true);}}}this._super(j);}});mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.Container");mstrmojo.DataRow=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.DataRow",cssClass:"mstrmojo-DataRow",columns:null,markupMethods:{onselectedChange:function(){mstrmojo.css.toggleClass(this.domNode,"selected",this.selected);}},buildDom:function(){this.children=[];var k=document.createElement("tr"),o=this.data,r=this.idx,f=this.dataGrid,l=this.cssClass,t=this.columns,e=this.children,g,p=-1,s,q;k.setAttribute("id",this.id);if(f.banding){l+=(r%2==1)?" odd":" even";}k.className=l+(mstrmojo.string.isEmpty(o[f.itemDisplayField||"n"])?" empty-row":"")+(" "+o[f.itemCSSField||"itemCss"]||"");var j,n;for(j=0,n=t.length;j<n;j++){s=t[j];q=(s.dataWidgetBuilder&&s.dataWidgetBuilder(o))||s.dataWidget;g=document.createElement("td");if(s.applyStyle2Cell&&s.colCss){g.setAttribute("class",s.colCss);}k.appendChild(g);if(q){g.setAttribute("w","1");p++;e.push(mstrmojo.hash.copy(q,{slot:"slot"+p,data:o,idx:r,dataGrid:f}));}else{if(s.dataFunction){g.innerHTML=s.dataFunction(o,r,f);}else{var h=mstrmojo.string.htmlAngles(o[s.dataField||"n"])||"&nbsp",m=s.tooltip?' title="'+h+'"':"";g.innerHTML='<div class="mstrmojo-DataRow-text" '+m+">"+h+"</div>";}}}this.initChildren();k.mstrmojoId=this.id;return k;},buildRendering:function N(){this._super();var j=this.domNode.childNodes,e=j.length,h={},g=0,k,f;for(f=0;f<e;f++){k=j[f];if(k.getAttribute("w")=="1"){h["slot"+g]=k;g++;}}this.addSlots(h);}});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo._IsDial");mstrmojo.WidgetDial=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._IsDial],{scriptClass:"mstrmojo.WidgetDial"});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo.Box","mstrmojo.array","mstrmojo._HasLayout","mstrmojo.ui.ColumnContainer");var E=mstrmojo.dom,G=mstrmojo.hash,C=mstrmojo.array;mstrmojo.ui.ColumnWalk=mstrmojo.declare(mstrmojo.Box,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.ColumnWalk",markupString:'<div id="{@id}" class="mstrmojo-ui-ColumnWalk cf {@cssClass}" mstrAttach:click></div>',layoutConfig:{h:{containerNode:"100%"},xt:true},currentColumn:-1,addNextColumn:function B(K){var J=this.children||[],L=J.length,I=J[L-1];var M=this.addChildren([G.copy(K,{scriptClass:"mstrmojo.ui.ColumnContainer",idx:L})])[0];if(I){I.set("next",M);}},onclick:function A(I){var K=I.getTarget();if(K){var J=this.children;C.forEach(J,function(M,L){if(E.contains(M.domNode,K,true,M.domNode)){this.set("currentColumn",L);}},this);}},oncurrentColumnChange:function D(I){var K=this.children,M=K[I.valueWas],J=K[this.currentColumn],L="active";if(M){M.set(L,false);}J.set(L,true);},removeTrailingContainer:function H(K){var J=this,I=this.children;if(!I||K>=I.length-1){return ;}C.forEach(I.slice(K+1),function(L){J.removeAndDestroyChild(L);});if(K>=0){I[K].set("next",null);}},insertAndRemoveTrailing:function F(J,I){this.removeTrailingContainer(J);this.addNextColumn(I);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ToolBar","mstrmojo.boxmodel","mstrmojo.array","mstrmojo.EnumRWUnitType","mstrmojo.dom","mstrmojo.css");var Q=["background-color","border","border-color","border-left","border-style","border-top","border-width","filter","top","left","z-index","fx","normWidth","normHeight","normZIndex","normTop","normLeft","tbborder","lrborder","ttl"],X=["width","height"],n="p_fmts";var k="px";var i={getContentHeight:function(q,s){var r=s.ttl&&s.ttl.height;if(q&&r&&!this.floatingToolbar){return Math.max(parseInt(q,10)-parseInt(r,10),0)+k;}return"";},getPortletMinHeight:function(q){return q.ttl.height;},adjustTitleCss:function(){return ;}};var f={getContentHeight:function(q){return q;},getPortletMinHeight:function(){return 0;},adjustTitleCss:function(q){q.titlebarNodeClass+=" floating";return ;}};function A(t,r){var s=this.parent,q=t+"DirtyKey";if(s[q]){s[q](r);}}function P(){this.toolbarTitleTextNode.innerHTML=this.title+(this.count?" ("+this.count+")":"");}function h(){var r=this.parent,t=r&&r.defn;if(t&&parseInt(t.t,10)===mstrmojo.EnumRWUnitType.PANEL){var q=r.parent,s=q.defn;if(s&&s.ifp){return q;}}return null;}var R=mstrmojo.hash,G=2;mstrmojo.DocPortlet=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocPortlet",floatingTitle:false,floatingTitleHeight:30,n:"",buttonWidth:17,markupString:'<div class="mstrmojo-portlet {@borderCss}" nm="{@n}" style="{@portletNodeCssText}"><div class="mstrmojo-portlet-slot-shadow" style="{@shadowNodeCssText}"></div><div class="mstrmojo-portlet-container" style="{@portletContainerNodeCssText}"><div class="mstrmojo-portlet-titlebar {@titlebarNodeClass}" style="{@titlebarNodeCssText}"><table style="height:100%;width:100%" class="mstrmojo-portlet-titlebar-table" cellspacing="0" cellpadding="0"><tr><td class="mstrmojo-portlet-slot-toolbar-left {@leftToolbarNodeClass}" style="{@leftToolbarNodeCssText}"></td><td class="mstrmojo-portlet-title" style="{@titleNodeCssText}"><div style="overflow: hidden;"></div></td><td class="mstrmojo-portlet-slot-toolbar {@toolbarNodeClass}" style="{@rightToolbarNodeCssText}"></td></tr></table></div><div class="mstrmojo-portlet-buttonbar {@buttonbarNodeClass}" style="{@buttonbarNodeCssText}"></div><div class="mstrmojo-portlet-slot-content" style="{@contentNodeCssText}"></div></div></div>',rightToolbarNodeCssText:"",leftToolbarNodeCssText:"",titleNodeCssText:"",titlebarNodeClass:"",titlebarNodeCssText:"",contentNodeCssText:"",borderCss:"no-border",buttonbarNodeClass:"",buttonbarNodeCssText:"",markupSlots:{containerNode:function(){return this.domNode.lastChild;},portletNode:function(){return this.domNode;},portletContainerNode:function(){return this.domNode.lastChild;},dimNode:function(){return this.domNode.lastChild;},shadowNode:function(){return this.domNode.firstChild;},titleNode:function(){return this.domNode.lastChild.childNodes[0];},buttonbarNode:function(){return this.domNode.lastChild.childNodes[1];},toolbarNode:function(){return this.domNode.lastChild.firstChild.childNodes[0].rows[0].cells[2];},toolbarTitleTextNode:function(){return this.domNode.lastChild.firstChild.childNodes[0].rows[0].cells[1].firstChild;},leftToolbarNode:function(){return this.domNode.lastChild.firstChild.childNodes[0].rows[0].cells[0];},contentNode:function(){return this.domNode.lastChild.lastChild;}},markupMethods:{ontitleChange:function(){P.call(this);},oncountChange:function(){P.call(this);},onfcChange:function(){if(this.fc&&this.content){this.updateContentHeight();}}},formatHandlers:{portletContainerNode:["RW","B","fx","background-color"],shadowNode:["RW","B","fx","background-color"],buttonbarNode:{src:"ttl",props:["background-color"]},titlebarNode:{src:"ttl",props:["F","B","background-color","height","fx","text-align","vertical-align"]},titleNode:{src:"ttl",props:["vertical-align","P","text-decoration"]}},updateServer:true,fc:false,content:null,rightToolbar:null,leftToolbar:null,floatingToolbar:false,_ts:i,getCacheKey:function F(){return this._super()+"-portlet";},getFormats:function M(){var r=this.content,q=r&&r.getFormats();return q&&q[n];},updateContentHeight:function d(u){var q=this.getFormats(),r=this.content,t=r.dimNode||r.domNode,s=((q.ttl&&parseInt(q.ttl.height,10))||0);if(t){if(!u){s+=((this.fc||this.isInFilterPanel())?t.offsetHeight:(q.height?parseInt(q.height,10):0));}this.containerNode.style.height=s+k;this.shadowNode.style.height=s+k;}},init:function o(q){this._super(q);var r=this.content;this.n=(q&&q.defn&&q.defn.n)||"";if(r&&r.getFormats()&&!this.getFormats()){this._createFormats();}},preBuildRendering:function B(){var r=this._ts=(this.floatingTitle)?f:i;if(this.isInFilterPanel()){var s=R.clone(this.formatHandlers);s.portletContainerNode=["z-index","height","B","backgroud-color"];s.shadowNode=["z-index","height","B","fx","background-color"];this.formatHandlers=s;}this._super();r.adjustTitleCss(this);var q="display:none;";if(!this.leftToolbar){this.leftToolbarNodeCssText+=q;}if(!this.toolbar){this.toolbarNodeCssText+=q;}var t=mstrmojo._Formattable.getBorderWidths(this);if(t.l||t.t||t.r){this.borderCss="has-border";}},postBuildRendering:function Y(){var s=mstrmojo.dom,AA=this.titleNode,z=this.onclicktitle;if(this.floatingTitle&&this.titleNode){document.body.appendChild(this.titleNode);var u=mstrmojo.css,w=this.contentNode,x=this;if(!this._onhover){this._onhovertt=function(){u.addClass(x.titleNode,["visible"]);x._onflt=true;return true;};this._onhoverofftt=function(){u.removeClass(x.titleNode,["visible"]);x._onflt=false;return true;};this._onhover=function(){var AB=x.titleNode;u.addClass(AB,["visible"]);var AC=s.position(x.contentNode,true);AB.style.top=(AC.y-AB.clientHeight+2)+k;AB.style.left=AC.x+k;return true;};this._onhoveroff=function(){u.removeClass(x.titleNode,["visible"]);return true;};}s.attachEvent(w,"mouseover",this._onhover);s.attachEvent(w,"mouseout",this._onhoveroff);s.attachEvent(AA,"mouseover",this._onhovertt);s.attachEvent(AA,"mouseout",this._onhoverofftt);}if(AA&&z){s.attachEvent(AA,"click",z);}if(this._super){this._super();}var v=this.getFormats();this.set("fc",v&&!v.height);if(this.isInFilterPanel()&&!this.isHorizFP()){var q=this.portletContainerNode.style,r=this.shadowNode.style,y=this.parent;q.width=r.width="99%";q.top=r.top=y.topStart+k;q.left=r.left=G+k;}else{if(this.isInFilterPanel()&&this.isHorizFP()){G=8;this.portletContainerNode.style.left=this.shadowNode.style.left=parseInt(v.left,10)+G*this.orgPos+k;}else{if(this.defn.ifp){this.adjustFPHeight2Fit();}}}if(this.buttonbarNode.clientHeight>0){this.buttonbarNode.style.height=this.buttonbarNode.clientHeight*this.model.getZoomFactor()+"px";}},adjustFPHeight2Fit:function(){var s=mstrmojo.dom,q=s.position(this.titleNode),r=s.position(this.contentNode).y-q.y-q.h;this.content.domNode.style.height=parseInt(this.defn.fmts.height,10)-r+"px";},unrender:function E(r){if(this.floatingTitle&&this.titleNode){var u=this.domNode,q=this.titleNode,s=mstrmojo.dom;if(u&&this._onhover){s.detachEvent(u,"mouseover",this._onhover);}if(u&&this._onhoveroff){s.detachEvent(u,"mouseout",this._onhoveroff);}if(q&&this._onhovertt){s.detachEvent(q,"mouseover",this._onhovertt);}if(q&&this._onhoverofftt){s.detachEvent(q,"mouseout",this._onhoverofftt);}if(q){document.body.removeChild(q);}}if(this._super){this._super(r);}},updateStyle:function(r,q){var t=this.shadowNode.style,s=this.containerNode.style;t.height=s.height=r;t.width=s.width=q;},_createFormats:function V(){var v=this.content&&this.content.getFormats(),t;t=v.p_fmts={};var q,u;for(q in Q){u=Q[q];if(v[u]!==undefined){t[u]=v[u];delete v[u];}}for(q in X){u=X[q];if(v[u]!==undefined){t[u]=v[u];}}v.height=this._ts.getContentHeight(v.height,t);if(mstrmojo.dom.isIE&&t.fx&&t.fx.ds&&!t["background-color"]){t["background-color"]="#ffffff";}var s=t.ttl,r=s&&s["background-color"];if(r){this.titlebarNodeClass=mstrmojo.color.getContrastingColor(r,"light","dark");}},refresh:function p(){if(!this.hasRendered){return ;}var r=this.children,q;for(q=r.length-1;q>=0;q--){r[q].refresh();}},isInFilterPanel:function L(){return(h.call(this)!==null);},isHorizFP:function(){if(this.isInFilterPanel()){var q=this.getFilterPanel();return q&&q.defn&&parseInt(q.defn.fds,10)===2;}return false;},getFilterPanel:function H(){return h.call(this);},getContainerHeight:function c(){return this.containerNode.clientHeight;},relocate:function C(q){if(this.isInFilterPanel()&&!this.isHorizFP()){this.portletContainerNode.style.top=this.shadowNode.style.top=q+k;}},setInfoWindowDimensions:function m(u){var r=this.domNode.style,q=this.shadowNode.style,s=this.portletContainerNode.style,t=mstrmojo._Formattable.getBorderWidths(this);u.h-=t.h;u.w-=t.w;q.height=s.height=r.height=u.h+k;q.width=s.width=r.width=u.w+k;u.h-=this.titleNode.offsetHeight;this.toolbarNode.style.display="none";},addDirtyKey:function K(q){A.call(this,"add",q);},removeDirtyKey:function J(q){A.call(this,"remove",q);},setDirtyChildren:function Z(){var q=this.content;if(q&&q.setDirtyChildren){q.setDirtyChildren.apply(q,arguments);}}});var W=0,O=1,j=2;function N(q){var r=this.content.defn;if(r){r.set("ds",q);}}function l(q){return{FormattingOrder:{ZIndex:this.getFormats()["z-index"]},FormattingView:{WindowState:q}};}function a(AC,AA,q,AD){var z=this.content,AB=z.k,y=mstrmojo.boxmodel.px2Inches,s=z.model.docModel||z.model,AF=s.getZoomProps(),t=this.getFormats(),r=AA!==undefined&&q!==undefined,AE={},u=this,x=l.call(this,AC);if(r){x.FormattingSize={OldHeight:y(AF,AA),OldWidth:y(AF,q),Height:y(AF,parseInt(t.height,10)),Width:y(AF,parseInt(t.width,10))};}AE.success=function(v){var w=v&&v.data;if(w){s.loadPartialData(w,AB);}N.call(u,AC);var AG=u.parent;if(AG.adjustSectionSize&&r){AG.adjustSectionSize();}};s.updateUnitFormat(z,1,x,AE,{params:{suppressData:true},config:r?null:{silent:true},preserveUndo:true});if(!r&&!(AD&&AD.all)){s.saveRWProps(AB,props,1,this.loadDataOnResize,AE,true);}}function T(){var w=this.content;if(!w){return ;}var u=function(AA){mstrmojo.array.forEach(AA,function(AB){if(AB.ds!==undefined){AB.set("visible",(AB.ds!==w.defn.ds));}});},x;if(this.isInFilterPanel()){var s=(parseInt(this.defn.ds,10)===W);w.set("visible",s);this.updateContentHeight(!s);x=this.leftToolbar;u(x&&x.children);var t=this.parent;if(t.refreshFP){t.refreshFP();}}else{var q=w.getFormats(),y=this.getFormats(),r=this.portletContainerNode.style,z=this.shadowNode.style,v=this.contentNode.firstChild.style;v.height=q.height;v.width=q.width;z.height=r.height=y.height;z.width=r.width=y.width;z.top=r.top=y.top;z.left=r.left=y.left;if(y["z-index"]!==undefined){z.zIndex=r.zIndex=y["z-index"];}x=this.rightToolbar;u(x&&x.children);if(w.resize){w.resize();}}}mstrmojo.DocResizablePortlet=mstrmojo.declare(mstrmojo.DocPortlet,null,{scriptClass:"mstrmojo.DocResizablePortlet",loadDataOnResize:false,_createFormats:function V(){this._super();var r=this.getFormats();var q=parseInt(this.defn.ds,10);if(q===W){r.normHeight=r.height;r.normWidth=r.width;if(r["z-index"]!==null&&r["z-index"]!==undefined){r.normZIndex=r["z-index"];}}if(q!==j){r.normTop=r.top;r.normLeft=r.left;}},onmaximize:function e(){var t=this.parent,w=this.content,v=w&&w.getFormats(),s=this.getFormats(),r=s.height,q=s.width,u=mstrmojo._Formattable.getBorderWidths(this);this.clearCache();w.clearCache();s.height=(parseInt(t.getHeight(),10)-u.h)+k;v.height=this._ts.getContentHeight(s.height,s);s.width=v.width=(t.getWidth()-u.w)+k;s.top=s.left=0;s["z-index"]=t.getMaxZIndex()+1;a.call(this,j,r,q);},onminimize:function b(){var v=this.content,r=v.dimNode||v.domNode,u=v&&v.getFormats(),t=this.getFormats(),s=t.height||r.offsetHeight,q=t.width;this.clearCache();v.clearCache();t.width=u.width=t.normWidth;t.top=t.normTop;t.left=t.normLeft;if(t.normZIndex!==null&&t.normZIndex!==undefined){t["z-index"]=t.normZIndex;}u.height=0;t.height=this._ts.getPortletMinHeight(t);a.call(this,O,s,q);},onrestore:function S(){var u=this.content,t=u&&u.getFormats(),s=this.getFormats(),r=s.height,q=s.width;this.clearCache();u.clearCache();s.height=s.normHeight;t.height=this._ts.getContentHeight(s.height,s);s.width=t.width=s.normWidth;s.top=s.normTop;s.left=s.normLeft;if(s.normZIndex!==null&&s.normZIndex!==undefined){s["z-index"]=s.normZIndex;}a.call(this,W,r,q);},changeWindowState:function I(s){N.call(this,s);var r=this.content,t=l.call(r,s),q=r.model.docModel||r.model;return q.getUnitFormatAction(r,1,t);},oncollapse:function U(q){a.call(this,O,undefined,undefined,q);},onexpand:function D(q){a.call(this,W,undefined,undefined,q);},adjustFP:function g(){var r=(parseInt(this.defn.ds,10)===W);this.content.set("visible",r);this.updateContentHeight(!r);var q=this.parent;if(q.refreshFP){q.refreshFP();}},postBuildRendering:function Y(){if(!this._sub_dsChange){this._sub_dsChange=this.defn.attachEventListener("dsChange",this.id,T);}this._super();if(this.isInFilterPanel()){var q=(parseInt(this.defn.ds,10)===W);this.updateContentHeight(!q);}}});mstrmojo.DocPortlet.ST_RESTORE=W;mstrmojo.DocPortlet.ST_MAX=j;mstrmojo.DocPortlet.ST_MIN=O;}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.fx","mstrmojo.Dialog","mstrmojo.Label","mstrmojo._IsPopup","mstrmojo._HasPopup","mstrmojo._IsMovable","mstrmojo.ui._HasUITheme","mstrmojo.Button","mstrmojo.dom","mstrmojo.hash","mstrmojo.array","mstrmojo.tooltip","mstrmojo.ui.editors.ErrorDialogContent");var h=mstrmojo.func.composite,M=mstrmojo.dom,Z=mstrmojo.Button.newWebButton,C=mstrmojo.css,Y=mstrmojo.all,N=mstrmojo.hash,W=mstrmojo.array;function V(n){if(!this.modal){return ;}var o=window.mstrApp;if(o&&o.modalEditorChange){o.modalEditorChange(this.id,n);}}mstrmojo.Editor=mstrmojo.declare(mstrmojo.Dialog,[mstrmojo._IsPopup,mstrmojo._HasPopup,mstrmojo._IsMovable,mstrmojo.ui._HasUITheme],{scriptClass:"mstrmojo.Editor",title:"",help:"",autoClose:false,showTitle:true,openEffect:null,themeClassName:"mojo-theme-light",useRichTooltip:true,closeEffect:null,markupString:'<div id="{@id}" class="mstrmojo-Editor-wrapper"><div class="mstrmojo-Editor {@cssClass}" style="z-index:{@zIndex};{@cssText}" mstrAttach:mouseup,mousedown,click,contextmenu>{@titlebarHTML}<div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div></div>',titleMarkupString:'<div class="mstrmojo-Editor-title-container"><div class="mstrmojo-Editor-title"></div><div class="edt-title-btn mstrmojo-Editor-help" tooltip="'+mstrmojo.desc(1143,"help")+'"></div><div class="edt-title-btn mstrmojo-Editor-close" tooltip="'+mstrmojo.desc(2102,"Close")+'"></div></div><div class="mstrmojo-Editor-titleSpacer"></div>',markupSlots:{editorNode:function X(){return this.domNode.firstChild;},titlebarNode:function j(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},titleNode:function R(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},helpNode:function k(){return this.showTitle?this.domNode.firstChild.firstChild.children[1]:null;},closeNode:function E(){return this.showTitle?this.domNode.firstChild.firstChild.lastChild:null;},containerNode:function S(){return this.domNode.firstChild.childNodes[2];},buttonNode:function I(){return this.domNode.firstChild.childNodes[3];},curtainNode:function l(){return this.domNode.lastChild;}},markupMethods:{ontitleChange:function(){if(this.showTitle){this.titleNode.innerHTML=this.title;}},onzIndexChange:function(){var n=this.zIndex;this.editorNode.style.zIndex=n;this.curtainNode.style.zIndex=n-1;},onvisibleChange:function(q){if(q){return ;}var p=this.visible,o="closeEffect",n="none";if(p){o="openEffect";n="block";}if(this[o]){this.playEffect(o);}else{this.editorNode.style.display=n;if(this.modal){this.curtainNode.style.display=n;}}},onhelpChange:function d(){if(this.showTitle){var o=this.help,n=this.helpNode;if(!o){n.style.display="none";}else{n.style.display="block";}}},onleftChange:function F(){this.editorNode.style.left=this.left||"";},ontopChange:function H(){this.editorNode.style.top=this.top||"";}},open:function Q(o,n){this._super(o,n);V.call(this,true);},close:function f(n){this._super(n);V.call(this,false);},unrender:function B(n){this._super(n);V.call(this,false);},destroy:function g(n){this._super(n);V.call(this,false);},preBuildRendering:function A(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));this._curtain_to_body=true;V.call(this,true);}this.titlebarHTML=(this.showTitle)?this.titleMarkupString:"<div></div><div></div>";return this._super();},getMovingHandle:function i(){return this.titlebarNode;},getMovingTarget:function U(){return this.editorNode;},onPreClose:function G(){this.hideTooltip();return true;},premousedown:function P(n){var o=n.getTarget();if(o===this.closeNode||o===this.helpNode){C.toggleClass(o,"active",true);}},premouseup:function O(n){var o=n.getTarget();if(o===this.closeNode||o===this.helpNode){C.toggleClass(o,"active",false);}if(n.getTarget()===this.closeNode&&this.onPreClose()){this.close();}},onclick:function c(o){if(o.getTarget()===this.helpNode){if(mstrApp.showHelpTopic){mstrApp.showHelpTopic(this.help);}else{var n=(mstrApp.helpUrl||"../help/")+"WebUser/WebHelp/Lang_"+(mstrApp.helpLocaleId||mstrApp.localeId)+"/"+(mstrApp.userHelpPage||"MicroStrategy_Web_Help.htm#");window.open(n+(this.help||""),"_blank");return false;}}},_set_visible:function b(t,q){var p=(this[t]!==q);if(p){this[t]=q;var s=this._close_handler;if(q){if(this._curtain_to_body){this.resizeDialog();this.positionDialog();}if(this.autoClose){var r=this;s=this._close_handler=s||function(n){var u=M.eventTarget(self,n);if(u&&u.parentNode&&!M.contains(r.editorNode,u,true,document.body)){r.close();}};M.attachEvent(document.body,"mousedown",s);}}else{var o=this._curtain_handler;if(o){M.detachEvent(window,"resize",o);}if(s){M.detachEvent(document.body,"mousedown",s);}}}return p;},showTooltip:function m(s,r){var q=this,o=M.findAncestorByAttr(M.eventTarget(r,s),"tooltip",true,this.domNode),p=o&&o.value;if(!q.hasOpenTooltip&&p){var n=M.position(o.node);q.richTooltip={cssClass:"vi-regular A-center vi-tooltip-A",content:p,top:Math.max(n.y+40,0),left:Math.max(n.x+4,0),posType:mstrmojo.tooltip.POS_TOPCENTER};this._super(s,r);}}});mstrmojo.Editor.openEffect_fadeIn={scriptClass:"mstrmojo.fx.AnimateProp",slot:"curtainNode",props:{backgroundColor:{start:255,stop:0,fn:function(n){n=Math.round(n);return["rgb(",n,",",n,",",n,")"].join("");}}},preStart:function(){var o=this.target,n=this.widget;n.editorNode.style.display="block";if(!n.modal){return false;}o.style.display="block";C.setOpacity(o,60);return true;}};mstrmojo.Editor.closeEffect_fadeOut={scriptClass:"mstrmojo.fx.FadeOut",slot:"curtainNode",start:0.6,stop:0,preStart:function(){var n=this.widget;n.editorNode.style.display="none";return !!n.modal;}};function D(n){return function(){Y[n].destroy();};}function J(o,v,w,x){var n=v.id||"mojoAlertx9",s,u=v.buttons;W.forEach(u,function(z){var y=z.onclick;z.onclick=function(AA){var AB=Y[n];if(y&&y.call(z,AA)===false){return ;}AB.destroy();AB=null;};});try{Y[n].destroy();}catch(t){}var p=v.cssClass,q=[];if(p){q.push(p);delete v.cssClass;}if(x){q.push(x);}q.push("mstrmojo-alert");s={scriptClass:"mstrmojo.Editor",id:n,width:"475px",zIndex:1000,title:w||mstrmojo.desc(11812,"Notification"),cssClass:q.join(" "),children:[{scriptClass:"mstrmojo.Label",cssClass:"alert-content",text:o,allowHTML:v.allowHTML}],visible:true};var r=new mstrmojo.Editor(N.copy(v,s));r.render();return r;}if(window.mstrConfig&&!window.mstrConfig.simpleDialog){mstrmojo.notify=function L(o,u,p){p=p||{};var v=p.forceClose,t=p.callback||mstrmojo.emptyFn,s=N.copy(u||{},{buttons:v?[mstrmojo.Button.newActionButton((p.buttonText||mstrmojo.desc(8607,"Dismiss")),t)]:null,showTitle:false,modal:false,top:"42px"}),q=p.duration||6000;var r=J(o,s,"",v?"ed-notify":"ed-toast"),n=r.id;if(!v){window.setTimeout(h([t,D(n)]),q);}else{window.setTimeout(function(){if(Y[n]){Y[n].editorNode.style.opacity=0.75;}},6000);}return r;};mstrmojo.confirm=function e(s,o,r){o=o||{};var n=o.confirmBtn||{},q=o.cancelBtn||{},p=[Z(n.t||mstrmojo.desc(219,"Yes"),n.fn,true),Z(q.t||mstrmojo.desc(218,"No"),q.fn)];return J(s,N.copy(r||{},{buttons:p,onPreClose:function(){if(q&&q.fn){q.fn();}return true;}}));};mstrmojo.warn=function K(p,n,o){o=o||{};o.cssClass=(o.cssClass||"")+" mstrmojo-warning";mstrmojo.confirm(p,n,o);};mstrmojo.alert=function a(s,p,r,t,n,q){var o={title:r,zIndex:t,cssClass:n,buttons:[Z(mstrmojo.desc(1442,"OK"),p,true)],onPreClose:function(){if(p){p();}return true;}};N.forEach(o,function(v,u){if(!v){delete o[u];}});return J(s,N.copy(q,o));};mstrmojo.error=function T(r,n,q){var o=r||{};var p=mstrmojo.desc(96,"Error");if(q){p=(q.title)?q.title:mstrmojo.desc(96,"Error");}J("",N.copy(q||{},{buttons:[Z(mstrmojo.desc(1442,"OK"),n,true)],children:[{scriptClass:"mstrmojo.ui.editors.ErrorDialogContent",shortDesc:o.shortDesc,longDesc:o.longDesc}]}),p);};}mstrmojo.Editor.ButtonConfigType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.Pulldown");var C={ENTER:13,LEFT:37,UP:38,TAB:9,RIGHT:39,DOWN:40,ESC:27};function D(L,M){var G,J,F,H=[],I,N;try{I=new RegExp(L,"i");}catch(K){I=new RegExp(mstrmojo.string.regEscape(L));}for(G=0,J=M.length;G<J;G++){if(I.test(M[G][this.itemField])){H.push(M[G]);}}return H;}function B(F){return !(F<0||F===undefined||F===null);}mstrmojo.SearchablePulldown=mstrmojo.declare(mstrmojo.Pulldown,null,{scriptClass:"mstrmojo.SearchablePulldown",popupCssClass:"mstrmojo-SearchablePulldown-Popup",searchEnabled:false,allowCustomInput:false,useItemCssOnInput:false,lastSearchPattern:"",isEditing:false,allItems:null,markupString:'<div id="{@id}" class="mstrmojo-SearchablePulldown mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-SearchablePulldown-boxNode mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><input class="mstrmojo-SearchablePulldown-inputNode" value="{@text}" mstrAttach:keyup,blur/><div class="mstrmojo-SearchablePulldown-iconNode mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode" mstrAttach:mouseover,mouseout></div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},inputNode:function(){return this.domNode.firstChild.firstChild;},iconNode:function(){return this.domNode.firstChild.children[1];},popupNode:function(){return this.domNode.lastChild;}},markupMethods:mstrmojo.hash.copy({ontextChange:function(){if(this.inputNode.value!==this.text){this.inputNode.value=this.text;}},onheightChange:function(){this.domNode.style.height=this.height||"";this.boxNode.style.height=this.height||"";},onsearchEnabledChange:function(){this.inputNode.readOnly=this.searchEnabled?false:true;this.items=this.allItems||this.items;},onallowCustomInputChange:function(){if(this.allowCustomInput){this.set("searchEnabled",true);}},onvalueChange:function E(){if(this.useItemCssOnInput&&this.selectedItem){this.inputNode.className="mstrmojo-SearchablePulldown-inputNode "+(this.selectedItem[this.itemCSS]||"");}}},mstrmojo.hash.copy(mstrmojo.Pulldown.prototype.markupMethods)),prevalueChange:function(){this.synchronize();},synchronize:function(){var G=this.value,H=this.items||[],I=H[this.selectedIndex],F=-1;if(I&&G===I[this.itemIdField]){this.selectedItem=I;this.set("text",I[this.itemField]);return ;}F=mstrmojo.array.find(this.items,this.itemIdField,G);if(!B(F)&&this.allowCustomInput){this.selectedItem=undefined;this.selectedIndex=undefined;return ;}this.selectedIndex=B(F)?F:this.defaultSelection;this.selectedItem=I=this.items[this.selectedIndex];this.value=I?I[this.itemIdField]:undefined;this.set("text",I?I[this.itemField]:(this.defaultText||""));},preBuildRendering:function A(){if(this._super){this._super();}this.allItems=this.allItems||this.items;this.synchronize();},premousedown:function(F){if(this.searchEnabled&&F.getTarget()===this.iconNode){this.set("items",this.allItems);}this._super(F);},onkeyup:function(M){var J=mstrmojo.string.trim(this.inputNode.value),I=M.e,N=I.keyCode||I.which,L=B(this.selectedIndex)?this.selectedIndex:-1,F=this.allowCustomInput,H=this.items.length;this.isEditing=true;switch(N){case C.ENTER:if(H>0&&!F){this.set("selectedIndex",L===-1?0:L);this.synchronize();}this.closePopup();break;case C.ESC:this.closePopup();this.synchronize();break;case C.UP:if(this.popupRef.visible&&H>0){this.set("selectedIndex",(L+H-1)%H);this.synchronize();}break;case C.DOWN:if(!this.popupRef.visible&&H>0){this.togglePopup();}this.set("selectedIndex",(L+1)%H);this.synchronize();break;default:if(J===this.lastSearchPattern){return ;}var K=[];if(J&&J.length>0&&J.indexOf(this.lastSearchPattern)>-1){K=D.apply(this,[J,this.items]);}else{K=D.apply(this,[J,this.allItems]);}this.set("items",K);if(K.length===0){this.closePopup();}else{if(!this.popupRef.visible){this.togglePopup();}}this.set("selectedIndex",undefined);if(J&&J.length){var G=mstrmojo.array.find(K,this.itemField,J);if(G!==-1){this.set("selectedIndex",G);}}}if(F&&!B(this.selectedIndex)){this.set("value",this.inputNode.value);}this.lastSearchPattern=J;},onblur:function(F){this.isEditing=false;if(!this.searchEnabled){return ;}if(!this.allowCustomInput){this.items=this.allItems;this.synchronize();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.LegacySuggestionList","mstrmojo.ui._HasScroller");var C=mstrmojo.dom;mstrmojo.ui.ScrollableSuggestionList=mstrmojo.declare(mstrmojo.LegacySuggestionList,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.ui.ScrollableSuggestionList",markupString:'<div id="{@id}" class="mstrmojo-ListBase mstrmojo-scrollable-suggestlist {@cssClass}" style="{@cssText}" mstrAttach:click,dblclick,mouseover,mouseout,contextmenu><div class="list-content"><div class="items-container {@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div></div>',markupSlots:{itemsContainerNode:function B(){return this.domNode.firstChild.firstChild;},scrollboxNode:function E(){return this.domNode.firstChild;},scrollNode:function H(){return this.domNode.firstChild;}},onclick:function A(I){var J=this.getItemFromTarget(I.getTarget());if(J){this._super(I);}},onitemsChange:function D(){var I=this;window.setTimeout(function(){I.hideTooltip();I.updateScrollbars();},0);},updateScrollbars:function F(){this._super();var K=this,M=K.scrollNode,I=M.clientWidth,L=K.itemsContainerNode,J=L.clientWidth;L.style.width="auto";window.setTimeout(function(){if(I>J){L.style.width=J+(I-J)+"px";}},10);},useRichTooltip:true,getItemTooltip:function(L,M){var J=C.position(M),K=M.ttp;var I={areaId:L._renderIdx+"text",cssClass:"vi-regular vi-tooltip-C",contentNodeCssClass:"regular-unitlist-tooltips",posType:"",content:K,top:J.y,left:J.x+J.w+6,enableHover:false};return I;},showTooltip:function G(I,L){var K=this.targetEl,J=this.targetItem;if(K&&K.ttp){this.richTooltip=this.getItemTooltip(J,K);if(this.richTooltip){this._super(I,L);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBox","mstrmojo.ListBoxHoriz");var A={render:function(F,B,G){var H=(G.htmlName+B),D=G.selectedIndices[B]?"checked ":"",E=D?" selected":"",C=F.v!=="u;"?" nAll":"";return'<div class="'+G.itemCssClass+E+C+'"><input type="'+G.inputType+'" name="'+G.htmlName+'" id="'+H+'" value="'+B+'" '+D+'/><label for="'+H+'" title="'+(F[G.itemTitleField]||"")+'" style="'+G.labelCssText+'">'+F[G.itemDisplayField||"n"]+"</label></div>";},select:function(D,E,B,F){var C=D&&D.firstChild;if(C&&!C.checked){C.checked=true;}mstrmojo.css.toggleClass(D,"selected",C.checked);},unselect:function(D,E,B,F){var C=D&&D.firstChild;if(C&&C.checked){C.checked=false;}mstrmojo.css.toggleClass(D,"selected",C.checked);},rowHeight:23};mstrmojo._RendersInputItems=mstrmojo.provide("mstrmojo._RendersInputItems",{inputType:null,htmlName:null,itemRenderer:A,init:function(B){this._super(B);if(!this.htmlName){this.htmlName=this.id;}},preclick:function(E){var D=E.hWin,G=E.e,F=mstrmojo.dom.eventTarget(D,G);if(F&&F.nodeName.match(/input/i)){var C=parseInt(F.value,10);if(this.inputType&&this.inputType.match(/radio/i)){this.singleSelect(C);}else{var B=(F.checked)?"add":"remove";this[B+"Select"](C);}}}});mstrmojo._InputList=mstrmojo.declare(mstrmojo.ListBox,[mstrmojo._RendersInputItems],{scriptClass:"mstrmojo._InputList"});mstrmojo._InputListHoriz=mstrmojo.declare(mstrmojo.ListBoxHoriz,[mstrmojo._RendersInputItems],{scriptClass:"mstrmojo._InputListHoriz"});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBox","mstrmojo.ListBoxBase");mstrmojo.ButtonItemRenderer=mstrmojo.hash.copy(mstrmojo.DivItemRenderer);mstrmojo.ButtonItemRenderer.render=function(D,A,E){var B=D.v!=="u;"?" nAll":"",C=(E.enabled===false);return'<input mstridx="'+A+'" class="'+E.itemCssClass+(E.selectedIndices[A]?" "+E.itemSelectedCssClass:"")+" "+(D.css||"")+B+'" style="'+E.itemCssText+'" type="button"  value="'+D[E.itemDisplayField]+'" '+(C?"disabled ":"")+"/>";};mstrmojo._RendersItemButtons=mstrmojo.hash.copy(mstrmojo._RendersItemDivs);mstrmojo._RendersItemButtons.itemRenderer=mstrmojo.ButtonItemRenderer;mstrmojo.ButtonList=mstrmojo.declare(mstrmojo.ListBox,[mstrmojo._RendersItemButtons],{scriptClass:"mstrmojo.ButtonList",cssClass:"mstrmojo-ButtonList",itemCssClass:"mstrmojo-ButtonItem",selectionPolicy:"toggle"});mstrmojo.requiresCls("mstrmojo.ListBoxHoriz");mstrmojo.ButtonListHoriz=mstrmojo.declare(mstrmojo.ListBoxHoriz,[mstrmojo._RendersItemButtons],{scriptClass:"mstrmojo.ButtonListHoriz",cssClass:"mstrmojo-ButtonListHoriz",itemCssClass:"mstrmojo-ButtonItem",selectionPolicy:"toggle"});}());(function(){mstrmojo.requiresCls("mstrmojo._InputList","mstrmojo._InputListHoriz");mstrmojo.RadioList=mstrmojo.declare(mstrmojo._InputList,null,{scriptClass:"mstrmojo.RadioList",inputType:"radio",cssClass:"mstrmojo-RadioList",itemCssClass:"mstrmojo-RadioList-item",onenabledChange:function A(B){for(var C=0;C<this.items.length;C++){this._getItemNode(C).firstChild.disabled=!B.value;}}});mstrmojo.RadioListHoriz=mstrmojo.declare(mstrmojo._InputListHoriz,null,{scriptClass:"mstrmojo.RadioListHoriz",inputType:"radio",cssClass:"mstrmojo-RadioListHoriz",itemCssClass:"mstrmojo-RadioListHoriz-item"});})();(function(){mstrmojo.requiresCls("mstrmojo._InputList","mstrmojo._InputListHoriz","mstrmojo.hash");mstrmojo.CheckList=mstrmojo.declare(mstrmojo._InputList,null,{scriptClass:"mstrmojo.CheckList",inputType:"checkbox",cssClass:"mstrmojo-CheckList",itemCssClass:"mstrmojo-CheckList-item"});mstrmojo.requiresCls("mstrmojo._InputListHoriz");mstrmojo.CheckListHoriz=mstrmojo.declare(mstrmojo._InputListHoriz,null,{scriptClass:"mstrmojo.CheckListHoriz",inputType:"checkbox",cssClass:"mstrmojo-CheckListHoriz",itemCssClass:"mstrmojo-CheckListHoriz-item"});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.string","mstrmojo._HasPopup","mstrmojo.ListBase","mstrmojo.Popup","mstrmojo.Editor","mstrmojo.SuggestionList");function D(Y){var X=this.list,V=X.selectedIndex,U=X.items.length,W=Y?U-1:0;if(V===W){X.clearSelect();return ;}if(V===null||V<0){V=Y?0:U-1;}else{V+=Y?1:-1;}X.singleSelect(V);}mstrmojo._HasSuggestion=mstrmojo.provide("mstrmojo._HasSuggestion",mstrmojo.hash.copy(mstrmojo._HasPopup,{blockBegin:1,blockCount:-1,suggestCount:15,autoSelect:true,itemField:"n",candidates:null,suggestionShown:false,suggestionItems:null,_last_hit:null,_request_pattern:null,browseItemVisible:false,folderLinksContextId:25,browsableTypes:"1,8",REQUEST_THRESHOLD:20,noCache:false,disableClick:false,getCandidatesThroughTaskCall:mstrmojo.emptyFn,onSuggestionItemSelect:function J(U){this.hideSuggestion();},getSearchPattern:function T(){return"";},getSuggestionPos:function N(){return{left:"100px",top:"100px"};},getSuggestionTarget:function G(){return this;},showSuggestion:function B(V){var U=this.getSuggestion(V);if(!this.noCache&&U!==-1){this.updateSuggestion(U);}},hideSuggestion:function C(){this.suggestionShown=false;if(this.suggestionPopup.visible){this.suggestionPopup.close();}},getSelected:function M(){return(this.suggestionShown)?this._lastOpened.getSelected():null;},nextHighlight:function E(){if(this.suggestionShown){this._lastOpened.nextHighlight();}},preHighlight:function H(){if(this.suggestionShown){this._lastOpened.preHighlight();}},getSuggestion:function S(h){var d=this.candidates,a=d&&d.items,X=d&&d.isComplete,g=this._last_hit;if(!this.noCache&&(d||g)){var f=this.filterCandidates(a,h,this.REQUEST_THRESHOLD),b=f.length,e=this.suggestCount,U=false;if(!X&&b<e){var V=g&&g.pattern;if(g&&V&&(h.indexOf(V)>-1)){U=true;var k=this.filterCandidates(g.items,h,this.REQUEST_THRESHOLD),Y=k&&k.length,W=mstrmojo.array,j=this.itemField,Z;for(Z=0;Z<Y;Z++){if(W.find(f,j,k[Z][j])===-1){f.push(k[Z]);}}b=f.length;}}if(!X&&((h.length>2&&b<this.REQUEST_THRESHOLD)||(b<e))){this.requestCandidates(h);return -1;}return(b<e)?f:f.slice(0,e);}this.requestCandidates(h);return -1;},requestCandidates:function A(U){this._request_pattern=U;var X=this,V=this.getSuggestionTarget(),W={success:function(e){if(!e){return ;}var d=X.getSuggestionTarget();if(!d||(V!==d)){return ;}var j=d.getSearchPattern(),a=e.items;X._last_hit={items:a,pattern:U};X.sz=e.sz;if(!X.noCache&&a){var f=(X.candidates&&X.candidates.items)||[],g=[].concat(a),b=a.length,Z;for(Z=0;Z<b;Z++){var Y=g[Z];if(mstrmojo.array.indexOf(f,Y)>-1){mstrmojo.array.removeItem(a,Y);}}if(X.candidates){X.candidates.items=f.concat(a);}}if(j&&j.indexOf(U)>-1){var h=X.filterCandidates(a,j);X.updateSuggestion(h);}},failure:function(Y){if(Y.getResponseHeader){mstrmojo.alert(Y.getResponseHeader("X-MSTR-TaskFailureMsg"));}}};this.getCandidatesThroughTaskCall({pattern:U,blockBegin:this.blockBegin,blockCount:this.blockCount,isSuggest:true},W);},filterCandidates:function Q(X,W,U){U=U||this.suggestCount;W=mstrmojo.string.regEscape(W);var Y=this.itemField,V=mstrmojo.array.filter(X,function(Z){return(new RegExp("\\s"+W+"|^"+W,"i")).test(Z[Y]);},{max:U});return V;},getHighlightedText:function P(W,Z){if(!this.highlightPattern||mstrmojo.string.isEmpty(W)){return Z;}try{if(!this.nameWildcards||mstr.$A.find([2,32],parseInt(this.nameWildcards,10))>-1){Z=Z.replace(new RegExp("(^|\\s)("+W+")","gi"),"$1<b>$2</b>");}else{var Y=W.split(" "),V,U;for(V=0,U=Y.length;V<U;V++){if(Y[V]!==""){Z=Z.replace(new RegExp("("+Y[V]+")","gi"),"<b>$1</b>");}}}}catch(X){}return Z;},updateSuggestion:function O(X){var V=X&&X.length,U=this.browseItemVisible;if(V||U){if(U){X=X||[];X.push({n:"Browse...",t:-99,cssClass:(V?"br":"bro")});}this.set("suggestionItems",X);if(this.suggestionShown){var W=this._lastOpened;if(W&&W.nudge){W.nudge();}if(this.autoSelect&&W){W.list.singleSelect(0);}}else{this.openPopup("suggestionPopup",this.getSuggestionPos());this.suggestionShown=true;}}else{this.hideSuggestion();}},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",onClose:function(){var U=this.opener;if(U&&U.onBrowserClose){U.onBrowserClose();}},onOpen:function(){var U=this.opener;if(U&&U.onBrowserOpen){U.onBrowserOpen();}},children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",fishEyeVisible:false,closeable:false,closeOnSelect:false}]},onBrowserClose:function L(){this.browserShown=false;},handleSuggestionItemSelect:function K(U,V){if(this.browseItemVisible&&U.t===-99){this.hideSuggestion();mstrmojo.requiresCls("mstrmojo.ObjectBrowser");var W=this.zIndex;this.openPopup("ob",{zIndex:(W&&(W+10))||110});this.ob.browser.browse(mstrmojo.hash.copy(V,{folderLinksContextId:this.folderLinksContextId,onSelectCB:[this,"onSuggestionItemSelect"],browsableTypes:this.browsableTypes}));this.browserShown=true;}else{this.onSuggestionItemSelect(U);}},highlightPattern:true,suggestionPopupCssClss:"",suggestionPopup:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-ObjectInputBox-suggest",autoClose:true,locksHover:true,nextHighlight:function(){D.call(this,true);},preHighlight:function(){D.call(this,false);},getSelected:function M(){var U=this.list;return U.items[U.selectedIndex];},onOpen:function I(){var U=this.opener;if(U){mstrmojo.css.addClass(this.domNode,U.suggestionPopupCssClss||"");if(U.autoSelect){this.list.singleSelect(0);}if(U.nudge){U.nudge(this);}}},onClose:function F(){this.list.clearSelect();var U=this.opener;if(U){U.suggestionShown=false;mstrmojo.css.removeClass(this.domNode,U.suggestionPopupCssClss||"");}}},suggestionListClass:"mstrmojo.SuggestionList",postApplyProperties:function R(){this.suggestionPopup.children=[{scriptClass:this.suggestionListClass,alias:"list",cssClass:"mstrmojo-suggest-list"}];}}));}());(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.HTMLButton","mstrmojo.Label","mstrmojo.TextBox","mstrmojo.TextArea","mstrmojo.Table","mstrmojo.HBox","mstrmojo.Editor");function C(E,F){var D=this;if(mstrApp&&mstrApp.serverRequest){mstrApp.serverRequest(E,F,{silent:true});}else{mstrmojo.xhr.request("POST",D.path,F,E,undefined,D.XServer,D.baseParams);}}function A(H,I,G,D){var E=this,F={taskId:"createFolder",taskContentType:"json",folderID:H,name:I,description:G};C.call(E,F,D);}function B(E,I,F){if(!E){mstrmojo.alert(mstrmojo.desc(3380));return false;}var G=this,H=G.fId,D={success:function(J){G.contPanel.name.set("value","");G.contPanel.desc.set("value","");if(G.okFn){G.okFn(J,F);}},failure:function(J){if(J.getResponseHeader){mstrmojo.alert(J.getResponseHeader("X-MSTR-TaskFailureMsg"));}}};if(mstrApp.isSingleTier&&this.dp){this.dp.newFolder(H,E,I,D);}else{A.call(G,H,E,I,D);}}mstrmojo.NewFolderEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.NewFolderEditor",cssClass:"mstrmojo-NewFolderEditor",title:mstrmojo.desc(663,"Create Folder"),help:"Create_a_new_folder.htm",navigateAfter:false,okFn:mstrmojo.emptyFn,path:mstrConfig.taskURL,fId:null,children:[{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-Input-Panel",rows:2,cols:2,alias:"contPanel",children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Name-Label",slot:"0,0",text:mstrmojo.desc(2211,"Name:")},{scriptClass:"mstrmojo.TextBox",slot:"0,1",value:mstrmojo.desc(8116,"New Folder"),alias:"name",cssClass:"mstrmojo-SaveAsEditor-nameInput"},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Desc-Label",slot:"1,0",text:mstrmojo.desc(1154,"Description:")},{scriptClass:"mstrmojo.TextArea",cssClass:"mstrmojo-SaveAsEditor-descInput",slot:"1,1",alias:"desc",rows:5}]},{scriptClass:"mstrmojo.HBox",alias:"btns",slot:"buttonNode",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",alias:"ok",text:mstrmojo.desc(1442,"OK"),onclick:function(){var E=this.parent.parent,G=E&&E.opener,D=E.contPanel.name.value,F=E.contPanel.desc.value;if(!B.call(E,D,F,E.navigateAfter)){E.close();}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",alias:"cancel",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.parent.parent.close();}}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.TreeNode","mstrmojo._IsExprNode","mstrmojo.array","mstrmojo.dom","mstrmojo.css","mstrmojo.expr","mstrmojo._HasOwnAvatar");var F=mstrmojo.array,M=mstrmojo.expr,P=mstrmojo.dom,A=mstrmojo.css;function J(R,Q){var T=R.data,S=T&&T.nds;if(!S){return null;}if(Q){Q.sort(F.numSorter);}else{Q=R.sortSelectedIndices();}if(!Q.length){return null;}return{idxs:Q,nds:F.get(S,Q)};}function N(S){var R=S.ctxtBuilder,U=R&&R.itemWidgets,Q=U&&U[0],T=Q&&Q.data;if(T&&T.not&&(U.length>0)){delete T.not;Q.paint();}}mstrmojo.AndOrNode=mstrmojo.declare(mstrmojo.TreeNode,[mstrmojo._IsExprNode,mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.AndOrNode",data:null,editable:false,prefixedAndOrEditable:false,markupString:'<div id="{@id}" class="mstrmojo-andor mstrmojo-AndOrNode {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-andor-prefix" mstrAttach:click><span class="mstrmojo-textset mstrmojo-andor-prefix-text"></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-andor-top"></div><div class="mstrmojo-andor-contentsWrapper" style="position:relative"><div class="mstrmojo-andor-contents" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue mstrmojo-AndOrNode-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner mstrmojo-AndOrNode-dropCue-inner"></div></div></div><div class="mstrmojo-andor-bottom"></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},prefixAndOrToolsNode:function(){return this.domNode.firstChild.childNodes[1];},itemsContainerPrefix:function(){return this.domNode.childNodes[1];},itemsContainerNode:function(){return this.domNode.childNodes[2].firstChild;},dropCueNode:function(){return this.domNode.childNodes[2].lastChild;},itemsContainerSuffix:function(){return this.domNode.lastChild;},scrollboxNode:function(){return this.domNode;}},markupMethods:{onitemCntChange:function(){A.toggleClass(this.itemsContainerNode,["multi"],this.itemCnt>2);},onprefixedAndOrEditableChange:function(){A.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();},ondropCuePosChange:mstrmojo.TreeNode.prototype.markupMethods.ondropCuePosChange},multiSelect:true,itemIdField:null,init:function(Q){this._super(Q);this.markupString=this.markupString.replace("{@_prefixAndOrToolsMarkup}",this.getPrefixAndOrToolsMarkup());var R=this.data;if(R){delete this.data;this._set_data(null,R);}},itemCnt:0,postBuildRendering:function(){var Q;this.set("itemCnt",this.items.length);if(this._super){Q=this._super();}N(this);return Q;},preadd:function L(Q){if(this._super){this._super(Q);}this.set("itemCnt",this.items.length);N(this);},preremove:function O(Q){if(this._super){this._super(Q);}this.set("itemCnt",this.items.length);N(this);},_set_data:function(T,Q){var R=this.data,S=(R!==Q);if(S){this.data=Q;if(Q&&!Q.nds){Q.nds=[];}this.set("items",Q&&Q.nds);}return S;},isDragValid:function K(){return true;},isSelectableArea:function(Q){return false;},getDragData:function(Q){var S=this._super(Q);if(S&&!S.html){var R=S.et&&M.ET2TGT[S.et];S.html=R?S[R]&&S[R].n||"":S.n||"";}return S;},remove:function I(R,S){var Q=this._super(R);if(Q>-1){var T=S||this.suppressConsolidation;if(!T){this.consolidate(false);}}return Q;},move:function(R,Q){this.suppressConsolidation=true;var S;if(this._super){S=this._super(R,Q);}this.suppressConsolidation=false;return S;},consolidate:function E(){var U=this.parent;if(!U||!U.remove){return ;}var S=this.items,R=S&&S.length;if(R<2){var T=R?S[0]:null,Q=this.childIndex();if(T){U.add([T],Q);}U.remove(this.data);}},indent:function G(S,Q){var R=J(this,S);if(!R){return ;}this.remove(R.idxs,true);var W=R.nds,V=Q&&Q.fn||this.data&&this.data.fn,U={et:M.ET.ANDOR,nds:W,fn:V};if(W.length===2&&W[0].not){if(W[1].not){delete W[0].not;delete W[1].not;U.not=true;U.fn=(V===M.FN.AND?M.FN.OR:M.FN.AND);}else{var T=W[0];W[0]=W[1];W[1]=T;}}this.add([U],R.idxs[0]);this.consolidate(false);},outdent:function C(R){var S=this.parent,Q=S&&S.data;if(!Q||Q.et!==M.ET.ANDOR){return ;}var T=J(this,R);if(!T){return ;}this.remove(T.idxs,true);if(this.data.not){T.nds[0].not=true;}S.add(T.nds,this.childIndex());this.consolidate(false);},edit:function D(Z,a,S){if(!Z){return ;}var Y=this.data,X=Y&&Y.fn,R=Z.data,f=R&&R.not;if(!R){R={};Z.data=R;}R.not=!!S;if(X!==a){var Q=Y.nds;if(Q&&Q.length>2){var e=Z.childIndex();if(e>0){this.indent([e-1,e],{fn:a});}}else{Y.fn=a;var V=this.ctxtBuilder,U=V&&V.itemWidgets;for(var T=0,W=(U&&U.length)||0;T<W;T++){var b=U[T];if(b){b.paint();}}}}else{Z.paint();}},preclick:function H(Q){var S=null,R=P.eventTarget(Q.hWin,Q.e);if(R===this.prefixNode){}else{if(P.contains(this.prefixNode,R,true)){S="andor";}}Q.part=S;},createAvatar:function B(S){var R=document.createElement("div"),T=P.findWidget(S),Q=T.getAvatarNode&&T.getAvatarNode();if(!Q){Q=T.condNode.cloneNode(true);Q.style.boxSizing="border-box";Q.style.width=T.condNode.offsetWidth+"px";}R.appendChild(Q);A.addClass(R,T.avatarCssCls||"mstrmojo-FE mstrmojo-ConditionNode");R.style.zIndex=20;return R;},_ndsToMove:J});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.WidgetTreeBuilder","mstrmojo.TreeNodeSelector");var E=false;mstrmojo.WidgetTree=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.WidgetTree",listBuilder:mstrmojo.WidgetTreeBuilder,listSelector:mstrmojo.TreeNodeSelector,renderOnScroll:true,itemIdField:"dssid",itemDisplayField:"n",itemIconField:"tp",itemChildrenField:"items",itemFunction:function D(L,I,J){if(!E){mstrmojo.requiresCls("mstrmojo.TreeNode");E=true;}var H=J.tree||J,K=new mstrmojo.TreeNode({data:L,state:0,parent:J,tree:H,multiSelect:J.multiSelect,text:L[J.itemDisplayField],textCssClass:H.item2textCss(L),items:L[J.itemChildrenField],itemIdField:J.itemIdField,itemDisplayField:J.itemDisplayField,itemIconField:J.itemIconField,itemChildrenField:J.itemChildrenField,itemFunction:J.itemFunction,listSelector:J.listSelector});return K;},item2textCss:function B(H){return H[this.itemIconField];},selectionParentNode:null,init:function F(H){this._super(H);this.selectionParentNode=this;this.tree=this;},clearTreeSelect:function A(){(this.selectionParentNode||this).clearSelect();},prechange:function G(H){var I=this._super(H);this.onnodechange(H);return I;},onnodechange:function C(I){if(!I){return ;}var J=mstrmojo.hash,M=this.selectionParentNode,L=I.src;if(L===M){if(J.isEmpty(L.selectedIndices)){L=this;this.selectionParentNode=this;}this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:I.removed});}else{if(I.added&&I.added.length){var K=[];if(!J.isEmpty(M.selectedIndices)){K=mstrmojo.hash.keyarray(M.selectedIndices,true);M.clearSelect();}this.selectionParentNode=L;this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:K});}else{}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo.hash");var A=mstrmojo.hash;mstrmojo.ui.editors.controls.ValidationTextBox=mstrmojo.declare(mstrmojo.ValidationTextBox,null,{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",errRevert:true,dtp:null,validationDelay:3000,orignText:null,trigger:mstrmojo.validation.TRIGGER.ONKEYUP,init:function(B){B=B||{};B.constraints=B.constraints||{};B.constraints.trigger=this.trigger;this._super(B);},prekeyup:function(B){if(B.e.keyCode===13){this.blur();return ;}this._super(B);},onfocus:function(){this.orignText=this.value;},onblur:function(){if(this.value!==this.orignText){this.validate();}},validate:function(){this._super();this.orignText=this.value;this.clearValDelayTimer();},preinput:mstrmojo.emptyFn,postinput:function(){var B=this.doValidation(this.value);if(B.code<=mstrmojo.validation.STATUSCODE.VALID){this.clearValidation();if(!this.errRevert){this.hideTooltip();}}},updateTooltipConfig:function(){this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-C vi-calculation-warning",left:this.domNode.offsetWidth+12,top:this.domNode.offsetHeight+5,refNode:this.domNode,content:mstrmojo.desc(13819,"Invalid input")};},onInvalid:function(){if(!this.errRevert){this.hideTooltip();this.showTooltip();}else{this.clearValidation();this.set("value",this.orignText);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupConfig","mstrmojo.ui.menus.Menu","mstrmojo.hash","mstrmojo.array");mstrmojo.ui.menus.MenuItemType=null;var U="separator";mstrmojo.ui.menus.MenuConfig=mstrmojo.declare(mstrmojo.ui.PopupConfig,null,{scriptClass:"mstrmojo.ui.menus.MenuConfig",menus:null,menuCssClass:"",supportsScroll:false,maxHeight:0,hasMenuItems:function Q(){return !!this.menus.length;},getMenuItems:function E(V){return mstrmojo.array.filter(this.menus.slice().reverse(),function(Z,Y,X){var W=X[Y+1];return V||Z.cls!==U||(Y&&W&&W.cls!==U);}).reverse();},getMenuItem:function C(Y){var X=this.menus,V;if(X!==null){for(V=0;V<X.length;V++){var W=X[V];if(W.cls===Y){return W;}}}return null;},absorbMenuItems:function S(V){this.menus=this.menus.concat(V.menus);},addMenuItem:function I(c,Y,a,W,Z){var b,X,V;if(!c||typeof c==="string"){b=c;}else{b=c.n;X=c.ttp;}V={n:b,ttp:X,cls:Y,fn:a,ctxt:W};if(isNaN(Z)||Z>=this.menus.length){this.menus.push(V);}else{this.menus.splice(Z,0,V);}return V;},addCustomMenuItem:function T(a,X,Z,W,V){var Y=this.addMenuItem(a,X,Z,V);Y.getItemMarkup=W;return Y;},addDisabledMenuItem:function O(W,V){this.addNonInteractiveMenuItem(W,V,true);},addNonInteractiveMenuItem:function M(Z,W,V){var X=["non-int"];if(W){X.push(W);}if(V){X.push("disabled");}var Y=this.addMenuItem(Z,X.join(" "),mstrmojo.emptyFn);Y.dsbld=true;},addSeparator:function D(){this.addMenuItem("",U,function(){return false;});},addPopupMenuItem:function R(c,X,b,Y,W,Z){var a=["pop "];if(Y){a.push(Y);}var V=this.addMenuItem(c,a.join(" "),b,W,Z);V.pop=true;V.scope=X;return V;},addActionPopupMenuItem:function L(c,W,a,b,X,V,Z){var Y=this.addPopupMenuItem(c,W,b,(X||"")+" ax",V,Z);Y.actionFn=a;Y.ax=true;},addSubMenuItem:function K(Z,X,W,Y,V){this.addPopupMenuItem(Z,W,Y,X,V);},addEditorMenuItem:function P(Z,W,Y,V,X){this.addPopupMenuItem(Z,W,Y,"",V,X);},getToggleItemStates:function F(d,f,V,b,X,a){var Y,Z,W,c;if(typeof d==="string"){Y=Z=d;W=c="";}else{Y=d.on||"";Z=d.off||"";W=d.ttpOn||"";c=d.ttpOff||"";}var e=[{n:Y,ttp:W,cls:f+" on",fn:b,ctxt:a},{n:Z,ttp:c,cls:f,fn:V,ctxt:a}];if(!X){e.reverse();}return e;},addToggleMenuItem:function J(c,Y,a,X,W,b,V){var Z=this.getToggleItemStates(c,Y,a,X,b,V);return this.addDualStateItem(W,Z[0],Z[1]);},addDualStateItem:function G(W,V,X){return this.addMenuItem({n:V.n,ttp:V.ttp},V.cls,this.getDualStateHandler(W,V,X),V.ctxt);},getDualStateHandler:function H(W,V,X){return function(Z,a){var Y=[V,X];if(Z.cls===V.cls){Y.reverse();}Y[1].fn.call(mstrmojo.all[W],Z,a);Z.n=Y[0].n;Z.ttp=Y[0].ttp;Z.cls=Y[0].cls;};},addRadioMenuGroup:function B(X,c,Y,W,V,b,a){var Z=[];Y.forEach(function(g,d){if(g.separator){this.addSeparator();return ;}var i=g.text,h=(W||"")+" "+(g.cls||"")+(b?"":" radio")+(g.value===X?" on":""),f=function(){if(c.call(this.ctxt,g.value,X,g)===false){return false;}X=g.value;Z.forEach(function(j){j.cls=j.cls.replace(/ on$/,"")+(j.radioValue===X?" on":"");});return true;},e=a?this.addCustomMenuItem(i,h,f,a(g,d),V):this.addMenuItem(i,h,f,V);e.radioValue=g.value;Z.push(e);},this);},clear:function N(){this._super();this.menus=[];},newInstance:function A(V){return new mstrmojo.ui.menus.Menu(mstrmojo.hash.copy({popupConfig:this},V));}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.PopupButton","mstrmojo.ui._IsPulldown","mstrmojo.ui.PopupList","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.array");var I=mstrmojo.css,G=mstrmojo.array,F=mstrmojo.dom;mstrmojo.ui.Pulldown=mstrmojo.declare(mstrmojo.ui.PopupButton,[mstrmojo.ui._IsPulldown],{scriptClass:"mstrmojo.ui.Pulldown",onitemSelected:mstrmojo.emptyFn,allowHTML:true,init:function N(O){this._super(O);I.addWidgetCssClass(this.list,"ctrl-popup-list");},initChildren:function E(){this.children=this.getPopupListConfig();this._super();},getSelectedItem:function H(){var O=this.items;return O&&O[this.selectedIndex];},selectItemByField:function J(P,O){this.set("selectedIndex",G.find(this.items||[],P,O));},getPopupWidget:function D(){return this.list;},getPopupList:function K(){return this.list;},_set_items:function B(R,O){var Q=this.items;this.items=O;delete this.selectedIndex;if(Q!==O){var P=this.hasRendered;if(P){this.refresh();}return true;}return false;},onclick:function M(O){this._super(O);var Q=this,P=Q.getPopupWidget();Q.mw=Q.mw||function(R){if(!F.contains(P.domNode,F.eventTarget(self,R),true,document.body)){P.close();F.detachEvent(document,F.isFF?"DOMMouseScroll":"mousewheel",Q.mw);}};F.attachEvent(document,F.isFF?"DOMMouseScroll":"mousewheel",Q.mw);},_set_selectedIndex:function A(T,R){if((R!==0&&!R)||R<0){return false;}var P=this.selectedIndex=R,O=this.getPopupList(),Q=O.items,S=this.selectedNode;O.set("selectedIndex",P);if(S&&Q&&Q[P]){S.innerHTML=this.allowHTML?Q[P].n:mstrmojo.string.encodeHtmlString(Q[P].n);S.title=Q[P].title||"";}this.onitemSelected(Q[P],P);return true;},getPopupListConfig:function C(){return{scriptClass:"mstrmojo.ui.PopupList",alias:"list",selectionPolicy:"reselect",locksHover:true,listHooks:{select:function O(R,S,Q){this.parent.set("selectedIndex",Q);this.close();}},getItemProps:function P(S,Q){var R=mstrmojo._IsList.getItemProps.call(this,S,Q);R.style=this.parent.itemCssText||"";return R;}};},children:[]});mstrmojo.ui.Pulldown.newPulldown=function L(P,T,O,S,R){S=S||{};S.items=P;var Q;if(R===true){Q=mstrmojo.hash.copy({scriptClass:"mstrmojo.ui.Pulldown",selectedIndex:O||0},S);}else{Q=new mstrmojo.ui.Pulldown(S);if(O!==undefined){Q.set("selectedIndex",O);}}Q.postselectedIndexChange=function(U){var X=U.value,W=U.valueWas;if(X!==W){var V=this.items;T.call(this,V[X],V[W]);}};return Q;};}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.PreviewButton","mstrmojo.ui.PopupList","mstrmojo.array","mstrmojo.css");var F=mstrmojo.css,E=mstrmojo.array;mstrmojo.ui.editors.controls.ListPreviewButton=mstrmojo.declare(mstrmojo.ui.editors.controls.PreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ListPreviewButton",init:function G(L){this._super(L);var M=this.getListCfg(),K=this.itemValueField;M.alias="list";M.locksHover=true;M.slot="widgetHostNode";M.listHooks={select:function J(N,O){this.parent.set("selectedValue",O[K]);this.close();}};M.setDimensions=mstrmojo.emptyFn;this.addChildren([M]);F.addWidgetCssClass(this.list,"ctrl-popup-list");},getPopupWidget:function D(){return this.list;},items:null,onitemsChange:function H(){var J=this.items;if(J){this.list.set("items",J);}},selectedValue:"",itemValueField:"n",onselectedValueChange:function C(){var K=this.selectedValue,J=this.itemValueField,L=this.list;L.selectItems(E.filter(L.items||[],function(M){return M[J]===K;}),true);this.updatePreview();},updatePreview:function B(){throw new Error(this.scriptClass+" must implement updatePreview.");},getListCfg:function I(){return{scriptClass:"mstrmojo.ui.PopupList",selectionPolicy:"reselect"};},postBuildRendering:function A(){this.onitemsChange();this.onselectedValueChange();return this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.menus.PopupConfig","mstrmojo.ui.menus.MenuEditor");mstrmojo.ui.menus.EditorConfig=mstrmojo.declare(mstrmojo.ui.menus.PopupConfig,[mstrmojo._HasBindings],{scriptClass:"mstrmojo.ui.menus.EditorConfig",data:null,fnOk:null,fnCancel:null,okEnabled:true,cancelEnabled:true,okVisible:true,cancelVisible:true,init:function D(E){this._super(E);if(this.data&&!mstrmojo.all[this.data.id]){mstrmojo.hash.make(this.data,mstrmojo.Obj);}this.initBindings();},clear:function A(){this._super();this.data=null;this.fnOk=this.fnCancel=mstrmojo.emptyFn;},newInstance:function C(){return new mstrmojo.ui.menus.MenuEditor({popupConfig:this});},destroy:function B(){if(this.data){this.data.destroy();}this.destroyBindings();this._super();}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ListPreviewButton","mstrmojo.css");var C,D=mstrmojo.css;var J=mstrmojo.declare(mstrmojo.ui.PopupList,null,{getItemMarkup:function G(K){if(!C){C=this._super(K).replace(">{@en@n}<","><div>{@en@n}</div><");}return C;},getItemProps:function F(M,K){var L=this._super(M,K);L.addCls("bst"+K);if(K){L.title=M.n;L.n="";}else{L.tt="";}return L;}});mstrmojo.ui.editors.controls.LineStyleButton=mstrmojo.declare(mstrmojo.ui.editors.controls.ListPreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.LineStyleButton",itemValueField:"id",showThickOption:true,markupMethods:{onenabledChange:function E(){D.toggleClass(this.domNode,"disabled",!this.enabled);}},init:function H(L){this._super(L);var K=["mstrmojo-ui-LineStyle"];if(!this.showThickOption){K.push("no-thick");}D.addWidgetCssClass(this,K);},getListCfg:function I(){return new J({selectionPolicy:"reselect",items:[{n:mstrmojo.desc(2258,"None"),id:"none"},{n:mstrmojo.desc(2259,"Dashed"),id:"1pt dashed"},{n:mstrmojo.desc(2260,"Dotted"),id:"1pt dotted"},{n:mstrmojo.desc(2262,"Thin"),id:"1pt solid"},{n:mstrmojo.desc(2264,"Thick"),id:"2pt solid"}]});},postBuildRendering:function A(){this.borderStyleNode=this.previewNode.appendChild(document.createElement("div"));return this._super();},updatePreview:function B(){var N=this.borderStyleNode,L=this.selectedValue.split(" "),K=this.selectedValue==="conflict";D.toggleClass(this.previewNode,"conflict",K);if(N&&!K){var M=N.style;if(L.length===1){M.borderTopStyle=L[0];}else{M.borderTopWidth=L[0];M.borderTopStyle=L[1];}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ListPreviewButton","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.EditableLabel");var A=mstrmojo.css,E=mstrmojo.validation.STATUSCODE;mstrmojo.ui.editors.controls.ComboBox=mstrmojo.declare(mstrmojo.ui.editors.controls.ListPreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ComboBox",markupMethods:{onenabledChange:function D(){this.txtLabel.set("editOnClick",this.enabled);A.toggleClass(this.domNode,"disabled",!this.enabled);}},init:function B(F){this._super(F);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-ComboBox");},updatePreview:function C(){this.txtLabel.set("value",this.selectedValue||"");},updateSelection:function(){this.set("selectedValue",this.txtLabel.value);},validateTextInput:function(F){return true;},txtLabel:null,children:[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"txtLabel",slot:"previewNode",constraints:{validator:function(){if(!this.parent.validateTextInput(this.value)){return{id:this.id,code:E.INVALID,msg:""};}}},onValid:function(){this.parent.updateSelection();}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.Label","mstrmojo.TextBox","mstrmojo.ui.Pulldown","mstrmojo.ui.Checkbox","mstrmojo.array","mstrmojo.threshold.ThresholdModel");var G=mstrmojo.array;var I=[{n:mstrmojo.desc(5999,"Replace Text"),v:3},{n:mstrmojo.desc(6000,"Quick Symbol"),v:10},{n:mstrmojo.desc(11898,"Replace With Image"),v:4}];var F=mstrmojo.threshold.ThresholdModel.REPLACE_SYMBOL;function B(N,O,M){this.parent.raiseFormatValueChange(N,O,M);}function E(O){var N=this.parent.model,M=N.threshold;this.replaceType.set("enabled",O);this.replaceText.set("enabled",O);this.replaceSymbol.set("enabled",O);if(!O){delete M[N.getReplaceTypeName()];delete M[N.getReplaceTextName()];}}mstrmojo.threshold.TextGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.threshold.TextGroup",nameRow:undefined,replaceRow:undefined,replaceType:undefined,replaceText:undefined,replaceSymbol:undefined,preBuildRendering:function K(){this._sync=true;if(this._super){this._super();}},postBuildRendering:function A(){if(this._super){this._super();}this._sync=false;},children:[{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"replaceRow",col1Width:"10%",col2Width:"90%",replaceChk:undefined,children:[{scriptClass:"mstrmojo.ui.Checkbox",slot:"col1Node",alias:"replaceChk",oncheckedChange:function D(){E.call(this.parent.parent,this.checked);}},{scriptClass:"mstrmojo.Label",slot:"col2Node",text:mstrmojo.desc(11888,"Enable Data Replace")}]},{scriptClass:"mstrmojo.ui.Pulldown",alias:"replaceType",selectedIndex:0,enabled:false,items:I,onenabledChange:function H(){if(this.enabled){B.call(this,"rtp",this.items[this.selectedIndex].v);}},postselectedIndexChange:function(O){var S=O.value,P=O.valueWas,N=this.parent,M=N.replaceText,R=N.replaceSymbol;if(S!==P){var Q=S===1;M.set("visible",!Q);M.set("hint",S===2?mstrmojo.desc(11889,"Image URL"):"");R.set("visible",Q);B.call(this,"rtp",this.items[S].v);}}},{scriptClass:"mstrmojo.TextBox",alias:"replaceText",enabled:false,onenabledChange:function H(){if(this.enabled){B.call(this,"rtxt",this.value);}},onvalueChange:function J(){B.call(this,"rtxt",this.value);var M=this.parent,N=M.replaceType;if(!M.parent.model.threshold.rtp){B.call(this,"rtp",N.items[N.selectedIndex]);}}},{scriptClass:"mstrmojo.ui.Pulldown",alias:"replaceSymbol",selectedIndex:0,isHostedWithin:false,enabled:false,visible:false,items:F,getPopupListConfig:function C(){var M=mstrmojo.ui.Pulldown.prototype.getPopupListConfig();M.getItemMarkup=function N(){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}">{@n}</{@tag}>';};return M;},onenabledChange:function H(){if(this.enabled){B.call(this,"rtxt",this.items[this.selectedIndex].v);}},postselectedIndexChange:function(M){var O=M.value,N=M.valueWas;if(O!==N){B.call(this,"rtxt",this.items[O].v);}}}],setFormatSource:function L(M){var N=this,O=N.parent.model;this.syncControls(function(){var P=M[O.getReplaceTextName()],S=M[O.getReplaceTypeName()];N.replaceRow.replaceChk.set("checked",!!P);var Q=G.find(I,"v",S);N.replaceType.set("selectedIndex",Q===-1?0:Q);if(S!==10){N.replaceText.set("value",P||"");N.replaceSymbol.set("selectedIndex",0);}else{var R=Math.max(G.find(F,"v",P),0);N.replaceSymbol.set("selectedIndex",R);N.replaceText.set("value","");}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.hash","mstrmojo._HasEditableText","mstrmojo.ui.Pulldown");var H=mstrmojo.array,C=mstrmojo.hash,B=19,J=13,D=27;mstrmojo.ui.SearchablePulldown=mstrmojo.declare(mstrmojo.ui.Pulldown,[mstrmojo._HasEditableText],{scriptClass:"mstrmojo.ui.SearchablePulldown",editableSlot:"selectedNode",allowCustomText:false,isSearching:false,editOnClick:false,init:function K(P){this._super(P);var M=this.getPopupList();M.renderOnScroll=this.renderOnScroll||M.renderOnScroll;M.renderBlockSize=this.renderBlockSize||M.renderBlockSize;mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-SearchablePulldown");var O=M.constructor.prototype,N=M.getItemProps?M.getItemProps:O.getItemProps,Q=M.getItemMarkup?M.getItemMarkup:O.getItemMarkup;M.getItemProps=function(V,R){var S=this._spft||"",W=V.n,T=W.toUpperCase().indexOf(S);if(T===-1){S="";}var U=N.call(this,V,R);U.before=W.slice(0,T);U.input=W.substring(T,T+S.length);U.after=W.slice(T+S.length,W.length);return U;};M.getItemMarkup=function(S,R){return Q.call(this,S,R).replace("{@en@n}","{@en@before}<span class='sp-highlight'>{@en@input}</span>{@en@after}");};},onclick:function L(M){var P=this.selectedNode,Q=M.getTarget(),R=M.e.offsetX>=(P.offsetWidth-B),O=this.getPopupWidget(),N=O.visible;if(Q===P&&(!N||(N&&R))){this.set("isEditing",!N);this._super(M);}},onPopupWidgetClosed:function F(){this.set("isEditing",false);var P=this.getPopupList(),Q=P._oldItems,N=this.text;delete P._oldItems;if(Q){var M=H.find(Q,"n",N);if(M===-1&&!this.allowCustomText){var O=P.items[0]||Q[0];M=H.find(Q,"n",O.n);}P.set("items",Q);this.set("selectedIndex",M);}},_set_selectedIndex:function E(O,M){if(this.allowCustomText&&M===-1){this.selectedIndex=-1;this.onitemSelected(null,M);}else{this.isSearching=false;this._super(O,M);if(this.hasRendered){var N=this.selectedNode;this.text=N.innerText?N.innerText:N.textContent;}}return true;},onkeydown:function G(N){this._super(N);var M=window.event||N.e;if(M.keyCode===J){this.getPopupList().close();}},onkeyup:function A(O){this._super(O);var M=window.event||O.e,P=M.keyCode,N=this.getPopupList();if(P===D||P===J){N.close();}else{this.processSearch();}},processSearch:function I(){this.isSearching=true;this.hideTooltip();var M=[],O=this.getPopupList(),P=this.selectedNode.innerHTML,Q=O._oldItems||O.items,N=P.toUpperCase();N=N.replace(/<BR>/,"");if(N.length>0){H.forEach(Q,function(R){if(R.n.toUpperCase().indexOf(N)>-1){M.push(C.clone(R));}},this);}else{M=Q;}O._spft=N;if(this.customizeSearchResult){this.customizeSearchResult(M);}O.set("items",M);O.adjustCornersForPopupOverflow();delete O._spft;O._oldItems=Q;O.set("visible",M.length!==0);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Obj","mstrmojo.ui.ButtonBar","mstrmojo.ui.Checkbox","mstrmojo.Label","mstrmojo.ui.Pulldown","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.ui.editors.controls.ThreeColumnContainer");var D=mstrmojo.hash;mstrmojo.vi.models.editors.ControlsViewFactory=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.vi.models.editors.ControlsViewFactory",getEditorGroup:function B(H,I){return new mstrmojo.vi.ui.editors.EditorGroup(D.copy(I,{children:H}));},getLabelAndControl:function G(J,K,M,O,L,N){var P=new mstrmojo.Label({text:J,setDimensions:function(S,Q){var R=this.domNode;if(R){R.style.width=Q;}}}),I=P,H=K;if(L){I=K;H=P;}I.slot="col1Node";H.slot="col2Node";return new mstrmojo.ui.editors.controls.TwoColumnContainer(D.copy(N,{col1Width:M||"40%",col2Width:O||"60%",children:[I,H],getLabel:function(){return P;},getCtrl:function(){return this.children.filter(function(Q){return Q!==P;})[0];}}));},getLabelAndControlWithMsg:function C(L,M,P,O,S,H,N,Q){var R=new mstrmojo.Label({text:L,setDimensions:function(W,U){var V=this.domNode;if(V){V.style.width=U;}}}),T=new mstrmojo.Label({text:P?mstrmojo.desc(14548,"Changes will be applied after Desktop is restarted."):"",setDimensions:function(W,U){var V=this.domNode;if(V){V.style.width=U;}},setText:function(U){this.text=U;}}),K=R,J=M,I=T;if(N){K=M;J=R;}K.slot="col1Node";J.slot="col2Node";I.slot="col3Node";return new mstrmojo.ui.editors.controls.ThreeColumnContainer(D.copy(Q,{col1Width:O||"30%",col2Width:S||"30%",col3Width:H||"40%",children:[K,J,I],getLabel:function(){return R;},getCtrl:function(){return this.children.filter(function(U){return U!==R;})[0];},getMessage:function(){return T;}}));},getPulldown:function F(I,L,H,K,J){return mstrmojo.ui.Pulldown.newPulldown(I,function(M,N){L.call(this,M.v,N&&N.v);},H,K,J);},getCheckboxAndLabel:function A(N,L,K){var J=new mstrmojo.ui.Checkbox({checked:N,oncheckedChange:function(){var O=this.checked;K.call(this,O,!O);}});var M=this.getLabelAndControl(L,J,"14px","100%",true);M.cssClass="checkLabel";var I=M.getLabel();I.onclick=function H(){J.onclick();};I.cssDisplay="inline-block";return M;},getButtonBar:function E(J,H,L,K){K=K||{};K.items=J;var I=new mstrmojo.ui.ButtonBar(K);I.singleSelect(H);I.postselectionChange=function(M){var N=this.items,O=N[M.removed&&M.removed[0]];L.call(this,N[M.added[0]],O);};return I;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.hash","mstrmojo.util.ui.ColorPicker","mstrmojo.ui.editors.controls.ColorList","mstrmojo.ui.editors.controls.ColorWheel","mstrmojo.Label","mstrmojo.ui.Pulldown","mstrmojo.TextBoxWithLabel","mstrmojo.ui.ButtonBar","mstrmojo.Button","mstrmojo.css");var G=1,Q=2,X=mstrmojo.css,L=mstrmojo.array,I=mstrmojo.util.ui.ColorPicker,B=G,V=0,E=1,K=2,H="txtColor",U="automatic";var D=[{n:mstrmojo.desc(12071,"Color fill"),id:V},{n:mstrmojo.desc(12072,"No fill"),id:E},{n:mstrmojo.desc(12073,"Gradient"),id:K}];function F(){return this.color!==U?this.color:this.autoPreviewColor;}function b(e,d,c){return mstrmojo.Button.newWebButton(e,c,d,{slot:"buttonNode",cssDisplay:"inline-block"});}function M(c){return{scriptClass:"mstrmojo.ui.editors.controls.ColorList",items:c,postselectionChange:function(d){var g=d.added;if(g){var f=this.parent,e=this.items[g[0]].id;f.set("color",e);f.colorChanged(e);}}};}function a(c){return"#"+c.replace("#","");}function N(){var c=this.txtColor1,f=this.txtColor2,d=this.color,e=false,g=this.colorStyle;switch(g.items[g.selectedIndex].id){case V:d=a(c.value);break;case E:d="transparent";break;case K:d={or:this.gradientOrientation.getSelectedItems()[0].id,c1:a(c.value),c2:a(f.value)};e=true;break;}X.toggleClass(this.containerNode,"grad",e);this.set("color",d);}function J(c){this.set("activeColor",c);var d=this[c];L.forEach([1,2],function(f){var e=this[H+f];X.toggleClass(e.domNode,"on",e===d);},this);this.colorWheel.set("color",a(d.value));}function O(c,d,e,f){if(typeof e==="string"){if(e==="transparent"){e="#ffffff";}}else{if(e.c1){e=e["c"+c];}}return{scriptClass:"mstrmojo.TextBoxWithLabel",alias:H+c,cssDisplay:"block",label:d,autoCorrect:false,maxLength:6,size:6,value:e.replace("#",""),bindings:f,onfocus:function(){J.call(this.parent,this.alias);},onvalueChange:function(g){if(!/^[0-9a-fA-F]{0,6}$/.test(g.value)){this.value=g.valueWas;}else{if(this.value.length===6){var h=this.parent;h.colorWheel.set("color",a(this.value));N.call(h);}}}};}function S(){var c=F.call(this),g="this.parent.colorStyle.items[ this.parent.colorStyle.selectedIndex ].id",i=g+" === "+K,f=g+" !== "+E,d=(this.showNoFill&&c==="transparent")?1:0,e=D.slice(0,this.showGradient?3:2),h=0;if(!this.showNoFill){e.splice(1,1);}if(c.c1){d=L.find(e,"id",K);h=c.or?0:1;}this.addChildren([{scriptClass:"mstrmojo.ui.Pulldown",alias:"colorStyle",selectedIndex:d,items:e,onitemSelected:function(){N.call(this.parent);}},{scriptClass:"mstrmojo.ui.ButtonBar",alias:"gradientOrientation",items:[{n:mstrmojo.desc(2066,"Horizontal"),id:1,css:"h"},{n:mstrmojo.desc(2069,"Vertical"),id:0,css:"v"}],selectedIndex:h,bindings:{visible:i},postselectionChange:function(j){if(j.added){N.call(this.parent);}}},{scriptClass:"mstrmojo.Button",cssClass:"simpleButton",text:mstrmojo.desc(11658,"Swap"),bindings:{visible:i},onclick:function(){var l=this.parent,k=l.txtColor1,m=l.txtColor2,j=k.value;k.set("value",m.value);m.set("value",j);N.call(l);}},O(1,mstrmojo.desc(12074,"Color HEX:"),c,{visible:f,label:g+" === "+K+' ? "'+mstrmojo.desc(12075,"Color 1 HEX:")+'" : "'+mstrmojo.desc(12074,"Color HEX:")+'";'}),O(2,mstrmojo.desc(12076,"Color 2 HEX:"),c,{visible:i}),{scriptClass:"mstrmojo.ui.editors.controls.ColorWheel",alias:"colorWheel",color:c.c1||c,onColorPicked:function(j){var k=this.parent;k[k.activeColor].set("value",j.replace("#",""));},bindings:{visible:f}},b(mstrmojo.desc(1442,"Ok"),true,function(){var k=this.parent,j=k.color;if(!j.c1){I.addCustomColor(j);}k.colorChanged(j);}),b(mstrmojo.desc(2140,"Cancel"),false,function(){this.parent.colorCanceled();})]);J.call(this,H+"1");}function T(){var d=F.call(this),c=this.sampleNode.style;if(d){if(d.c1){var e=X.buildGradient(d.or,d.c1,d.c2);c[X.convertCssToCamelCase(e.n)]=e.v;}else{c.background=d;}}}mstrmojo.ui.editors.controls.AdvancedColorPicker=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.ui.editors.controls.AdvancedColorPicker",markupString:'<div id="{@id}" class="mstrmojo-ui-AdvColorPicker {@cssClass}" style="{@cssText}" mstrAttach:click><div class="acpToolbar"><div class="acpBtn acpSwatchBtn"></div><div class="acpBtn acpPaletteBtn"></div><div class="acpColor"></div></div><div class="acpContent" ></div><div class="acpButtons" ></div></div>',markupSlots:{swatchBtnNode:function(){return this.domNode.firstChild.firstChild;},paletteBtnNode:function(){return this.domNode.firstChild.childNodes[1];},sampleNode:function(){return this.domNode.firstChild.lastChild;},containerNode:function(){return this.domNode.firstChild.nextSibling;},buttonNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onpickerModeChange:function P(){B=this.pickerMode;this.renderContent();},oncolorChange:function A(){T.call(this);},onautoPreviewColorChange:function C(){T.call(this);}},color:"#000fff",showGradient:true,showNoFill:true,showAutomatic:false,autoPreviewColor:null,activeColor:H+"1",swatchBtnNode:null,paletteBtnNode:null,colorStyle:null,gradientOrientation:null,txtColor1:null,txtColor2:null,colorWheel:null,pickerMode:G,init:function R(c){this._super(c);this.pickerMode=B;},renderContent:function W(){this.showPickerForCurrentMode();},showPickerForCurrentMode:function Y(){var e=this;this.removeChildren();var f=B===G;if(f){var d=I.getBasicColors();if(!this.showNoFill){d.shift();}if(this.showAutomatic&&this.color!==U){this.addChildren([{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(4531,"Automatic"),cssClass:"AutomaticOption",onclick:function c(){e.set("color",U);e.colorChanged(U);}}]);}this.addChildren([mstrmojo.hash.copy({alias:"basicColors"},M(d)),M((mstrApp&&mstrApp.getPreferredColors)?L.map(mstrApp.getPreferredColors(),function(g){return{n:g,id:g};}):[]),M(I.getCustomColors())]);}else{S.call(this);}X.toggleClass(this.swatchBtnNode,"on",f);X.toggleClass(this.paletteBtnNode,"on",!f);this.buttonNode.style.display=f?"none":"block";},colorChanged:mstrmojo.emptyFn,colorCanceled:mstrmojo.emptyFn,onclick:function Z(c){var d=c.getTarget(),e=this.pickerMode;if(d===this.swatchBtnNode){e=G;this.set("pickerMode",e);}else{if(d===this.paletteBtnNode){e=Q;this.set("pickerMode",e);}}}});mstrmojo.ui.editors.controls.AdvancedColorPicker.VAL_AUTOMATIC=U;}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.string","mstrmojo.dom","mstrmojo.css","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.ui.menus.MenuConfig");var D=mstrmojo.string,A=mstrmojo.dom,E=mstrmojo.ui.PopupConfig.ENUM_CORNERS;function B(){var K=this,J=K.statusList,F=J&&J.length||0,G=K.statusConfig||new mstrmojo.ui.menus.MenuConfig(),L=function(M){return function(N){K.set("status",M);K.onStatusClick(M);};};if(!G.hasMenuItems()&&F){for(var H=0;H<F;H++){var I=J[H];G.addMenuItem(I.n,I.cls||"",L(I),K);}}else{}if(G.hasMenuItems()){G.alignment=K.alignment||{host:E.BOTTOM_LEFT,popup:E.TOP_LEFT};G.hostId=K.id;G.hostElement=K[K.hostElementName]||K.domNode;K.openPopup(G.newInstance());}}function C(){var F=this.statusConfig||this.statusList&&this.statusList.length>1;this.menuButtonNode.style.display=F?"":"none";}mstrmojo.ui.StatusButton=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.ui.StatusButton",markupString:'<div id="{@id}" class="mstrmojo-StatusButton {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}"><div class="mstrmojo-Button {@innerIconClass}"  mstrAttach:click><span class="mstrmojo-text"></span></div><div class="menuButton" mstrAttach:click></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;},textSpanNode:function(){return this.domNode.firstChild.firstChild;},menuButtonNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onstatusChange:function(){this.textSpanNode.innerHTML=D.encodeHtmlString(this.status&&this.status.n||"");},onstatusListChange:function(){C.call(this);},onstatusConfigChange:function(){C.call(this);}},status:null,statusList:null,statusConfig:null,onclick:function(F){var G=A.eventTarget(F.hWin,F.e);if(A.contains(this.menuButtonNode,G,true)){B.call(this);}else{if(A.contains(this.textNode,G,true)){this.onButtonClick(this.status,F);}}},onButtonClick:mstrmojo.emptyFn,onStatusClick:mstrmojo.emptyFn});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi._MonitorsAppState","mstrmojo._HasOwnAvatar","mstrmojo.vi.ui._IsDropTarget","mstrmojo.EditableLabel","mstrmojo.ui.menus.MenuConfig","mstrmojo.css");var b=mstrmojo.css,N=1,L=2,F=4,c=8,K=16;function E(e){return function(){b.toggleClass(this.menuBtnNode,"active",e);};}function H(f){var j=new mstrmojo.ui.menus.MenuConfig(),i=this.getMenuActions(),e=this.index,k=this.id,g=this.total;if((i&K)>0){this.addNewTabMenuItem(j);}if((i&F)>0){j.addMenuItem(mstrmojo.desc(3397,"Duplicate"),"dup",function(){mstrmojo.all[k].tabDuplicated();});}if((i&L)>0){if(e){j.addMenuItem(mstrmojo.desc(5362,"Move Left"),"lft",function(){mstrmojo.all[k].tabMoved(true);});}if(e<g-1){j.addMenuItem(mstrmojo.desc(5363,"Move Right"),"rgt",function(){mstrmojo.all[k].tabMoved(false);});}}j.addSeparator();if((i&N)>0){j.addMenuItem(mstrmojo.desc(1388,"Rename"),"rnm",function(){mstrmojo.all[k].lbl.set("isEditing",true);});}if((i&c)>0){if(g>1){j.addMenuItem(mstrmojo.desc(629,"Delete"),"cls",function(){mstrmojo.all[k].tabDeleted();});}}var h=this.getCustomMenu();if(h&&h.hasMenuItems()){j.addSeparator();j.absorbMenuItems(h);}j.addPopupHandlers(this.id,E(true),E(false));this.showTabMenu(this.updateMenuCfg(j),f);}mstrmojo.vi.ui.tabs.Tab=mstrmojo.declare(mstrmojo.Container,[mstrmojo.ui.menus._HasMenuPopup,mstrmojo._HasOwnAvatar,mstrmojo.vi.ui._IsDropTarget,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.tabs.Tab",markupString:'<div id="{@id}" class="mstrmojo-VITab unselectable {@cssClass}" style="{@cssText}" unselectable="on" mstrAttach:click><div><div class="mstrmojo-VITab-tab"></div><div class="mstrmojo-VITab-menu"></div></div></div>',markupSlots:{containerNode:function W(){return this.domNode.firstChild.firstChild;},menuBtnNode:function a(){return this.domNode.firstChild.lastChild;}},markupMethods:{ontitleChange:function Z(){this.lbl.set("text",this.title);},onisSelectedChange:function V(){mstrmojo.css.toggleClass(this.domNode,"selected",this.isSelected);},onzIndexChange:function D(){this.domNode.style.zIndex=this.zIndex;}},zIndex:1,menuBtnNode:null,lbl:null,title:"",index:-1,total:-1,isSelected:false,children:[{scriptClass:"mstrmojo.EditableLabel",alias:"lbl",editOnClick:false,onTextEditComplete:function Q(f,e){if(f){this.parent.titleEdited(this.text,e);}}}],postBuildRendering:function X(){if(mstrApp.isAppStatePresentation&&mstrApp.isAppStatePresentation()){this.draggable=false;}this._super();},onclick:function d(e){var f=e.getTarget();if(f===this.menuBtnNode){H.call(this,f);}else{if(!this.isSelected){this.tabSelected();}}},getMenuActions:function I(){return 0;},getCustomMenu:function B(){return null;},isDragValid:function A(){return this.parent.children.length>1&&!this.lbl.isEditing;},createAvatar:function S(){var e=document.createElement("div");e.appendChild(this.domNode.cloneNode(true));e.style.margin="-5px 0 0 10px";return e;},allowDrop:function G(e){var f=e.src.widget;return f&&f.parent===this.parent;},ondrop:function Y(e){var f=e.src.data;this.parent.moveTab(f.idx,this.index,f.fromIdx);this._super(e);},ondragenter:function P(f){this._super(f);var g=f.src.data,e=this.index;this.parent.moveTab(g.idx,e);g.idx=e;},ondragover:function T(g){var e=g.tgt.node,f=g.tgtData,h=f&&f.node;if(!f||h!==e){g.tgtData={node:e};if(h){h.style.borderColor="";}}e.style.borderColor="#0fe88f";},getDragData:function C(){var g=this.id,e=this.index;return{setAvatarClass:function f(h){var k=mstrmojo.all[g],i=k.avatar;if(i){var j=[k.avatarCssClass,"hasOwnAvatar",h];i.className=j.join(" ");}},fromIdx:e,idx:e};},getDropAvatarIcon:function R(){return"pivot";},cleanUpAfterTarget:function J(f){var e=f.tgtData&&f.tgtData.node;if(e){e.style.borderColor="";}this._super(f);},onAppStateChange:function U(e){var f=this.lbl,g=e.value===mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION;f.set("isEditing",false);f.set("editOnDoubleClick",!g);this.draggable=!g;},addNewTabMenuItem:function O(e){this.throwAbstractMethodError("addNewTabMenuItem");},tabSelected:mstrmojo.emptyFn,titleEdited:mstrmojo.emptyFn,tabMoved:mstrmojo.emptyFn,tabDeleted:mstrmojo.emptyFn,tabDuplicated:mstrmojo.emptyFn,showTabMenu:mstrmojo.emptyFn,updateMenuCfg:function M(e){return e;}});mstrmojo.vi.ui.tabs.Tab.ACTIONS={NEW_TAB:K,RENAME:N,MOVE:L,DUPLICATE:F,DELETE:c};}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.array","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo._Formattable","mstrmojo._IsDocumentTemplate","mstrmojo.Label","mstrmojo.ui.menus.MenuConfig");mstrmojo.requiresClsP("mstrmojo.vi.viz","EnumVisualizationTemplates","EnumVizStyles","EnumWidgetTypes");var T={top:"top",left:"left","z-index":"zIndex",width:"width",height:"height"};var D=["background-color","fx"],I=mstrmojo.array;mstrmojo.VisBase=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._Formattable,mstrmojo._IsDocumentTemplate],{scriptClass:"mstrmojo.VisBase",updated:false,waitingForData:false,node:null,skipReRender:false,updateFormatsOnUpdate:true,setModel:function M(Z){this.set("model",Z);},destroy:function W(){var Z=this.model;if(Z&&Z.destroy){Z.destroy();delete this.model;}this._super();},resize:function X(){var Z=this.getFormats();if(parseInt(Z.height,10)===0||parseInt(Z.width,10)===0){this.domNode.style.display="none";}else{this.setDimensions(Z.height,Z.width);this.domNode.style.display="";}},setDimensions:function O(b,a){var Z=this._super(b,a);if(Z&&this.hasRendered&&!this.skipReRender){this.reRender();}return Z;},reRender:function F(){this.unrender();this.render();},getWidth:function B(){return parseInt(this.width,10);},getHeight:function K(){return parseInt(this.height,10);},getLeft:function R(){return parseInt(this.left,10);},getTop:function A(){return parseInt(this.top,10);},buildRendering:function H(){this.height=this.getHeight();this.width=this.getWidth();this.left=this.getLeft();this.top=this.getTop();if(!this.updated){this.update();}this._super();},initFromVisProps:function V(){},postBuildRendering:function(){var Z=this.isEmpty();this._super();this.raiseEvent({name:"toggleCtrlOverlay",visible:Z,controls:this.getVisEmptyMsgControls()});this.applyBackground();return !Z;},applyBackground:function(){var a=this.defn&&this.defn.fmts,f=(a&&a.p_fmts)||a,c={},d,Z,e,b;if(mstrApp.isExpress&&f){d=this.formatHandlers=this.formatHandlers||{};e=d.domNode=d.domNode||[];Z="BG";b=I.indexOf(e,Z);if(b<0){e.push(Z);}I.forEach(D,function(g){if(f[g]){c[g]=f[g];}});this.applyCSSFormatToNode("domNode",c);}},update:function G(c){c=c||this.node;if(c){var Z=c.data;if(Z){this.model.set("data",Z);}this.waitingForData=!!Z.nsj;if(this.waitingForData){var a="ServerJsonRWDStyle";var d=this.model,b=d.getDataService(),e={host:this,nodes:[this.k]},g;if(Z.wid!==undefined){e.slices=[Z.wid];}g=mstrmojo.func.wrapMethods(d.docModel.getUpdateColorMapCallback(),d.docModel.getUpdateThemePaletteCallback(true),d.controller._getXtabCallback(this));b.retrieveServerJson(e,g,{preserveUndo:true,style:{name:a,params:{treesToRender:3}},params:{styleName:a}});this.updated=true;return false;}this.updateContentFormats(c);}if(this.model){var h=this.model&&this.model.docModel;this.initFromVisProps(this.model.vp);if(h&&h.getDocBuilder){var f=h.getDocBuilder().getMojoVisName(c);if(f){c.data.visName=f;}}}this.updated=true;if(this._super){return this._super(c);}return true;},updateContentFormats:function(e){var d=this.parent,c=e.defn,Z=c&&c.fmts;if(this.updateFormatsOnUpdate&&Z){if(this.clearFormats){this.clearFormats();}if(d&&d._createFormats&&!Z.p_fmts){d._createFormats();}Z=(this.getFormats&&this.getFormats())||Z;for(var b in T){if(T.hasOwnProperty(b)){var a=T[b];if(b in Z){this[a]=Z[b];}}}}},isEmpty:function L(){return false;},getVisEmptyMsgControls:function C(){return[{scriptClass:"mstrmojo.Label",cssClass:"dropMsg",text:mstrmojo.desc(11668,"Drag objects here.")}];},getModel:function N(){return this.model;},getData:function J(){return this.model.data;},getRowsAndCols:function(){var Z=this.model.data.gts;return(Z.row||[]).concat(Z.col||[]);},getExp:function(){var Z=this.model.data,a=Z&&Z.sc&&Z.sc.exp;return a;},getDocModel:function S(){return this.model&&this.model.docModel;},getTitleRMCPopup:mstrmojo.emptyFn,getMenuHandler:function U(){return mstrmojo.emptyFn;},renderErrorMessage:function Y(Z){this.domNode.innerHTML='<div class="mstrmojo-message">'+Z+"</div>";},getMessageID:function E(){return this.model.docModel.mid||this.model.mid;},performAction:function Q(Z){var b=this.model.getAction(Z),a=b&&b.h;if(a&&this.controller[a]){this.controller[a](this,b.a);return true;}return false;},findSelectorControl:function P(){var a=this.getData(),Z=a&&a.sc;if(Z&&parseInt(Z.ct,10)===6){this.selectorControl=Z;this.isMultiSelect=true;}else{delete this.selectorControl;}return this.selectorControl;}});})();(function(){mstrmojo.requiresClsP("mstrmojo","Widget","css","dom");var E=mstrmojo.css,F=mstrmojo.dom;mstrmojo.threshold.ColorMarker=mstrmojo.declare(mstrmojo.Widget,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.threshold.ColorMarker",markupString:'<div class = "marker {@cssClass}" id="{@id}" style="{@cssText}" mstrAttach:contextmenu,mousedown,mouseover,mouseout></div>',markupMethods:{onleftChange:mstrmojo.Widget.leftMarkupMethod},hovered:false,selected:false,index:undefined,select:function(){this.set("selected",true);},unselect:function(){this.set("selected",false);},onselectedChange:function B(I){if(I.valueWas===false&&I.value===true){E.toggleClass(this.domNode,"selected",true);this.parent.onMarkerSelected(this.index);}else{E.toggleClass(this.domNode,"selected",false);this.parent.onMarkerUnselected(this.index);}this.parent.onMarkerUnhovered(this.index);},oncontextmenu:function H(J){F.preventDefault(window,J.e);var I=this,K=I.parent.parent;var L=new mstrmojo.ui.menus.MenuConfig({position:F.getMousePosition(J.e,J.hWin),isHostedWithin:false});L.addMenuItem(mstrmojo.desc(629,"Delete"),"",function(){K.bands.remove(I.index);K.update();});this.openPopup(L.newInstance());},onmousedown:function A(){this.set("selected",!this.selected);},onmouseover:function G(){this.set("hovered",true);},onmouseout:function D(){this.set("hovered",false);},onhoveredChange:function C(I){if(!this.selected){if(I.valueWas===false&&I.value===true){E.toggleClass(this.domNode,"selected",true);this.parent.onMarkerHovered(this.index);}else{E.toggleClass(this.domNode,"selected",false);this.parent.onMarkerUnhovered(this.index);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Stepper","mstrmojo._HasLayout","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.expr","mstrmojo.css");var C=mstrmojo.expr.DTP,B=mstrmojo.css,A="mstrmojo-Stepper-ErrValidation";mstrmojo.ui.editors.controls.Stepper=mstrmojo.declare(mstrmojo.Stepper,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.ui.editors.controls.Stepper",markupString:'<div id="{@id}" class="mstrmojo-Stepper {@orientation} {@cssClass}" mstrAttach:click,mousedown,mouseup,mousemove,selectstart><div class="title">{@title}</div><div class="next">+</div><div class="text"></div><div class="prev">-</div></div>',layoutConfig:{w:{textNode:"100%"},xt:true},textInput:null,init:function E(F){var G=F.provider;this.children=[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"textInput",slot:"textNode",dtp:G.dtp||C.INTEGER,constraints:{validator:G.validator,max:G.max,min:G.min},onValid:function(){var H=this.parent;B.removeClass(H.domNode,A);G.setVal(parseInt(this.value,10)||0);H.updateDisplayText();}}];this._super(F);this.addDisposable(G);B.addWidgetCssClass(this,"mstrmojo-ui-ctrl-Stepper");},postBuildRendering:function(){this.updateDisplayText();this._super();},updateDisplayText:function D(){this.textInput.set("value",this.provider.getVal());}});}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetTree","mstrmojo.expr","mstrmojo.AndOrNode","mstrmojo.ConditionNode");var F=mstrmojo.expr,B=F.ET;function A(G){var I=G&&G.src,J=I&&I.data,H=J&&J.et;return(H in F.ETs);}mstrmojo.FilterExpr=mstrmojo.declare(mstrmojo.WidgetTree,null,{scriptClass:"mstrmojo.FilterExpr",allowDrop:A,renderOnScroll:false,itemIdField:null,nodeClassMap:{14:mstrmojo.AndOrNode,"*":mstrmojo.ConditionNode},onBlankClick:function(G){this.clearTreeSelect();},onnodemousedown:function(H){var I=mstrmojo.dom.eventTarget(H.hWin,H.e),J=H.src,G=J.listMapper.findIndex(J,J.itemsContainerNode,I),K=G>=0?J.ctxtBuilder.itemWidgets[G]:null;if(!K||(K.isSelectableArea&&!K.isSelectableArea(I))){this.onBlankClick(H);}},getItemIdentityProp:function(G){return G.et;},itemFunction:function(L,I,M){var H=M.tree,J=H.getItemConfig(L,I,M),K=H.nodeClassMap,G=K[H.getItemIdentityProp(L)]||K["*"];return G&&(new G(J));},getItemConfig:function(J,G,K){var H=(J.et===B.ANDOR),I=K.tree||K;return{data:J,tree:I,parent:K,bindings:{prefixedAndOrEditable:"this.parent.editable"},itemFunction:(H)?K.itemFunction:null,draggable:H?I.draggable:false,dropZone:H?I.dropZone:false,allowDrop:H&&I.dropZone?I.allowDrop:null,allowCopy:H?I.allowCopy:false,editable:I.isEditable?I.isEditable(J):I.editable,makeObservable:H&&K.makeObservable,onclick:I.onnodeclick,onadd:I.onnodeadd,onremove:I.onnoderemove};},getDragData:function(G){var I=this._super(G);if(I&&!I.html){var H=I.et&&F.ET2TGT[I.et];I.html=H?I[H]&&I[H].n||"":I.n||"";}return I;},newCondition:function E(K){K=K||{et:B.AQ};var J=this.selectionParentNode,G;J=(J&&J.hasRendered)?J:this;if(J!==this){G=J.add([K]);}else{var I=this.addCondition([K],null,true);G=I.index;J=I.widget;}var H={widget:J,index:G,data:K};if(this.onNew){this.onNew(H);}return H;},addCondition:function D(I,K){var L=this.items,H=L&&L.length,N=I&&I.length;if(!N){return null;}var J,G;if(H&&L[0].et===B.ANDOR){J=this.ctxtBuilder.itemWidgets[0];G=J.add(I,null);}else{if(!H&&(N===1)){J=this;G=0;this.add(I,0);}else{if(H){var M=L[0];this.remove(M);I.unshift(M);}this.add([{et:B.ANDOR,fn:F.FN.AND,nds:I}],0);J=this.ctxtBuilder.itemWidgets[0];G=H?1:0;}}return{widget:J,index:G};},addSingleCondition:function C(H,G){var I=this.addCondition([H],G);return I.widget.ctxtBuilder.itemWidgets[I.index];},ondrop:function(J){if(this._super){this._super(J);}var H=this.items,G=H&&H.length,I=H.concat();if(G>1){if(H.remove){H.remove(0,H.length);}else{this.set("items",null);}this.add([{et:B.ANDOR,fn:F.FN.AND,nds:I}],0);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.hash","mstrmojo.func","mstrmojo.css","mstrmojo.HBox","mstrmojo.Box","mstrmojo.DropDownButton","mstrmojo.Popup","mstrmojo.WidgetTree","mstrmojo.ObjectBrowserDataProvider","mstrmojo.OBList","mstrmojo.FishEyeContainer","mstrmojo.SearchBox2","mstrmojo.Booklet","mstrmojo.IncFetch","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.mstr.ui.IncFetchOBList");var O=mstrmojo.hash,W=mstrmojo.func,L=mstrmojo.meta.TP,F="5CECE58CC1D549F890EB61C4DB2156A3",T="E0CCB9CF22104A489CBE78D974AFD19E",Q=mstrmojo.chart.model.enums.EnumDSSObjectType,K=mstrmojo.array,D=mstrmojo.dom,X=function(f,g,a){var d=f.scrollableIncFetch,c=d?"mstrmojo.mstr.ui.IncFetchOBList":"mstrmojo.OBList",e={scriptClass:c,items:g.items,multiSelect:a};if(d){e.browseConfig={blockBegin:g.bb,blockCount:g.bc,totalSize:g.sz,folderLinksContextId:f.folderLinksContextId,rootFolderID:g.did,browsableTypes:f.browsableTypes,browsableViewMedias:f.browsableViewMedias,dataProvider:f.dataProvider};e.onwaitingChange=function(){if(f.booklet){f.booklet.set("waiting",this.waiting);}};}var b=mstrmojo.insert(e);b.render();return b;},A=function(c,d,a){var b=mstrmojo.ObjectBrowser.widgetHandler||X;return b(c,d,a);},N={success:function(c){var d=this.ob,b=c.items,e=d.pageCache[d.currentPage],a=e._w;e.items=b;a.set("items",b);this.ob=null;this.item=null;window.clearTimeout(d._btm);d.booklet.set("waiting",false);if(d.scrollableIncFetch&&a.scrollNode){a.initScroll();a.updateScrollbars();}},failure:function(a){window.alert(a.getResponseHeader("X-MSTR-TaskFailureMsg"));this.ob.booklet.set("waiting",false);}},S=function(f,e,c){var d=c?-1:1,b=f.pageCache.length,g;for(g=f.currentPage+d;g<b&&g>=0;g+=d){var a=f.pageCache[g];if(a._k===e.k){return{steps:g-f.currentPage,cache:a};}}return null;},C=function(e,d,c,f){var g=e.currentPage+1,b=e.pageCache.length,a;for(a=g;a<b;a++){e.pageCache[a]._w.destroy();delete e.pageCache[a].items;}e.pageCache=e.pageCache.slice(0,g);f._w=c;f._k=d.k;e.pageCache[g]=f;e.cacheChange();},H=function(b){var a=mstrmojo.hash.walk("anc.items.0.items",b);this.set("canGoUp",!(!b.pf||!a));},I=function(e,d,f,c,b){delete e._btm;var a;if(!c){a=A(e,f,e.multiSelect);a.attachEventListener("change",e.id,"navigate");if(e.useDblSelect||e.useBothSglDblSelect){a.attachEventListener("dblclick",e.id,"dblselect");}}else{a=f._w;}e.obList=a;e.booklet.turn(a,b>0);window.setTimeout(function(){e.onBrowsing=false;},300);if(!c){C(e,d,a,f);}e.set("currentFolder",f);e.set("currentPage",e.currentPage+b);e.updateUpButton(f);if(e.scrollableIncFetch&&a.scrollNode){a.initScroll();a.updateScrollbars();}},P=function(c,b,a){var d=S(c,b,false);d=d||S(c,b,true);if(!d){window.clearTimeout(c._btm);c._btm=window.setTimeout(function(){c.booklet.set("waiting",true);},300);a.ob=c;a.item=b;c.getDataProvider().fetchFolderContents(c,b,a);}else{I(c,b,d.cache,true,d.steps);}},B=function(b,c,d,a){P(b,{fid:b.pageCache[b.currentPage].did,blockBegin:c,searchPattern:d,recursive:a},N);},J={success:function(b){var c=this.ob;if(c){window.clearTimeout(c._btm);if(!b.items){b.items=[{did:"empty",n:"("+mstrmojo.desc(2210)+")",t:"e"}];}var a=function e(f){var j=f.length,g;for(g=0;g<j;g++){var h=f[g];if(h.did===F||h.did===T){h.n=(h.did===F)?mstrmojo.desc(8112):mstrmojo.desc(9277);}if(h.items){a(h.items);}}};if(b.did===F||b.did===T){b.n=(b.did===F)?mstrmojo.desc(8112):mstrmojo.desc(9277);if(b.anc&&b.anc.items){a(b.anc.items);}}if(b&&b.items&&c.browsableViewMedias){var d={};K.forEach(c.browsableViewMedias.split(","),function(f){d[parseInt(f,10)]=true;});b.items=K.filter(b.items,function(f){return(f.t!==Q.DssTypeDocumentDefinition)||d[f.dvm];});}if(b&&b.items&&mstrApp&&mstrApp.isSingleTier){b.items=K.filter(b.items,function(f){return(f.st!==772);});}if(b.did&&this.item.k!==b.did){this.item.k=b.did;}I(c,this.item,b,false,1);this.ob=null;this.item=null;}},failure:function(a){this.ob.booklet.set("waiting",false);if(this.ob.onError){this.ob.onError(a);}else{if(a.getResponseHeader){mstrmojo.alert(a.getResponseHeader("X-MSTR-TaskFailureMsg"));}else{mstrmojo.alert(a.message);}}},complete:function(){if(this.ob){this.ob.onBrowsing=false;}}},Z=function(c){var b=c.pageCache.length,a;for(a=0;a<b;a++){c.pageCache[a]._w.destroy();}c.pageCache=[];c.currentPage=-1;c.cacheChange();},M=function(d,c,e){var a=d.onBrowseFolder;if(a){a[0][a[1]](c);}if(c&&parseInt(c.acg,10)===33){return ;}var b={};if(c){b.k=c.did;b.fid=c.did;}else{if(d.rootFolderID){b.k=d.rootFolderID;b.fid=d.rootFolderID;}else{if(d.rootFolderType){b.k=d.rootFolderType;b.fty=d.rootFolderType;}else{if(d.folderLinksContextId){b.k=d.folderLinksContextId;}}}}P(d,b,W.wrapMethods(e,O.copy(J)));},V=function(f,a,c){if(!c){return a;}var d=f.showCompletePath,h=a[0],e,b;while(h){var g;for(g=c.length-1;g>=0;g--){if(h.did===c[g].did){c.splice(g,1);h._isSc=true;}}b=h;h._open=true;h=h.items;h=h&&h[0];if(!h){b.lastLeaf=true;}}if(!d){h=a[0];while(h){if(h._isSc){a[0]=h;break;}h=h.items;h=h&&h[0];}}return a.concat(c);},U=function(b,a,c){b._naviInfo=V(b,a,c);};mstrmojo.ObjectBrowser=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.ObjectBrowser",rootFolderType:null,rootFolderID:null,sId:null,closeOnSelect:true,browsableTypes:null,browsableViewMedias:null,includeObjectDesc:false,closeable:true,fishEyeVisible:false,searchVisible:true,upButtonVisible:false,currentFolder:null,pageCache:[],currentPage:-1,blockCount:50,canGoUp:true,folderLinksContextId:null,minSearchLength:2,showCompletePath:true,multiSelect:false,onCloseCB:null,onSelectCB:null,onBrowseFolder:null,scrollableIncFetch:false,useBothSglDblSelect:false,displaySaveLabel:false,useOldSearch:false,getDataProvider:function(){if(!this.dataProvider){this.dataProvider=mstrmojo.insert({scriptClass:"mstrmojo.ObjectBrowserDataProvider"});}return this.dataProvider;},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},children:[{scriptClass:"mstrmojo.HBox",alias:"titleBar",cssClass:"mstrmojo-OB-titleTable",children:[{alias:"saveLabel",scriptClass:"mstrmojo.Label",cssClass:"msrmojo-save-label",text:mstrmojo.desc(3178,"Save in:"),bindings:{visible:"this.parent.parent.displaySaveLabel"}},{alias:"title",scriptClass:"mstrmojo.DropDownButton",cssClass:"mstrmojo-FormatEditor-DropDownButton",cssText:"margin:0px;",popupRef:{scriptClass:"mstrmojo.Popup",contentNodeCssClass:"mstrmojo-OBNavigatorPopup",cssText:"position:relative;",slot:"popupNode",locksHover:true,onOpen:function(){var a=this.opener.parent.parent,d=this.tree,c=a._naviInfo,b=this.parent.parent.parent.extraDDItems;if(d.items!==c){d._pup=this;this.ob=a;if(b){K.forEach(b,function(e){e.isExtra=true;});c=c.concat(b);}d.set("items",c);}},children:[{alias:"tree",scriptClass:"mstrmojo.WidgetTree",itemIdField:"did",itemFunction:function(e,a,b){var d=mstrmojo.WidgetTree.prototype.itemFunction(e,a,b);if(e.isExtra){if(e.cssClass){d.cssClass=e.cssClass;}d.onmousedown=e.onmousedown||mstrmojo.emptyFn;return d;}if(e._open){d.state=1;}d._ll=!!e.lastLeaf;d._pup=b._pup;d.onmousedown=function(f){var g=mstrmojo.dom.eventTarget(f.hWin,f.e),h=this._pup;if(g===this.domNode||g===this.textNode){if(!this._ll){M(h.ob,this.data);}h.close();}};d.markupMethods=O.copy(d.markupMethods);d.markupMethods.onstateChange=function(){var f=this.data.items?this.state:0;this.stateNode.className="mstrmojo-TreeNode-state "+({0:"closed",1:"opened",2:"leaf"}[f]||"closed");this.itemsContainerNode.style.display=(f===1)?"block":"none";};d.useRichTooltip=true;var c=d.postBuildRendering;d.postBuildRendering=function(){if(c){c.call(d);}if(d.textNode.parentNode.clientWidth){d.textNode.style.width=(d.textNode.parentNode.clientWidth-20)+"px";}};d.premouseover=function(h){if(this.useRichTooltip){var g=this.textNode;if(g.clientWidth<g.scrollWidth){var f=D.position(g);this.richTooltip={areaId:this.id,cssClass:"vi-regular vi-tooltip-C",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_TOPLEFT,content:this.data[this.itemDisplayField],top:f.y-2,left:f.x+f.w+6};}else{this.richTooltip=null;}mstrmojo.dom.stopPropogation(h.hWin,h.e);}return true;};return d;}}]}},{alias:"upButton",scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-OBListItemIcon up",title:mstrmojo.desc(1152,"Up One Level"),onclick:function(){this.parent.parent.goUp();},bindings:{enabled:"this.parent.parent.canGoUp",visible:"this.parent.parent.upButtonVisible"}},{alias:"closebtn",scriptClass:"mstrmojo.Button",iconClass:"mstrmojo-OBCloseButton",title:mstrmojo.desc(2102,"Close"),bindings:{visible:"this.parent.parent.closeable"},onclick:function(){this.parent.parent.close();}}]},{alias:"fishEye",scriptClass:"mstrmojo.FishEyeContainer",cssText:"width:100%",bindings:{visible:"this.parent.fishEyeVisible"}},{alias:"searchUpBar",scriptClass:"mstrmojo.HBox",cssClass:"searchBox",children:[{alias:"obSearchBox",scriptClass:"mstrmojo.SearchBox2",cssClass:"mstrmojo-charcoalbox mstrmojo-dxsprite",cssText:"margin: 3px 0; ",contentWidget:mstrmojo.all.obList,taskId:"searchMetadata",searchIncFetch:true,enableMatchCase:false,forceResetCache:true,bindings:{minSearchLength:"this.parent.parent.minSearchLength",quickSearch:"this.parent.parent.quickSearch"},serverRequest:function(a,b){this.parent.parent.getDataProvider().serverRequest(a,b);},preFetch:function(){this.objectTypes=this.parent.parent.browsableTypes||this.objectTypes;this.parent.parent.booklet.set("waiting",true);},postFetch:function(){this.parent.parent.booklet.set("waiting",false);},onUpdateSearchParams:function G(c){var b=this.parent.parent,a=b.sId;if(a){c.sessionState=a;}if(b.useOldSearch){c.quickSearch=0;c.nameWildcards=1;c.sortKey=6;}}}],bindings:{visible:"this.parent.searchVisible"}},{scriptClass:"mstrmojo.Booklet",cssClass:"mstrmojo-OB-booklet",alias:"booklet",hasAnimation:false,bindings:{scrollableIncFetch:"this.parent.scrollableIncFetch"}},{alias:"obIncFetch",scriptClass:"mstrmojo.IncFetch",height:"17px",cssText:"height:0px;overflow:hidden;",visible:false,np:0,cp:0,ds:{f:mstrmojo.desc(4046,"First"),p:mstrmojo.desc(1058,"Previous"),n:mstrmojo.desc(1059,"Next"),l:mstrmojo.desc(4049,"Last"),pgs:mstrmojo.desc(5972,"## of ### pages"),gt:mstrmojo.desc(5878,"Go to:"),v:mstrmojo.desc(6079,"This field should be # between ## and ###.")},onvisibleChange:function(b){var d=parseInt(this.height,10),a=this.np>1,c={target:this.domNode,props:{height:{start:(a?0:d),stop:(a?d:0),suffix:"px"}},onEnd:function(){if(a){this.target.style.overflow="visible";}}},e=new mstrmojo.fx.AnimateProp(c);this.domNode.style.overflow="hidden";mstrmojo.css.toggleClass(this.parent.domNode,"show-inc-fetch",this.visible);e.play();},onifsChange:function(a){var b=this.np;mstrmojo.hash.copy(a.value,this);if(this.np>1){this.children=null;this.refresh();}if((b<=1&&this.np>1)||(b>1&&this.np<=1)||(b===0&&this.np>0)){this.set("visible",this.np>1);}this.cssText="";}}],destroy:function Y(){Z(this);if(this._super){this._super();}},postBuildRendering:function(){if(this._super){this._super();}if(this.fishEye&&this.fishEyeVisible){this.fishEye.attachEventListener("selectedIndexChange",this.id,"onFishEyeChange");}var c=this.searchUpBar;if(c&&c.obSearchBox&&this.searchVisible){this.obSearchBox=this.searchUpBar.obSearchBox;this.obSearchBox.attachEventListener("itemsChange",this.id,"onSearchItemsChange");var a=this.obSearchBox.contentWidget||this.obSearchBox;if(!this.scrollableIncFetch){a.attachEventListener("ifsChange",this.id,function(d){if(!this.scrollableIncFetch){this.obIncFetch.set("ifs",d.value);}});}}if(!this.scrollableIncFetch&&this.obIncFetch){var b=this.obIncFetch;b.attachEventListener("fetch",this.id,function(d){b.cp=d.v;b.children=null;b.refresh();B(this,(d.v-1)*this.blockCount+1,this.searchVisible?this.obSearchBox.inputNode.value:"",1);});}mstrmojo.css.addClass(this.domNode,"mstrmojo-ObjectBrowser");},onSearchItemsChange:function(b){var c=b.value,a=this.pageCache[this.currentPage]._w;if(!c||c.length===0){c=[{did:"empty",n:"("+mstrmojo.desc(2210,"")+")",t:"e"}];}else{if(this.browsableViewMedias){var d={};K.forEach(this.browsableViewMedias.split(","),function(e){d[parseInt(e,10)]=true;});c=K.filter(c,function(e){return(e.t!==Q.DssTypeDocumentDefinition)||d[e.dvm];});}}a.set("items",c);},navigate:function(h){var a=h.src,i=a.selectedItem,c=this.multiSelect,f=c&&a.getSelectedItems(),g=this,b=h.added&&h.added.length,e=h.removed&&h.removed.length,d=c?f.length===1&&(!e||b):!!i;if(d&&i.did==="empty"){return ;}if(d&&parseInt(i[L],10)===8){if(!this.onBrowsing){this.onBrowsing=true;M(this,i);}}else{if((i&&(!this.useDblSelect||this.useBothSglDblSelect))||f){this.select(c?f:i);}}},browseFolder:function(a,b){M(this,{did:a,n:b});},onFishEyeChange:function(a){this.goToPage(a.value);},goToPage:function(a){if(a<this.pageCache.length&&a!==this.currentPage){var c=a>this.currentPage,b=this.pageCache[a];this.set("currentPage",a);this.booklet.turn(b._w,c);this.set("currentFolder",b);H.call(this,b);}},oncurrentPageChange:function(a){if(this.fishEye){this.fishEye.setSelectedIndex(a.value);}var b=this.pageCache[this.currentPage];this.titleBar.title.set("text",mstrmojo.string.encodeHtmlString(b.n));if(this.searchVisible&&this.obSearchBox){this.obSearchBox.set("rootCacheItems",b.items||[]);this.obSearchBox.set("totalSize",b.sz);this.obSearchBox.set("rootID",b.did);this.obSearchBox.clearSearch();}if(!this.scrollableIncFetch&&this.obIncFetch){this.obIncFetch.set("ifs",{np:Math.floor(b.sz/b.bc)+((b.sz%b.bc>0)?1:0),cp:Math.floor(b.bb/b.bc)+((b.bb%b.bc>0)?1:0)});}},cacheChange:function(){if(this.fishEye&&this.fishEyeVisible){this.fishEye.setItems(this.pageCache);}},browse:function(b,a){O.copy(b,this);if(this.searchVisible&&this.obSearchBox){this.obSearchBox.clear();}Z(this);M(this,undefined,a);},close:function(){var b=this.ctx||this,a=b.onCloseCB;if(a){a[0][a[1]]();}b.set("visible",false);},select:function(b){var a=this.onSelectCB;if(a){a[0][a[1]](b);}if(this.closeOnSelect){this.close();}},dblselect:function R(b){var c=b&&b.src.selectedItem;if(!c||(c&&c.did==="empty")||c[L]===8){return ;}if(this.useBothSglDblSelect){var a=this.onDblSelectCB;if(a){a[0][a[1]](c);}if(this.closeOnSelect){this.close();}}else{this.select(c);}},goUp:function(){if(this.canGoUp){M(this,{did:this.currentFolder.pf});}},updateUpButton:function E(a){H.call(this,a);},oncurrentFolderChange:function(a){var b=a.value;U(this,b.anc.items,b.sc);},refreshContent:function(a){B(this,a);},onError:null,onheightChange:function(){var a=["titleBar","fishEye","searchUpBar","obIncFetch"],c=0,b;for(b in a){c+=parseInt(this[a[b]].domNode.offsetHeight,10);}this.booklet.set("height",parseInt(this.height,10)-c+"px");}});}());(function(){mstrmojo.requiresCls("mstrmojo.AndOrNode");mstrmojo.threshold.AndOrNode=mstrmojo.declare(mstrmojo.AndOrNode,null,{scriptClass:"mstrmojo.threshold.AndOrNode",cssClass:"adv-threshold",avatarCssCls:"mstrmojo-thresholdRow",onmouseover:function(){this.toggleGroupBorder(true);},onmouseout:function(){this.toggleGroupBorder(false);},consolidate:function A(){if(this.parent!==this.tree||this.itemCnt===0){this._super();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.AndOrNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo.expr","mstrmojo.dom","mstrmojo.array","mstrmojo.css");var L=mstrmojo.expr,N=mstrmojo.dom,C=mstrmojo.array,A=mstrmojo.css,F=mstrmojo.fe._IsRelationTreeNode.createSetHtml;var M=function(){var T="noRelationOperator",P=this[T],R=this.ctxtBuilder&&this.ctxtBuilder.itemWidgets||[],S=mstrmojo.array.filter(R,function(U){return U&&U[T]!==P&&U.data.et!==L.ET.RLS;}),O=S.length;for(var Q=0;Q<O;Q++){S[Q].set(T,P);}};mstrmojo.fe.AndOrNode=mstrmojo.declare(mstrmojo.AndOrNode,[mstrmojo.fe._IsRelationTreeNode],{scriptClass:"mstrmojo.fe.AndOrNode",markupString:'<div id="{@id}" class="mstrmojo-andor mstrmojo-AndOrNode {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-andor-prefix" mstrAttach:click><span class="mstrmojo-textset mstrmojo-andor-prefix-text"></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}">{@_prefixAndOrToolsMarkup}</span></div><div class="mstrmojo-andor-top"></div><div class="mstrmojo-andor-contentsWrapper" style="position:relative"><div class="mstrmojo-andor-contents" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue mstrmojo-AndOrNode-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner mstrmojo-AndOrNode-dropCue-inner"></div></div></div><div class="mstrmojo-andor-bottom"></div></div>',getPrefixAndOrToolsMarkup:function(){return(F+this._super());},markupSlots:mstrmojo.hash.copy({createSetNode:function(){return this.domNode.firstChild.childNodes[1].firstChild;}},mstrmojo.hash.copy(mstrmojo.AndOrNode.prototype.markupSlots)),markupMethods:mstrmojo.hash.copy({onnoRelationOperatorChange:function(){A.toggleClass(this.prefixHoverNode,["noRelation"],this.noRelationOperator);}},mstrmojo.hash.copy(mstrmojo.AndOrNode.prototype.markupMethods)),removeSet:function G(P){var O=P.childIndex(),Q=P.data,R=[Q];if(O>=0){this.remove(O,true);if(Q.nds&&Q.nds.length>0){R=Q.nds;if(Q.not){R[0].not=true;}}else{delete Q.dmy;delete Q.relation;delete Q.applySubExpr;delete Q.relation;delete Q.useSchema;delete Q.dmt;}this.add(R,O);this.consolidate(false);}},createSet:function E(Q,O){var P=this._ndsToMove(this,Q);if(!P){return ;}this.remove(P.idxs,true);var U=P.nds,T;if(U){if(U.length>1){var S={et:L.ET.ANDOR,nds:U};S.fn=this.data.fn;U=[S];T=S.nds[0].not;}else{var V=U[0];if(V&&V.not&&V.et===L.ET.ANDOR){T=V.not;delete V.not;}}}if(O&&O.rq){var R;if(O.isMetric){R=O.cq;mstrmojo.hash.copyProps(["applySubExpr","dmy","dmt","relation","useSchema"],O.rq,R);}else{R=O.rq;R.nds=U;if(T){R.not=T;}}this.add([R],P.idxs[0]);}this.consolidate(false);},preclick:function H(O){var R=null,Q=N.eventTarget(O.hWin,O.e),P=this._super(O);if(N.contains(this.createSetNode,Q,true)&&!this.noRelationOperator){R="createSetOpt";}O.part=R||O.part;return P;},preadd:function I(O){if(this._super){this._super(O);}this.updateRelationOperator();},preremove:function K(O){if(this._super){this._super(O);}this.updateRelationOperator();},consolidate:function B(){this._super();this.updateRelationOperator();},postBuildRendering:function J(){var O=this._super();this.updateRelationOperator();return O;},updateRelationOperator:function D(){var O=this.ctxtBuilder&&this.ctxtBuilder.itemWidgets||[],P=!!C.filterOne(O,function(R){return R&&(R.data.et===L.ET.RLS||(R.data.et===L.ET.ANDOR&&R.noRelationOperator));}),Q=this.parent;this.set("noRelationOperator",P);M.call(this);if(Q&&Q.hasRendered&&Q.updateRelationOperator){Q.updateRelationOperator();}},onmouseover:function(){this.toggleGroupBorder(true);},onmouseout:function(){this.toggleGroupBorder(false);}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.range","mstrmojo.Widget","mstrmojo.WidgetList","mstrmojo.WidgetListMapper","mstrmojo._HasSuggestion","mstrmojo.ME.MetricToken","mstrmojo.ME.MetricDataService","mstrmojo.ui.ScrollableSuggestionList","mstrmojo.mstr.EnumDSSXMLObjectTypes");var M=mstrmojo.dom,O=mstrmojo.css,w=mstrmojo.Enum_Keys,D=mstrmojo.range,c=D.EDGE,p=mstrmojo.ME.MetricToken.isDelimiter,L=mstrmojo.expr,h=mstrmojo.array,H=mstrmojo.hash;function AD(E){return E.ctrlKey||M.isMetaKey(window,E);}mstrmojo.ME.SpanListMapper=mstrmojo.provide("mstrmojo.SpanListMapper",mstrmojo.mixin({itemWrapperPrefix:function(E){return'<span class="'+this.getWrapperCss(E)+'">';},itemWrapperPrefill:"&nbsp;",itemWrapperSuffix:"</span>",createWrapperNode:function N(E){var AE=E.ownerDocument,AF=AE.createElement("span");return AF;},_iw2idx:function P(AE,AH,AG){var AF=this.wrapperNodes(AH),E=mstrmojo.array.indexOf(AF,AG);return E===-1?AF.length:E;},itemOffsetLeft:function a(AE,AI,E,AG){if(!AG){var AF=this.wrapperNodes(AI);AG=AF&&AF[E];if(!AG){return 0;}}var AH=AI.firstChild;if(!AH||(AH===AG)){return 0;}return AG.offsetLeft-AH.offsetLeft;},whereDrop:function AC(AM,E,AG,AL,AE){var AI=this._nd2iw(AM,E,AG),AN,AK,AH,AJ,AF;if(AI){AK=this._iw2idx(AM,E,AI);AN=AK;AH=this.itemOffsetLeft(AM,E,null,AI);AJ=AI.offsetTop;AF=AI.offsetWidth;if(AL.x>AE.left+AH+AF/2){AN++;AH+=AF;}}else{return AM.dropCuePos;}return{left:AH,top:AJ,idx:AN,idxActual:AK};}},mstrmojo.hash.copy(mstrmojo.WidgetListMapper)));mstrmojo.ME.TokenInputBox=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._HasSuggestion],{scriptClass:"mstrmojo.ME.TokenInputBox",containerResizable:false,dropZone:true,suggestionPopupCssClss:"mstrmojo-ME-TokenInputBox-suggest",allowDrop:function C(E){var AE=E.src.data;return !!AE;},ondrop:function(E){E.src.data={v:mstrmojo.ME.MetricToken.brackets(E.src.data.item.n),oi:H.copyProps(["did","n","t"],E.src.data.item),isNew:true};if(this.prepareDropItem){this.prepareDropItem(E);}this.insertTokens([E.src.data]);this.set("dropCuePos",null);mstrmojo.css.removeClass(this.domNode,"unselectable");},ondragenter:function F(E){this.dragdata=E.src.data;this._super(E);this.set("dropCuePos",{left:0,top:0});mstrmojo.css.addClass(this.domNode,"unselectable");},ondragleave:function Q(){this.set("dropCuePos",null);mstrmojo.css.removeClass(this.domNode,"unselectable");},ondropCuePosChange:function S(AE){var AF=AE.value,E=this.dragdata;if(E&&E.setAvatarClass){if(AF){E.setAvatarClass("add");}else{E.setInvalidAvatarClass();}}},makeObservable:true,showDesc:true,showPath:true,showFunctionSyntaxAsPath:true,blockCount:mstrmojo.ME.MetricDataService.blockCount,suggestCount:mstrmojo.ME.MetricDataService.suggestCount,markupString:'<div id={@id} class="mstrmojo-TokenInputBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-TokenInputBox-edit" contenteditable="true" tabindex="1" spellcheck="false"ondragstart = "return false;" oncontextmenu = "document.oncontextmenu =  mstrmojo.all.{@id}.fnContextMenu;" onkeydown = "return mstrmojo.all.{@id}.handlekeydown(event);" onkeypress = "return mstrmojo.all.{@id}.handlekeypress(event);" onkeyup = "return mstrmojo.all.{@id}.handlekeyup(event);" onmouseup = "return mstrmojo.all.{@id}.handlemouseup(event);" onpaste = "return mstrmojo.all.{@id}.handlepasteDirect(event);" >{@itemsHtml}</div><textarea class = "mstrmojo-TokenInputBox-clipboard" onkeyup = "return mstrmojo.all.{@id}.handlepaste(event);"></textarea><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{editNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.firstChild;},clipboardNode:function(){return this.domNode.childNodes[1];},scrollboxNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},suggestionListClass:"mstrmojo.ui.ScrollableSuggestionList",items:null,itemFunction:function G(AF,E,AE){return new mstrmojo.ME.MetricToken({data:AF,parent:AE});},listMapper:mstrmojo.ME.SpanListMapper,_set_items:function R(AE,E){if(this._super){this._super(AE,E);}if(!this.tokensCacheInitilized){this.pretokensModify();this.tokensCacheInitilized=true;}},tokensCache:[],tokensCachePointer:0,isDelimiter:p,postBuildRendering:function X(){if(this._super){this._super();}this._eros=false;if(M.isFF){document.body.spellCheck=false;}},fnContextMenu:function I(E){if(E){E.cancelBubble=true;E.returnValue=false;}return false;},handlekeydown:function V(AJ){AJ=AJ||window.event;var AH=AJ.keyCode||AJ.charCode,AF=false,AK=D.getRangeInfo();if((AD(AJ)||AH===w.LEFT_ARROW||AH===w.RIGHT_ARROW)&&this.doubleByte){this.doubleByte=false;var AI=this.prev_rInfo,AE=AK,AL=AE.startContainer.data.slice(AI.startOffset,AK.startOffset);this.widgetHandleImeInput(AI,AL);return ;}switch(AH){case w.DELETE:if(!this.doubleByte){try{this.widgetHandleDelete(AK);this.startTokenSuggestion();this.raiseChangeEvent({type:"delete"});}catch(AG){}AF=true;}break;case w.BACKSPACE:if(!this.doubleByte){try{this.widgetHandleBackspace(AK);this.raiseChangeEvent({type:"backspace"});this.startTokenSuggestion();this.editNode.focus();}catch(E){}AF=true;}break;case w.ENTER:if(this.breakOnEnterKeyDown&&this.breakOnEnterKeyDown()){break;}case w.TAB:this._startDebug=true;if(this.suggestionShown){this.handleSuggestionItemSelect(this.getSelected());}else{this.startTokenSuggestion();}AF=true;break;case w.ESCAPE:this.endTokenSuggestion();AF=true;break;case 86:if(AD(AJ)){this._saveRangeInfo=D.getRangeInfo();if(!this._saveRangeInfo.collapsed){this.widgetHandleDelete(this._saveRangeInfo);this._saveRangeInfo=D.getRangeInfo();}this.clipboardNode.focus();AF=false;}break;case 89:if(AD(AJ)){this.widgetHandleUndoRedo("redo");AF=true;}break;case 90:if(AD(AJ)){this.widgetHandleUndoRedo("undo");AF=true;}break;case 229:if(!this.doubleByte){this.doubleByte=true;this.prev_rInfo=AK;this.prev_items=this.items;}break;default:}if(AF){M.stopPropogation(window,AJ);M.preventDefault(window,AJ);return false;}return true;},getCharacter:function y(AE){var E=(M.isIE&&!M.isIE9)?AE.keyCode:AE.charCode;return(E>0)?String.fromCharCode(E):null;},handlekeypress:function A(AG){AG=AG||window.event;var AH=this.getCharacter(AG),AE=false;if(AH&&!((AH==="c"||AH==="a")&&AD(AG))){try{this.widgetHandleInput(D.getRangeInfo(),AH);this.raiseChangeEvent({type:"input",character:AH});if(!this.isDelimiter(AH)){if(this.useKeyDelay){var AF=this;window.clearTimeout(this.tmr);this.tmr=window.setTimeout(function(){AF.startTokenSuggestion();},mstrmojo.ME.MetricDataService.suggestDelay);}else{this.startTokenSuggestion();}}else{this.endTokenSuggestion(true);}}catch(E){}AE=true;}if(AE){M.stopPropogation(window,AG);M.preventDefault(window,AG);return false;}return true;},handlekeyup:function Y(AF){var E=AF.keyCode||AF.charCode,AE;if(E===w.LEFT_ARROW||E===w.RIGHT_ARROW){AE=this.findObjectToken();if(AE&&AE===this._saveActiveToken){this.startTokenSuggestion(AE);}else{this.endTokenSuggestion();}}else{if(E===w.UP_ARROW){this.preHighlight();}else{if(E===w.DOWN_ARROW){this.nextHighlight();}}}this._saveRangeInfo=D.getRangeInfo();},handlemouseup:function g(AJ){if(this.dropCuePos){return false;}var AF=this.findObjectToken();if(AF&&AF===this._saveActiveToken){this.startTokenSuggestion(AF);}else{this.endTokenSuggestion();}var AH=D.getRangeInfo();if(this.doubleByte){this.doubleByte=false;var AI=this.prev_rInfo,AG=this._saveRangeInfo,AE=AG.startContainer.data.slice(AI.startOffset,AG.startOffset+1);if(AE!==""){var E=this.widgetHandleImeInput(AI,AE);this.prev_items=this.items;AF=M.findWidget(AH.startContainer);if(AF){this._delaySetTextCaretPos(AF.domNode,AH.startOffset);}else{this._delaySetTextCaretPos(E.domNode,AH.startOffset-1);}}this.prev_rInfo=AH;}this._saveRangeInfo=AH;},handlepasteDirect:function t(E){this.clipboardNode.value=E.clipboardData.getData("Text");this.handlepaste(E);M.stopPropogation(window,E);M.preventDefault(window,E);return false;},handlepaste:function e(AI){var AE=this.clipboardNode.value;this.clipboardNode.value="";var AH=[],E=AE&&AE.length,AG,AF="",AJ;if(E>0){for(AG=0;AG<E;AG++){AJ=AE.charAt(AG);if(this.isDelimiter(AJ)){if(!mstrmojo.string.isEmpty(AF)){AH.push({v:AF,isNew:true});AF="";}AH.push({v:AJ,isDelimiter:true,isNew:true});}else{AF=AF+AJ;}}if(!mstrmojo.string.isEmpty(AF)){AH.push({v:AF,isNew:true});AF="";}this.insertTokens(AH);}},raiseChangeEvent:function(E){E.name="tokensModify";this.raiseEvent(E);},getTokensAsString:function AB(){var AE=[],AG=this.items,AF,E;for(AF=0,E=AG.length;AF<E;AF++){AE[AF]=AG[AF].v;}return AE.join("| ");},replaceErrorToken:function i(AG){var AF=this.items||[],AH=mstrmojo.array.find(AF,"sta",-1),AE,AI=function(AO,AM,AP){var AL=(AO&&AO.items)||[],AK=h.find(AL,"did",AM),AJ,AN;if(AK>-1){AJ=AL[AK].fs;AN=h.filterOne(AJ,function(AQ){return AQ.fnm&&AQ.fnm.toUpperCase()===AP.toUpperCase();});}return AN;},E=function(AO,AM,AN){var AJ={v:AM.n,oi:AM,isNew:true},AL=AO.v&&AO.v.split("@"),AK;if(AL&&AL.length>1){AK=AI(AN,AM.did,AL[1]);if(AK){AJ.exv=AK.fmdid||AK.fid;AJ.extp=8;AJ.v=mstrmojo.ME.MetricToken.brackets(AM.n)+"@"+AK.fnm;}}return AJ;};if(AH>-1){AE=E(AF[AH],AG,this.candidates);this.remove(AH);this.add([AE],AH);}},widgetHandleDelete:function Z(AH){if(AH.collapsed){var AG,AF,E,AI=AH.startOffset,AE=this.ctxtBuilder.itemWidgets;if(!M.contains(this.editNode,AH.startContainer,false,document.body)){D.collapseOnNode(this.editNode,false);return ;}AG=D.getEdgeInfo(AH.startContainer,AH.startOffset);AF=M.findWidget(AH.startContainer);E=this.itemIndex(AF.data);if(AG===c.EDGE_END){E++;AF=AE[E];AI=0;}if(!AF){D.collapseOnNode(this.editNode,false);return ;}if(AF.length()===1){this.remove(E);AF=AE[E];if(AF){D.collapseOnNode(AF.domNode,true);}else{D.collapseOnNode(this.editNode,false);}this.checkMergeTwoTokens(E-1,E);}else{AF.spliceContent(AI,1);D.collapseOnTextNode(AF.domNode,AI);}}else{this.widgetDeleteTokens(AH);}},widgetHandleBackspace:function o(AH){if(AH.collapsed){var AG,AF,E,AI=AH.startOffset,AE=this.ctxtBuilder.itemWidgets;if(!M.contains(this.editNode,AH.startContainer,false,document.body)){if(AH.startOffset>0&&M.isFF){AF=AE[this.items.length-1];D.collapseOnNode(AF.domNode,false);AH=D.getRangeInfo();AG=D.getEdgeInfo(AH.startContainer,AH.startOffset);}else{D.collapseOnNode(this.editNode,true);return ;}}AG=D.getEdgeInfo(AH.startContainer,AH.startOffset);AF=M.findWidget(AH.startContainer);E=this.itemIndex(AF.data);if(AG===c.EDGE_BEGIN){E--;AF=AE[E];AI=AF.length();}if(!AF){D.collapseOnNode(this.editNode,true);return ;}if(AF.length()===1){this.remove(E);AF=AE[E-1];if(AF){D.collapseOnNode(AF.domNode,false);this.checkMergeTwoTokens(E-1,E);AF=AE[E-1];}else{D.collapseOnNode(this.editNode,true);}}else{AF.spliceContent(AI-1,1);D.collapseOnTextNode(AF.domNode,AI-1);}}else{this.widgetDeleteTokens(AH);}},widgetHandleInput:function q(AI,AJ){if(!AI.collapsed){this.widgetDeleteTokens(AI);AI=D.getRangeInfo();}var AF,AK,AL,AM,E,AE,AG=this.ctxtBuilder.itemWidgets;if(!M.contains(this.editNode,AI.startContainer,false,document.body)){this.add([{v:AJ,isDelimiter:this.isDelimiter(AJ),isNew:true}],0);AK=AG[0];D.collapseOnTextNode(AK.domNode,1);return ;}AF=D.getEdgeInfo(AI.startContainer,AI.startOffset);AK=M.findWidget(AI.startContainer);AL=this.itemIndex(AK.data);if(this.isDelimiter(AJ)){AM={v:AJ,isDelimiter:true,isNew:true};if(AF===c.EDGE_MIDDLE){var AH=AK.split2Tokens(AI.startOffset);this.remove(AL);this.add([AH[0],AM,AH[1]],AL);AL=AL+1;}else{AL=(AF===c.EDGE_BEGIN)?AL:AL+1;this.add([AM],AL);}AK=AG[AL];D.collapseOnNode(AK.domNode,false);}else{AE=AI.startOffset;if(AK.isDelimiter()){E=AG[(AF===c.EDGE_BEGIN)?AL-1:AL+1];if(E&&!E.isDelimiter()){AK=E;AE=(AF===c.EDGE_BEGIN)?AK.length():0;}}if(!AK.isDelimiter()){AK.spliceContent(AE,0,AJ);D.collapseOnTextNode(AK.domNode,AE+1);}else{this.add([{v:AJ,isNew:true}],(AF===c.EDGE_BEGIN)?AL:AL+1);AK=AG[(AF===c.EDGE_BEGIN)?AL:AL+1];D.collapseOnNode(AK.domNode,false);}}},widgetHandleImeInput:function q(AH,AI){if(!AH.collapsed){this.widgetDeleteTokens(AH);AH=D.getRangeInfo();}var AF,AJ,AK,AL,E,AE,AG=this.ctxtBuilder.itemWidgets;if(!M.contains(this.editNode,AH.startContainer,false,document.body)){this.clearTokens();this.add([{v:AI,isDelimiter:this.isDelimiter(AI),isNew:true}],0);AG=this.ctxtBuilder.itemWidgets;AJ=AG[0];D.collapseOnTextNode(AJ.domNode,1);this._delaySetCaretPos(AJ.domNode,false);return ;}AF=D.getEdgeInfo(AH.startContainer,AH.startOffset);AJ=M.findWidget(AH.startContainer);AK=this.itemIndex(AJ.data);AE=AH.startOffset;if(AJ.isDelimiter()){this.clearTokens();this.set("items",this.prev_items);AG=this.ctxtBuilder.itemWidgets;E=AG[(AF===c.EDGE_BEGIN)?AK-1:AK+1];if(E&&!E.isDelimiter()){AJ=E;AE=(AF===c.EDGE_BEGIN)?AJ.length():0;}}if(!AJ.isDelimiter()){AJ.spliceContent(AE,0,AI);this._delaySetTextCaretPos(AJ.domNode,AE+AI.length);}else{this.add([{v:AI,isNew:true}],(AF===c.EDGE_BEGIN)?AK:AK+1);AJ=AG[(AF===c.EDGE_BEGIN)?AK:AK+1];this._delaySetCaretPos(AJ.domNode,false);}this.startTokenSuggestion();return AJ;},findObjectToken:function B(){var AH=D.getRangeInfo(),AF=M.findWidget(AH.startContainer);if(!M.contains(this.editNode,AH.startContainer,false,document.body)){return null;}if(!AF||AF===this||!AF.isDelimiter){return null;}if(AF&&!AF.isDelimiter()){return AF;}var AG=D.getEdgeInfo(AH.startContainer,AH.startOffset),AE=this.ctxtBuilder.itemWidgets,E=this.itemIndex(AF.data);AF=AE[(AG===c.EDGE_BEGIN)?E-1:E+1];if(AF&&!AF.isDelimiter()){return AF;}return null;},checkMergeTwoTokens:function m(AH,AF){var AG=this.ctxtBuilder.itemWidgets,AE=AG[AH],E=AG[AF];if((AE&&!AE.isDelimiter())&&(E&&!E.isDelimiter())){this.remove([AH,AF]);this.add([AE.mergeTo(E)],AH);D.collapseOnTextNode(AG[AH].domNode,AE.length());}},insertTokens:function s(AK){var E=0,AE=this.editNode;var AJ=this._saveRangeInfo||D.getRangeInfo();if(!AJ||!M.contains(AE,AJ.startContainer,false,document.body)){this.add(AK);E=this.items.length-1;this._delaySetTextCaretPos(AE,(AE.innerText||AE.textContent).length);}else{var AI=D.getEdgeInfo(AJ.startContainer,AJ.startOffset),AF=M.findWidget(AJ.startContainer);E=this.itemIndex(AF.data);if(AI===c.EDGE_MIDDLE){var AH=AF.split2Tokens(AJ.startOffset);this.remove(E);AK.unshift(AH[0]);AK.push(AH[1]);this.add(AK,E);}else{E=(AI===c.EDGE_BEGIN?E:E+1);this.add(AK,E);}E=E+AK.length-1;AF=this.ctxtBuilder.itemWidgets[E];this._delaySetCaretPos(AF.domNode,false);}this.raiseChangeEvent({type:"insert"});var AG=this;window.setTimeout(function(){AG._saveRangeInfo=D.getRangeInfo();},50);return E;},insertParenthesisTokens:function v(AE){var E=this;window.setTimeout(function(){var AF=E.insertTokens([{v:"(",isDelimiter:true,isNew:true},{v:")",isDelimiter:true,isNew:true}]);E._delaySetTextCaretPos(E.itemsContainerNode.childNodes[AF]);},AE||50);},clearTokens:function l(E){this.set("items",E||[]);this._saveRangeInfo=null;this._delaySetCaretPos(this.editNode,false);},focus:function r(){var AE=this.ctxtBuilder.itemWidgets,E=AE.length;this._delaySetCaretPos(E>0?AE[E-1].domNode:this.editNode,false);},startTokenSuggestion:function x(E){this.endTokenSuggestion();if(!E){E=this.findObjectToken();}if(E&&!E.isDelimiter()){E.set("active",true);this._saveActiveToken=E;this.showSuggestion(this.getSearchPattern());}if(!E||this.getSearchPattern().length===0){this.hideSuggestion();}},browseItemVisible:true,folderLinksContextId:25,browsableTypes:[L.TP.FOLDER,L.TP.FACT,L.TP.ATTR,L.TP.FUNCTION,L.TP.FILTER,L.STP.PROMPT_OBJECTS,L.TP.ATTR,L.TP.DIM,L.TP.METRIC,L.TP.ROLE].join(","),getSearchPattern:function U(){var AE=this._saveActiveToken,AG=AE&&AE.data.v,E=AG&&AG.length;if(E>2){if(AG.charAt(0)==="["){AG=AG.substring(1);}if(AG.charAt(AG.length-1)==="]"){AG=AG.substring(0,AG.length-1);}}if(AE&&AE.data.ift){var AF=AE.data.v,AH=AF&&AF.indexOf("@");if(AH>=0){AG=AF.substring(AH);}}return AG||"";},getSuggestionPos:function b(){var E=this._saveActiveToken,AE=null,AG,AF;if(E){AG=E.data&&E.data.ift;AF=mstrmojo.dom.position(E.domNode,true);AE={left:Math.round(AF.x+(AG?AF.w:0))+"px",top:Math.round(AF.y+AF.h)+"px",zIndex:100};}return AE;},item2textCss:function J(AE){var E=(this._super&&this._super(AE))||{4:"m",11:"fx",12:"a",13:"fc",43:"tr",21:"afm","-99":"br"}[AE.t]||"";E+=AE.da?" da":"";E+=(AE.dm||AE.um)?" dm":"";E+=AE.de?" de":"";E+=AE.fs&&AE.fs.length&&AE.fs.some(function(AF){return AF.fgr>0;})?" g":"";return E;},onBrowserOpen:function n(){this.editNode.blur();},onSuggestionItemSelect:function u(AE){var E=this._saveActiveToken;this.endTokenSuggestion();if(E){if(E.data.ift&&AE.t===21){E.setFormInfo(AE);}else{E.setItemInfo(AE);if(AE.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Function){this.insertParenthesisTokens();}}this._delaySetCaretPos(E.domNode,false);}this.closePopup();},_delaySetCaretPos:function z(E,AF){var AE=this.editNode,AG=this,AH=function(){AE.focus();AE.focus();D.collapseOnNode(E,AF);AG._saveRangeInfo=D.getRangeInfo();};window.setTimeout(AH,0);},_delaySetTextCaretPos:function z(E,AH){var AE=this.editNode,AF=this,AG=function(){AE.focus();AE.focus();D.collapseOnTextNode(E,AH);AF._saveRangeInfo=D.getRangeInfo();};window.setTimeout(AG,0);},getCandidatesThroughTaskCall:function W(AE,E){AE.objectType="11,12,13,43,4";AE.rootFolderType=39;AE.blockCount=this.blockCount;mstrmojo.ME.MetricDataService.getMetricComponents(AE,E);},filterCandidates:function k(AH,AG,E){var AE=this._saveActiveToken,AI=AE&&(AE.data.oi||AE.data.at),AF;if(AI&&AE.data.ift){E=E||this.suggestCount;AG=mstrmojo.string.regEscape(AG);AF=h.filter(AH,function(AJ){return AJ.t===21&&AJ.attid===AI.did&&(new RegExp("^"+AG,"i")).test("@"+AJ.n);},{max:E});}else{AF=h.filter(AH,function(AJ){return AJ.t!==21;});AF=this._super(AF,AG,E);}return AF;},endTokenSuggestion:function AA(AE){var E=this._saveActiveToken;if(E){if(AE){this.hideSuggestion();}E.set("active",false);this._saveActiveToken=null;}},widgetDeleteTokens:function f(AM){var AE=AM.startOffset,E=AM.endOffset,AP=M.findWidget(AM.startContainer),AN=M.findWidget(AM.endContainer),AI=this.itemIndex(AP.data),AG=this.itemIndex(AN.data),AJ=[],AK=D.getEdgeInfo(AM.startContainer,AE),AO=D.getEdgeInfo(AM.endContainer,E),AL=(AK===c.EDGE_BEGIN?AI:AI+1),AF=(AO===c.EDGE_END?AG:AG-1),AH;if(AP===AN){if((AK===c.EDGE_BEGIN)&&(AO===c.EDGE_END)){this.remove(AI);AN=this.ctxtBuilder.itemWidgets[AI===0?AI:AI-1];if(AN){D.collapseOnNode(AN.domNode,AI===0);}else{D.collapseOnNode(this.editNode,true);}}else{AP.spliceContent(AE,E-AE);D.collapseOnTextNode(AN.domNode,AE);}}else{for(AH=AL;AH<=AF;AH++){AJ.push(AH);}this.remove(AJ);if(AK===c.EDGE_MIDDLE){AP.spliceContent(AE);}if(AO===c.EDGE_MIDDLE){AN.spliceContent(0,E);}if(AK===c.EDGE_BEGIN){AP=this.ctxtBuilder.itemWidgets[AI===0?AI:AI-1];}if(AP){D.collapseOnNode(AP.domNode,AI===0);}else{D.collapseOnNode(this.editNode,false);}AI=(AK===c.EDGE_BEGIN)?AI-1:AI;this.checkMergeTwoTokens(AI,AI+1);}this.editNode.focus();},oncandidatesChange:function j(){var AE=this.candidates,E=(AE&&AE.items)||[];if(!this.noCache&&AE&&AE.isComplete){this.suggestCount=this.REQUEST_THRESHOLD=E.length;}else{this.suggestCount=mstrmojo.ME.MetricDataService.suggestCount;this.REQUEST_THRESHOLD=20;}},nudge:function(E){var AE=this.getSuggestionPos();if(AE){E.set("left",AE.left);E.set("top",AE.top);}},pretokensModify:function K(){this.tokensCache=this.tokensCache.slice(0,this.tokensCachePointer);var E=this.findObjectToken();this.tokensCache.push({items:H.clone(this.items),rInfo:D.getRangeInfo(),idx:E!==null?this.itemIndex(E.data):-1});this.tokensCachePointer=this.tokensCache.length;},widgetHandleUndoRedo:function d(AF){var AG,E,AE=function(AI){if(!AI){return ;}AI=AI||{};this.set("items",H.clone(AI.items));var AL=this.ctxtBuilder.itemWidgets,AH=AL[AI.idx],AK=AH&&AH.domNode||this.editNode,AJ=AI.rInfo;this._delaySetTextCaretPos(AK,AJ&&AJ.startOffset||0);};switch(AF){case"undo":AG=--this.tokensCachePointer;if(AG>-1){E=this.tokensCache[AG-1];AE.call(this,E);}else{this.tokensCachePointer=1;}break;case"redo":AG=this.tokensCachePointer++;if(AG>-1&&AG<this.tokensCache.length){E=this.tokensCache[AG];AE.call(this,E);}else{this.tokensCachePointer=Math.min(Math.max(this.tokensCachePointer,1),this.tokensCache.length);}break;}},resetTokensCache:function T(){this.tokensCache=[];this.tokensCachePointer=-1;this.tokensCacheInitilized=false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ME.TokenInputBox");mstrmojo.requiresDescs(13542,13543);var B=mstrmojo.array;var L={VALID:0,UNKNOWN:1,VALIDATING:2,ERROR:3,AMBIGUITY:4},G={0:"valid",1:"unknown",2:"validating",3:"error",4:"ambiguity"},H={0:mstrmojo.desc(9565,"Valid Metric Formula."),1:mstrmojo.desc(9106,"Require Validation?"),2:mstrmojo.desc(9566,"Validation in Progress..."),3:mstrmojo.desc(9567,"Validation Failed with Syntax Error!"),4:mstrmojo.desc(9568,"Validation Failed with Object Ambiguity!")};function D(O){if(!O){return L.VALID;}return{"-2147214845":L.ERROR,"-2147214846":L.AMBIGUITY}[O]||L.ERROR;}mstrmojo.ME.MetricEditBox=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.MetricEditBox",vStatus:L.VALID,iStatus:"",showStatus:true,browseItemVisible:true,absorbAmbiguity:true,isObjectVisible:function(O){return true;},markupString:'<div id="{@id}" class="mstrmojo-MEBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-MEBox-edit"></div><div class="mstrmojo-MEBox-status {@statusCssClass}"><div class="mstrmojo-MEBox-vStatus"></div><div class="mstrmojo-MEBox-iStatus"></div></div></div>',markupSlots:{editNode:function(){return this.domNode.firstChild;},iStatusNode:function(){return this.domNode.lastChild.lastChild;},vStatusNode:function(){return this.domNode.lastChild.firstChild;}},markupMethods:{onvStatusChange:function(){var P=this.vStatus,O=this.vStatusNode;O.className="mstrmojo-MEBox-vStatus "+G[P];O.innerHTML=(this.getStatusDesc&&this.getStatusDesc(P))||H[P]||"";},oniStatusChange:function(){this.iStatusNode.innerHTML=this.iStatus;this.iStatusNode.title=this.iStatus;}},children:[{scriptClass:"mstrmojo.ME.TokenInputBox",alias:"inputBox",slot:"editNode",renderOnScroll:false,renderBlockSize:0,bindings:{browseItemVisible:"this.parent.browseItemVisible",candidates:"this.parent.candidates"}}],init:function N(O){if(this._super){this._super(O);}this.statusCssClass=this.showStatus?"":"hidden";},getSearchPattern:function M(){return this.inputBox.getSearchPattern();},getHighlightedText:function I(P,O){return this.inputBox.getHighlightedText(P,O);},item2textCss:function F(O){return{4:"m",7:"am",11:"fx",12:"a",13:"fc",43:"tr",47:"cs"}[O.t]||"";},handleSuggestionItemSelect:function E(O){var P=this.abiguityDialog;if(O){P.onItemSelect(O);}P.close();},showDesc:true,showPath:true,abiguityDialog:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-ME-ambiguityDialog",onOpen:function(){this.set("title",mstrmojo.desc(13542,"Object Ambiguity - ##").replace("##",this.ambiguousName));this.list.clearSelect();this.list.set("items",this.items);this.list.singleSelect(0);this.label.set("text",mstrmojo.desc(13543,"More than one object with the name '##' were found.").replace("##",this.ambiguousName));},children:[{scriptClass:"mstrmojo.Label",alias:"label",text:""},{scriptClass:"mstrmojo.ui.ScrollableSuggestionList",alias:"list",cssClass:"mstrmojo-ME-ambiguityList",bindings:{items:"this.parent.opener.suggestionItems"},onclick:function(O){mstrmojo._IsList.onclick.call(this,O);}}],buttons:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton hot",text:mstrmojo.desc(547,"Select"),onclick:function(){var O=this.parent.parent;O.opener.handleSuggestionItemSelect(O.list.selectedItem);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-Button mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.parent.parent.close();}}]},defaultOnTokensModify:function(){this.set("vStatus",L.UNKNOWN);this.set("iStatus","");},postBuildRendering:function A(){this._super();this.inputBox.attachEventListener("tokensModify",this.id,"defaultOnTokensModify");this.inputBox.attachEventListener("tokensModify",this.id,"ontokensModify");},updateInputBoxItems:function K(O){this.inputBox.set("items",O.items);},replaceErrorToken:function C(O){this.inputBox.replaceErrorToken(O);},handleValidation:function J(O){if(!O){this.set("vStatus",L.ERROR);return ;}O.vs=D(O.rjec);this.set("vStatus",O.vs);this.set("iStatus",O.rjed||"");this.updateInputBoxItems(O);this.inputBox.focus();if(O.vs===L.AMBIGUITY){var W=this,T=O.items,S=B.find(T,"sta",-1),P=T[S].v,U=function(X){W.replaceErrorToken(X);W.set("iStatus","");W.set("vStatus",L.UNKNOWN);if(W.continueValidataion){W.continueValidataion();}};var Q=B.filter(O.srfd.items,this.isObjectVisible);var V=this.parent.candidates,R=V&&V.items;if(R){B.forEach(Q,function(Y){var X=B.find(R,"did",Y.did);if(X===-1){if(this.absorbAmbiguity){R.push(Y);}}else{Y.path=R[X].path;}});}if(Q.length===1){U(Q[0]);return ;}this.openPopup("abiguityDialog",{zIndex:100,items:Q,ambiguousName:P,onItemSelect:U});}else{if(this.postHandleValidation){this.postHandleValidation();}}}});mstrmojo.ME.MetricEditBox.VALIDATION_STATUS=L;}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._IsExprNode","mstrmojo.fe._IsRelationTreeNode","mstrmojo._HasPopup","mstrmojo.fe.AndOrNode","mstrmojo.fe.DynamicNode","mstrmojo.ConditionNode","mstrmojo.css","mstrmojo.string","mstrmojo.dom","mstrmojo.hash","mstrmojo.expr");var D=mstrmojo.css,A=mstrmojo.dom,G=mstrmojo.hash,C=function(L){var M=L.data,K=M.dmy&&M.dmy.uts||[],I=K.length,H=[],J;for(J=0;J<I;J++){H.push(K[J].n);}return'<span class="mstrmojo-text">'+H.join(", ")+"</span>";};mstrmojo.fe.RelationNode=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsExprNode,mstrmojo.fe._IsRelationTreeNode,mstrmojo._HasPopup],{scriptClass:"mstrmojo.fe.RelationNode",markupString:'<div id="{@id}" class="mstrmojo-relation {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-relation-prefix {@cssClass}"><span class="mstrmojo-textset mstrmojo-relation-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}"><span class="mstrmojo-indent" onclick="mstrmojo.all[\'{@id}\'].ind()">'+mstrmojo.desc(5895,"Group conditions")+'</span><span class="mstrmojo-outdent" onclick="mstrmojo.all[\'{@id}\'].out()">'+mstrmojo.desc(5896,"Ungroup Conditions")+'</span></span></div><div class="mstrmojo-relationNode"><span class="mstrmojo-relationNode-inf"><span class="mstrmojo-relation-prefix-text">'+mstrmojo.desc(2790,"Set of").replace(/##/g,"")+'</span><span class="mstrmojo-textset"  mstrAttach:click></span><span class="mstrmojo-relation-postfix-text">'+mstrmojo.desc(2793,"Where").replace(/##/g,"")+'</span><span class="mstrmojo-relation-convert-text"  mstrAttach:click >'+mstrmojo.desc(null,"Convert to Condition")+'</span><img class="mstrmojo-del" src="../images/1ptrans.gif" title="'+mstrmojo.desc(7931,"Delete condition")+'"onclick="mstrmojo.all[\'{@id}\'].del()" /></span><div class="mstrmojo-relation-childTreeNode" style="position:relative;"></div></div></div>',markupSlots:{prefixHoverNode:function(){return this.domNode.firstChild;},prefixNode:function(){return this.domNode.firstChild.firstChild;},relationNode:function(){return this.domNode.lastChild;},textNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[1];},convertNode:function(){return this.domNode.childNodes[1].firstChild.childNodes[3];},containerNode:function(){return this.domNode.childNodes[1].childNodes[1];}},markupMethods:{onprefixedAndOrEditableChange:function(){D.toggleClass(this.prefixNode,["editable"],this.prefixedAndOrEditable);},onselectedChange:function(){D.toggleClass(this.relationNode,["selected"],this.selected);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();this.textNode.innerHTML=C(this);}},noRelationOperator:true,children:[{scriptClass:"mstrmojo.fe.RelationFilterExprTree",alias:"childTree",ignoreLayout:true,dropZone:false,draggable:false,nodeClassMap:{14:mstrmojo.fe.AndOrNode,ph:mstrmojo.fe.DynamicNode,"*":mstrmojo.fe.ConditionNode},onNew:function(H){this.parent.tree.onNew(H);},getItemConfig:function(K,H,L){var I=mstrmojo.fe.RelationFilterExprTree.prototype.getItemConfig.call(this,K,H,L),J=L.tree||L;return G.copy({tree:J,rootTree:this.parent.tree,noRelation:true,inRelation:true},I);},prenodeclick:function(H){if(!H||!H.part){return ;}var I=this.rootTree;if(I&&I.onnodeclick&&this.editable){H.editor=I.editor;I.onnodeclick.call(this,H);}}}],premousedown:function(H){if(this._super){this._super(H);}var I=A.eventTarget(H.hWin,H.e);if(!A.contains(this.childTree.domNode,I,true)){this.childTree.clearTreeSelect();}},preselectedChange:function(H){if(!H.value){this.childTree.clearTreeSelect();}},init:function(H){this._super(H);var I=this.data;if(I){delete this.data;this._set_data(null,I);}},_set_data:function(K,H){var I=this.data,J=(I!==H);if(J){this.data=H;if(H){this.childTree.set("items",H.nds||[H]);}}return J;},isSelectableArea:function(H){return mstrmojo.dom.contains(this.relationNode,H,true);},preclick:function E(H){var J=null,I=A.eventTarget(H.hWin,H.e);if(A.contains(this.prefixNode,I,true)){J="andor";}else{if(A.contains(this.textNode,I,true)){J="createSet";}else{if(A.contains(this.convertNode,I,true)){this.parent.removeSet(this);return false;}}}H.part=J;},del:function B(){var H=this.parent;if(H&&H.remove&&this.data){H.remove(this.data);}},newCondition:function F(H){this.childTree.newCondition(H);},avatarCssCls:"mstrmojo-FE mstrmojo-relationNode",getAvatarNode:function(){return this.relationNode.cloneNode(true);}});})();(function(){mstrmojo.requiresCls("mstrmojo.FilterExpr","mstrmojo.threshold.AndOrNode","mstrmojo.threshold.ConditionNode","mstrmojo.expr");var G=mstrmojo.expr,F=G.ET;mstrmojo.threshold.ThresholdExprTree=mstrmojo.declare(mstrmojo.FilterExpr,null,{scriptClass:"mstrmojo.threshold.ThresholdExprTree",cssClass:"mstrmojo-ThresholdExprTree",allowCopy:false,containerResizable:false,draggable:true,dropZone:true,editable:true,makeObservable:true,supportRelation:true,nodeClassMap:{14:mstrmojo.threshold.AndOrNode,"*":mstrmojo.threshold.ConditionNode},onConditionEdit:mstrmojo.emptyFn,editor:undefined,isEditable:function C(H){if(!this.editable){return false;}if(H&&H.et===F.XML){return !H.xml;}return true;},onNew:function E(H){H.data.isNew=true;this.editor.openConditionWalk(H.data,H.widget.ctxtBuilder.itemWidgets[H.index]);},onnodeclick:function D(H){var I=H.part;if(!H||!I){return ;}var K=I==="andor",J=this.tree.editor;if(!((K&&this.prefixedAndOrEditable)||(!K&&this.editable))){return ;}if(!this.editable){return ;}if(K){J.openAndORPopup(this,H.getTarget());return ;}else{if(I==="addCondition"){this.tree.newCondition(null);return ;}}J.openConditionWalk(this.data,this);},allowDrop:function B(H){var M=H&&H.src,L=M&&M.data,J=L&&L.et,K=this.tree,I=M&&M.widget&&M.widget.tree;return J&&(this===K?(I!==K):true);},remove:function A(I){var H=this._super(I);if(this.items.length===0&&I.et===F.ANDOR&&I.nds.length===0&&this.parent.removeFromModel){this.parent.removeFromModel();}return H;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.HTMLButton","mstrmojo.Label","mstrmojo.TextBox","mstrmojo.TextArea","mstrmojo.Table","mstrmojo.HBox","mstrmojo.Editor","mstrmojo.ObjectBrowser","mstrmojo.NewFolderEditor");function B(){var E={alias:"newFolder",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-createfolder",text:mstrmojo.desc(3245,"Create New Folder"),onclick:function(){var G=this.parent.parent,F={zIndex:G.zIndex+10,navigateAfter:false,fId:G.ob.currentFolder.did,okFn:function(H,I){G.ob.refreshContent();if(I){G.ob.browseFolder(H.fid,G.newFolder);}}};if(G.ob.dataProvider){F.dp=G.ob.dataProvider;}G.openPopup("newFolder",F);},postCreate:function(){this.set("visible",mstrmojo.resolveFeature("create-folder"));}},D=mstrmojo.hash.clone(mstrmojo.ObjectBrowser.prototype.children);D.push(E);return D;}mstrmojo.SaveAsObjectBrowser=mstrmojo.declare(mstrmojo.ObjectBrowser,null,{scriptClass:"mstrmojo.SaveAsObjectBrowser",cssClass:"mstrmojo-SaveAs-OB",children:B()});var A={success:function(D){var E=this.parent;if(E.onObjectSaved){E.onObjectSaved({name:E.name,did:D.did,desc:E.desc});}mstrmojo.alert(mstrmojo.desc(7987,"The ## '###' has been saved successfully.").replace("##",E.typeDesc||"Object").replace("###",E.name),null,mstrmojo.desc(7984,"Object Saved"));E.ob.refreshContent();E.close();},failure:function(E){var D=parseInt(E.getResponseHeader("X-MSTR-TaskErrorCode"),10)+4294967296,F=this.parent;if(D==2147749923){mstrmojo.confirm(mstrmojo.desc(7986,"The ## '###' already exists. Do you want to replace the existing one?").replace("##",F&&F.typeDesc||"Object").replace("'###'",F&&F.name?'"'+F.name+'"':""),{confirmBtn:{fn:function(){F.saveAs(true);}}},{title:mstrmojo.desc(3179),zIndex:F&&F.zIndex+10});}else{mstrmojo.alert(mstrmojo.desc(7985,"Error while saving: ")+E.getResponseHeader("X-MSTR-TaskFailureMsg"));}}};mstrmojo.SaveAsEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.SaveAsEditor",cssClass:"mstrmojo-SaveAsEditor",title:mstrmojo.desc(3167,"Save As"),sId:null,rootFolderID:null,rootFolderType:null,folderLinksContextId:null,browsableTypes:null,showCompletePath:true,desc:"",name:"",help:"Save_As_dialog_box.htm",displaySaveLabel:true,searchVisible:true,upButtonVisible:true,children:[{scriptClass:"mstrmojo.SaveAsObjectBrowser",alias:"ob",closeable:false,closeOnSelect:false,fishEyeVisible:false,bindings:{showCompletePath:"this.parent.showCompletePath",rootFolderID:"this.parent.rootFolderID",rootFolderType:"this.parent.rootFolderType",folderLinksContextId:"this.parent.folderLinksContextId",browsableTypes:"this.parent.browsableTypes",displaySaveLabel:"this.parent.displaySaveLabel",searchVisible:"this.parent.searchVisible",upButtonVisible:"this.parent.upButtonVisible",sId:"this.parent.sId"},postCreate:function(){this.onSelectCB=[this.parent,"onOBSelect"];this.onBrowseFolder=[this.parent,"onOBBrowseFolder"];}},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-Input-Panel",rows:2,cols:2,alias:"contPanel",children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Name-Label",slot:"0,0",text:mstrmojo.desc(2211,"Name:")},{scriptClass:"mstrmojo.TextBox",slot:"0,1",value:mstrmojo.desc(8116,"New Folder"),alias:"name",cssClass:"mstrmojo-SaveAsEditor-nameInput",bindings:{value:"this.parent.parent.name"}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-Desc-Label",slot:"1,0",text:mstrmojo.desc(1154,"Description:")},{scriptClass:"mstrmojo.TextArea",cssClass:"mstrmojo-SaveAsEditor-descInput",slot:"1,1",alias:"desc",bindings:{value:"this.parent.parent.desc"},rows:5}]},{scriptClass:"mstrmojo.HBox",alias:"buttonBox",slot:"buttonNode",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot okButton",alias:"ok",text:mstrmojo.desc(2400,"Save"),onclick:function(){this.parent.parent.saveAs();}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",alias:"cancel",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.parent.parent.close();}}]}],newFolder:{scriptClass:"mstrmojo.NewFolderEditor"},onOpen:function(){this.ob.browse();},onOBBrowseFolder:mstrmojo.emptyFn,onOBSelect:function(D){this.set("name",D.n);},saveAsCallback:function C(){return A;},saveAs:function(F){var E=this.contPanel;this.name=E.name.value;this.desc=E.desc.value;if(!this.name){mstrmojo.alert(mstrmojo.desc(3380,"Please enter valid name"));return ;}var G=this.saveParams||{};G.folderID=this.ob.currentFolder.did;G.description=this.desc||"";G.name=this.name||"";G.saveAsOverwrite=!!F;var D=this.saveAsCallback();D.parent=this;mstrmojo.xhr.request("POST",mstrConfig.taskURL,D,G);}});mstrmojo.SaveAsEditor.SAVEAS_CALLBACK=A;})();(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.ObjectBrowser");var H=mstrmojo.array;var E=[257,1024,3072,12032];mstrmojo.vi.ui.editors.ObjectPicker=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.ObjectPicker",cssClass:"mstrmojo-vi-ObjectPicker",zIndex:9,title:mstrmojo.desc(11496,"Select Object"),help:null,rootFolderID:null,rootFolderType:null,folderLinksContextId:4,supportedTypes:H.hash(E),item:null,OKFn:null,children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"ob",closeable:false,browsableTypes:"8,"+E.join(","),closeOnSelect:false,showCompletePath:false,searchVisible:false,scrollableIncFetch:true,bindings:{rootFolderID:"this.parent.rootFolderID",rootFolderType:"this.parent.rootFolderType",folderLinksContextId:"this.parent.folderLinksContextId"}},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",alias:"btnHBox",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(1442,"OK"),onclick:function C(){var J=this.parent.parent;this.parent.parent.close({item:J.item});var I=J.OKFn;if(I){I(J.item);}J.set("item",null);},bindings:{enabled:function B(){return !!this.parent.parent.item;}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",text:mstrmojo.desc(2399,"Cancle"),onclick:function C(){var I=this.parent.parent;this.parent.parent.close();I.set("item",null);}}]}],preBuildRendering:function A(){if(this._super){this._super();}this.ob.onSelectCB=[this,"onOBSelect"];},postBuildRendering:function D(){if(this._super){this._super();}this.browse();},onOBSelect:function F(I){this.set("item",((this.supportedTypes[I.t]||this.supportedTypes[I.st])?I:null));},browse:function G(){this.ob.browse();}});}());(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.hash","mstrmojo.FilterExpr");var D=mstrmojo.hash,B=mstrmojo.expr.ET;mstrmojo.fe.FilterExprTree=mstrmojo.declare(mstrmojo.FilterExpr,null,{scriptClass:"mstrmojo.fe.FilterExprTree",allowCopy:false,containerResizable:false,draggable:true,dropZone:true,editable:true,makeObservable:true,onConditionEdit:mstrmojo.emptyFn,modifyConditionNode:function(G,F){var H=G.data,E=H.isNew;D.copy(D.clone(F),D.clear(H));delete H.isNew;G.paint();if(H.et===B.MQ||H.et===B.MC){G.set("noCreateSet",true);}if(G.tree.onConditionEdit){G.tree.onConditionEdit(G,E);}},getItemConfig:function(H,E,I){var F=this._super(H,E,I),G=I.tree;return D.copy({onclick:G.prenodeclick,containerResizable:G.containerResizable,ondragend:G.ondragend,ondrop:G.ondrop},F);},ondragenter:function A(E){this.dropCuePos={left:0,top:0,idx:0,idxActual:0};this._super(E);},ondragend:function(E){if(this===this.tree){return this._super(E);}else{return this.constructor.prototype.ondragend.call(this,E);}},ondrop:function(E){if(this===this.tree){return this._super(E);}else{return this.constructor.prototype.ondrop.call(this,E);}},isEditable:function C(F){if(!this.editable){return false;}var E=false;switch(F&&F.et){case B.R:case B.F:E=false;break;case B.ANDOR:case B.MQ:case B.AQ:case B.AL:case B.AC:case B.MC:case B.AE:E=true;break;case B.XML:E=!F.xml||!!F.ph;}return E;},prenodeclick:function(E){if(!E||!E.part){return ;}if(E.part!=="createSet"&&E.part!=="createSetOpt"&&!(E.part==="andor"?this.prefixedAndOrEditable:this.editable)){return ;}var F=this.tree;if(F.onnodeclick){F.onnodeclick.call(this,E);}},getSelectedItemWidget:function(){var E=function(K){var I=K&&K.ctxtBuilder&&K.ctxtBuilder.itemWidgets,G=K.selectedIndex,F=I&&I.length||0;if(!I){return ;}if(G===-1){for(var H=0;H<F;H++){var J=E(I[H]);if(J){return J;}}}else{return I[G];}};return E(this);}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.expr","mstrmojo.hash","mstrmojo.Box","mstrmojo.Button","mstrmojo.Editor","mstrmojo.FilterExpr","mstrmojo.Label","mstrmojo.Obj","mstrmojo.ui.Checkbox","mstrmojo.ui.CheckList","mstrmojo.warehouse.EnumObjectTypes");var G=mstrmojo.expr,C=G.ET,B=mstrmojo.array,E=mstrmojo.string,F=mstrmojo.warehouse.EnumObjectTypes,D=mstrmojo.mstr.EnumNodeDimty;mstrmojo.fe.CreateSetEditor=mstrmojo.declare(mstrmojo.Editor,null,{onOpen:function(){var M=this.model,P=this.condition.data,N=!P.m,J=this.attrsBox.attrsList,H=this.relBox.relPd,Q=[{n:mstrmojo.desc(12037,"System Default"),t:-1,did:"default"}].concat(M.metrics),I=this.appQual;J.set("items",M.attrs);mstrmojo.array.forEach(["relBox","appQual"],function(R){this[R].set("visible",N);},this);if(P.dmt===4&&P.dmy.uts){var K={};B.forEach(P.dmy.uts,function(S){var R=B.find(M.attrs,"did",S.utgt.did);if(R>=0){K[R]=true;}});J.set("selectedIndices",K);}if(N){H.set("items",Q);if(P.relation&&P.relation.guide){var L=P.relation.guide,O=B.find(Q,"did",L.did);H.set("selectedIndex",O>=0?O:0);}else{H.set("selectedIndex",0);}I.set("checked",!!P.applySubExpr);}},onOK:function(){var O=this.model,R=this.condition,T=this.condition.data,L=this.attrsBox.attrsList,H=this.relBox.relPd,J=this.appQual;var V=L.getSelectedItems(),I=[];B.forEach(V,function(X){I.push({utgt:{n:X.n,did:X.did},utp:G.DMY_TP.ATTR,agg:1,flt:2,gb:true,rps:0,n:X.n});});var U;if(H.selectedIndex>0){var M=H.items[H.selectedIndex];U={n:M.n,did:M.did,t:F.METRIC,st:1024};}var K;if(T.et===15){T.dmt=D.NodeDimtyOutputLevel;T.dmy=T.dmy||{};T.dmy.uts=I;K=T.relation=T.relation||{};if(U){K.guide=U;T.useSchema=false;}else{delete K.guide;delete K.rsTp;delete K.joTp;delete K.paTp;delete K.erTp;T.useSchema=true;}T.applySubExpr=J.checked;R.set("data",T);}else{var S={et:15};S.dmt=D.NodeDimtyOutputLevel;S.dmy={};S.dmy.uts=I;K=S.relation={};if(U){K.guide=U;}else{S.useSchema=true;}S.applySubExpr=J.checked;var N=R,P={rq:S,cq:T},Q=[R.childIndex()];if(T.et===C.ANDOR){if(T.nds&&T.nds.length>2){var W=O.childIdx;Q=[W,W-1];}else{N=R.parent;}}else{N=R.parent;P.isMetric=!!T.m;}N.createSet(Q,P);}},children:[{scriptClass:"mstrmojo.Box",alias:"attrsBox",cssClass:"Attributes-Box",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(14613,"Select attributes to create the set"),cssClass:"Label"},{scriptClass:"mstrmojo.ui.CheckList",alias:"attrsList",cssClass:"CheckList"}]},{scriptClass:"mstrmojo.Box",alias:"relBox",cssClass:"RelatedBy-Box",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12036,"Related by"),cssClass:"Label",cssDisplay:"inline-block"},{scriptClass:"mstrmojo.ui.Pulldown",alias:"relPd",cssClass:"Pulldown",cssDisplay:"inline-block",onitemSelected:function A(H){}}]},{scriptClass:"mstrmojo.ui.Checkbox",alias:"appQual",cssClass:"AppQual-CheckBox",postBuildRendering:function(){this.domNode.innerHTML=E.encodeHtmlString(mstrmojo.desc(12038,"Apply this qualification independently of the relationship filter"));}},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",cssText:"float: right; border-collapse: separate; display: table;",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(2397,"OK"),onclick:function(){var H=this.editor;H.onOK();H.close();},bindings:{enabled:function(){var I=this.parent.parent.attrsBox.attrsList,H=this.parent.parent.attrsBox.attrsList.selectedIndices;return I.getSelectedItems().length>0;},editor:"this.parent.parent"}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.editor.close();},bindings:{editor:"this.parent.parent"}}]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.Widget","mstrmojo.fx","mstrmojo.locales","mstrmojo.expr","mstrmojo.Button","mstrmojo.date","mstrmojo.ui.editors.controls.Stepper","mstrmojo.css");var AA=function(){return mstrmojo.locales.datetime;},i=mstrmojo.dom,h=mstrmojo.expr,x=h.DTP,Z=mstrmojo.date,J=mstrmojo.publisher,e=mstrmojo.hash,k=mstrmojo.array,N=k.removeIndices,j=mstrmojo.css;var z=0,C=3,M=4,n=5,Q=6;var AB="month",c="day",V="year",X="hour",AE="minute",u="second";var G='<table border="0" cellpadding="0" cellspacing="0">',t="</table>";function O(AF){return'<table border="0" cellpadding="0" cellspacing="0" style="'+AF+'">';}function H(AI,AF,AG){var AH=Z.getFirstDateOfMonth(AI,AF);return(AH.getDay()-AG+8)%7;}function l(AI){var AH=Z.parseDateAndOrTime(AI),AJ,AF,AG;if(AH){AG={};AJ=AH.date;AF=AH.time;if(AJ){e.copy(AJ,AG);}if(AF){e.copy(AF,AG);}}return AG;}function F(AG,AJ,AI,AH,AF){var AK=Z.formatDateInfo({day:AG,month:AJ,year:AI},AA().DATEOUTPUTFORMAT);return Z.inDateTimeRange(AK,AH,AF)===0;}function T(AJ,AI,AH){var AG=AJ.decreaseButton,AF=AJ.increaseButton,AK="mstrmojo-Calendar";AG.className=(AK+"-decrease");AF.className=(AK+"-increase");}function W(AJ,AG,AL,AI){var AH=0,AF=AJ.length,AK;for(AH=0;AH<AF;AH++){AK=AJ[AH];if(AK&&AK.day===AG&&AK.month===AL&&AK.year===AI){return AH;}}return -1;}function o(AF,AH,AG){var AI=new Date();return(AI.getFullYear()===AG)&&((AI.getMonth()+1)===AH)&&(AI.getDate()===AF);}function s(AM,AN){var AR=AM.dayView.getElementsByTagName("div"),AP=AM.selectedDates,AH=AP[AN],AQ=AM.browseYear,AG=AM.browseMonth,AJ=Z.getDaysOfMonth(AQ,AG),AI=Z.getPreMonth(AQ,AG),AL=Z.getDaysOfMonth(AI.y,AI.m),AF=H(AQ,AG,AM.firstDayOfWeek),AK=((AH.month===AG)?AH.day+AF-1:(AH.month>AG?AH.day+AF+AJ-1:AF-AL+AH.day-1)),AO=AR[AK];if(AO){b(AO,AM,false);}N(AP,AN,1);}function B(AF){var AG=AF.selectedDates;while(AG.length){s(AF,0);}}function AD(AH,AF){var AG=K(AH,AF),AI=AH.selectedDates;AI.push({day:AG.d,month:AG.m,year:AG.y});b(AF,AH,true);}function m(AH,AI){if(!AI||!AI.length){return null;}var AK=AH.selectedDates;for(var AG=0,AF=AI.length;AG<AF;AG++){var AJ=AI[AG],AL=p(AH,AJ);AK.push({day:AJ.d,month:AJ.m,year:AJ.y});if(AL){b(AL,AH,true);}}}function p(AN,AP){var AR=AN.dayView.getElementsByTagName("div"),AI=AR.length,AQ=AN.browseYear,AG=AN.browseMonth,AJ=Z.getPreMonth(AQ,AG),AK=Z.getDaysOfMonth(AJ.y,AJ.m),AV=Z.getNextMonth(AQ,AG),AH=Z.getDaysOfMonth(AQ,AG),AF=H(AQ,AG,AN.firstDayOfWeek);var AL=AF>0?{y:AJ.y,m:AJ.m,d:AR[0].innerHTML}:{y:AQ,m:AG,d:AR[0].innerHTML},AT=(AR.length-AH-AF)>0?{y:AV.y,m:AV.m,d:AR[AI-1].innerHTML}:{y:AQ,m:AG,d:AR[AI-1].innerHTML},AU=S(AL,AP),AM=S(AP,AT),AO=null;if(AU>=0&&AM>=0){var AS=0;if(AU<AF){AS=-1;}if(AM<(AR.length-AF-AH)){AS=1;}AO=((AS===0)?AP.d+AF-1:(AS===1?AP.d+AF+AH-1:AF-AK+AP.d-1));return AR[AO];}else{return null;}}function f(AN,AF){var AP=AN.selectedDates,AH=AP.length;if(!AH){return null;}var AG=AP[AH-1],AI=K(AN,AF),AS=S({y:AG.year,m:AG.month,d:AG.day},AI),AT=[],AK=AS>0,AQ=Math.abs(AS);for(var AM=0;AM<=AQ;AM++){var AL=new Date(AI.y,AI.m-1,AI.d);AL.setDate(AL.getDate()+(AK?-AM:AM));var AR=AL.getFullYear(),AJ=AL.getMonth()+1,AO=AL.getDate();if(AN.isDateDisabled(AO,AJ,AR,AN.min,AN.max)&&!AN.canSelectDisabledDate){continue;}AT.push({y:AR,m:AJ,d:AO});}return AT;}function S(AI,AH){var AF=new Date(AI.y,AI.m-1,AI.d),AG=new Date(AH.y,AH.m-1,AH.d);return(AG-AF)/1000/3600/24;}function K(AH,AF){var AI=AH.browseYear,AK=AH.browseMonth,AJ=parseInt(AF.innerHTML,10),AL=parseInt(AF.getAttribute("m"),10),AG=null;AG=(AL===0)?{y:AI,m:AK}:(AL===1?Z.getNextMonth(AI,AK):Z.getPreMonth(AI,AK));AG.d=AJ;return AG;}function g(AF){var AH=AF.selectedDates,AG=AH.length;return(AG===0)?null:AH[AG-1];}function b(AG,AH,AF){var AI=AH.selectedColor;j.toggleClass(AG,["selected",AH.selectedCssStyle],AF);AG.parentNode.style.backgroundColor=AF?AI:"";AG.style.backgroundColor=AF?AI:"";}function w(AF){return AF.selectedColor?('style="background-color:'+AF.selectedColor+';"'):"";}function P(AF){return(AF.tagName.toLowerCase()==="td")?AF.firstChild:AF;}function R(AG,AH){var AI=Z.getDateJson(AG),AF=Z.formatDateInfo(AI,mstrmojo.locales.datetime.DATEOUTPUTFORMAT);if(AH===x.TIMESTAMP){AF+=" "+Z.formatTimeInfo(this.timeVal,mstrmojo.locales.datetime.TIMEOUTPUTFORMAT);}return AF;}function q(AK,AH){var AF=this.advancedValues,AG=null;AF.set(AK,AH);switch(AF.baseDate){case C:AG=new Date();break;case M:break;case n:break;case Q:break;default:return ;}var AI=AF.monthsToAdjust;if(AI>0){AG.setMonth(AG.getMonth()+(AF.toAddMonths?AI:-AI));}var AJ=AF.daysToAdjust;if(AJ>0){AG.setDate(AG.getDate()+(AF.toAddDays?AJ:-AJ));}this.set("value",R.call(this,AG,this.dtp));}function U(){var AF=this.advancedValues,AG=["isDyn"];if(AF.baseDate===z){return null;}AG.push(AF.baseDate);AG.push(AF.toAddDays?AF.daysToAdjust:-AF.daysToAdjust);AG.push(AF.toAddMonths?AF.monthsToAdjust:-AF.monthsToAdjust);AG.push(0);AG.push(0);AG.push(0);AG.push(0);AG.push(this.value);AG.push(this.timeVal.hour);AG.push(this.timeVal.min);AG.push(this.timeVal.sec);return AG.join("::");}function AC(AF){if(AF.value!==undefined&&this.hasRendered){this.updateSelectedDate();}}function I(AH,AG){var AI=this,AF=function(AJ){return AJ[0].toUpperCase()+AJ.substring(1);};return{scriptClass:"mstrmojo.HBox",cssClass:"dateAdjustBox",alias:AH+"AdjustBox",children:[{scriptClass:"mstrmojo.ui.Pulldown",selectedIndex:AG>=0?0:1,onitemSelected:function(AK,AJ){q.call(AI,"toAdd"+AF(AH),AJ===0);},items:[{did:0,n:mstrmojo.desc(9424,"plus")},{did:1,n:mstrmojo.desc(9425,"minus")}]},{scriptClass:"mstrmojo.ui.editors.controls.Stepper",width:null,height:null,provider:new mstrmojo.NumStepperContentProvider({item:{interval:1,min:0,value:Math.abs(AG)},onTraverse:function(){q.call(AI,AH+"ToAdjust",this.curVal);}})},{scriptClass:"mstrmojo.Label",text:AH==="days"?mstrmojo.desc(707,"Days"):mstrmojo.desc(710,"Months")}]};}function Y(){this.buttonsNode.style.display=(this.wasAdvanced||this.changeValueOnOK||(this.showAdvanced&&this.isAdvanced)?"block":"none");this.advancedNode.style.display=this.showAdvanced?"block":"none";}mstrmojo.Calendar=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Calendar",cssPrefix:"",browseMonth:null,browseYear:null,yearRangStart:null,selectedDates:null,selectedColor:"",isMultiSelect:false,hilightToday:false,yearViewSize:5,cssTextDay:"",cssTextMonth:"",cssTextYear:"",cssTextWeekDay:"",cssTextHeader:"",cssTextMonthYearLabel:"",forceNonEmptySelection:false,showCurMonthDatesOnly:false,currentView:c,duration:600,timeDelimiter:":",dtp:x.DATE,value:"",firstDayOfWeek:1,changeValueOnOK:false,wasAdvanced:false,showAdvanced:false,isAdvanced:false,dynDateValue:null,canSelectDisabledDate:false,monthNames:function(AF){return AA().MONTHNAME_SHORT[AF];},dayNames:function(AF){return AA().dayShortNames[AF];},min:null,max:null,supportedViews:{day:true,month:true,year:true,hour:true,minute:true,second:true},sDirMatrix:{day:{month:"down",year:"down",hour:"up",minute:"up",second:"up"},month:{day:"up",year:"left",hour:"up",minute:"up",second:"up"},year:{day:"up",month:"right",hour:"up",minute:"up",second:"up"},hour:{day:"down",month:"down",year:"down",minute:"left",second:"left"},minute:{day:"down",month:"down",year:"down",hour:"right",second:"left"},second:{day:"down",month:"down",year:"down",hour:"right",minute:"right"}},markupString:'<div id="{@id}" class="{@cssPrefix} mstrmojo-Calendar {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseup,mouseover,mouseout><div class="mstrmojo-Calendar-header" style="{@cssTextHeader}"><div class="mstrmojo-Calendar-decrease"></div><div class="mstrmojo-Calendar-increase"></div><div class="mstrmojo-Calendar-title"><span class="mstrmojo-Calendar-monthLabel" style="{@cssTextMonthYearLabel}">{@browseMonth}</span><span class="mstrmojo-Calendar-yearLabel" style="{@cssTextMonthYearLabel}">{@browseYear}</span></div></div><div class="mstrmojo-Calendar-body" style="{@cssTextBody}"><div class="mstrmojo-Calendar-dayView"></div></div><div class="mstrmojo-Calendar-timePart"><span class="mstrmojo-Calendar-hourLabel">00</span><span class="mstrmojo-Calendar-timeDelimiter">{@timeDelimiter}</span><span class="mstrmojo-Calendar-minuteLabel">00</span><span class="mstrmojo-Calendar-timeDelimiter">{@timeDelimiter}</span><span class="mstrmojo-Calendar-secondLabel">00</span><span class="mstrmojo-Calendar-AMPMLabel">AM</span></div><div class="mstrmojo-Calendar-advanced"></div><div class="mstrmojo-Calendar-buttons cf"></div></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onbrowseMonthChange:function(){this.monthLabel.innerHTML=this.monthNames(this.browseMonth-1);},onbrowseYearChange:function(){this.yearLabel.innerHTML=this.browseYear;},ondtpChange:function(){this.timePart.style.display=(this.dtp===x.TIMESTAMP||this.dtp===x.TIME)?"block":"none";this.advancedNode.style.display=this.showAdvanced?"block":"none";},onvalueChange:function(){if(this.lastValue===undefined||this.value!==this.lastValue){this.updateSelectedDate();}},onchangeValueOnOKChange:Y,onisAdvancedChange:Y},markupSlots:{monthLabel:function(){return this.domNode.firstChild.lastChild.firstChild;},yearLabel:function(){return this.domNode.firstChild.lastChild.lastChild;},decreaseButton:function(){return this.domNode.firstChild.firstChild;},increaseButton:function(){return this.domNode.firstChild.childNodes[1];},bodyContainer:function(){return this.domNode.childNodes[1];},dayView:function(){return this.domNode.childNodes[1].firstChild;},monthView:function(){return this.domNode.childNodes[1].firstChild;},yearView:function(){return this.domNode.childNodes[1].firstChild;},hourView:function(){return this.domNode.childNodes[1].firstChild;},minuteView:function(){return this.domNode.childNodes[1].firstChild;},secondView:function(){return this.domNode.childNodes[1].firstChild;},timePart:function(){return this.domNode.childNodes[2];},hourLabel:function(){return this.domNode.childNodes[2].firstChild;},minuteLabel:function(){return this.domNode.childNodes[2].childNodes[2];},secondLabel:function(){return this.domNode.childNodes[2].childNodes[4];},AMPMLabel:function(){return this.domNode.childNodes[2].childNodes[5];},advancedNode:function(){return this.domNode.childNodes[3];},buttonsNode:function(){return this.domNode.childNodes[4];}},init:function y(AF){if(this._super){this._super(AF);}if(this.duration<1){this.duration=1;}if(!this.selectedDates){this.selectedDates=[];}this.timeVal={hour:0,min:0,sec:0};},ondynDateValueChange:function r(AF){if(AF.value!==undefined&&this.hasRendered){this.updateSelectedDate();this.buildChildren();}},onminChange:AC,onmaxChange:AC,buildChildren:function a(){var AL=this;if(this.showAdvanced){var AI=this.dynDateValue,AH=this.advancedValues||this.addDisposable(new mstrmojo.Model({})),AO=AI&&AI.split("::")||[],AK=AO[1]||z,AG=AO[2]||0,AP=AO[3]||0,AM=function AM(){if(AL.isAdvanced){AL.wasAdvanced=true;AL.changeValueOnOK=true;}AL.set("isAdvanced",!AL.isAdvanced);mstrmojo.css.toggleClass(AL.markupSlots.dayView.call(AL),["ddSelected"],AL.isAdvanced);q.call(AL,"baseDate",AL.isAdvanced?3:0);if(AL.parent&&AL.parent.nudge&&AL.isAdvanced){AL.parent.nudge();}};this.advancedValues=AH;AH.baseDate=parseInt(AK);AH.toAddDays=AG>=0;AH.daysToAdjust=Math.abs(AG);AH.toAddMonths=AP>=0;AH.monthsToAdjust=Math.abs(AP);this.isAdvanced=!!this.dynDateValue;if(this.domNode){mstrmojo.css.toggleClass(this.markupSlots.dayView.call(this),["ddSelected"],this.isAdvanced);}if(this.isAdvanced&&this.value){var AF=l(this.value),AJ=this.timeVal;if(AF&&AF.hour!==undefined){AJ.hour=AF.hour;AJ.min=AF.min;AJ.sec=AF.sec;}}q.call(AL,"baseDate",this.isAdvanced?3:0);this.destroyChildren(false);this.addChildren([{scriptClass:"mstrmojo.HBox",alias:"checkLabel",slot:"advancedNode",children:[{scriptClass:"mstrmojo.ui.Checkbox",alias:"checkbox",checked:!!AL.isAdvanced,oncheckedChange:AM},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13844,"Dynamic Date"),onclick:function AN(){this.parent.checkbox.onclick();}}]},{scriptClass:"mstrmojo.Box",alias:"advancedPanel",slot:"advancedNode",bindings:{visible:"this.parent.isAdvanced"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9423,"Today"),cssClass:"tdLabel"},I.call(this,"days",AG),I.call(this,"months",AP)]},]);}else{this.destroyChildren(false);}this.addChildren([mstrmojo.Button.newWebButton(mstrmojo.desc(2140,"Cancel"),function(){AL.parent.close();},false,{slot:"buttonsNode"}),mstrmojo.Button.newWebButton(mstrmojo.desc(1442,"OK"),function(){if(AL.changeValueOnOK||AL.isAdvanced||AL.wasAdvanced){AL.updateValue(true);}},true,{slot:"buttonsNode"})]);},preBuildRendering:function A(){this.buildChildren();return this._super();},getSelectedDatesAsString:function E(AG){var AF=[];k.forEach(this.selectedDates,function(AH){AF.push(Z.formatDateInfo(AH,AG||AA().DATEOUTPUTFORMAT));});return AF;},updateSelectedDate:function L(AJ){var AF=this.value,AG=this.timeVal,AI=this.selectedDates,AH,AK=function(AM,AL){AM.set("browseYear",AL.year);AM.set("browseMonth",AL.month);AM.updateTimePart();AM.updateView(AM.currentView);if(!AM.changeValueOnOK&&AM.hasRendered&&AM.closeOnValueChange!=true){AM.updateValue();}};if(this.wasAdvanced){this.wasAdvanced=false;this.changeValueOnOK=false;}if(AF){AH=l(AF);if(AH&&AH.hour!==undefined){AG.hour=AH.hour;AG.min=AH.min;AG.sec=AH.sec;}}if((AH&&!this.isMultiSelect)||AJ){B(this);}if(AI.length===0){if(!AH){if(this.parent.opener&&this.parent.opener.defaultDate){AH=l(this.parent.opener.defaultDate);}else{AH=Z.getDateJson(new Date());}}if(!this.canSelectDisabledDate&&this.isDateDisabled(AH.day,AH.month,AH.year,this.min,this.max)){if(this.min&&Z.compareDate(AH,this.min)<0){AH=l(this.min);}else{if(this.max&&Z.compareDate(AH,this.max)>0){AH=l(this.max);}}}AI.push(AH);AK(this,AH);}else{AH=AI[0];if(!this.value){AK(this,AH);}}},updateValue:function d(AF){var AH=g(this),AG="";if(AH){AG=Z.formatDateInfo(AH,AA().DATEOUTPUTFORMAT);if(this.dtp!==x.DATE){AG+=" "+Z.formatTimeInfo(this.timeVal,AA().TIMEOUTPUTFORMAT);}}this.lastValue=AG;this.set("value",AG);if(this.showAdvanced){this.set("dynDateValue",AF?U.call(this):null);}if(this.onValueUpdate){this.onValueUpdate();}},updateTimePart:function v(){var AG=this.timeVal,AF=AG.hour||0,AH=(AF%12===0)?12:(AF%12);this.hourLabel.innerHTML=AH;this.minuteLabel.innerHTML=Z.formatInteger(AG.min||0,2);this.secondLabel.innerHTML=Z.formatInteger(AG.sec||0,2);this.AMPMLabel.innerHTML=AF<12?" "+AA().AM_NAME:" "+AA().PM_NAME;},premousedown:function(AF){var AH=AF.e,AG=i.eventTarget(AF.hWin,AH);if(AG===this.decreaseButton||AG===this.increaseButton){if(i.isFF){i.stopPropogation(window,AH);}return true;}else{return this.processEvent(AG,AH);}},premouseup:function(AF){var AH=AF.e;if(AH.ctrlKey||AH.shiftKey){i.clearBrowserHighlights();}var AG=i.eventTarget(AF.hWin,AH);if(AG===this.decreaseButton&&!AG.disabled){this.decrease();return true;}if(AG===this.increaseButton&&!AG.disabled){this.increase();return true;}},processEvent:function(AQ,AX){var AI=this.currentView,AJ=this.selectedDates,AN,AS,AY,AF,AP;if(AQ===this.monthLabel){if(AI!==AB){this.switchViewTo(AB);}return true;}if(AQ===this.yearLabel){if(AI!==V){this.adjustYearStart();this.switchViewTo(V);return true;}}if(AQ===this.hourLabel){if(AI!==X){this.switchViewTo(X);}return true;}if(AQ===this.minuteLabel){if(AI!==AE){this.switchViewTo(AE);}return true;}if(AQ===this.secondLabel){if(AI!==u){this.switchViewTo(u);}return true;}if(AQ===this.AMPMLabel){if(AI!==X){this.switchViewTo(X);}return true;}if(AI===X){var AL=AQ.getAttribute("h");AP=parseInt(AQ.innerHTML,10);if(!isNaN(AL)&&!isNaN(AP)){AL=parseInt(AL,10);this.timeVal.hour=AP%12+AL*12;this.updateTimePart();this.switchViewTo(c);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(AI===AE){AP=parseInt(AQ.innerHTML,10);if(!isNaN(AP)){this.timeVal.min=AP;this.updateTimePart();this.switchViewTo(c);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(AI===u){AP=parseInt(AQ.innerHTML,10);if(!isNaN(AP)){this.timeVal.sec=AP;this.updateTimePart();this.switchViewTo(c);if(!this.changeValueOnOK){this.updateValue();}}return true;}if(AI===c){var AW=this.browseYear,AG=this.browseMonth,AH;AQ=P(AQ);AY=parseInt(AQ.innerHTML,10);AF=parseInt(AQ.getAttribute("m"),10);if(!isNaN(AY)&&!isNaN(AF)){AH=(AF===0)?{y:AW,m:AG}:(AF===1?Z.getNextMonth(AW,AG):Z.getPreMonth(AW,AG));if((!this.canSelectDisabledDate&&this.isDateDisabled(AY,AH.m,AH.y,this.min,this.max))||AX.button===2){return true;}if(this.isAdvanced){return true;}var AT=W(AJ,AY,AG,AW),AR=AJ.length>1,AO=this.forceNonEmptySelection,AU=this.isMultiSelect,AM=AU&&AX.ctrlKey,AV=AU&&AX.shiftKey,AK=null;if(AV){AK=f(this,AQ);B(this);m(this,AK);}else{if(AM){if(AT===-1){AD(this,AQ);}else{if(!AO||AR){s(this,AT);}}}else{B(this);if(AR||AT===-1||AO){AD(this,AQ);}}}if(this.onselect||J.hasSubs(this.id,"select")){this.raiseEvent({name:"select",value:this.selectedDates});}if(AF===1){this.increase();}else{if(AF===-1){this.decrease();}}if(!this.changeValueOnOK){this.updateValue();}else{if(this.showAdvanced){this.checkLabel.checkbox.set("checked",false);q.call(this,"baseDate",0);}}}return true;}if(AI===AB){AQ=P(AQ);AS=parseInt(AQ.getAttribute("m"),10);if(!isNaN(AS)){this.set("browseMonth",AS+1);this.switchViewTo(c);}return true;}if(AI===V){AQ=P(AQ);AN=parseInt(AQ.innerHTML,10);if(!isNaN(AN)){this.set("browseYear",AN);this.switchViewTo(c);}return true;}return true;},decrease:function(){var AH=this.currentView,AK=AH,AJ=this.browseYear,AF=this.browseMonth,AG=this.yearRangStart,AI;switch(AH){case c:AI=Z.getPreMonth(AJ,AF);this.set("browseMonth",AI.m);this.set("browseYear",AI.y);break;case AB:this.set("browseYear",AJ-1);break;case V:this.yearRangStart=AG-this.yearViewSize*this.yearViewSize;break;case X:AK=u;break;case AE:AK=X;break;case u:AK=AE;break;}this.switchViewTo(AK,"right");},increase:function(){var AH=this.currentView,AK=AH,AJ=this.browseYear,AF=this.browseMonth,AG=this.yearRangStart,AI;switch(AH){case c:AI=Z.getNextMonth(AJ,AF);this.set("browseMonth",AI.m);this.set("browseYear",AI.y);break;case AB:this.set("browseYear",AJ+1);break;case V:this.yearRangStart=AG+this.yearViewSize*this.yearViewSize;break;case X:AK=AE;break;case AE:AK=u;break;case u:AK=X;break;}this.switchViewTo(AK,"left");},updateView:function(AF){var AG=this[AF+"ViewHTML"]();this[AF+"View"].innerHTML=AG;},adjustYearStart:function(){this.yearRangStart=this.browseYear-10-this.browseYear%5;},switchViewTo:function(AG,AI){var AM="mstrmojo-Calendar-"+AG+"View",AL=document.createElement("div"),AF=this[this.currentView+"View"],AJ=AG+"ViewHTML",AK=this[this.currentView+"Label"],AH=this[AG+"Label"];if(!this.supportedViews[AG]){return ;}if(!AI){AI=this.sDirMatrix[this.currentView][AG];}AL.className=AM;AL.innerHTML=this[AJ]();this.currentView=AG;this[AG+"View"]=AL;mstrmojo.css.toggleClass(AL,["ddSelected"],this.isAdvanced);this._slideIntoView(AF,AL,AI);},_slideIntoView:function(AJ,AN,AH){var AF=this.bodyContainer,AL=(AH==="left"||AH==="right")?AJ.offsetWidth:AJ.offsetHeight,AG=(AH==="left"||AH==="right")?"left":"top",AM=(AH==="left"||AH==="up")?AL:-AL,AK=new mstrmojo.fx.AnimateProp({props:{},duration:this.duration,interval:this.duration/10,target:AJ,onEnd:function(){AF.removeChild(AJ);}}),AI=new mstrmojo.fx.AnimateProp({props:{},duration:this.duration,interval:this.duration/10,target:AN});AN.style[AG]=AM+"px";AF.appendChild(AN);AK.props[AG]={start:0,stop:-AM,suffix:"px"};AI.props[AG]={start:AM,stop:0,suffix:"px"};AK.play();AI.play();},dayViewHTML:function(){var AK=this.browseYear,AN=this.browseMonth,AS=Z.getDaysOfMonth(AK,AN),AW=Z.getPreMonth(AK,AN),AH=Z.getDaysOfMonth(AW.y,AW.m),AG=Z.getNextMonth(AK,AN),AO=H(AK,AN,this.firstDayOfWeek),AL=[],AI=w(this),AY=0,AF=this.selectedDates,AQ=this.min,AU=this.max,AZ,AR,AV,AT,AX=this.showCurMonthDatesOnly?'style="visibility:hidden;"':"";T(this,{d:AH,m:AW.m,y:AW.y},{d:1,m:AG.m,y:AG.y});AL.push(O(this.cssTextDay));AL.push(this._dayViewTHead());AL.push("<tr>");for(AV=0;AV<AO;AV++){AZ=AH-AO+AV+1;AR=this.isDateDisabled(AZ,AW.m,AW.y,AQ,AU)?"disabled":"";AL.push("<td "+AX+'><div class="mstrmojo-Calendar-day-pre '+AR+'" m="-1">');AL.push(AZ);AL.push("</div></td>");AY++;}for(AV=0;AV<AS;AV++){AZ=AV+1;AR=this.isDateDisabled(AZ,AN,AK,AQ,AU)?" disabled":"";var AJ=o(AZ,AN,AK),AM=AJ?" today":"",AP=W(AF,AZ,AN,AK)!==-1;AM=(this.hilightToday&&AJ)?" hilightToday":AM;AL.push("<td "+(AJ?('class="'+AM+'" '):" ")+(AP?AI:"")+'><div class="mstrmojo-Calendar-day-cur'+(AP?(" selected "):"")+AR+'" m="0"'+(AP?AI:"")+">");AL.push(AV+1);AL.push("</div></td>");if((++AY)%7===0){AL.push("</tr><tr>");}}for(AT=AY;AT<42;AT++){AZ=AY-AS-AO+1;AR=this.isDateDisabled(AZ,AG.m,AG.y,AQ,AU)?"disabled":"";AL.push("<td "+AX+'><div class="mstrmojo-Calendar-day-next '+AR+'" m="1">');AL.push(AZ);AL.push("</div></td>");if((++AY)%7===0&&AY!==42){AL.push("</tr><tr>");}}AL.push("</tr>");AL.push(t);return AL.join("");},_dayViewTHead:function(){var AI=[],AJ='<thead><tr class="mstrmojo-Calendar-thead" style="'+this.cssTextWeekDay+';">',AH="</tr></thead>",AG=this.firstDayOfWeek-1,AK=this.dayNames,AF;AI.push(AJ);for(AF=AG;AF<AG+7;AF++){AI.push("<td>");AI.push(AK(AF%7));AI.push("</td>");}AI.push(AH);return AI.join("");},monthViewHTML:function(){var AG=[],AI=this.browseMonth-1,AH=this.browseYear,AF;T(this,{d:31,m:12,y:AH-1},{d:1,m:1,y:AH+1});AG.push(O(this.cssTextMonth));AG.push("<tr>");for(AF=0;AF<12;AF++){AG.push("<td "+((AF===AI)?w(this):"")+'><div class="mstrmojo-Calendar-month'+((AF===AI)?" selected":"")+'" m="');AG.push(String(AF));AG.push('">');AG.push(this.monthNames(AF));AG.push("</div></td>");if(AF%3===2){AG.push("</tr><tr>");}}AG.pop();AG.push("</tr>");AG.push(t);return AG.join("");},yearViewHTML:function(){var AK=this.yearRangStart,AG=[],AI=this.browseYear,AJ,AF,AH=this.yearViewSize;T(this,{d:31,m:12,y:AK-1},{d:1,m:1,y:AK+AH*AH});AG.push(O(this.cssTextYear));AG.push("<tr>");for(AF=0;AF<AH*AH;AF++){AJ=AK+AF;AG.push("<td "+((AI===AJ)?w(this):"")+'><div class="mstrmojo-Calendar-year'+((AI===AJ)?" selected":"")+'">');AG.push(AJ);AG.push("</div></td>");if(AF%AH===(AH-1)){AG.push("</tr><tr>");}}AG.pop();AG.push("</tr>");AG.push(t);return AG.join("");},hourViewHTML:function(){var AH=[],AG=this.timeVal.hour,AF;AH.push(G);AH.push('<tr><td colspan="6"><div class="mstrmojo-Calendar-hourTitle">');AH.push(AA().AM_NAME);AH.push("</div></td></tr>");for(AF=0;AF<12;AF++){AH.push('<td><div class="mstrmojo-Calendar-hour'+((AF===AG)?" selected":"")+'" h="0">');AH.push((AF===0)?12:AF);AH.push("</div></td>");if(AF===5){AH.push("</tr><tr>");}}AH.push('</tr><tr><td colspan="6"><div class="mstrmojo-Calendar-hourTitle">');AH.push(AA().PM_NAME);AH.push("</div></td></tr>");for(AF=0;AF<12;AF++){AH.push('<td><div class="mstrmojo-Calendar-hour'+(((12+AF)===AG)?" selected":"")+'" h="1">');AH.push((AF===0)?12:AF);AH.push("</div></td>");if(AF===5){AH.push("</tr><tr>");}}AH.push("</tr>");AH.push(t);return AH.join("");},minuteViewHTML:function(){return this._minuteSecondViewHTML(this.timeVal.min,"mstrmojo-Calendar-minute");},secondViewHTML:function(){return this._minuteSecondViewHTML(this.timeVal.sec,"mstrmojo-Calendar-second");},_minuteSecondViewHTML:function(AH,AI){var AG=[],AF;AG.push(G);AG.push("<tr>");for(AF=0;AF<60;AF++){AG.push('<td><div class="');AG.push(AI);AG.push((AF===AH)?' selected">':'">');AG.push(AF);AG.push("</div></td>");if(AF%10===9){AG.push("</tr><tr>");}}AG.pop();AG.push("</tr>");AG.push(t);return AG.join("");},isDateDisabled:function(AF,AH,AG){return !F(AF,AH,AG,this.min,this.max);},unrender:function D(AF){delete this.lastValue;this._super(AF);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.vi._MonitorsAppState","mstrmojo.vi.ui.tabs.Tab","mstrmojo.dom","mstrmojo.css");var G=mstrmojo.dom,R=mstrmojo.array,d=mstrmojo.css,c="animate",W="31px";function X(){var i=window.Modernizr,h="transition";if(i.testProp(h)){return G.transEndEvtNames[i.prefixed(h)];}return null;}function D(h){return function(){this.menuNode.style.display=h?"block":"none";};}function I(h){return Math.min(h.offsetWidth-h.firstChild.offsetWidth,0);}function S(h){return h.isAlignRight?"right":"left";}function e(h,i){return parseInt(h.style[S(i)],10)||0;}function O(){var i=this.tabContainerNode,j=false,h=false;if(I(i)<0){var l=G.position(i),k=G.position(i.firstChild);j=(k.x<l.x);h=(k.x+k.w>l.x+l.w+0.1);}this.downBtnNode.style.display=j?"block":"none";this.upBtnNode.style.display=h?"block":"none";}function T(h,i){h=(h||[]);if(!h.filter){return R.filter(h,i);}return h.filter(i);}function Q(h,i){h=(h||[]);if(!h.map){return R.map(h,i);}return h.map(i);}function J(w,j){if(this.isStatic){return ;}var u=this.tabContainerNode,t=T(this.children,function(x){return x.isSelected;})[0],q=t&&t.domNode;if(!u||!q){return ;}var k=G.position(u),o=u.firstChild,v=I(u),l=e(o,this),i=Math.max(l,v);if(w){if(v<0){var n=G.position(q),p=n.x-k.x,s=n.x+n.w-(k.x+k.w),r=this.isAlignRight,h=function(x){i=r?i+x:i-x;};if(p<0){h(p);}else{if(s>0){h(s);}}}}if(i!==l){var m=X();if(j&&m){d.addClass(o,c);G.attachOneTimeEvent(o,m,function(){d.removeClass(o,c);});}o.style[S(this)]=Math.max(v,Math.min(i,0))+"px";}O.call(this);}function K(h){return h.hasOwnProperty("index");}function H(){var h=this.children,i=0;(h||[]).every(function(k,j){if(!K(k)){return false;}i++;k.index=j;return true;});(h||[]).every(function(j){if(!K(j)){return false;}j.total=i;return true;});}function B(l,i){var p=l.ENUM_CORNERS,m=[p.TOP_RIGHT,p.BOTTOM_RIGHT],n=this.parent;if(n.position!=="bottom"){m.reverse();}l.setAlignment(m[0],m[1]);var k=G.position(n.domNode),h=G.position(i),j=n.menuNode;var o=j.style;o.top=(h.y-k.y)+"px";o.left=(h.x-k.x)+"px";l.addPopupHandlers(n.id,D(true),D(false));l.hostId=n.id;l.hostElement=j;l.isHostedWithin=false;n.openPopup(l.newInstance());}function Y(h){h.raiseEvent({name:"TabsChange"});}mstrmojo.vi.ui.tabs.TabStrip=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo.ui.menus._HasMenuPopup,mstrmojo.vi._MonitorsAppState],{scriptClass:"mstrmojo.vi.ui.tabs.TabStrip",markupString:'<div id="{@id}" class="mstrmojo-VITabStrip {@cssClass}" style="{@cssText}" ><div class="mstrmojo-VITabStrip-tabs"><div style="display:table"><div style="display:table-row"></div></div></div><div class="mstrmojo-VITabStrip-addBtn" mstrAttach:click><div></div></div><div class="mstrmojo-VITabStrip-downBtn" mstrAttach:click,mousedown><div></div></div><div class="mstrmojo-VITabStrip-upBtn" mstrAttach:click,mousedown><div></div></div><div class="mstrmojo-VITabStrip-menuHost"></div><div class="mstrmojo-VIDND-mask"></div></div>',markupSlots:{tabContainerNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode.firstChild.firstChild.firstChild;},addBtnNode:function(){return this.domNode.childNodes[1];},addBtnImgNode:function(){return this.domNode.childNodes[1].firstChild;},downBtnNode:function(){return this.domNode.childNodes[2];},upBtnNode:function(){return this.domNode.childNodes[3];},menuNode:function(){return this.domNode.childNodes[4];},maskNode:function(){return this.domNode.lastChild;}},isStatic:false,isAlignRight:true,tabContainerNode:null,downBtnNode:null,upBtnNode:null,menuNode:null,position:"bottom",layoutConfig:{w:{tabContainerNode:"100%",addBtnNode:W},xt:true},onAppStateChange:function V(i){var h=mstrmojo.vi.VisualInsightApp.APP_STATES.PRESENTATION;if(i.value===h||i.valueWas===h){this.layoutConfig.w.addBtnNode=mstrApp.appState===h?"0px":W;this.doLayout();}},setStatic:function U(h,i){this.isStatic=h;if(!h){J.call(this,true,i);}},setTabs:function C(j,h){this.removeChildren();var k=this,i=j.length;this.addChildren(Q(j,function(n,l){var m=n.k;return k.getTabCfg(j,n,{scriptClass:"mstrmojo.vi.ui.tabs.Tab",index:l,total:i,draggable:!!i,dropZone:!!i,k:m,isSelected:m===h,showTabMenu:B,tabMoved:function(p){var o=this.index;this.parent.moveTab(o,o+(p?-1:1),o);}});}));J.call(this,true);Y(this);},getTabs:function N(){return T(this.children,K);},getTabCfg:function F(i,j,h){return h;},deleteTab:function P(h){var n=this.id,m=this.children[h],l=X(),k=function(){var o=mstrmojo.all[n];o.removeChildren(m);m.destroy();H.call(o);O.call(o);Y(o);};if(l){var j=m.domNode.firstChild,i=j.style;i.width=j.offsetWidth+"px";window.setTimeout(function(){d.addClass(j,c);G.attachOneTimeEvent(j,l,k);i.width=0;},0);}else{k();}},buildRendering:function E(){this._super();d.toggleClass(this.domNode,"alignLeft",!this.isAlignRight);},postBuildRendering:function Z(){var h=this._super();J.call(this,true);return h;},doLayout:function A(){this._super();J.call(this);},setSelectedTab:function b(h){(this.children||[]).forEach(function(i){i.set("isSelected",i.k===h);});Y(this);},getSelectedTab:function M(){var k=null,j=this.children||[],h;for(h=0;h<j.length;h++){if(j[h].isSelected){k=j[h];break;}}return k;},onclick:function g(h){if(h.getTarget()===this.addBtnImgNode){this.addTab();}},addTab:mstrmojo.emptyFn,onmousedown:function f(s){var o=s.getTarget().parentNode,t=(o===this.downBtnNode);if(t||o===this.upBtnNode){var r=this.tabContainerNode,n=r.firstChild,i=I(r),k=e(n,this),m=this.isAlignRight?(t?-10:10):(t?10:-10),j=this.id,p=this,l;if(mstrApp.setInteractive){mstrApp.setInteractive(false);}d.addClass(o,"active");var q=function(){window.clearInterval(l);d.removeClass(o,"active");O.call(mstrmojo.all[j]);if(mstrApp.setInteractive){mstrApp.setInteractive(true);}};G.attachOneTimeEvent(document.body,"mouseup",q);l=window.setInterval(function(){k=Math.min(Math.max(i,k+m),0);n.style[S(p)]=k+"px";if(k===i||k===0){q();}},33);}},moveTab:function L(h,p,n,m){var i=this.children,q=i.splice(h,1)[0];i.splice(p,0,q);H.call(this);var j=this.containerNode,k=j.childNodes,o=j.removeChild(k[h]),l=k[p];if(l){j.insertBefore(o,l);}else{j.appendChild(o);}if(q.isSelected){J.call(this,true,true);}if(!m&&n!==undefined&&n!==p){this.commitTabMove(n,p);Y(this);}},commitTabMove:function a(h,i){throw new Error(this.scriptClass+" must implement commitTabMove.");}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.AdvancedColorPicker","mstrmojo._IsPopup","mstrmojo._CanAutoClose","mstrmojo.hash","mstrmojo.css");var A=mstrmojo.hash.copy;mstrmojo.ui.editors.controls.AdvancedColorPickerPopup=mstrmojo.declare(mstrmojo.ui.editors.controls.AdvancedColorPicker,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.ui.editors.controls.AdvancedColorPickerPopup",locksHover:true,init:function E(F){this._super(F);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-AdvColorPickerPopup");},showPickerForCurrentMode:function D(){this._super();var G=this,F=function F(){if(G.visible){G.adjustCornersForPopupOverflow();}};if(this.pickerMode===2){this.colorStyle.markupMethods=A({onselectedIndexChange:F},A(this.colorStyle.markupMethods));}F();},onOpen:function C(){var F=this.parent;this.set("color",F?F.selectedValue:this.color);this.renderContent();this._super();},colorCanceled:function B(){this.close();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.array","mstrmojo.Button","mstrmojo.css","mstrmojo.hash","mstrmojo.Label","mstrmojo.Box","mstrmojo.ui.Pulldown","mstrmojo.ui.SearchablePulldown","mstrmojo.func");mstrmojo.requiresDescs(221,1442,2751,2891,11949,11950,11951,11942,13397,13398,14640,14648);var R=mstrmojo.array,U=mstrmojo.css,N=mstrmojo.hash,O=mstrmojo.func,M=mstrmojo.Button.newWebButton,P=mstrmojo.dom,T="mstrmojo-link-validation",Q="mstrmojo-link-vt",F=function F(V){if(V.old){this.removedLinks.push(V);}this.links.removeChildren(V);},S=function S(){var s=this.dsMap,p=this.docModel,Y=p.datasets,u=function u(i,k,a){var j={n:a||"",did:k||null,parent:i||null,lv:(i?i.lv+1:-1),children:[]};if(i){i.children.push(j);}return j;},e=u(),X,W,V,g,Z,q,l,t,r,o,n,m,c,b,d,h,f;N.forEach(Y,function(a){if(p.isMDXDataset(a)){Z=a.tables;for(o=0,b=Z.length;o<b;o++){q=Z[o];X=u(e,q.did,q.n);X.isMDX=true;for(n=0,d=q.dimensions.length;n<d;n++){l=q.dimensions[n];W=u(X,l.did,l.n);for(m=0,h=l.hierarchies.length;m<h;m++){t=l.hierarchies[m];V=u(W,t.did,t.n);for(c=0,f=t.att.length;c<f;c++){r=t.att[c];g=u(V,r.did,r.n);g.att=r;s[q.did+":"+r.did]=g;}}}}}else{X=u(e,a.did,a.name);X.isMDX=false;R.forEach(a.att,function(i){g=u(X,i.did,i.n);g.att=i;s[a.did+":"+i.did]=g;});}});return e;},B=function B(b,c){b=R.ensureArray(b);var a=this,Z=this.attribute.did,d=this.docModel,X=d.findDatasetIdFromUnit(Z),W="\u001F",V={success:function(f){var h=f.als,e=(d.als&&d.als.links)||{},g=a.dsTree;R.forEach(b,function(q,l){var r={},j={},k=[],m={},p=Z+" "+q,n=R.filter(h[l].ats,function(i){return !d.isInDataset(X,i.at,["att"]);}),o=function o(i,s){if(!m[i]){m[i]={};}if(!m[i][s]){m[i][s]=true;}};R.forEach(n,function(t){var i=t.at,s=t.fms;r[i]=true;if(s){R.forEach(s,function(u){o(i,u.fm);});}});N.keyarray(e).forEach(function(i){if(i===p){R.forEach(e[i],function(s){s=s.split(" ");r[s[0]]=true;o(s[0],s[1]);});}});if(N.keyarray(r).length>0){R.forEach(g.children,function(s){var i=function(t){var u;if(!t.att){return ;}t=t.att;if(r[t.did]){if(!j[t.n]){j[t.n]={};}if(!j[t.n][t.did]){j[t.n][t.did]=[];}j[t.n][t.did].push(s.n);u=N.copy(t,u);u.dsId=s.did;k.push(u);}};if(s.isMDX){R.forEach(s.children,function(t){R.forEach(t.children,function(u){R.forEach(u.children,i);});});}else{R.forEach(s.children,i);}});}a.tgtAttrs[q]=k;a.tgtForms[q]=m;a.namesHash[q]=j;});}},Y={taskId:"validateDocumentLinks",msgID:d.mid,action:1,attributeList:Z,attributeFormList:b.join(W)};mstrApp.serverRequest(Y,O.wrapMethods(V,c));},E=function(Y,a,W,Z){Y.richTooltip=null;if(!Y.isSearching){var X=a&&a.scrollWidth>a.clientWidth;W=X?mstrmojo.desc(14648,"## from ###").replace("##",W):"";if(Z){if(!X){W=mstrmojo.desc(14640,"From ###");}W=W.replace("###",Z);}var V=mstrmojo.dom.position(a);Y.richTooltip={cssClass:"vi-regular vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,content:W,top:V.y-6,left:V.x};}},D=function D(c){var d=this,f=function(m){var k=m.fs,n=m.de,l=[];(k||[]).forEach(function(o){if(o.obf&&(!n||o.idf)){l.push({n:o.fnm,v:o.fid,idf:o.idf});}});return l;},g=f(this.attribute),Z=function(n,l){var k=f(n);var o=(d.tgtForms[l]&&d.tgtForms[l][n.did])||{};var m=[];R.forEach(k,function(p){if(o[p.v]){m.push(p);}});return m;},b=function b(l){var k=[];R.forEach(d.tgtAttrs[l],function(m){if(Z(m,l||d.idFormId).length>0){var o=d.namesHash[l],n=m.n;if(o[m.n]&&N.keyarray(o[m.n]).length>1){n=n+" ("+o[m.n][m.did].join(",")+")";}k.push({n:m.n,v:m,tt:n});}});if(k.length===0){k.push({n:mstrmojo.desc(13398,"No valid object"),v:{did:null},cls:"nvo",t:1});}return k;},h=b((c&&c.srcFormId)||this.idFormId),i=function(k,l){return R.find(k.fs,l?"fid":"idf",l||true);},j=function(l){var k=-1;h.forEach(function(n,m){if(n.v.did===l){k=m;}});return k;},W=function(l){var k=h[l];if(!k){return mstrmojo.desc(13397,"Select an attribute");}else{return k.n;}},X=function(l){var m=l.items,k=l.selectedIndex;if(k>=0){if(m[k].idf){return ;}}m.forEach(function(o,n){if(o.idf){l.set("selectedIndex",n);}});};this.links.addChildren({scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-linkRow",slot:"containerNode",old:!!c,oldMeta:c,getMeta:function(){var k=this.linkFromForm,m=this.linkToAtt,l=this.linkToForm;return{srcAttrId:d.attribute.did,srcFormId:k.items[k.selectedIndex].v,tgtAttrId:m.items[m.selectedIndex]&&m.items[m.selectedIndex].v.did,tgtFormId:l.items[l.selectedIndex]&&l.items[l.selectedIndex].v};},children:[{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-attName",text:d.attribute.n,useRichTooltip:true,updateTooltipConfig:function(o){var n=o.target,k=this.text,l=d.datasetId,m=l?d.docModel.datasets[l].name:"";E(this,n,k,m);}},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-linkFormFromPD",alias:"linkFromForm",value:"ID",isHostedWithin:true,items:g,selectedIndex:i(d.attribute,c&&c.srcFormId),onitemSelected:function(l){var k=this,m=function(){var o=k.parent.linkToAtt;h=b(l.v);o.set("items",h);o.set("selectedIndex",-1);o.set("text",mstrmojo.desc(13397,"Select an attribute"));U.addClass(o.selectedNode,"nvo");},n={success:m};if(this.hasRendered){if(this.parent.old){this.parent.oldUpdated=true;}if(!l.idf){X(this.parent.linkToForm);if(!d.tgtForms[l.v]){B.call(d,l.v,n);return ;}}m();}}},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-linksToLabel",text:mstrmojo.desc(11949,"links to")},{scriptClass:"mstrmojo.ui.SearchablePulldown",cssClass:"mstrmojo-linkToAtt",alias:"linkToAtt",useRichTooltip:true,isHostedWithin:false,items:h,text:W(j(c&&c.tgtAttrId)),selectedIndex:j(c&&c.tgtAttrId),allowCustomText:true,allowEmptyText:true,updateTooltipConfig:function(p){var o=p.target,k=o.getAttribute("tt"),m=this.getSelectedItem(),l=m?m.v.dsId:null,n=l?d.docModel.datasets[l].name:"";if(this.selectedNode===o&&m){k=m.tt;}E(this,o,k,n);},onitemSelected:function(o){if(!o||o.v.did===null){return ;}var n=this.parent.linkToForm,m=this.parent.linkFromForm,l=Z(o.v,m.items[m.selectedIndex].v),p=function p(q,s){var r=R.find(q,s?"v":"idf",s||true);if(r===-1&&q.length>0){r=0;}return r;},k;R.forEach(l,function(q){if(q.idf){k=false;return false;}});if(k){K.call(d,true);}n.set("items",l);n.set("selectedIndex",p(l,!this.hasRendered&&c&&c.tgtFormId));if(this.hasRendered&&this.parent.old){this.parent.oldUpdated=true;}J.call(d);},onPopupWidgetOpened:function a(){if(this.selectedIndex===-1){this.set("text","");}U.removeClass(this.selectedNode,"nvo");},onPopupWidgetClosed:function e(){mstrmojo.ui.SearchablePulldown.prototype.onPopupWidgetClosed.call(this);if(this.selectedIndex===-1&&this.text===""){this.set("text",mstrmojo.desc(13397,"Select an attribute"));U.addClass(this.selectedNode,"nvo");}else{U.removeClass(this.selectedNode,"nvo");}this.hideTooltip();R.forEach(d.collapseTargets,function(k){k.className="arrow-b";U.removeClass(k.parentNode.parentNode,"collapse");});R.forEach(d.collapseTreeNodes,function(k){delete k.collapse;});R.forEach(this.list.itemsContainerNode.childNodes,function(k){k.style.display="";});},postBuildRendering:function V(){mstrmojo.ui.SearchablePulldown.prototype.postBuildRendering.call(this);if(this.selectedIndex===-1){U.addClass(this.selectedNode,"nvo");}this.list.popupConfig.clear();},getPopupListConfig:function Y(){return{scriptClass:"mstrmojo.ui.PopupList",alias:"list",width:"170px",tooltipOrientation:"vertical",selectionPolicy:"reselect",useRichTooltip:true,locksHover:true,listHooks:{select:function k(q,r,p){this.parent.set("selectedIndex",p);this.close();}},onclick:function l(x){try{var q=x.getTarget(),y=this.getItemFromTarget(q),u=P.findAncestorByAttr(q,"idx",true,this.domNode);if(y){x.cancel();if(q.className==="arrow-b"||q.className==="arrow-r"){var t=this.items,p=this.itemsContainerNode.childNodes,s=function s(AA){var z;while(AA){z=AA.className||"";if(z.indexOf("lv")===0){return window.parseInt(z.substring(2),10);}AA=AA.firstChild;}return null;},w=function w(z,AC){var AB=d.dsMap,AA=AB[z.dsId+":"+z.did];while(AA){if(AA.lv===AC){return AA;}AA=AA.parent;}return null;},v=function v(){var AI=(q.className==="arrow-b"),AC=q.parentNode.parentNode,z=s(AC),AD=y._renderIdx,AA=w(y.v,z),AG=t.length,AF,AB,AE,AH,AK,AJ;q.className=AI?"arrow-r":"arrow-b";if(!d.collapseTargets){d.collapseTargets=[];}d.collapseTargets.push(q);U.toggleClass(AC,"collapse",AI);AA.collapse=AI;if(!d.collapseTreeNodes){d.collapseTreeNodes=[];}d.collapseTreeNodes.push(AA);for(AF=AD+1;AF<AG;AF++){AB=p[AF];AE=s(AB);if(AE<=z){break;}AH=w(t[AF].v,AE);AK=AH.parent;AJ=true;while(AK){if(AK.collapse){AJ=false;break;}AK=AK.parent;}AB.style.display=(AJ?"":"none");}};v();}else{if(u&&u.node.className.indexOf("item")!==-1){this.doItemSelect(y,x||{});}}}}catch(r){mstrApp.onerror(r);}},getItemProps:function m(r,p){var q=mstrmojo._IsList.getItemProps.call(this,r,p);var s=r.cls;if(s){q.addCls(s);}return q;},getItemMarkup:function o(z,y){if(z.v.did===null){return'<{@tag} class="item {@cls}" did="'+z.v.did+'" idx="{@idx}" style="{@style}">{@n}</{@tag}>';}var AA=[],w=z.v.did,r=z.v.dsId,s=r?d.docModel.datasets[r]:null,q=s?s.name:"",x=y>0&&this.items[y-1].v,u=d.dsMap,t=u[z.v.dsId+":"+w],p=u[(x&&(x.dsId+":"+x.did))];AA.push("</div>");while(t){if(t.lv===-1){break;}if(t.att){var v=t.att.da?"derived-attr":"attr";AA.push('<div class="lv'+t.lv+' dim item {@cls}" tt="'+z.tt+'" did="'+w+'" dsName="'+q+'" idx="{@idx}" style="{@style}"><div><div class="'+v+'"></div></div>{@n}</div>');}else{if(t!==p){AA.push('<div class="lv'+t.lv+' dim" dtt="'+t.n+'" idx="{@idx}"><div><div class="arrow-b"></div></div>'+t.n+"</div>");}else{break;}}t=t.parent;p=(p&&p.parent)||null;}AA.push("<div>");return AA.reverse().join("");},updateTooltipConfig:function n(u){var t=u.target,r=t.getAttribute("tt"),q=t.getAttribute("dtt"),s=t.getAttribute("dsName"),p=r||q;if(p){E(this,t,p,s);}}};}},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"mstrmojo-linkFormToPD",alias:"linkToForm",value:"ID",isHostedWithin:true,items:[],onitemSelected:function(k){if(this.hasRendered){if(this.parent.old){this.parent.oldUpdated=true;}if(!k.idf){X(this.parent.linkFromForm);}}}},M("",function(){F.call(d,this.parent);},false,{cssClass:"mstrmojo-removeLink"})]});this.links.renderChildren();},K=function(V){U.toggleClass(this.editorNode,"mstrmojo-advanced",V);},L=function(Y){var W=this,Z=T,V;try{mstrmojo.all[Z].destroy();}catch(X){}V={scriptClass:"mstrmojo.Editor",id:Z,title:mstrmojo.desc(2751,"Message"),cssClass:"mstrmojo-alert",buttons:[M(mstrmojo.desc(1442,"Ok"),function(){mstrmojo.all[Z].destroy();H.call(W);},true)],children:[{scriptClass:"mstrmojo.Label",text:Y}],visible:true,zIndex:1000};mstrmojo.insert(V).render();},H=function(){var X=this,W=this.illLinks,V=this.links.children,Y=Q;R.forEach(W,function(Z){Z=Z.al;R.forEach(V||[],function(b){var d=b.getMeta(),e=b.linkToAtt,a,c;if(d.srcAttrId===Z.alaid1&&d.tgtAttrId===Z.alaid2){if(!mstrmojo.all[Y]){c=new mstrmojo.Tooltip({id:Y,cssClass:X.themeClassName+" vi-warning vi-tooltip-V",contentNodeCssClass:"regular-unitlist-tooltips",posType:mstrmojo.tooltip.POS_BOTTOMLEFT,updatePopupConfig:null});P.attachEvent(X.editorNode,"click",function(){c.close();U.toggleClass(e.selectedNode,"mstrmojo-Warning",false);});}else{c=mstrmojo.all[Y];}c.close();a=mstrmojo.dom.position(e.selectedNode);c.set("top",a.y-6);c.set("left",a.x);c.set("content",Z.alstmsg);U.toggleClass(e.selectedNode,"mstrmojo-Warning",true);c.open();return false;}});});},A=function(){var V=mstrmojo.all[Q];if(V){V.close();}},J=function J(){this.buttons[0].enabled=true;if(this.btnHbox){this.btnHbox.children[0].set("enabled",true);}},G=function G(){var V=this,W=[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-toolBox",alias:"tools",children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-addLink",text:mstrmojo.desc(11950,"Add A Link"),title:mstrmojo.desc(11950,"Add A Link"),onclick:function(){D.call(V);A.call(V);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-showForms",text:mstrmojo.desc(2891,"Show Attribute Forms"),title:mstrmojo.desc(2891,"Show Attribute Forms"),onclick:function(){K.call(V,true);A.call(V);}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebHoverButton mstrmojo-hideForms",text:mstrmojo.desc(11951,"Hide Attribute Forms"),title:mstrmojo.desc(11951,"Hide Attribute Forms"),onclick:function(){K.call(V,false);A.call(V);}}],slot:"containerNode"},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-linksBox mstrmojo-advanced",alias:"links",slot:"containerNode"}];this.addChildren(W);};mstrmojo.vi.ui.editors.AttributeLinkEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.vi.ui.editors.AttributeLinkEditor",title:mstrmojo.desc(11942,"Link Attributes"),cssClass:"mstrmojo-att-link",btnAlignment:"right",buttons:null,modal:true,visible:false,help:"link_attributes_editor.htm",attribute:null,tgtAttrs:null,tgtForms:null,docModel:null,datasetId:null,namesHash:null,removedLinks:null,preBuildRendering:function C(){var Y=this,W=this.docModel,X=function(){var Z=(W.als&&W.als.links)||{},a=[];N.keyarray(Z).forEach(function(b){if(b.indexOf(Y.attribute.did+" ")===0){Z[b].forEach(function(c){a.push({srcAttrId:b.split(" ")[0],srcFormId:b.split(" ")[1],tgtAttrId:c.split(" ")[0],tgtFormId:c.split(" ")[1]});});}});return a;},V;this.set("buttons",[M(mstrmojo.desc(1442,"OK"),function(){var g=[],a=Y.links.children,Z=function(){var h=W.controller,i=W.controller.getRefreshCallback();if(g.length>0){h.cmdMgr.execute({execute:function(){this.submit(g,i);},urInfo:{callback:i}});}Y.close();},f=false,c,d;Y.removedLinks.forEach(function(h){c=N.copy(h.oldMeta,{act:"applyAttributeLinking",unlink:true});g.push(c);});(a||[]).forEach(function(h){if(h.old&&h.oldUpdated){c=N.copy(h.oldMeta,{act:"applyAttributeLinking",unlink:true});g.push(c);}if(!h.old||(h.old&&h.oldUpdated)){d=h.getMeta();if(!d.tgtAttrId){return ;}c=N.copy(d,{act:"applyAttributeLinking",unlink:false});g.push(c);}});R.forEach(g,function(h){if(!h.unlink){f=true;return false;}});if(!f){Z();return ;}var e={taskId:"validateDocumentLinks",msgID:W.mid,action:2,manipulationList:'{"ml":'+JSON.stringify(g)+"}"},b={success:function(h){if(h.als&&h.als.length>0){var i="";R.forEach(h.als,function(j){i+=j.al.alstmsg+"\n";});Y.illLinks=h.als;L.call(Y,i);return ;}Z();}};mstrApp.serverRequest(e,b);},true,{enabled:false}),M(mstrmojo.desc(221,"Cancel"),function(){Y.close();})]);G.call(this);V=X(this.attribute.did);if(V.length>0){V.forEach(function(Z){D.call(Y,Z);});J.call(this);}else{D.call(this);}this._super();},close:function I(){A.call(this);this.destroy();}});mstrmojo.vi.ui.editors.AttributeLinkEditor.open=function(b){var W=mstrmojo.insert(N.copy(b,{scriptClass:"mstrmojo.vi.ui.editors.AttributeLinkEditor",tgtAttrs:{},tgtForms:{},namesHash:{},removedLinks:[]})),Z=W.attribute,c=Z.did,V=W.docModel,Y=(V.als&&V.als.links)||{},X=[],a={success:function(){W.set("visible",true);W.render();}};R.forEach(Z.fs,function(d){if(d.idf){W.idFormId=d.fid;return false;}});N.keyarray(Y).forEach(function(e){var d=e.split(" ");if(d[0]===c){X.push(d[1]);}});if(R.indexOf(X,W.idFormId)===-1){X.push(W.idFormId);}W.dsMap={};W.dsTree=S.call(W);B.call(W,X,a);};}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.num","mstrmojo.date","mstrmojo.Container","mstrmojo.VBox","mstrmojo.Button","mstrmojo.locales","mstrmojo._FormatDefinition","mstrmojo.mstr.EnumFunction","mstrmojo.ui.editors.controls.ComboBox");var K=mstrmojo.hash,Z=mstrmojo.array,F=mstrmojo.num,H=mstrmojo._FormatDefinition,A=mstrmojo.css,X=mstrmojo.mstr.EnumFunction,J=mstrmojo.locales,G=mstrmojo.Button.newIconButton,M=mstrmojo.date,D=H.NumberFormatCategory,l=H.FixedNegative,E=H.CurrencyNegative,c=H.PercentNegative,I=H.DefaultFormat.FormattingNumber,W,R,b=function b(o,n){return{cls:this.value===o.v?"selected":"",v:o.v||"",n:o.n||"",style:o.r?"color:red;":"color:#fff;",sel:parseInt(this.idx,10)===n?"selected":""};},k={RIGHT:1,LEFT_WITH_SPACE:2,RIGHT_WITH_SPACE:3};var Q=[{n:mstrmojo.desc(4531,"Automatic"),v:-3}].concat(H.Category.slice(2)),a=[{n:"$"},{n:"£"},{n:"€"},{n:"¥"},{n:"fr."}];function C(p,o){var n=Z.find(p,"v",o);return n===-1?"":p[n].f;}function L(n){var p=this.parent.parent.parent.myData,o=n.v;p.set("format",C(this.items,o));p.set("negativeNumbers",o);A.toggleClass(this.selectedNode,"red",n.r);}function V(p,q,n){return{scriptClass:"mstrmojo.ui.Pulldown",items:p,onitemSelected:function o(r){var s=this.parent;while(s&&(!s.data||typeof s.data[q]==="undefined")){s=s.parent;}if(s){s.data.set(q,r.v);if(n){s.children[0].preview.preview_label.set("text",r.n);}}}};}function f(w,r,q,y,v){var x=K.clone(w),n=r>0?".":"",o=n,p=H.DefaultFormat.FormattingNumber,t;for(t=0;t<r;t++){n+=t%9;o+="0";}for(t=0;t<x.length;t++){var u=x[t];if(q){u.n=u.n.replace(/,/g,"");u.f=u.f.replace(/,/g,"");}if(y&&y!==p.CurrencyPosition){switch(y){case k.RIGHT:u.n=u.n.replace(/\$/g,"").replace(/\.\d{2}/g,".12$");u.f=u.f.replace(/"\$"/g,"").replace(/\.\d{2}/g,'.00"$"');break;case k.LEFT_WITH_SPACE:u.n=u.n.replace(/\$/g,"$ ");u.f=u.f.replace(/\$/g,"$ ");break;case k.RIGHT_WITH_SPACE:u.n=u.n.replace(/\$/g,"").replace(/\.\d{2}/g,".12 $");u.f=u.f.replace(/"\$"/g,"").replace(/\.\d{2}/g,'.00" $"');break;default:}}u.n=u.n.replace(/\.\d{2}/g,n);u.f=u.f.replace(/\.\d{2}/g,o);if(v&&v!==p.CurrencySymbol){var s=v.replace(/\$/g,"$$$$");u.n=u.n.replace(/\$/g,s);u.f=u.f.replace(/\$/g,s);}u.cls=u.r?"red":null;}return x;}function T(p){var n="1"+(p>0?".":"").toString(),q="0"+(p>0?".":"").toString(),o;for(o=0;o<p;o++){n+=o%10;q+="0";}return[n+"E+03",q+"E+0#"];}function P(AA,AC){var u="\u00A4",y=/"[^"]*"/g,p=AA.match(y),AD="\u0091",z=/\[[^\]]*\]/g,n=AA.match(z),x,AB;x=AA.replace(y,u);x=x.replace(z,AD);var r=AA.indexOf("."),w=F.getDecimalLength(AA),t=Math.max(0,w+AC),q=AA.match(/\d(?!((\d)|(,\d)))/g),o=r!==-1?AA.charAt(r-1):q&&q[0],v=(o||"0")+(t>0?".":"").toString();for(var s=0;s<t;s++){v+="0";}x=x.replace(w===0?/\d(?!((\d)|(,\d)))/g:/\d\.\d+/g,v);x=x.split(u);AB=x[0];Z.forEach(p,function(AF,AE){AB+=AF+x[AE+1];});x=AB.split(AD);AB=x[0];Z.forEach(n,function(AF,AE){AB+=AF+x[AE+1];});return AB;}function N(u,n,t,s,p,o){var r=u.parent.parent.parent,q=f(n,t.decimalPlaces,s,p,o);t.set("format",C(q,t.negativeNumbers.toString()));u.set("items",q);u.set("selectedIndex",Z.find(q,"v",t.negativeNumbers.toString()));r.preview.preview_label.set("text",S(r.myData.format));}function h(){var v=this.parent.parent,z=v.myData,q=v.formatterContainer,o=Q[v.categoryPicker.selectedIndex].v,AC=this.funcType===X.FunctionLeftStr?1:-1,s=null,u=null,r=false,AB=0,w=null,p=false,y;switch(o){case D.Fixed:s=q.fixed_hBox.negativeDDL;u=l;r=!z.thousandSeparator;break;case D.Currency:s=q.currency_hBox2.negativeDDL;u=E;AB=z.currencyPosition;w=z.currencySymbol;break;case D.Percentage:s=q.percentage_hBox.negativeDDL;u=c;break;case D.Scientific:p=true;break;case D.Custom:y=true;break;default:return ;}if(y){var AA=P(z.format,AC);v.preview.preview_label.set("text",S(AA));v.formatterContainer.custom_text.set("value",AA);return ;}var t=z.decimalPlaces,n=t+AC;n=Math.max(0,n);n=Math.min(H.MaxNegativeDidigts,n);z.set("decimalPlaces",n);if(p){var x=T(n);z.set("format",x[1]);v.preview.preview_label.set("text",x[0]);}else{N(s,u,z,r,AB,w);}}function S(x){var p="\u00A4",t=/"[^"]*"/g,o=x.match(t),s=x.replace(t,p),w=["m","y","d","h","s"],v=false,n=new Date(),u=n.getFullYear(),r=n.getMonth(),q=n.getDay(),z=J.datetime,y;Z.forEach(w,function(AA){v=v||s.indexOf(AA,0)!==-1;});if(v){s=s.replace(/y{3,}/g,u).replace(/y{1,2}/g,u.toString().slice(2,4));s=s.replace(/m{4,}/g,z.MONTHNAME_FULL[r-1]).replace(/m{3}/g,z.MONTHNAME_SHORT[r-1]).replace(/mm/g,"07").replace(/m/g,"7").replace(/7ber/g,"mber");s=s.replace(/d{4,}/g,z.dayNames[q-1]).replace(/d{3}/g,"Mon").replace(/dd/g,"10").replace(/d/g,"1").replace(/1ay/g,"day");s=s.replace(/hh/g,"08").replace(/h/g,"8");s=s.replace(/ss/g,"04").replace(/s/g,"4");s=s.split(p);y=s[0];Z.forEach(o,function(AB,AA){y+=AB+s[AA+1];});return y;}return F.formatByMask(x,1234.12);}function m(n,o){return Math.max(Z.find(n,"v",o),0);}function B(p){var o=this.parent.parent.categoryPicker,n=Q.map(function(q){return q.v;}).indexOf(p);o.set("selectedIndex",n);}function j(n,o,q,p){return G(undefined,n,o,undefined,K.copy(p,{useRichTooltip:true,updateTooltipConfig:function(){this.richTooltip={cssClass:"vi-regular vi-tooltip-A A-center",content:q,refNode:this.domNode,posType:mstrmojo.tooltip.POS_TOPCENTER,left:15,top:33};}}));}function Y(){if(mstrApp.isSingleTier){var s=this.formatterContainer,r=J.datetime,n={day:7,month:4,year:1998},p={hour:15,min:41,sec:46},q=r&&r.DATEINPUTFORMATS,o=r&&r.TIMEINPUTFORMATS;W=[];R=[];q.forEach(function(t){W.push({v:t,n:M.formatDateInfo(n,t)});});o.forEach(function(t){R.push({v:t,n:M.formatTimeInfo(p,t)});});s.date_ddl.set("items",W);s.time_ddl.set("items",R);}else{W=H.Date;R=H.Time;}}mstrmojo.vi.ui.NumberFormatter=mstrmojo.declare(mstrmojo.VBox,null,{scriptClass:"mstrmojo.vi.ui.NumberFormatter",cssClass:"NumberFormatter-content",formatValue:null,myData:null,oldData:null,categoryPicker:null,formatterContainer:null,preview:null,shortcutRow:null,adjustAfterCategoryChange:mstrmojo.emptyFn,preBuildRendering:function(){if(this._super){this._super();}Y.call(this);var n=this.formatterContainer;if(this.formatValue){n.currency_hBox1.currency_symbol.selectedValue=this.formatValue.currencySymbol;n.fixed_btn.checked=!!this.formatValue.thousandSeparator;A.addWidgetCssClass(n.fraction_ddl,c[Z.find(c,"v",this.formatValue.negativeNumbers)].r?" red":"");}},postBuildRendering:function O(){if(this._super){this._super();}if(this.formatValue){this.categoryPicker.set("selectedIndex",m(this.categoryPicker.items,this.formatValue.category.toString()));}},children:[K.copy({alias:"categoryPicker",cssClass:"nf-category",onitemSelected:function i(z){if(!this.hasRendered){return ;}var u=this,x=u.parent,p=x.formatterContainer,n=x.shortcutRow,y=x.preview.preview_label,w=z.v,r=w===D.Automatic,o=[],t=x.myData;Z.forEach(p.children,function(AA){AA.set("visible",false);});x.border.set("visible",!r);x.preview.set("visible",!r);["border","moveLeftBtn","moveRightBtn"].forEach(function(AA){n[AA].set("visible",!r);});t.set("category",w);t.set("thousandSeparator",w?I.ThousandSeparator:x.formatValue.thousandSeparator);switch(w){case D.Currency:N(p.currency_hBox2.negativeDDL,E,t,false,t.currencyPosition,t.currencySymbol);p.currency_hBox1.currency_position.set("selectedIndex",m(H.CurrencyPosition,t.currencyPosition.toString()));o=["currency_hBox1","currency_hBox2"];break;case D.Date:p.date_ddl.set("selectedIndex",m(W,t.format));o=["date_ddl"];break;case D.Time:p.time_ddl.set("selectedIndex",m(R,t.format));o=["time_ddl"];break;case D.Percentage:N(p.percentage_hBox.negativeDDL,c,t,false,0,null);o=["percentage_hBox"];break;case D.Fraction:p.fraction_ddl.set("selectedIndex",m(H.Fraction,t.format));o=["fraction_ddl"];break;case D.Scientific:var s=T(t.decimalPlaces||0);t.set("format",s[1]);y.set("text",s[0]);break;case D.Custom:var q=t.customText||t.format,v=p.custom_text;t.set("format",q);v.value=q;v.refresh();y.set("text",S(q));o=["custom_condense","custom_text"];break;case D.Fixed:N(p.fixed_hBox.negativeDDL,l,t,!t.thousandSeparator,0,null);o=["fixed_hBox","fixed_btn"];break;}Z.forEach(o,function(AA){p[AA].set("visible",true);});x.adjustAfterCategoryChange();}},V(Q,"category")),{scriptClass:"mstrmojo.Box",cssClass:"nf-MiddleRow nf-shortcut",alias:"shortcutRow",border:null,moveLeftBtn:null,moveRightBtn:null,children:[j("nf-shortcut-currency",function e(){B.call(this,D.Currency);},mstrmojo.desc(2051,"Currency"),undefined),j("nf-shortcut-percentage",function e(){B.call(this,D.Percentage);},mstrmojo.desc(2053,"Percentage"),undefined),j("nf-shortcut-fixed",function e(){B.call(this,D.Fixed);this.parent.parent.formatterContainer.fixed_btn.set("checked",true);},mstrmojo.desc(2050,"Fixed"),undefined),{scriptClass:"mstrmojo.Label",cssClass:"shortcut-border",alias:"border"},j("nf-MoveDecimalPoint left",function e(){h.call(this);},mstrmojo.desc(2189,"Increase Decimal"),{funcType:X.FunctionLeftStr,alias:"moveLeftBtn"}),j("nf-MoveDecimalPoint right",function e(){h.call(this);},mstrmojo.desc(2188,"Decrease Decimal"),{funcType:X.FunctionRightStr,alias:"moveRightBtn"})]},{scriptClass:"mstrmojo.Label",alias:"border",cssClass:"nf-border"},{scriptClass:"mstrmojo.Container",alias:"formatterContainer",cssClass:"nf-buttons",markupString:'<div id="{@id}" class="{@cssClass}" style="{@cssText}"></div>',fixed_hBox:null,fixed_btn:null,currency_hBox1:null,currency_hBox2:null,date_ddl:null,time_ddl:null,percentage_hBox:null,fraction_ddl:null,custom_condense:null,custom_text:null,markupSlots:{containerNode:function U(){return this.domNode;}},children:[{scriptClass:"mstrmojo.HBox",alias:"fixed_hBox",cssClass:"nf-MiddleRow",negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},K.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:b,onitemSelected:function i(n){L.call(this,n);}},V([],"format"))]},{scriptClass:"mstrmojo.CheckBox",alias:"fixed_btn",cssClass:"nf-MiddleRow",label:mstrmojo.desc(13898,"Use 1000 Separator(#)").replace("#",J.number.THOUSANDSEPARATOR),onclick:function e(){var n=this.parent.parent;n.myData.set("thousandSeparator",this.checked?-1:0);N(this.parent.fixed_hBox.negativeDDL,l,n.myData,!this.checked,0,null);}},{scriptClass:"mstrmojo.HBox",alias:"currency_hBox1",cssClass:"nf-MiddleRow",visible:true,currency_symbol:null,currency_position:null,children:[{scriptClass:"mstrmojo.ui.editors.controls.ComboBox",alias:"currency_symbol",cssClass:"nf-CurrencySymbol",selectedValue:"$",items:a,postselectedValueChange:function g(n){var s=this,r=s.parent.parent.parent,q=n.value,o=r.myData;o.set("currencySymbol",q);N(this.parent.parent.currency_hBox2.negativeDDL,E,o,false,parseInt(o.currencyPosition,10),q);}},K.copy({cssClass:"nf-CurrencyPosition align-right",alias:"currency_position",onitemSelected:function i(n){var r=this,q=r.parent.parent.parent,o=n.v;q.myData.set("currencyPosition",parseInt(o,10));N(this.parent.parent.currency_hBox2.negativeDDL,E,q.myData,false,parseInt(o,10),q.myData.currencySymbol);}},V(H.CurrencyPosition,"currencyPosition"))]},{scriptClass:"mstrmojo.HBox",alias:"currency_hBox2",cssClass:"nf-MiddleRow",negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},K.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:b,onitemSelected:function i(n){L.call(this,n);}},V([],"format"))]},K.copy({alias:"date_ddl",cssClass:"nf-MiddleRow"},V(H.Date,"format",true)),K.copy({alias:"time_ddl",cssClass:"nf-MiddleRow"},V(H.Time,"format",true)),{scriptClass:"mstrmojo.HBox",alias:"percentage_hBox",cssClass:"nf-MiddleRow",negativeDDL:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"negative-label",text:mstrmojo.desc(13891,"Negative:")},K.copy({alias:"negativeDDL",cssClass:"nf-NegativePullDown",getOptionProps:b,onitemSelected:function i(n){L.call(this,n);}},V([],"format"))]},K.copy({alias:"fraction_ddl",cssClass:"nf-MiddleRow"},V(H.Fraction,"format",true)),mstrmojo.Button.newWebButton(mstrmojo.desc(13893,"Condense (e.g.10M)"),function(){this.parent.custom_text.set("value",'[>=1000000]#,##0,,"M";[>=1000]#,##0,"K";0');},false,{cssClass:"nf-condense",alias:"custom_condense"}),{scriptClass:"mstrmojo.TextBox",alias:"custom_text",cssClass:"nf-custom",onvalueChange:function d(){var q=this,o=q.parent.parent,n=q.value;o.myData.set("format",n);o.myData.set("customText",n);q.parent.parent.preview.preview_label.set("text",S(n).replace(/\s/g,"&nbsp;"));}}]},{scriptClass:"mstrmojo.HBox",alias:"preview",cssClass:"nf-MiddleRow",preview_label:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"preview_lable",text:mstrmojo.desc(13892,"Preview:")},{scriptClass:"mstrmojo.Label",cssClass:"align-right",alias:"preview_label"}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.PreviewButton","mstrmojo.ui.editors.controls.AdvancedColorPicker","mstrmojo.ui.editors.controls.AdvancedColorPickerPopup","mstrmojo.css");var F=mstrmojo.css,E=Math.round;function I(N){var O=this.previewNode,M=O.offsetWidth,P=O.offsetHeight,Q=Math.sqrt(M*M+P*P),L=Math.atan2(P,M)*(-180)/Math.PI;O.style.backgroundColor="#FFFFFF";N.display="block";N.top=E(P/2)+"px";N.left=E((M-Q)/2)+"px";N.width=E(Q)+"px";N[mstrmojo.dom.CSS3_TRANSFORM]="rotate("+E(L)+"deg)";}mstrmojo.ui.editors.controls.ColorPickerButton=mstrmojo.declare(mstrmojo.ui.editors.controls.PreviewButton,null,{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod,onselectedValueChange:function(){this.updatePreview();this.colorPicker.set("color",this.selectedValue);},onautoPreviewColorChange:function C(){this.getPopupWidget().set("autoPreviewColor",this.autoPreviewColor);this.updatePreview();},onenabledChange:function G(){F.toggleClass(this.domNode,"disabled",!this.enabled);}},isHostedWithin:false,showGradient:true,showNoFill:true,showAutomatic:false,autoPreviewColor:null,selectedValue:null,init:function K(M){this._super(M);var L=this.colorPicker;L.showGradient=this.showGradient;if(this.showNoFill!==undefined){L.showNoFill=this.showNoFill;L.showAutomatic=this.showAutomatic;}L.showAutomatic=this.showAutomatic;F.addWidgetCssClass(this,"mstrmojo-ColorPickerBtn");},preBuildRendering:function J(){this.colorPicker.showNoFill=this.showNoFill;return this._super();},setDimensions:function H(M,L){this._super(M,L);window.setTimeout(function(){this.updatePreview();}.bind(this),0);},postBuildRendering:function A(){var L=this.noFillNode=document.createElement("div");L.style.display="none";L.className="slash";this.domNode.firstChild.appendChild(L);this._super();},updatePreview:function B(){var P=this.previewNode;if(P){var N=this.selectedValue===mstrmojo.ui.editors.controls.AdvancedColorPicker.VAL_AUTOMATIC?this.autoPreviewColor:this.selectedValue;if(N){var Q=P.style;if(N.c1){var R=F.buildGradient(N.or,N.c1,N.c2);if(R&&R.n){Q[F.convertCssToCamelCase(R.n)]=R.v;}}else{var L=F.buildGradient(0,"0","0");if(L&&L.n){Q[F.convertCssToCamelCase(L.n)]=null;}var O="conflict"===N||("transparent"===N&&!this.showNoFill);F.toggleClass(P,"conflict",O);Q.backgroundColor=!O?N:null;}if(this.showNoFill&&this.noFillNode&&this.enabled){var M=this.noFillNode.style;if("transparent"===N){I.call(this,M);}else{M.display="none";}}}}},getPopupWidget:function D(){return this.colorPicker;},children:[{scriptClass:"mstrmojo.ui.editors.controls.AdvancedColorPickerPopup",alias:"colorPicker",slot:"widgetHostNode",color:this.selectedValue,isHostedWithin:true,colorChanged:function(L){this.parent.set("selectedValue",L);this.close();}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.ui.tabs.TabStrip","mstrmojo.vi.ui.tabs.Tab","mstrmojo.ME.MetricEditBox","mstrmojo.array","mstrmojo.hash");var Z=mstrmojo.array,M=mstrmojo.hash,K=mstrmojo.ME.MetricToken.brackets,L=mstrmojo.dom,B=mstrmojo.css,Q=mstrmojo.vi.ui.tabs.Tab.ACTIONS,g=Q.DELETE+Q.RENAME,i=mstrmojo.ME.MetricEditBox.VALIDATION_STATUS,D=mstrmojo.string,k="This@ID",T="45C11FA478E745FEA08D781CEA190FE5";function G(o){return{n:o,k:o,ftk:[],vs:1,is:""};}function O(t,u,o,r){var q=t.forms[u]||{},s=t.forms[o],p=t.inputBox;if(u!==o){q.vs=t.vStatus;q.is=t.iStatus;q.ftk=p.items;t.set("vStatus",i.UNKNOWN);}t.set("vStatus",s.vs);t.set("iStatus",s.is);t.updateInputBoxItems({items:s.ftk});if(t.curFormIdx!==o){t.curFormIdx=o;t.tabstrip.setSelectedTab(s.k);}t.raiseEvent({name:"tabSwitch",tks:s.ftk,vs:s.vs,is:s.is,oidx:u,nidx:o,toNewTab:r});}function N(p){var o=p.forms[p.curFormIdx];if(o){o.ftk=p.inputBox.items;o.vs=p.vStatus;o.is=p.iStatus;}}var e=0;function W(o){e=Math.max(o.length-1,e);}function V(){e=0;}function l(o){var p="DESC"+(e?" "+e:"");e++;if(Z.find(o,"n",p)>=0){return l(o);}return p;}function I(r){var q={v:K(r.n),oi:r,isNew:true},p,o;if(r.t===12){p=Z.filter(r.fs,function(s){return s.obf||r.da;}).length;if(p===1){o=r.fs[0];q=M.copy({v:K(r.n)+"@"+K(o.fnm),ift:true,exv:o.fid,extp:8},q);}else{q=M.copy({v:K(r.n)+"@",ift:true},q);}}return q;}function E(p,o){p.set("enabled",!o);var q="mstrmojo-InlineWaitIcon";if(p.iconClass){p.set("iconClass",p.iconClass.replace(new RegExp(q),"")+" "+(o?q:""));}else{mstrmojo.css.toggleClass(p.domNode,q,o);}}var U=function(w){var r=w.items,s=r.length,t=r[r.length-1],q,p,v=[],o="",u;if(r[0]&&r[0].tp!==33){v.push({v:"!",tp:33,lv:4,sta:2});}for(q=0;q<s;q++){p=r[q];if(p.isNew&&!p.oi){o+=p.v;}else{if(!D.isEmpty(o)){v.push({v:o,tp:2,lv:1});o="";}if(p.v&&p.v.indexOf(k)>=0){p.v=p.v.replace("["+k+"]",k);p.exv=T;p.extp=8;delete p.oi;}v.push(p);}}if(!D.isEmpty(o)){v.push({v:o,tp:2,lv:1});o="";}if(t&&t.tp!==-1){v.push({v:"",tp:-1,lv:4,sta:2});}return{items:v};},a=function(q){var o=q.items||[],p=o[o.length-1];if(p&&p.tp===-1){o.pop();}if(o[0]&&(o[0].tp===33||o[0].tp===37)){o.splice(0,1);}Z.forEach(o,function(r){if(r.v&&r.v.indexOf(k)>=0){M.copy({extp:8,exv:T,oi:{n:"This",did:"This",t:12}},r);}});},Y=function(o){if(!o){return i.VALID;}return{"-2147214845":i.ERROR,"-2147214846":i.AMBIGUITY}[o]||i.ERROR;},R=function(q){q=U(q);var p={items:true,v:true,tp:true,lv:true,oi:true,n:true,did:true,t:true,st:true,exv:true,extp:true,asc:true,vtp:true},o={getArrItemName:function(){return"tkn";},isSerializable:function(r){return(p[r])?true:false;}};return D.json2xml("tknstrm",q,o);},F=function(q,t,s,p){var r=R(t),u=function(v){if(v&&v.tks){var w=v.tks;a(w);w.vs=Y(w.rjec);w.tokenXML=r;if(p){p(w);}}},o=function(v){mstrmojo.alert(v.message||v.getResponseHeader&&v.getResponseHeader("X-MSTR-TaskFailureMsg"));};mstrmojo.ME.MetricDataService.validateMetric({tokenStreamXML:r,localSymbolFolderXML:"",metricXML:"",metricId:q||"",isNew:true,objectType:12,isIDForm:s,msgID:mstrApp.getMsgID()},{success:u,failure:o});};mstrmojo.ME.DerivedAttributeFormTab=mstrmojo.declare(mstrmojo.vi.ui.tabs.Tab,null,{scriptClass:"mstrmojo.ME.DerivedAttributeFormTab",valid:true,editable:true,postBuildRendering:function S(){if(this._super){this._super();}var o=this,p=o.lbl;p.editOnDoubleClick=this.editable;p.onTextEditComplete=function(r,q){if(o.validate(p.text)){o.titleEdited(p.text,q);}};},onclick:function d(o){var p=mstrmojo.dom.eventTarget(o.hWin,o.e);if(p===this.menuBtnNode){this.tabDeleted();}else{if(!this.isSelected){this.tabSelected();}}},validate:function(o){var p=!/[\[\]\"\\]/g.test(o);if(!p){this.lbl.set("isEditing",true);}this.set("valid",p);return p;},showErrTooltip:function n(s,q){var o=mstrmojo.dom.position(this.domNode),p=this,r=p.errTooltip;if(!r){p.errTooltip=r=new mstrmojo.Tooltip({contentNodeCssClass:"me-tooltip-content up me-err",updatePopupConfig:null});this.addDisposable(r);}r.set("top",o.y+o.h+2);r.set("left",o.x+o.w/2-q);r.set("content",'<div class="content"><span>'+s+"</span></div>");r.open();window.setTimeout(function(){r.close();},2500);},onvalidChange:function(){if(this.valid){this.hideTooltip();}else{this.showErrTooltip(mstrmojo.desc(11569,"Input contains invalid character"),95);}}});function f(r,s,t){var q=Z.find(s,"k",t.k);return{scriptClass:"mstrmojo.ME.DerivedAttributeFormTab",title:t.n,draggable:false,editable:q!==0,cssClass:"mstrmojo-AEB-Tab "+(q===0?"mstrmojo-AEB-IDTab":""),getMenuActions:function(){return g;},tabSelected:function(){O(r,r.curFormIdx,q);},titleEdited:function p(v,u){if(v!==u){if(Z.find(r.forms,"n",v)>=0){this.showErrTooltip(mstrmojo.desc(7209,"Name already exists"),69);}var w=r.forms[q];w.n=v;}},tabDeleted:function o(){var u=r.forms.length,x=(r.curFormIdx===u-1)?0:r.curFormIdx,v=r.forms.slice(0),w=v[q];if(w&&w.did){r.delForms.push({n:w.n,did:w.did});}v.splice(q,1);r.curFormIdx=x;r.set("forms",v);O(r,-1,x);r.set("dirty",true);}};}mstrmojo.ME.AttributeEditBox=mstrmojo.declare(mstrmojo.ME.MetricEditBox,null,{scriptClass:"mstrmojo.ME.AttributeEditBox",markupString:'<div id="{@id}" class="mstrmojo-MEBox {@cssClass}" style="{@cssText}"><div class="mstrmojo-AEB-TabStrip"></div><div class="mstrmojo-MEBox-edit mstrmojo-AEB-edit"></div><div class="mstrmojo-MEBox-status {@statusCssClass}"><div class="mstrmojo-MEBox-vStatus"></div><div class="mstrmojo-MEBox-iStatus"></div></div></div>',markupSlots:{tabstripNode:function(){return this.domNode.firstChild;},editNode:function(){return this.domNode.childNodes[1];},statusNode:function(){return this.domNode.lastChild;},iStatusNode:function(){return this.domNode.lastChild.lastChild;},vStatusNode:function(){return this.domNode.lastChild.firstChild;}},forms:null,delForms:[],curFormIdx:0,attrid:null,absorbAmbiguity:false,init:function j(q){var r=this;r.children=[{scriptClass:"mstrmojo.vi.ui.tabs.TabStrip",alias:"tabstrip",position:"top",slot:"tabstripNode",isAlignRight:false,getTabCfg:function p(u,v,t){return M.copy(f(r,u,v),t);},addTab:function s(){var v=r.forms,t=v.length,w=l(v),u=v.slice(0);u.push(G(w));r.set("forms",u);O(r,r.curFormIdx,t,true);r.set("dirty",true);},clear:function o(){Z.forEach(this.children,function(t){t.hideTooltip();});}},{scriptClass:"mstrmojo.Button",alias:"clearBtn",slot:"tabstripNode",text:mstrmojo.desc(1763,"Clear All"),cssClass:"mstrmojo-WebHoverButton mstrmojo-AEB-clearAll",onclick:function(){r.inputBox.clearTokens([]);}},{scriptClass:"mstrmojo.Button",alias:"validateBtn",slot:"tabstripNode",text:mstrmojo.desc(11897,"Validate"),cssClass:"mstrmojo-WebHoverButton mstrmojo-AEB-validate",onclick:function(){r.validateCurrentForm();}}].concat(this.children);this._super(q);},item2textCss:function J(o){return this._super(o)||{21:"afm"}[o.t]||"";},onformsChange:function X(){var o=this.forms,p=o[this.curFormIdx].k;Z.forEach(o,function(q){a({items:q.ftk});});this.tabstrip.setTabs(o,p);W(o);},selectFormTab:function A(o){O(this,this.curFormIdx,o);},postBuildRendering:function S(){if(this._super){this._super();}this.clear();var o=this;this.inputBox.ondrop=function(w){if(!w.src.data||!w.src.data.item){return ;}var v=o.inputBox,s=v.ctxtBuilder.itemWidgets,t=M.copyProps(["did","n","t","fs"],w.src.data.item),r=I(t),u,p,q;w.src.data=r;mstrmojo.ListBase2.prototype.ondrop.call(this,w);if(o.ontokensModify){o.ontokensModify();}u=this.selectedIndices;if(t.t===12&&r.ift&&!r.exv){for(p in u){q=s[p];if(q){v.startTokenSuggestion(q);}}}v.clearSelect(true);B.removeClass(v.domNode,"unselectable");};},clear:function c(){this.curFormIdx=0;this.delForms=[];this.attrid=null;V();this.set("forms",[G("ID")]);this.inputBox.set("items",[]);this.inputBox.resetTokensCache();this.set("vStatus",i.UNKNOWN);this.set("iStatus","");this.tabstrip.clear();},validateCurrentForm:function C(p){var q=this,r=this.validateBtn,o=function(s){E(r,false);q.set("vStatus",s.vs);q.set("iStatus",s.rjed||"");q.updateInputBoxItems({items:s.items});q.statusNode.style.display="block";q.handleValidation(s);if(p){p(s.items,s.vs===i.VALID);}};q.set("vStatus",i.VALIDATING);E(r,true);F(this.attrid,{items:this.inputBox.items},q.curFormIdx===0,o);},validateAllForms:function m(q){var r=this,p=r.forms,o=0,s=function(v){var u=(o===0);if(v){var t=p[o-1];t.ftk=v.items;t.vs=v.vs;t.is=v.rjed||"";t.tokenXML=R({items:v.items});if(v.vs!==i.VALID){r.selectFormTab(o-1);r.handleValidation(v);if(q){q(null,false);}return ;}}if(o===p.length){if(q){q(p,true);}return ;}F(r.attrid,{items:p[o++].ftk},u,s);};N(r);s();},continueValidataion:function P(){this.validateCurrentForm();},getStatusDesc:function b(o){return{0:mstrmojo.desc(11655,"Valid Formula.")}[o];},onvStatusChange:function h(){this.statusNode.style.display=this.vStatus>=i.VALIDATING?"block":"none";},onObjectInsert:function H(r){var s=this.inputBox,q=I(r),o=s.insertTokens([q]),p;if(r.t===12&&q.ift&&!q.exv){p=s.ctxtBuilder.itemWidgets[o];if(p){s.startTokenSuggestion(p);}}}});mstrmojo.ME.AttributeEditBox.preprocessTokenStream=a;mstrmojo.ME.AttributeEditBox.postprocessTokenStream=U;mstrmojo.ME.AttributeEditBox.mapErrorCode=Y;mstrmojo.ME.AttributeEditBox.getTokenStreamXML=R;mstrmojo.ME.AttributeEditBox.validateSyntax=F;mstrmojo.ME.AttributeEditBox.prepareInsertToken=I;}());(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo.Calendar","mstrmojo.Popup","mstrmojo._HasPopup","mstrmojo.locales","mstrmojo.date","mstrmojo.string");var B=mstrmojo.ValidationTextBox.prototype.markupMethods,D=mstrmojo.string,A=function(){return mstrmojo.locales.datetime;},C=mstrmojo.date;mstrmojo.DateTextBox=mstrmojo.declare(mstrmojo.ValidationTextBox,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DateTextBox",calendarToBody:false,calendarZIndex:100,changeValueOnOK:false,dynDateValue:null,showAdvanced:false,canSelectDisabledDate:false,isList:false,dtp:14,defaultDate:null,autoFormat:true,enabled:true,min:"",max:"",markupString:'<div id="{@id}" class="mstrmojo-DateTextBox {@cssClass}" style="{@cssText}"><input class="mstrmojo-DateTextBox-input" type="text" title="{@tooltip}"value="{@value}" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keyup,blur /><div class="mstrmojo-DateTextBox-icon" mstrAttach:click> </div><div class="mstrmojo-DateTextBox-popup"></div></div>',markupSlots:{inputNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.childNodes[1];},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onwidthChange:function(){if(this.width){this.inputNode.style.width=(this.width-20)+"px";this.iconNode.style.left=(this.width-18)+"px";this.domNode.style.width=this.width+"px";}},onvalueChange:B.onvalueChange,onenabledChange:B.onenabledChange,onvalidationStatusChange:B.onvalidationStatusChange},calConfig:null,calendar:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-DateTextBox-calendar",locksHover:true,slot:"popupNode",onOpen:function(){var H=this.opener,G=H&&H.calendarZIndex,I=this.cal,E=H&&H.calConfig;if(G){this.domNode.style.zIndex=G;}for(var F in E){I.set(F,E[F]);}},children:[{scriptClass:"mstrmojo.Calendar",alias:"cal",forceNonEmptySelection:true,bindings:{showAdvanced:"this.parent.opener.showAdvanced",dtp:"this.parent.opener.dtp",value:"this.parent.opener.value",dynDateValue:"this.parent.opener.dynDateValue",enabled:"this.parent.opener.enabled",min:"this.parent.opener.min",max:"this.parent.opener.max",canSelectDisabledDate:"this.parent.opener.canSelectDisabledDate",changeValueOnOK:function(){var F=this.parent.opener.dtp,E=this.parent.opener.changeValueOnOK;return F===15||F===16||E;}},closeOnValueChange:true,onValueUpdate:function(F){var I=this.parent&&this.parent.opener;if(I){var G=I.value,E=window.mstrConfig&&window.mstrConfig.listSep||";",H=I.dtp===15?C.formatTimeInfo(this.timeVal,A().TIMEOUTPUTFORMAT):this.value;if(I.isList&&!D.isEmpty(G)){I.set("value",I.value+E+H);}else{I.set("dynDateValue",this.dynDateValue);I.set("value",H);}I.closePopup();}}}]},onclick:function(E){var F=this._lastOpened,G=this._calendarConfig;if(!G){G={};if(this.calendarToBody){delete this.calendar.slot;G.placeholder=document.body.appendChild(document.createElement("div"));G.nudge=function(){var M=this.opener;if(M){var H=mstrmojo.dom.position(M.popupNode,true),L=this.domNode,P=L.offsetHeight,I=L.offsetWidth,J=mstrmojo.dom.windowDim(),K=H.x,N=H.y;if(N+P>=J.h){N=Math.max(N-P,0);}if(K+I>=J.w){K=Math.max(K-I,0);}var O=L.style;O.top=N+"px";O.left=K+"px";}};}this._calendarConfig=G;}G.lockIW=this;if(F&&F.visible){this.closePopup();}else{this.openPopup("calendar",G);this.calendar.cal.updateSelectedDate(true);}},unrender:function(){this._super();if(this.calendarToBody&&this._calendarConfig){delete this._calendarConfig;}if(this.calendar.hasRendered){this.calendar.unrender();}},_set_value:function(H,F){var G=this.value,E=(G!==F);if(E){this.value=F;this.validate(F);}if(this.showAdvanced&&this.dynDateChanged){this.dynDateChanged=false;E=true;}return E;},_set_dynDateValue:function(H,F){var G=this.dynDateValue,E=(G!==F);if(E){this.dynDateValue=F;this.dynDateChanged=true;}return E;}});})();(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.fe.FilterExprTree","mstrmojo.fe.AndOrNode","mstrmojo.fe.RelationNode","mstrmojo.fe.DynamicNode","mstrmojo.fe.ConditionNode");var K=mstrmojo.expr.ET;mstrmojo.fe.RelationFilterExprTree=mstrmojo.declare(mstrmojo.fe.FilterExprTree,null,{scriptClass:"mstrmojo.fe.RelationFilterExprTree",nodeClassMap:{14:mstrmojo.fe.AndOrNode,15:mstrmojo.fe.RelationNode,ph:mstrmojo.fe.DynamicNode,"*":mstrmojo.fe.ConditionNode},getItemIdentityProp:function(L){if(L.ph){return"ph";}if((L.et===10||L.et===12)&&L.dmt===4){return K.RLS;}return L.et;},isEditable:function J(M){var L=false;switch(M&&M.et){case K.RLS:L=true;break;}return L||this._super(M);},getItemConfig:function(O,L,P){var M=this._super(O,L,P),N=(O.et===K.RLS||!!O.relation);if(N){M.itemFunction=P.itemFunction;}return M;},newCondition:function E(M){var L=this.getSelectedItemWidget();if(M&&M.ph&&!M.ph.idx&&microstrategy.bones.rwb_viewer){M.ph.idx=microstrategy.bones.rwb_viewer.nextPhIndex++;}if(L&&L.selected&&L.newCondition){return L.newCondition(M);}else{return this._super(M);}},createSet:function D(M,L){var N=L.rq,O=L.cq;if(N&&O){this.remove(O);if(L.isMetric){mstrmojo.hash.copyProps(["applySubExpr","dmy","dmt","relation","useSchema"],N,O);N=O;}else{N.nds=[O];}this.add([N],M[0]);}},removeSet:function G(L){var M=L.data,N=[M];this.remove(M);if(M.nds&&M.nds.length>0){N=M.nds;}else{delete M.dmy;delete M.relation;delete M.applySubExpr;delete M.relation;delete M.useSchema;delete M.dmt;}this.add(N,0);},nameFactory:{counter:1,names:{},clear:function(){this.resetCounter();this.names={};},resetCounter:function C(){this.counter=1;},isNameExist:function I(L){return !!this.names[L];},setName:function H(L,M){this.names[L]=M;},changeName:function B(M,L,N){this.removeName(M);this.setName(L,N);},getNewName:function F(O,N,Q){var P=N||"",M=Q||"",L;while(this.isNameExist(P+this.counter+M)){this.counter++;}L=P+this.counter+++M;this.names[L]=O;return L;},removeName:function A(L){delete this.names[L];this.resetCounter();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.Label","mstrmojo.hash","mstrmojo.array","mstrmojo.ui.Checkbox","mstrmojo.css","mstrmojo.threshold.ThresholdExprTree","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.models.FormatModel.getFormatUpdate","mstrmojo.threshold.ThresholdModel.REPLACE_SYMBOL");mstrmojo.requiresDescs(2869,3397,5893,7978,7979,13788,13789,13790,13894,14599,14600,14601,14611);var E=mstrmojo.hash,N=mstrmojo.array,O=mstrmojo.css,I=mstrmojo.models.FormatModel.decodeValue,M=mstrmojo.threshold.ThresholdModel.REPLACE_SYMBOL,C=12;function G(R){this.threshold.scope=R;}function J(V,S,R){var T=this.previewNode;switch(V){case 10:var U=N.filterOne(M,function(W){return W.v===S;});if(U){T.innerHTML=U.n;}break;case 4:O.addClass(T,"hasImage");T.innerHTML='<img class="replaceImg" src="'+S+'" />';break;default:T.innerHTML=S||(R===C?mstrmojo.desc(14611,"Sample"):"1234.567");}}function P(S,R){R.fontFamily=S.ff;R.fontSize=parseInt(S.fsz,10)+"pt";R.fontWeight=S.fw?"bold":"normal";R.textDecoration=(S.fun?"underline":"")+" "+(S.fst?"line-through":"");R.fontStyle=S.fit?"italic":"";R.color=S.fc;R.backgroundColor=S.bc;R.textAlign=S.alh;R.verticalAlign=S.alv;R.wordWrap=S.atw;R.direction=S.atd;var T=S.bts;R.border=S.borderStyle||(T?I("bts",T):"1px dotted");R.borderColor=S.borderColor||S.btc||"#e1e1e1";}mstrmojo.threshold.ThresholdRow=mstrmojo.declare(mstrmojo.Box,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.threshold.ThresholdRow",markupString:'<div id="{@id}" class="mstrmojo-thresholdRow cf {@cssClass}" style="{@cssText}" mstrAttach:click><div class="draggable-icon"></div><div class="container"></div><div class="previewWrap"><div class="preview"></div></div><div class="menu"></div><div class="delete"></div></div>',markupSlots:{containerNode:function F(){return this.domNode.children[1];},draggableNode:function H(){return this.domNode.firstChild;},previewNode:function F(){return this.domNode.children[2].firstChild;},menuNode:function F(){return this.domNode.children[3];},deleteNode:function L(){return this.domNode.children[4];}},threshold:undefined,idx:undefined,editor:undefined,model:undefined,lblIndex:undefined,chkBox:undefined,exprTree:undefined,postBuildRendering:function A(){this.destroyChildren(false);var R=this.threshold,S=this.model,T=this.previewNode.style,V=E.copy(R.fmt,E.clone(S.getGridValueFormat())),U=R.expr;J.call(this,R.rtp,R.rtxt,S.objectType);if(V){P(V,T);}this.destroyChildren(false);this.addChildren([{scriptClass:"mstrmojo.Label",alias:"lblIndex",text:this.idx+1},{scriptClass:"mstrmojo.threshold.ThresholdExprTree",alias:"exprTree",editor:this.editor,model:this.model,items:[U]}]);S.attachEventListener("selectedThresholdsChange",this.id,"onselectedThresholdsChange");return this._super();},onselectedThresholdsChange:function D(){},onclick:function Q(U){var S=this.editor,W=U.getTarget(),T=this,R=this.model,V=S.objectType===C;if(W===this.deleteNode){this.removeFromModel();}else{if(W===this.menuNode){var X=new mstrmojo.ui.menus.MenuConfig();X.hostId=this.id;X.hostElement=this.menuNode;X.isHostedWithin=false;X.addSubMenuItem(mstrmojo.desc(13788,"Apply to"),"",S.id,function(){var Y=new mstrmojo.ui.menus.MenuConfig();Y.addRadioMenuGroup(T.threshold.scope||1,G,[{value:1,text:V?mstrmojo.desc(14599,"Element Rows Only"):mstrmojo.desc(13789,"Metric Only")},{value:2,text:V?mstrmojo.desc(14600,"Subtotal Rows Only"):mstrmojo.desc(13790,"Subtotals Only")},{value:3,text:V?mstrmojo.desc(14601,"Elements and Subtotals"):mstrmojo.desc(13894,"Metric and Subtotals")}],"",T,true);return Y;});X.addMenuItem(mstrmojo.desc(2869,"Formatting"),"",function(){S.openPropertyPanel(T);});X.addMenuItem(mstrmojo.desc(3397,"Duplicate"),"",function(){R.duplicateThreshold(T.idx);});if(this.idx!==0){X.addMenuItem(mstrmojo.desc(7978,"Move Up"),"",function(){R.moveThreshold(T.idx,T.idx-1);});}else{X.addNonInteractiveMenuItem(mstrmojo.desc(7978,"Move Up"),"",true);}if(this.idx!==R.thresholds[R.metricId].length-1){X.addMenuItem(mstrmojo.desc(7979,"Move Down"),"",function(){R.moveThreshold(T.idx,T.idx+1);});}else{X.addNonInteractiveMenuItem(mstrmojo.desc(7979,"Move Down"),"",true);}X.addMenuItem(mstrmojo.desc(5893,"New Condition"),"",function(){T.exprTree.newCondition(null);});this.openPopup(X.newInstance());}else{if(W===this.previewNode||W===this.previewNode.firstChild){S.openPropertyPanel(this);}}}},removeFromModel:function K(){this.model.deleteThreshold(this.threshold);},onpropertyModelChange:function B(R){E.copy(R.threshold,E.clear(this.threshold));this.refresh();}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.css","mstrmojo.registry","mstrmojo.AjaxCall","mstrmojo.hash","mstrmojo.array","mstrmojo.Arr","mstrmojo.expr","mstrmojo.dom","mstrmojo.mstr.EnumDataType","mstrmojo.Label","mstrmojo.ListBase","mstrmojo._IsList","mstrmojo.WidgetDial","mstrmojo.Calendar","mstrmojo.DateTextBox","mstrmojo.mstr.EnumNodeDimty","mstrmojo.ValidationTextBox","mstrmojo.ui.CheckList","mstrmojo.ui._HasScroller","mstrmojo.ui.ColumnContainer","mstrmojo.elementHelper");var AQ=mstrmojo.css,AJ=mstrmojo.registry,M=mstrmojo.hash,c=mstrmojo.mstr.EnumDataType,K=mstrmojo.array,q=K.map,L=mstrmojo.Arr,AM=mstrmojo.expr,b=AM.ET,m=AM.ET2TP,AC=AM.ET2TGT,O=AM.FN,v=AM.FN_MRP,AK=AM.DTP,j=AM.DTP2FN_DTP,AF=mstrmojo.meta.TP,P=mstrmojo.meta.STP,AR=AM.TP,W=AM.STP,U=mstrmojo.elementHelper;var AX={};AX[b.AQ]={target:1,fm:1,fn:1,c0:1,c1:1};AX[b.AL]={target:1,fm:1,fn:1,c0:1};AX[b.AE]={target:1,fm:1,es:1};AX[b.AC]={target:1,fm:1,fm2:1,fm3:1,fn:1,c0:1,c1:1};AX[b.MQ]={target:1,fn:1,c0:1,c1:1,dmy:1};AX[b.MC]=AX[b.MQ];AX["*"]={target:1};var B={};B[b.MQ]={key:"metricFns",def:AM.METRIC_FNS};B[b.MC]={key:"metricFns",def:AM.METRIC_FNS};B[b.AQ]={key:"formFns",def:AM.FORM_FNS};B[b.AL]={key:"formFns",def:AM.FORM_FNS};B[b.AC]={key:"formFns",def:AM.FORM_FNS};B[b.AE]={key:"elemFns",def:AM.ELEM_FNS};var x=mstrmojo.desc(14084,"Select a filter option or a qualification."),w=mstrmojo.desc(14085,"Select one or more elements."),u=mstrmojo.desc(14086,"Select an operator."),t=mstrmojo.desc(14087,"Enter a value or select an attribute from the list."),s=mstrmojo.desc(14088,"Select an attribute form. When done, click ## button.").replace("##",'"√"'),r=mstrmojo.desc(14089,"Select a condition."),p=mstrmojo.desc(14090,"Enter a value or select a metric from the list.");var AI=0,AV=1;var H=mstrmojo.ui.ColumnContainer.prototype.updateColumnContainer;function F(Ac){var Ab=true,AY=Ac.model,AZ,Aa=AY&&AM.fnCstCount(AY.fn,AY.fnt);if(!AY){return ;}switch(AY.et){case b.AQ:case b.AL:case b.MQ:for(AZ=0;AZ<Aa;AZ++){Ab=Ab&&!Ac["invalid"+AZ];}break;}Ac.okBtn.set("visible",Ab&&!!AY.completed);}function J(){var AZ=this.parent,AY=((AZ&&AZ.cssText)||"").match(/height:\s*(\d*)px/);this.cssText=AY&&AY[0];}var Y="dummy",o={did:"idErr",v:"idErr",n:mstrmojo.desc(7929,"Error loading data."),t:Y,css:"unselectable"},A={did:"idWait",v:"idWait",n:mstrmojo.desc(2901,"Loading..."),t:Y,css:"unselectable"},AT={did:"idSelect",v:"idSelect",n:mstrmojo.desc(547,"Select"),t:Y,css:"unselectable"},AG={did:"idWait",v:"idQualification",n:mstrmojo.desc(5225,"Qualification"),t:Y,css:"unselectable"},a={did:"idAttribute",v:"idAttribute",n:mstrmojo.desc(518,"Attribute"),t:Y,css:"unselectable"},AB={did:"idMetric",v:"idMetric",n:mstrmojo.desc(517,"Metric"),t:Y,css:"unselectable"};function k(Aa){if(this.updating){return ;}var Ab=this.multiSelect,Ae=this.selectedItem,Ad=Aa&&Aa.added,Af=Aa&&Aa.removed;if(!Ab&&Ad&&Af&&Ad[0]===Af[0]){return ;}if(Ae&&Ae[AF]===Y){this.updating=true;if(Ab){this.removeSelect([this.selectedIndex]);}else{var AZ=Af&&Number(Af[0]);AZ=(AZ==null)?-1:AZ;this.set("selectedIndex",AZ);}this.updating=false;}else{var AY=this.parent.parent.parent.model;if(Ab){var Ac=this.items;AY.edit(this.alias,{added:Ad&&K.get(Ac,Ad),removed:Af&&K.get(Ac,Af),itemIdField:this.itemIdField});}else{AY.edit(this.alias,Ae);}}}mstrmojo.rw.ConditionList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.rw.ConditionList",allowUnlistedValues:true,itemIdField:"did",getItemProps:function AO(Ac,AY){var Ab=!!this.selectedIndices[AY],Ad=Ac.n,Aa=false;if(Ac.t===12){var AZ=K.filter(Ac.fs,function(Ae){return Ae.fgr>0;});if(AZ.length>0){Aa=true;}}return M.copy({cls:(Ab?mstrmojo._IsList.SELECTED_CLS:"")+" "+(Ac.css||"")+" "+(Ac.t?("t"+Ac.t+((Ac.da||Ac.um)?"d":"")+(Aa?"g":"")+(Ac.st?(" st"+Ac.st):"")):""),n:Ad||"&nbsp;"},this._super(Ac,AY));},onselectionChange:function n(AY){this._super(AY);k.call(this,AY);}});function AA(Aa,Ac,AZ){var Ab=Aa.items,AY=K.indexOf(Ab,Ac);if((AY===0)&&(Ab.length===1)){AZ=mstrmojo.Arr.makeObservable((AZ&&AZ.length)?AZ.concat():[]);Aa.set("items",AZ);}else{if(AY>-1){Ab.splice(AY,1);}if(AZ&&AZ.length){K.insert(Ab,(AY>-1)?AY:Ab.length,AZ);}Aa.refresh();}}function N(AY){return mstrmojo.mixin(AY,{scriptClass:"mstrmojo.rw.ConditionList",cssClass:"mstrmojo-"+AY.alias,postCreate:J});}function V(Aa,AY,Ab){var AZ=Aa.cfg;if(AZ){AZ.data=Aa;AZ.parent=Ab;return AJ.ref(AZ);}AZ=new mstrmojo.Label({text:Aa.n||"&nbsp;",cssClass:"dial-item "+(Aa.t?("t"+Aa.t):"")});AZ.markupMethods.onselectedChange=function(){AQ.toggleClass(this.domNode,["selected"],this.selected);};AZ.data=Aa;AZ.parent=Ab;return AZ;}function f(AZ,AY){var Aa=AY+AM.FN_SEP+AZ;return(AZ!=null)?{did:Aa,n:Aa}:null;}function AU(AY){return AY.targets?K.filter(AY.targets,function(AZ){return AZ[AF]===AM.TP.ATTR;}):[];}function Q(Aa,AZ,Ab,Ae){Aa.updating=true;if(AZ){if(Ab!=null){Aa.clearSelect();Aa.set("items",Ab);}var Ad=Aa.itemIdField,Ac=Aa.selectedItem;if((Ac&&Ac[Ad])!=(Ae&&Ae[Ad])){var AY=Math.max(K.indexOf(q((Ab||[]),function(Af){return Af[Ad];}),Ae&&Ae[Ad]),0);Aa.set("selectedIndex",AY);}}Aa.updating=false;}function AN(AY,AZ,Ab,Aa){AY.updating=true;AY.clearSelect();K.forEach(AZ,function(Ac){Ac.title=Ac.title||Ac.n||"";});if(AZ){AY.set("items",AZ);}if(Ab&&Ab.length){AY.setSelectedItems(Ab);}else{if(Aa&&Aa.length){AY.select(Aa);}}AY.updating=false;}function AE(AZ,AY,Aa,Ac,Ab){if(AY){AN(AZ,Aa,Ac,Ab);}}function AD(Aa,AZ){var AY=Aa.model||{},Ab=AY.fn;return(Ab!=null)&&((AY.et===b.MQ)||(AY.et===b.MC)||(AY.et===b.AQ)||(AY.et===b.AL)||(AY.et===b.AC))&&(AM.fnCstCount(Ab,AY.fnt)>AZ);}var e={};e[AK.DATE]=1;e[AK.TIME]=1;e[AK.TIMESTAMP]=1;function l(AY,Aa){var AZ;if(Aa){switch(AC[AY.et]){case"a":AZ=Aa[b.AC];break;case"m":AZ=Aa[b.MC];break;default:AZ=false;break;}}else{AZ=true;}return AZ&&AM.fn_AC_MC(AY&&AY.fn);}function i(AZ){var Ac=AZ&&m[AZ.et],Ab=AZ&&AZ.fm&&AZ.fm.dtp,AY=Ab&&AM.DTP2PROMPT_STP[Ab],Aa={};Aa[Ac]=true;if(AY){Aa[AY]=true;}return Aa;}function d(AY){switch(AY){case c.DataTypeInteger:case c.DataTypeUnsigned:case c.DataTypeDecimal:case c.DataTypeReal:case c.DataTypeDouble:case c.DataTypeFloat:return c.DataTypeNumeric;default:return AY;}}function C(AZ){var Ab=AZ.model,Ag=Ab&&Ab[AC[Ab.et]]&&Ab[AC[Ab.et]][AZ.columnWalk.target.itemIdField],Aa=Ab&&Ab.fm,AY=Aa&&Aa.dtp,Ad=l(Ab,AZ.ets);if(this.targetsLastMod&&this.targetsLastMod===AZ.targetsLastMod&&Ag&&Ag===this._lastTargetId&&this.lastFmDtp===AY&&this.lastFnTp===Ad){return ;}if(!Ad){this.clearSelect();this.set("items",this.items.slice(0,this.preLen));}else{var Ae=i(Ab),Ah=Ab[AC[Ab.et]],Ac=Ab.a?[a]:Ab.m?[AB]:[],Ai=Ac.concat(AM.getSortedObjectsByTypeGroup(K.filter(AZ.targets,function(Aj){return(Aj.t!==4||Aj.did!==Ah.did)&&(Ae[Aj[AF]]||Ae[Aj[P]]);}))),Af=this.items.slice(this.preLen);K.forEach(Af.reverse(),function(Aj){this.remove(Aj);},this);this.add(Ai,-1);}this._lastTargetId=Ag;this.lastFnTp=Ad;this.lastFmDtp=AY;this.targetsLastMod=AZ.targetsLastMod;}function AH(Ar,Ai){Ar.updating=true;var Ae=Ar.parent.parent.parent,Aq=AD(Ae,Ai),Ak,Am;if(Aq){var Aa=Ae.model||{},Ac=Aa.cs,Ao=Ac&&Ac[Ai],Ah=Ao&&Ao.v,Af;C.call(Ar,Ae);switch(Aa.et){case b.MQ:case b.MC:Af=(Ao&&Ao.dtp)||d(Aa.m.dt)||AM.METRIC_DTP;break;case b.AQ:case b.AC:case b.AE:Af=Aa.fm&&Aa.fm.dtp;break;case b.AL:Af=Aa.fm&&Aa.fm.dtp;Ah=[];for(Ak=0,Am=Ac&&Ac.length;Ak<Am;Ak++){Ah.push(Ac[Ak].v);}Ah=Ah.join(mstrConfig.listSep);break;}Af=Af||AK.CHAR;var Ad=Aa.fn,Aj=AM.fn_List(Ad,Aa.fnt),Al=e[Af],An=Al&&!Aj;var AZ=Ar.ctxtBuilder,AY=AZ&&AZ.itemWidgets,Ap=Al?(An?Ar.calIndex:Ar.dtxtIndex):Ar.txtIndex,Ab;for(Ak=0,Am=Ar.preLen;Ak<Am;Ak++){Ab=AY[Ak];if(Ak==Ap){Ab.set("dtp",Af);Ab.set("isList",Aj);Ab.set("value",Ah);Ab.set("visible",true);try{if(Ar.alias!=="c1"){Ab.focus&&Ab.focus();}}catch(Ag){}if(Ad===1||Ad===2){Ab.constraints.min=0;}if(Ab.clearValidation){Ab.clearValidation();}}else{Ab.set("visible",false);}if(Aj){Ab.set("hint",mstrmojo.desc(8191,"value1## value2## ...## valueN").replace(/##/g,mstrConfig.listSep||";"));}else{Ab.set("hint","");}}if(Ae.hasPrompt&&Ar.selectedItem&&Ar.selectedItem.st===AM.STP.PROMPT_STRING){Ae.invalid0=false;}switch(Aa.et){case b.AQ:case b.AL:case b.MQ:if(Ao&&Ao.p){Ar.set("selectedItem",Ao.p);}else{Ar.set("selectedIndex",Ap);}break;case b.MC:case b.AC:Ar.set("selectedItem",Aa[AC[Aa.et]+(2+Ai)]);break;}}Ar.updating=false;}function h(){var Ab=this.parent,AZ=Ab.parent.parent.parent,Aa=(this.isValid&&this.isValid())||(!this.isValid&&!mstrmojo.string.isEmpty(this.value)),AY=AZ.model;AZ["invalid"+Ab.cstIndex]=!Aa;if(!this.updating&&Aa){this.updating=true;if(AY){AY.edit(Ab.alias,{v:this.value,dtp:this.dtp});}this.updating=false;}F(AZ);}function AP(){var AZ=this.parent,AY=AZ.parent;AY["invalid"+AZ.cstIndex]=false;}function z(AY){this.tip.set("text",AY);}function D(Aa){var Ac=this.selectedItem;Aa=K.filter(Aa,function(Ad){return(!Ad.icf);});if(Ac){var AZ=K.find(Aa,this.itemIdField,Ac[this.itemIdField]);if(AZ>-1){Aa=Aa.concat();Aa.splice(AZ,1);}}AA(this,A,Aa);var Ab=this.items,AY=Ab.length;if(AY===1){this.singleSelect(0);}this.parent.updateScrollbars();}function I(AZ){var AY=[{did:660,cfg:{scriptClass:"mstrmojo.ValidationTextBox",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP|mstrmojo.validation.TRIGGER.VALUESET},onValid:h,onInvalid:h,onClearValidation:AP,size:6,visible:false}},{did:154,cfg:{scriptClass:"mstrmojo.Calendar",onvalueChange:h,visible:false}},{did:23,cfg:{scriptClass:"mstrmojo.DateTextBox",cssText:"margin-left:9px;",cssDisplay:"inline-block",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL},onValid:h,onInvalid:h,onClearValidation:AP,calendarToBody:true,autoFormat:false,calConfig:{onmousedown:function(Aa){mstrmojo.dom.stopPropogation(Aa.hWin,Aa.e);}},visible:false}}];return N(M.copy(AZ,{scriptClass:"mstrmojo.WidgetDial",makeObservable:true,itemFunction:V,selectionPolicy:"reselect",items:AY.concat(),txtIndex:0,calIndex:2,dtxtIndex:2,preLen:AY.length,insertUnlistedValuesAt:-1,itemIdField:"did",update:function(){AH(this,this.cstIndex);this.parent.updateScrollbars();},postCreate:function(){this._super();this.parent.parent.parent.attachEventListener("updateTargets",this.id,function(){this.update();});},itemsEffect:undefined,onchange:k}));}function G(AY){return N(M.copy(AY,{insertUnlistedValuesAt:-1,postCreate:function(){J.apply(this,[]);this.ajx=mstrmojo.insert({parent:this,scriptClass:"mstrmojo.AjaxCall",isTask:true,readCache:true,writeCache:true,params:{taskId:"getAttributeForms",attributeId:null,displayedForms:"0",styleName:"MojoAttributeStyle"},onsuccess:function(){var Aa=this.parent,AZ=this.response;if((AZ&&AZ.did)!==Aa.lastAttrId){return ;}D.call(this.parent,AZ.fms||[]);},onerr:function(){AA(this.parent,A,[o]);}});},update:function(){var Aj=this.fmPost,Ab=this.parent.parent.parent,Ad=Ab.model,Ai=Ad&&Ad["a"+Aj],Ag=!!Ai,Ac,Af,Ak,Aa=Ab.disableElementsBrowsing,AZ=Ai&&Aa&&Aa(Ai);if(Ag){switch(Ad.et){case b.AQ:case b.AL:Af=Ad.fm;break;case b.AC:Af=Ad["fm"+Aj];break;case b.AE:Af=f(Ad.fn,1);break;}if(this.lastAttrId!==Ai.did){this.lastAttrId=Ai.did;Ac=[];if(this.isFirstFm){if(!AZ&&(!Ai.ilk&&(!Ab.ets||Ab.ets[b.AE]))){Ac.push(AT);var Ae=B[b.AE],Ah=Ae&&Ae.key;Ac=Ac.concat((Ah&&Ab[Ah])||Ae.def||[]);}Ac.push(AG);}if(Af&&(Ad.et!==b.AE)){Ac.push(Af);}Ak=this.ajx;Ak.params.attributeId=Ai.did;Ak.params.otp=Ai.t||12;Ac.push(A);L.makeObservable(Ac);}}if(AZ&&Ad.et===b.AE){Af=null;}Q(this,Ag,Ac,Af);if(Ag&&Ak){if(Ab.getAttributeForms){D.call(this,Ab.getAttributeForms(Ai.did)||[]);}else{if(Ai.fms){D.call(this,Ai.fms);}else{if(Ak){if(Ak._delayId){window.clearTimeout(Ak._delayId);delete Ak._delayId;}Ak._delayId=window.setTimeout(function(){delete Ak._delayId;Ak.send();},500);}}}}}}));}var y=[AM.STP.PROMPT,AM.STP.PROMPT_OBJECTS,AM.STP.PROMPT_ELEMENTS,AM.STP.PROMPT_EXPRESSION,AM.STP.PROMPT_EXPRESSION_DRAFT];function Z(AY){if(AY&&!M.isEmpty(AY)){var AZ=K.hash(y);M.forEach(AY,function(Ab,Aa){if(Ab){AZ[m[Aa]]=true;}});return AZ;}return null;}mstrmojo.rw.ConditionWalkProvider=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.rw.ConditionWalkProvider",browseEs:function S(Ab,Aa,Ad){Ab.openPopup("eb",{zIndex:Ab.parent.zIndex+10,left:Math.round(Ad.x)+"px",top:Math.round(Ad.y)+"px"});var AZ=Ab.eb.browser,AY=Ab.model,Ac=AY&&AY.a&&AY.a.did;if(!Ac){return ;}AZ.set("attributeID",Ac);AZ.set("selectedItems",AY.es?M.clone(AY.es):[]);AZ.initBrowser();},browseObjs:function AS(Af,AY,AZ){Af.openPopup("ob",{zIndex:Af.parent.zIndex+10,left:Math.round(AZ.x)+"px",top:Math.round(AZ.y)+"px"});var Aa=Af.ob.browser;Aa.target=AY;var Ab;switch(AY.alias){case"dmy":Ab=[AM.TP.ATTR,AM.TP.DIM];break;case"c0":case"c1":var Ad=Af.model,Ac=Ad&&Ad.et,Ag=Ad&&Ad.fm,Ae=Ag&&Ag.dtp||(Ad.m?AM.DTP.DECIMAL:AM.DTP.UNKNOWN);Ab=(Ac===b.MQ||Ac===b.MC)?[AM.TP.METRIC,AM.DTP2PROMPT_STP[Ae]]:[AM.TP.ATTR,AM.DTP2PROMPT_STP[Ae]];break;default:Ab=Z(Af.ets);Ab=Ab?M.keyarray(Ab,true):[AM.TP.ATTR,AM.TP.METRIC,AM.STP.REPORT_GRID,AM.STP.REPORT_GRAPH,AM.STP.REPORT_ENGINE,AM.STP.REPORT_TEXT,AM.STP.REPORT_DATAMART,AM.STP.REPORT_BASE,AM.STP.REPORT_GRIDGRAPH,AM.STP.REPORT_NONINTERACTIVE,AM.STP.FILTER].concat(y);}Ab[Ab.length]=AM.TP.FOLDER;Aa.browse({rootFolderType:Ad&&(Ad.et===b.MQ||Ad.et===b.MC)?5:26,folderLinksContextId:33,onSelectCB:[Af,"onOBSelect"],browsableTypes:Ab.join(",")});},getFm2NodeProps:function AL(){return{alias:"fm2",children:[G({alias:"fm2",fmPost:2})],updateColumnContainer:function AY(){var AZ=this.parent.parent;this.fm2.update();z.call(AZ,s);H.call(this);}};},getC0NodeProps:function E(){var AY=this;return{alias:"c0",children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(527,"Value")},I({alias:"c0",cstIndex:0}),{scriptClass:"mstrmojo.Label",alias:"btwn",cssClass:"btwn",text:mstrmojo.desc(308,"and"),visible:false},I({alias:"c1",cstIndex:1,visible:false}),{alias:"browseLink",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7926,"Browse..."),onclick:function(){this.parent.parent.parent.browse(this.parent.c0);},visible:false}],updateColumnContainer:function AZ(){this.c0.update();var Ac=this.parent,Ae=Ac.parent,Af=Ac.parent.model,Ah=Af&&Af.fn,Ad=Ah===O.BETWEEN||Ah===O.NOT_BETWEEN||Ah===v.BETWEEN||Ah===v.BETWEEN_DESCENDING,Ab=Ah===O.EQUAL||Ah===O.NOT_EQUAL||Ah===O.GREATER||Ah===O.GREATER_EQUAL||Ah===O.LESS||Ah===O.LESS_EQUAL,Aa=this.idx,Ag=this.next;this.browseLink.set("visible",Ae.objectBrowsingEnabled&&l(Af,Ae.ets));this.btwn.set("visible",Ad);this.c1.set("visible",Ad);if(Ad){this.c1.update();}else{Af.edit("c1",{v:null,dtp:null,skipET:true});}if(Af.a2&&Ab){if(!(Ag&&Ag.fm2)){Ac.insertAndRemoveTrailing(Aa,AY.getFm2NodeProps());}}else{Ac.removeTrailingContainer(Aa);}z.call(Ae,Af.a?t:Af.m?p:"");H.call(this);}};},getFnNodeProps:function AW(){var AY=this;return{alias:"fn",children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(9579,"Condition")},G({alias:"fn",allowUnlistedValues:false,update:function(){var Af=this.parent.parent.parent,Ab=Af.model||{},Ag=Ab.et,Ae,Ah=false,Ai,Aa;switch(Ag){case b.AE:Ah=!!Ab.a;break;case b.AQ:case b.AC:case b.AL:Ah=!!(Ab.fm&&Ab.fm.did);Ae=Ah?Ab.fm.dtp:null;break;case b.MQ:case b.MC:Ah=!!Ab.m;Ae=Ah?AM.METRIC_DTP:null;break;}if(Ah){var Aj=j[Ae];if((this.lastEt!==Ag)||(this.lastFnDtp!==Aj)){this.lastEt=Ag;this.lastFnDtp=Aj;var Ad=Ag?B[Ag]:null,Ac=Ad&&Ad.key;Ai=(Ac&&Af[Ac])||Ad.def||[];if(typeof (Ai)==="object"){Ai=Ai[Aj]||Ai["*"];}}Aa=f(Ab.fn,Ab.fnt||1);}Q(this,Ah,Ai,Aa);this.parent.updateScrollbars();}})],updateColumnContainer:function AZ(){this.fn.update();var Aa=this.parent,Ab=Aa.parent,Ac=Ab.model,Ae=Ac&&Ac.fn,Ad=this.next,Af=Ae===O.IS_NULL||Ae===O.IS_NOT_NULL;if(Ae&&Af){Aa.removeTrailingContainer(this.idx);}else{if(Ae&&!(Ad&&Ad.c0)){Aa.insertAndRemoveTrailing(this.idx,AY.getC0NodeProps());}}z.call(Ab,Ac.a?u:Ac.m?r:"");Ad=this.next;if(Ad){Ad.updateColumnContainer();}}};},getEsNodeProps:function T(){var Aa=[{scriptClass:"mstrmojo.ui.CheckList",alias:"es",itemIdField:"v",allowUnlistedValues:true,insertUnlistedValuesAt:0,selectionPolicy:"toggle",postCreate:function AZ(){J.apply(this,[]);this.ajx=mstrmojo.insert({parent:this,scriptClass:"mstrmojo.AjaxCall",isTask:true,params:{taskId:"browseElements",attributeID:null,styleName:"MojoAttributeStyle",blockBegin:1,blockCount:mstrApp.elementsBlockCount||30},onsuccess:function(){var Al=this.parent,Af=this.response;if((Af&&Af.did)!==Al.lastAttrId){return ;}var Ah=(Af&&Af.es)?K.filter(Af.es,function(Am){return !U.isNullElem(Am.v);}):[],Ak=Al.parent.parent.parent.model&&Al.parent.parent.parent.model.es,Ai=function(As,An){var Ar=As&&As.length||0,Aq=An&&An.length||0,Am=[],Ap,Ao;for(Ap=0;Ap<Aq;Ap++){for(Ao=0;Ao<Ar;Ao++){if(An[Ap].n===As[Ao].n){break;}}if(Ao===Ar){Am.push(An[Ap]);}}return Am;},Aj=function(Am,An,Aq){var Ap=[],Ao;K.forEach(Am,function(Ar){Ao=K.filterOne(An,function(As){return Ar[Aq]&&As[Aq]&&Ar[Aq]===As[Aq];});if(Ao){Ap.push(Ao);}});return Ap.length===Am.length?Ap:Am;};Ak=Ak&&Aj(Ak,Ah,"v");if(Al.allowUnlistedValues){var Ag=Ai(Ah,Ak);Ah=(Al.insertUnlistedValuesAt===0)?Ag.concat(Ah):Ah.concat(Ag);}AN(Al,Ah,Ak,null);Al.parent.updateScrollbars();},onerr:function(){AA(this.parent,A,[o]);}});},onselectionChange:function Ad(Af){mstrmojo.ListBase.prototype.onselectionChange.call(this,Af);k.call(this,Af);},update:function Ac(){var Ai=this.parent.parent.parent,Ah=Ai.model,Am=Ah&&Ah.a,An=!!Am&&!Am.ilk,Ao,Af,Al,Aj,Ag,Ap;if(An){if(this.lastAttrId!==Am.did){this.lastAttrId=Am.did;Ao=Ah.es;Aj=Ao&&Ao.length;Ao=Aj?Ao.concat():[];Ao.push(A);if(Aj){Al=[];for(Ag=1;Ag<=Aj;Ag++){Al[Ag]=Ag;}}Ap=this.ajx;Ai.updateBrowseElementsParams(Ap.params,Am);}else{Af=Ah.es;}}AE(this,An,Ao,Af,Al);if(An&&Ap){if(Ai.getElements){var Ak=this;Ai.getElements(Am,{success:function(Aq){AN(Ak,Aq.es||[],Ai.model&&Ai.model.es,null);Ak.parent.updateScrollbars();},failure:function(){AA(Ak,A,[o]);}});}else{Ap.send();}}},setupScrollNodes:function Ab(){this.scrollNode=null;}}];if(!mstrApp.isSingleTier){Aa.splice(0,0,{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7928,"Browse elements..."),onclick:function AY(){this.parent.parent.parent.browse(this.parent.es);}});}return{alias:"es",children:Aa,updateList:function(Af){AE(this.es,true,Af,this.parent.parent.model.es,null);this.updateScrollbars();},updateColumnContainer:function Ae(){var Af=this.parent.parent;this.es.update();z.call(Af,w);}};},getFmNodeProps:function g(){var AY=this;return{alias:"fm",children:[G({alias:"fm",fmPost:"",filter:false,isFirstFm:true})],updateColumnContainer:function AZ(){this.fm.update();var Aj=this.parent,Ae=Aj.parent,Ad=Ae.model,Ag=Ad&&Ad.fm,Ai=this.idx,Ah=Ad&&Ad.a,Ab=Ae.disableElementsBrowsing,Aa=Ah&&Ab&&Ab(Ah);var Af=(Ad.etWas&&Ad.etWas===b.AE)?AV:AI,Ac=AI;if(Ad.et===b.AE&&!Aa){Ac=AV;}if(Af!==Ac||Ac===AI){Aj.removeTrailingContainer(Ai);if(Ac===AI&&Ag){Aj.addNextColumn(AY.getFnNodeProps());}else{if(Ac===AV){Aj.addNextColumn(AY.getEsNodeProps());}}}z.call(Ae,x);H.call(this);}};},getTargetNodeProps:function R(){var AY=this;return{alias:"target",target:null,browseLink:null,children:[{scriptClass:"mstrmojo.Label",cssClass:"baseOn",text:mstrmojo.desc(11859,"Based On")},N({alias:"target",insertUnlistedValuesAt:0,makeObservable:true,hideIfEmpty:true,postCreate:function(){this._super();this.parent.parent.parent.attachEventListener("updateTargets",this.id,function(){this.update();});},onObjBrowsed:function(Ab){if(Ab.st===W.FILTER||Ab.t===AR.REPORT||Ab.t===AR.PROMPT){this.parent.parent.parent.onOK();}},update:function Aa(){var Ac=this.parent.parent.parent,Ad=Ac.model,Ag=Ac.targetsLastMod,Ah=Ad&&Ad.et;if(this.lastModel!==Ad||this.targetsLastMod!==Ag){this.lastModel=Ad;this.targetsLastMod=Ag;var Ab=Ac.targets,Ai=Ac.ets;if(Ai&&Ab&&Ab.length){var Af=Z(Ac.ets);Ab=K.filter(Ab,function(Aj){return Af[Aj[AF]];});}var Ae=Ad&&Ad[AC[Ah]];Q(this,true,AM.getSortedObjectsByTypeGroup(Ab),Ae);this.parent.updateScrollbars();}}}),{alias:"browseLink",scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-walkstep-browse",text:mstrmojo.desc(7926,"Browse..."),onclick:function(){this.parent.parent.parent.browse(this.parent.target);}}],updateColumnContainer:function AZ(){this.target.update();var Ac=this.parent,Ad=Ac.parent,Ae=Ad.model,Ag=Ae&&Ae.et,Ab=this.idx,Af=this.next;this.browseLink.set("visible",Ad.objectBrowsingEnabled);if(Ag){switch(Ag){case b.AQ:case b.AL:case b.AC:case b.AE:if(Ae.a&&!(Af&&Af.fm)){this.parent.insertAndRemoveTrailing(Ab,AY.getFmNodeProps());}break;case b.MQ:case b.MC:if(Ae.m&&!(Af&&Af.fn)){this.parent.insertAndRemoveTrailing(Ab,AY.getFnNodeProps());}break;case b.R:case b.F:case b.XML:this.parent.removeTrailingContainer(Ab);break;}}Af=this.next;if(Af){Af.updateColumnContainer();}}};}});var X=mstrmojo.rw.ConditionWalkProvider;X.updateOkBtn=F;X.setTip=z;X.getChildJSON=N;X.updateList=Q;X.fmJson=G;X.cstJson=I;}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.ValidationTextBox","mstrmojo.hash","mstrmojo.array","mstrmojo.ValidationTextBox","mstrmojo.expr");var K=mstrmojo.emptyFn,B=mstrmojo.hash,H=mstrmojo.array,I=mstrmojo.expr.DTP,F={FILL_COLOR:"Clr",FILL_TRANSPARENT:"FillTrans"},C=1,J=2;function N(T,Q,P,S,R){return{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",alias:"fillColor",slot:T,showNoFill:S!==false,showAutomatic:!!R,showGradient:P!==false,selectedValue:"#000000",isHostedWithin:Q||false,postselectedValueChange:function(U){if(this.propName&&this.parent&&this.parent.parent){this.parent.parent.raiseFormatValueChange(this.propName,U.value,U.valueWas);}},postclick:function(U){this.parent.parent.postclick(U);}};}function O(Q){return{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"fillAlpha",slot:Q,col1Width:"100%",col2Width:"10px",children:[{scriptClass:"mstrmojo.ui.editors.controls.ValidationTextBox",alias:"fillAlphaText",slot:"col1Node",value:"100",cssText:"text-align:right",dtp:I.INTEGER,required:true,constraints:{min:0,max:100},onvalueChange:function(R){this.valueWas=R.valueWas;},onValid:function P(){if(this.propName&&this.value!==this.valueWas){this.parent.parent.parent.raiseFormatValueChange(this.propName,this.value,this.valueWas);}},postclick:function(R){this.parent.parent.parent.postclick(R);}},{scriptClass:"mstrmojo.Label",slot:"col2Node",text:"%"}]};}mstrmojo.ui.editors.controls.FillConfigGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.ui.editors.controls.FillConfigGroup",propNames:undefined,postclick:K,visibleControls:C+J,fillColorAndTrans:undefined,init:function M(T){this._super(T);var Q=[],W="col1Node",R=T&&T.colorPickerHostWithin,P=T&&T.showGradient,V=T&&T.showNoFill,S=T&&T.showAutomaticInColor,U;if((this.visibleControls&C)>0){Q.push(N(W,R,P,V,S));W="col2Node";}if((this.visibleControls&J)>0){Q.push(O(W));}if(Q.length===1){U={col1Width:"100%",dividerWidth:"0",col2Width:"0"};}this.addChildren([B.copy(U,{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"fillColorAndTrans",children:Q})]);},getChildComp:function L(P){if(P.indexOf(F.FILL_COLOR)!==-1){return this.fillColorAndTrans.fillColor;}if(P.indexOf(F.FILL_TRANSPARENT)!==-1){return this.fillColorAndTrans.fillAlpha.fillAlphaText;}return undefined;},iniChildrenComp:function E(P){this.propNames=P;H.forEach(P,function(R){var Q=this.getChildComp(R);if(Q!==undefined){Q.propName=R;}},this);},setChildValue:function D(Q,R){var P=this.getChildComp(Q);if(P===undefined){return false;}switch(P.alias){case"fillColor":if(R!==P.selectedValue){P.set("selectedValue",R==="undefined"?"conflict":R);}break;case"fillAlphaText":if(R!==P.value){P.set("value",R==="undefined"?"":R);}break;}},setChildEnable:function G(R,Q){var P=this.getChildComp(R);if(P!==undefined){P.set("enabled",Q);}},setChildrenValue:function A(P){P.forEach(function(Q){this.setChildValue(Q[0],Q[1]);});}});mstrmojo.ui.editors.controls.FillConfigGroup.CTRL_FLAGS={FILL_COLOR:C,FILL_TRANSPARENCY:J};}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.array","mstrmojo.hash","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.LineStyleButton");var L=mstrmojo.emptyFn,I=mstrmojo.array,C=mstrmojo.hash,E=mstrmojo.gm.EnumCombinedLineStyle;var J={LINE_COLOR:"Clr",LINE_STYLE:"Style"},A={"1pt solid":E.THIN,"2pt solid":E.THICK,"1pt dashed":E.DASHED,"1pt dotted":E.DOTTED,none:E.NONE};function D(P,O){return C.copy(O,{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",alias:"lineColor",slot:P,selectedValue:"#000000",postselectedValueChange:function(Q){if(this.propName){this.parent.parent.raiseFormatValueChange(this.propName,Q.value,Q.valueWas);}},postclick:function(Q){this.parent.parent.postclick(Q);}});}function K(P){return{scriptClass:"mstrmojo.ui.editors.controls.LineStyleButton",showThickOption:true,showNoneOption:true,defaultSelectedIndex:3,propName:undefined,alias:"lineStyle",slot:P,postInit:function O(){var Q=["mstrmojo-ui-LineStyle"];if(!this.showNoneOption){Q.push("no-none");}mstrmojo.css.addWidgetCssClass(this,Q);(this.list.items||[]).forEach(function(R){R.v=(A[R.id]!==undefined?A[R.id]:A["not defined"]);});},onshowNoneOptionChange:function(Q){var R=["no-none"];if(!Q.value){mstrmojo.css.addWidgetCssClass(this,R);}else{mstrmojo.css.removeWidgetCssClass(this,R);}var S=this.hasRendered;if(S){this.refresh();}},postselectedValueChange:function(R){this._super();var Q=I.find(this.list.items,"id",R.value);if(Q===-1){Q=this.defaultSelectedIndex;}var S=this.list.items[Q].v;if(this.propName){this.parent.parent.setChildEnable(J.LINE_COLOR,S!==A.none);this.parent.parent.raiseFormatValueChange(this.propName,S,A[R.valueWas]);}},postclick:function(Q){this.parent.parent.postclick(Q);}};}mstrmojo.ui.editors.controls.LineConfigGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.ui.editors.controls.LineConfigGroup",propNames:undefined,postclick:L,hideColorControl:false,showGradient:false,showNoFillInColor:true,showAutomaticInColor:false,showNoneOption:true,lineColorAndStyle:undefined,lineTitle:undefined,init:function N(Q){this._super(Q);var O=[],R;O.push(K("col1Node"));if(!this.hideColorControl){O.push(D("col2Node",{showGradient:this.showGradient,showNoFill:this.showNoFillInColor,showAutomatic:this.showAutomaticInColor}));}else{R={col1Width:"100%",dividerWidth:"0",col2Width:"0"};}var P=[];if(this.lineTitle&&this.lineTitle!==""){P.push(new mstrmojo.Label({text:this.lineTitle}));}P.push(C.copy(R,{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:"lineColorAndStyle",children:O}));this.addChildren(P);},getChildComp:function M(O){if(O.indexOf(J.LINE_COLOR)!==-1){return this.lineColorAndStyle.lineColor;}if(O.indexOf(J.LINE_STYLE)!==-1){return this.lineColorAndStyle.lineStyle;}return null;},iniChildrenComp:function G(P){I.forEach(P,function(R){var Q=this.getChildComp(R);if(Q!==undefined){Q.propName=R;}},this);var O=this.lineColorAndStyle.lineStyle;O.showNoneOption=this.showNoneOption;O.postInit();},onshowNoneOptionChange:function(O){this.lineColorAndStyle.lineStyle.set("showNoneOption",O.value);},setChildValue:function F(Q,R){var O=this.getChildComp(Q);if(O===undefined){return false;}var P;switch(O.alias){case"lineColor":if(R!==O.selectedValue){O.set("selectedValue",typeof R==="undefined"?"conflict":R);}break;case"lineStyle":if(typeof R==="undefined"){O.list.clearSelect();this.syncControls(function(){O.set("selectedValue","conflict");});}else{P=I.find(O.list.items,"v",R);if(P===-1){P=O.defaultSelectedIndex;}var S=O.list.items[P].id;if(S!==O.selectedValue){O.set("selectedValue",S);}}break;}},setChildEnable:function H(Q,P){var O=this.getChildComp(Q);if(O!==undefined){O.set("enabled",P);}},setChildrenValue:function B(O){O.forEach(function(P){this.setChildValue(P[0],P[1]);});}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.Pulldown","mstrmojo.ui.ButtonBar","mstrmojo.ui.editors.controls.ComboBox","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.NumGroupStepperContentProvider","mstrmojo._FormatDefinition","mstrmojo.models.FormatModel");var F=mstrmojo._FormatDefinition,R=mstrmojo.models.FormatModel,J=R.ENUM_PROPERTY_NAMES,I=1,E=2,N=4,C=8,H=16;var P;var K;var G={bold:J.FONT_WEIGHT,italic:J.FONT_STYLE,underline:J.UNDERLINE,strikeout:J.LINE_THROUGH};function B(S){return(S&H)>0;}function Q(T){var W=J.FONT_FAMILY,S=T[W]||R.getFormatBlockValue(T,W),U=this.hcgControls.fontFamily;if(S===-1){var V=U&&U.list;if(!V){return ;}V.clearSelect();delete U.selectedIndex;if(U.hasRendered){U.refresh();}}else{U.set("selectedIndex",Math.max(K.map(function(X){return X.n;}).indexOf(S)));}}function O(S){var T=[],U=function(X,Y,V){var W=S[X];if(W===undefined){W=R.getFormatBlockValue(S,X);}if(W){T.push(V);}};U(J.FONT_WEIGHT,"bold",0);U(J.FONT_STYLE,"italic",1);U(J.UNDERLINE,"underline",2);U(J.LINE_THROUGH,"line-through",3);this.hcgControls.fontStyle.select(T);}function L(S){var Y=this.hcgControls,V=J.FONT_SIZE,T=J.COLOR,X=S[V]||R.getFormatBlockValue(S,V),U=Y.fontSize;var W=S[T];if(typeof W==="undefined"||W===null){W=R.getFormatBlockValue(S,T);}if(typeof W==="undefined"||W===null){W="";}if(B(this.visibleControls)){if(X.length){U.provider.set("curValGroup",X);}}else{if(X===-1){U.list.clearSelect();U.selectedValue="";U.updatePreview();}else{U.set("selectedValue",X?(parseInt(X,10)).toString():U.items[0].n);}}Y.fontColor.set("selectedValue",W===""?"conflict":R.decodeValue(J.COLOR,W));}function M(){if(P&&K){return ;}P=F.SizesInVI.map(function(S){return{idx:parseInt(S.n,10),n:S.n};});K=mstrmojo._FormatDefinition.Families.slice(1).map(function(S){return{n:S.n,id:S.n};});}mstrmojo.ui.editors.controls._HasCharacterGroup=mstrmojo.provide("mstrmojo.ui.editors.controls._HasCharacterGroup",{_mixinName:"mstrmojo.ui.editors.controls._HasCharacterGroup",visibleControls:I+E+N,showNoFillInColor:true,hcgControls:null,getHCGControls:function D(U){M();var T=this.hcgControls={},S=this.visibleControls;if((S&I)>0){T.fontFamily=mstrmojo.ui.Pulldown.newPulldown(K,function(W,X){U(J.FONT_FAMILY,W.id,X&&X.id);},0,{isHostedWithin:false});}if((S&E)>0||(S&C)>0){var V=T.fontStyle=new mstrmojo.ui.ButtonBar({multiSelect:true,items:[{n:mstrmojo.desc(2718,"Bold"),id:"b",css:"bold"},{n:mstrmojo.desc(2719,"Italic"),id:"i",css:"italic"},{n:mstrmojo.desc(2720,"Underline"),id:"u",css:"underline"},{n:mstrmojo.desc(3062,"Strikeout"),id:"s",css:"strikeout"}],postselectionChange:function(W){var Y=W.added,Z=this.items[Y?Y[0]:W.removed[0]],X=!!Y;if(Z){U(G[Z.css],X,!X);}}});if((S&C)>0){V.items.pop();}}if((S&N)>0){T.fontSize=B(S)?new mstrmojo.ui.editors.controls.Stepper({provider:new mstrmojo.NumGroupStepperContentProvider({item:{interval:1},curValGroup:[],min:Math.min.apply(Math,P.map(function(W){return W.idx;})),max:Math.max.apply(Math,P.map(function(W){return W.idx;})),container:this,onTraverse:function(){var W=this.container.fontSize;if(W._sync){return ;}this.container.raiseFormatValueChange(J.FONT_SIZE,W.provider.getValGroup());},oncurValGroupChange:function(){var W=this.container.fontSize;if(W.textNode){W.updateDisplayText();}}})}):new mstrmojo.ui.editors.controls.ComboBox({selectedValue:"10",items:P,isHostedWithin:false,validateTextInput:function(W){return(/^[0-9]+(pt)?$/.test(W));},updateSelection:function(){this.set("selectedValue",parseInt(this.txtLabel.value,10).toString());},postselectedValueChange:function(W){U(J.FONT_SIZE,parseInt(W.value,10)+"pt",parseInt(W.valueWas,10)+"pt");}});T.fontColor=new mstrmojo.ui.editors.controls.ColorPickerButton({showGradient:false,showNoFill:this.showNoFillInColor,selectedValue:"#000000",postselectedValueChange:function(W){U(J.COLOR,W.value,W.valueWas);}});}return T;},setFormatSource:function A(S){var T=this;this.syncControls(function(){var U=this.visibleControls;if((U&I)>0){Q.call(T,S);}if((U&E)>0||(U&C)>0){O.call(T,S);}if((U&N)>0){L.call(T,S);}});}});mstrmojo.ui.editors.controls._HasCharacterGroup.CTRL_FLAGS={FONT_FAMILY:I,FONT_STYLE:E,FONT_SIZE_AND_COLOR:N,FONT_STYLE_NO_STRIKEOUT:C,FONT_SIZE_USE_STEPPER:H};mstrmojo.ui.editors.controls._HasCharacterGroup.ControlsType=null;}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.Label","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.ui.editors.controls.LineStyleButton","mstrmojo.color","mstrmojo.hash","mstrmojo.models.FormatModel");var N=mstrmojo.color,K="fillColor",C="border",B=1,I=2,D=mstrmojo.models.FormatModel,H=D.ENUM_PROPERTY_NAMES,E=H.BACKGROUND_COLOR,A={all:{c:H.BORDER_COLOR,s:H.BORDER_STYLE},top:{c:H.BORDER_TOP_COLOR,s:H.BORDER_TOP_STYLE},right:{c:H.BORDER_RIGHT_COLOR,s:H.BORDER_RIGHT_STYLE},bottom:{c:H.BORDER_BOTTOM_COLOR,s:H.BORDER_BOTTOM_STYLE},left:{c:H.BORDER_LEFT_COLOR,s:H.BORDER_LEFT_STYLE}};function G(Q,O){O.forEach(function(S,R){S.slot="col"+(R+1)+"Node";});var P=this.secondColumnWidth;return{scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",alias:Q,col1Width:(100-P)+"%",col2Width:P+"%",children:O};}function J(Q,O,P){return mstrmojo.hash.copy(P,{scriptClass:"mstrmojo.ui.editors.controls.ColorPickerButton",showGradient:!!O,postselectedValueChange:function(R){this.parent.parent.raiseFormatValueChange(Q,R.value,R.valueWas);}});}function F(R){var Q="transparent",O="none",P;if(R){P=R.indexOf("#");if(P===-1){P=R.indexOf(Q);}}if(!isNaN(P)&&P>-1){O=R.substr(0,P-1);Q=N.fixFullHexValue(R.substr(P));}else{O=R;}if(O.indexOf("none")>-1){O="none";}return{s:O,c:Q};}mstrmojo.ui.editors.controls.ContainerGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,null,{scriptClass:"mstrmojo.ui.editors.controls.ContainerGroup",borderTitle:mstrmojo.desc(13631,"Outer border:"),showThickBorderStyle:true,showBackgroundNoFill:true,showBorderNoFill:true,visibleControls:B+I,targetBorder:"all",secondColumnWidth:60,init:function L(R){this._super(R);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-EditContainer");var Q=[],P=this.visibleControls,O=A[this.targetBorder];if((P&B)>0){Q.push(G.call(this,K,[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7993,"Fill color:")},J(E,true,{showNoFill:this.showBackgroundNoFill})]));}if((P&I)>0){Q.push(new mstrmojo.Label({text:this.borderTitle}));Q.push(G.call(this,C,[{scriptClass:"mstrmojo.ui.editors.controls.LineStyleButton",showThickOption:this.showThickBorderStyle,postselectedValueChange:function(S){var T=this.parent.parent;T.raiseFormatValueChange(O.s,S.value,S.valueWas);T[C].getControl(2).set("enabled",S.value!=="none");}},J(O.c,false,{showNoFill:this.showBorderNoFill})]));}this.addChildren(Q);},setFormatSource:function M(P){var O=this[K],S=this[C],R=this.targetBorder,Q=A[R];if(R==="all"){Q=A.top;}this.syncControls(function(){if(O){var V=D.getGradientValues(P),Y;if(!V){if(P[H.FILL_STYLE]===1){Y="transparent";}else{var U=P[E];if(typeof U==="undefined"||U===null){U=P["background-color"];}if(typeof U==="undefined"||U===null){U=-1;}Y=D.decodeValue(E,U);}}O.getControl(2).set("selectedValue",V||Y);}if(S){var W=P.border;if(!W){if(typeof (P.borderStyle)!=="undefined"&&P.borderStyle!==null){W=typeof (P.borderStyle)==="string"?P.borderStyle:D.decodeValue("borderStyle",P.borderStyle);}else{W=D.decodeValue(Q.s,P[Q.s]);}if(typeof P.borderColor!=="undefined"&&P.borderColor!==null){W+=" "+D.decodeValue("borderColor",P.borderColor);}else{if(typeof P[Q.c]!=="undefined"&&P[Q.c]!==null){W+=" "+D.decodeValue(Q.c,P[Q.c]);}else{W+=" "+D.decodeValue(Q.c,-1);}}}var X=F(W),T=S.getControl(2);S.getControl(1).set("selectedValue",X.s);T.set("enabled",X.s!=="none");T.set("selectedValue",X.c);}});}});mstrmojo.ui.editors.controls.ContainerGroup.CTRL_FLAGS={FILL_COLOR:B,BORDER:I};}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._HasMarkup","mstrmojo.ui.menus._HasMenuPopup","mstrmojo.dom","mstrmojo.ui.editors.controls.ColorPickerButton","mstrmojo.css");var E=mstrmojo.css,F=mstrmojo.dom;mstrmojo.threshold.ColorBand=mstrmojo.declare(mstrmojo.ui.editors.controls.ColorPickerButton,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.threshold.ColorBand",hovered:false,selected:false,index:undefined,showGradient:false,showNoFill:false,markupString:'<div class = "color-band mstrmojo-ui-PreviewButton {@cssClass}" id="{@id}" style="{@cssText}" mstrAttach:click,keyup,contextmenu,mouseover,mouseout><div class="host mstrmojo-ui-PreviewButton"></div></div>',markupSlots:{previewNode:function(){return this.domNode;},btnNode:function(){return this.domNode;},clickableNode:function(){return this.domNode;},widgetHostNode:function(){return this.domNode.lastChild;}},select:function(){this.set("selected",true);},unselect:function(){this.set("selected",false);},onhoveredChange:function C(I){if(I.valueWas===false&&I.value===true){E.toggleClass(this.domNode,"selected",true);this.parent.onBandHovered(this.index);}else{E.toggleClass(this.domNode,"selected",false);this.parent.onBandUnhovered(this.index);}},onselectedChange:function B(I){if(I.valueWas===false&&I.value===true){E.toggleClass(this.domNode,"selected",true);this.parent.onBandSelected(this.index);}else{E.toggleClass(this.domNode,"selected",false);this.parent.onBandUnselected(this.index);}this.parent.onBandUnhovered(this.index);},onmouseover:function H(){this.set("hovered",true);},onmouseout:function D(){this.set("hovered",false);},oncontextmenu:function G(I){F.preventDefault(window,I.e);var K=this,J=K.parent.parent;var L=new mstrmojo.ui.menus.MenuConfig({position:F.getMousePosition(I.e,I.hWin),isHostedWithin:false});L.addMenuItem(mstrmojo.desc(7604,"Change Color"),"",function(){K.onclick(I);});L.addMenuItem(mstrmojo.desc(13386,"Add Color Band"),"",function(){var N=J.markers;var O=F.position(N.containerNode),M=I.e.clientX-O.x;N.addMarker(M);});L.addMenuItem(mstrmojo.desc(629,"Delete"),"",function(){K.unselect();J.bands.remove(K.index);J.update();});this.openPopup(L.newInstance());},postselectedValueChange:function(J){var K=this.parent.parent,I=K.parent,M=K.getPalette().concat();if(J){var L=J.value;if(K.getReversedValue()){M.reverse();}this.backgroundColor=M[this.index]=L;I.switchToCustomScheme(undefined,M);}}});mstrmojo._HasMarkup.addMarkupMethods(mstrmojo.threshold.ColorBand,{onwidthChange:mstrmojo.Widget.widthMarkupMethod,onleftChange:mstrmojo.Widget.leftMarkupMethod,onbackgroundColorChange:function A(){this.selectedValue=this.backgroundColor;this.updatePreview();this.colorPicker.set("color",this.selectedValue);}});}());(function(){mstrmojo.requiresClsP("mstrmojo","Widget","num","css","Container","Box","Label","EditableLabel","Image");mstrmojo.requiresClsP("mstrmojo.threshold","ColorBand","ImageBand","MarkersNode","ColorMarker","ThresholdModel");var E=mstrmojo.dom,c=mstrmojo.num,g=mstrmojo.css,C=["bands","markers"];var Z=0,D=1;var d=mstrmojo.threshold.ThresholdModel.SLIDER_MODE;function F(h){var i;if(h===C[Z]){i=this.sliderMode===d.IMAGE_BASED?new mstrmojo.threshold.ImageBand():new mstrmojo.threshold.ColorBand();}else{i=new mstrmojo.threshold.ColorMarker();}this[h].addChildren([i]);}function J(u){var t=this[C[u]],k=t.children,l=k?k.length:0,s=this.getComp(),m=this.getPalette(),p=this.width,q=u?s.length-1:s.length,v=this.sliderMode===d.IMAGE_BASED,r,j,h;if(l>q){for(r=l-q-1;r>=0;r--){t.removeChildren(k[r]);}}else{if(q>l){for(r=0;r<q-l;r++){F.call(this,C[u]);}}}if(u===0&&this.getReversedValue()){m=m.concat().reverse();}k=t.children;var o,n;for(r=0;r<q;r++){j=k[r];o=parseInt(r===0?0:p*s[r-1],10);n=parseInt(p*s[r],10);if(u===0){j.set("left",(this.containerNode.offsetLeft+o+1)+"px");h=n-o;g.toggleClass(j.domNode,"no-border",!h);j.set("width",h+"px");if(v){j.set("src",m[r]);j.domNode.firstChild.style.left=j.domNode.clientWidth/2-12+"px";}else{j.set("backgroundColor",m[r]);}}else{j.set("left",n-(v?0:1)+"px");}j.set("index",r);}}function A(i,h,j){h.forEach(function(l){var k=i[l.id]={palette:[],comp:[],reversed:false};l.bands.forEach(function(m){k.palette.push(m[j?"url":"bc"]);k.comp.push(m.end/100);});});}function H(){var h=this.parent.model,i={};A(i,h.getDefaultColors(),false);A(i,h.getDefaultImages(),true);return i;}mstrmojo.threshold.TextBubble=mstrmojo.declare(mstrmojo.EditableLabel,null,{scriptClass:"mstrmojo.EditableLabel",visible:false,cssClass:"editable-bubble",text:"",isPercentage:true,maxValue:1,showBubble:function(h){this.updatePosition(h);this.updateText(h);this.set("visible",true);},hideBubble:function(){this.set("visible",false);},updatePosition:function B(h){this.domNode.style.left=this.parent.width*h+"px";},updateText:function(k){var j=this.parent,h=j.parent.model,i=h.getRealValue(k,j.selectedOption);if(j.selectedOption===7){i=c.formatByMask(h.getFormatString(),i);}if(this.isPercentage){i+="%";}this.set("text",String(i));}});mstrmojo.threshold.ColorSlider=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.threshold.ColorSlider",markupString:'<div class = "mstrmojo-color-slider {@cssClass}"  style="{@cssText}" mstrAttach:click,keyup><div class="labels"></div><input type="text" class="hidden-field"></div>',markupSlots:{containerNode:function a(){return this.domNode;},labelsNode:function f(){return this.domNode.firstChild;},hiddenField:function I(){return this.domNode.lastChild;}},sliderMode:d.COLOR_BASED,baseColor:undefined,editableBubble:undefined,hoverBubble:undefined,bands:undefined,markers:undefined,colorMap:undefined,selectedOption:undefined,getComp:function Q(){return this.colorMap[this.baseColor].comp;},getPalette:function S(){return this.colorMap[this.baseColor].palette;},getReversedValue:function b(){var h=this.colorMap;return h&&h[this.baseColor].reversed||false;},postBuildRendering:function e(){this.width=E.position(this.containerNode).w;this.resetColorMap();if(this._super){this._super();}this.update();},resetColorMap:function R(){this.colorMap=H.call(this);},onkeyup:function(k){var i=window.event||k.e,l=i.keyCode;if(this.sliderMode===d.COLOR_BASED&&(l===mstrmojo.Enum_Keys.DELETE||l===mstrmojo.Enum_Keys.BACKSPACE)){if(this.editableBubble.isEditing){return ;}var j,h;if(this.bands.isSelected){j=this.bands;}else{if(this.markers.isSelected){j=this.markers;}else{return ;}}h=j.selectedIndex;j.children[h].unselect();j.remove(h);this.update();}},update:function M(){if(this.baseColor){J.call(this,Z);J.call(this,D);}},onsliderModeChange:function U(){g.toggleClass(this.domNode,"image-mode",this.sliderMode===d.IMAGE_BASED);this.unselectAll();this.bands.removeChildren();},onbaseColorChange:function P(){this.unselectAll();this.update();},onselectedOptionChange:function O(h){var i=this.parent.model,j=this.editableBubble,k=j.text;this.updateLabels(h.value);if(j.visible){if(h.valueWas===1||h.valueWas===2){k=k.slice(0,k.length-1);}j.updateText(i.getNormalizedValue(k,h.valueWas));}},updateLabels:function Y(i){var l=this.parent.model,m=this.editableBubble,k=this.hoverBubble,n,j;i=i||this.selectedOption;if(i===1||i===2){n="0%";j="100%";m.set("isPercentage",true);k.set("isPercentage",true);}else{if(i===4||i===5){n="0";j=l.getMetricsCount();m.set("isPercentage",false);k.set("isPercentage",false);}else{var h=l.getFormatString();n=c.formatByMask(h,l.getMetricsMinValue());j=c.formatByMask(h,l.getMetricsMaxValue());m.set("isPercentage",false);k.set("isPercentage",false);}}this.startLabel.set("text",n);this.endLabel.set("text",j);},setColorComp:function L(i,h){var j=this.colorMap;if(j){j[i].comp=h;this.unselectAll();this.update();}},addCustomScheme:function(i,h){this.colorMap.custom={comp:i,palette:h,reversed:false};this.set("baseColor","custom");},addMarkerToMap:function W(j){var k=this.getComp(),h=k.length,l;if(k[0]>j){l=0;}else{for(l=1;l<h;l++){if(k[l-1]<=j&&k[l]>=j){break;}}}k.splice(l,0,j);this.unselectAll();return l;},unselectAll:function X(){var i=this.bands;if(i.isSelected){i.children[i.selectedIndex].unselect();}var j=this.markers,h=j.selectedIndex;if(j.isSelected&&j.children[h]){j.children[h].unselect();}},reverseMapColor:function T(){if(this.colorMap&&this.baseColor){var h=this.colorMap[this.baseColor];h.reversed=!h.reversed;this.unselectAll();this.update();}},children:[{scriptClass:"mstrmojo.Label",cssClass:"start-label",alias:"startLabel",slot:"labelsNode",text:"0%"},{scriptClass:"mstrmojo.Label",cssClass:"end-label",alias:"endLabel",slot:"labelsNode",text:"100%"},{scriptClass:"mstrmojo.threshold.TextBubble",alias:"editableBubble",slot:"labelsNode",allowEmptyText:true,onTextEditComplete:function(l,r){if(l){var q=this.text;if(this.isPercentage){q=q.replace(/%$/,"");}var n=r.charAt(0);if(n.match(/\W/)!==null){q=q.replace(new RegExp("^\\"+n),"");}q=c.parseNumeric(q);if(isNaN(q)){this.set("text",r);return ;}var h=this.parent,m=h.parent.model,p=m.getNormalizedValue(q,h.selectedOption),o=h.getComp();this.updatePosition(p);var j=h.markers.selectedIndex;o.splice(j,1);var k=h.addMarkerToMap(p);h.markers.children[k].select();h.update();}}},{scriptClass:"mstrmojo.threshold.TextBubble",alias:"hoverBubble",slot:"labelsNode",allowEmptyText:false},{scriptClass:"mstrmojo.Box",cssClass:"color-bands",alias:"bands",isSelected:false,selectedIndex:0,remove:function G(k){if(this.children.length===1){return ;}var l=this.parent;var j=l.getComp(),h=l.getPalette();if(k===this.children.length-1){j.splice(k-1,1);}else{j.splice(k,1);}h.splice(k,1);},onBandHovered:function(h){this.isSelected=true;},onBandUnhovered:function(h){this.isSelected=false;},onBandSelected:function(h){var j,l=this.children,k=this.parent,m=k.markers;for(j=0;j<l.length;j++){if(j!==h&&l[j].selected){l[j].unselect();}}if(m.isSelected===true){m.children[m.selectedIndex].unselect();}k.hiddenField.focus();this.isSelected=true;this.selectedIndex=h;},onBandUnselected:function(h){var j,k=this.children;for(j=0;j<k.length;j++){if(j!==h&&k[j].selected){return ;}}this.isSelected=false;}},{scriptClass:"mstrmojo.threshold.MarkersNode",alias:"markers",isSelected:false,selectedIndex:0,onMarkerSelected:function V(j){var h=this.parent;h.editableBubble.showBubble(h.getComp()[j]);var k,n=this.children;for(k=0;k<n.length;k++){if(k!==j&&n[k].selected){n[k].unselect();}}var l=h.bands;if(l.isSelected===true){l.children[l.selectedIndex].unselect();}this.parent.hiddenField.focus();this.isSelected=true;this.selectedIndex=j;},onMarkerUnselected:function(h){var j,k=this.children;for(j=0;j<k.length;j++){if(j!==h&&k[j].selected){return ;}}this.parent.editableBubble.hideBubble();this.isSelected=false;},onMarkerHovered:function K(i){var h=this.parent;h.hoverBubble.showBubble(h.getComp()[i]);this.isSelected=true;},onMarkerUnhovered:function N(h){this.parent.hoverBubble.hideBubble();this.isSelected=false;}}]});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.ToolbarPopup","mstrmojo.ui.editors._HostsControls","mstrmojo.ui.editors.controls._HasCharacterGroup","mstrmojo.vi.ui.TextAlignButtonBar","mstrmojo.models.FormatModel","mstrmojo.css");var B=mstrmojo.models.FormatModel;mstrmojo.ui.editors.CharacterToolbarPopup=mstrmojo.declare(mstrmojo.ui.editors.ToolbarPopup,[mstrmojo.ui.editors._HostsControls,mstrmojo.ui.editors.controls._HasCharacterGroup],{scriptClass:"mstrmojo.ui.editors.CharacterToolbarPopup",textAlignJustify:true,textAlignValueMap:null,textAlignFmtName:mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES.TEXT_ALIGN,btnTextAlign:null,init:function D(I){this._super(I);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-EditCharacter");var K=this.textAlignJustify,H=this,F=function(P,Q,O){H.raiseFormatValueChange(P,Q,O);},L=this.getHCGControls(F),J=L.fontFamily,N=L.fontSize,G=L.fontColor,M={alias:"btnTextAlign",includeJustify:K,onValueChange:function(P,O){F(H.textAlignFmtName,P,O);}};J.width="125px";N.width="50px";G.width="50px";this.width=K?"485px":"456px";var E=this.textAlignValueMap;if(E){M.itemsValueMap=E;}this.addChildren([J,L.fontStyle,N,G,new mstrmojo.vi.ui.TextAlignButtonBar(M)]);},shouldPropagateLockHover:function C(){return false;},setFormatSource:function A(E){this._super(E);this.syncControls(function(){if(this.textAlignFmtName in E){this.btnTextAlign.singleSelectByField(E[this.textAlignFmtName],"v");}else{this.btnTextAlign.singleSelectByField(B.getFormatBlockValue(E,B.ENUM_PROPERTY_NAMES.TEXT_ALIGN),"id");}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.ui.editors.controls.ControlGroup","mstrmojo.ui.editors.controls._HasCharacterGroup","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.css");mstrmojo.ui.editors.controls.CharacterGroup=mstrmojo.declare(mstrmojo.ui.editors.controls.ControlGroup,[mstrmojo.ui.editors.controls._HasCharacterGroup],{scriptClass:"mstrmojo.ui.editors.controls.CharacterGroup",init:function A(E){this._super(E);mstrmojo.css.addWidgetCssClass(this,"mstrmojo-ui-EditCharacter");var H=this,C=this.getHCGControls(function(K,L,J){if(!H._sync){H.raiseFormatValueChange(K,L,J);}}),D=[];Object.keys(C).forEach(function(J){this[J]=C[J];}.bind(this));var B=this.fontFamily,I=this.fontStyle,G=this.fontSize,F=this.fontColor;if(B){D.push(B);}if(I){D.push(I);}if(G){G.slot="col1Node";F.slot="col2Node";D.push({scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",children:[G,F]});}if(D.length){this.addChildren(D);}}});mstrmojo.ui.editors.controls.CharacterGroup.CTRL_FLAGS=mstrmojo.ui.editors.controls._HasCharacterGroup.CTRL_FLAGS;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.hash","mstrmojo.Container","mstrmojo._HasLayout","mstrmojo._HasPopup","mstrmojo.ui.ColumnWalk","mstrmojo.Button","mstrmojo.mstr.EnumNodeDimty","mstrmojo.ConditionModel","mstrmojo.rw.ConditionWalkProvider");var P=mstrmojo.Widget,H=mstrmojo.array,E=mstrmojo.dom,M=mstrmojo.hash,A=mstrmojo.mstr.EnumNodeDimty,S=mstrmojo.rw.ConditionWalkProvider.updateOkBtn,I=mstrmojo.rw.ConditionWalkProvider.setTip;var C=mstrmojo.desc(11899,"Select a dataset object.");var K=H.hash([A.NodeDimtyOutputLevel]);function D(){var T=this.model;if(T){if(!T.attachEventListener){mstrmojo.hash.make(T,mstrmojo.ConditionModel,{});}T.attachEventListener("edit",this.id,"onmodeledit");}}function L(U,T){if(T&&T.detachEventListener){T.detachEventListener("edit",U.id,"onmodeledit");}}function N(Y,T){var W=T,X=[],V=[],U=[],Z=false;M.forEach(W,function(a){X=X.concat(a.att.filter(function(b){return b.did===Y;}));});Z=X[0]&&X[0].da;X.forEach(function(a){V=V.concat(a.fs||[]);});V.forEach(function(a){if((a.obf||Z)&&U.filter(function(b){return b.did===a.fid;}).length===0){U.push({did:a.fid,dtp:mstrmojo.expr.mapBaseFormTypeToDataType(a.bftp),n:a.fnm,t:a.t});}});return U;}mstrmojo.rw.ConditionWalk=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._HasPopup],{scriptClass:"mstrmojo.rw.ConditionWalk",markupString:'<div class="mstrmojo-rw-ConditionWalk" mstrAttach:click><div class="condition mstrmojo-ConditionNode"><div class="mstrmojo-cond-contents"></div></div><div class="walk"></div><div class="apply"></div></div>',markupSlots:{conditionNode:function(){return this.domNode.firstChild;},walkNode:function(){return this.domNode.children[1];},applyNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function J(){P.visibleMarkupMethod.call(this);if(this.visible){this.initWalk();}},onheightChange:P.heightMarkupMethod,onwidthChange:P.widthMarkupMethod},layoutConfig:{h:{conditionNode:"auto",walkNode:"100%",applyNode:"auto"},xt:true},editor:undefined,columnWalk:undefined,tip:undefined,walkProvider:null,objectBrowsingEnabled:true,postCreate:function B(){if(this._super){this._super();}if(!this.walkProvider){this.walkProvider=mstrmojo.insert(mstrmojo.rw.ConditionWalkProvider);}},initWalk:function O(){var T=this.columnWalk,U=this.walkProvider;I.call(this,C);T.removeTrailingContainer(-1);T.addNextColumn(U.getTargetNodeProps());T.target.updateColumnContainer();S(this);},updateBrowseElementsParams:function(W,V){W.attributeID=V.did;W.otp=V.t||12;var U=this.editor,T=U&&U.onUpdateBrowseElementsParams;if(T){T.call(U,W,V);}},children:[{scriptClass:"mstrmojo.ui.ColumnWalk",alias:"columnWalk",slot:"walkNode",height:"333px",width:"750px"},{alias:"cancelBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"cancelBtn",title:mstrmojo.desc(2399,"Cancel"),ignoreLayout:true,onclick:function(){var T=this.parent;if(T.close){T.close();}}},{alias:"okBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"okBtn",title:mstrmojo.desc(2397,"OK"),onclick:function(){var T=this.parent;if(T.onOK){T.onOK();}}},{scriptClass:"mstrmojo.Label",alias:"tip",slot:"applyNode",cssClass:"tip",text:C,ignoreLayout:true}],eb:{scriptClass:"mstrmojo.Editor",cssClass:E.isIE7?"mstrmojo-ElementsEditorIE7":"mstrmojo-ElementsEditor",title:mstrmojo.desc(6149,"Select Elements"),help:"element_browser_dialog_box.htm",children:[{scriptClass:"mstrmojo.ElementsBrowser",alias:"browser",onUpdateBrowseElementsParams:function(U){var T=this.parent.opener;T.updateBrowseElementsParams(U,T.model.a);}},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBox",slot:"buttonNode",children:[{scriptClass:"mstrmojo.Button",alias:"ok",text:mstrmojo.desc(1442,"OK"),cssClass:"mstrmojo-WebButton hot",cssText:"width: 66px;",onclick:function(){var T=this.parent.parent,U=T&&T.opener;if(U){U.onEBSelect();U.closePopup();}}},{scriptClass:"mstrmojo.Button",alias:"ok",text:mstrmojo.desc(221,"Cancel"),cssClass:"mstrmojo-WebButton",cssText:"min-width: 66px; margin-left: 11px;",onclick:function(){var T=this.parent.parent,U=T&&T.opener;if(U){U.closePopup();}}}]}]},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",fishEyeVisible:false,upButtonVisible:true,scrollableIncFetch:true,showCompletePath:false,closeable:false,closeOnSelect:false,browsableTypes:"3,4,8,10,12,256",includeObjectDesc:true,quickSearch:true,minSearchLength:1}]},_set_model:function R(W,T){var U=this.model,V=(T!==U);if(V){L.call(this,U);T.dimtyTypes=this.dimtyTypes||K;this.model=T;D.call(this,T);if(this.hasRendered&&this.visible){this.columnWalk.target.updateColumnContainer();}}return V;},onmodeledit:function G(T){this.columnWalk[T.prop==="c1"?"c0":T.prop].updateColumnContainer();S(this);},browse:function F(V){var X=this.parent.editorNode,W=function(Z,b){var Y=mstrmojo.dom.position(Z,true),a=mstrmojo.dom.position(b,true);return{x:Y.x+Y.w,y:a.y};},T=this.columnWalk,U=this.walkProvider;switch(V&&V.alias){case"target":case"dmy":U.browseObjs(this,V,W(V.alias==="target"?T.target.domNode:this.dmyNode,X));break;case"c0":case"c1":U.browseObjs(this,V,W(T.c0.domNode,X));break;case"es":U.browseEs(this,V,W(T.es.domNode,X));break;}},onOBSelect:function(X){var V=this.ob.browser,Z=V.target;this.closePopup();var U=this.targets,Y=Z.itemIdField,W=U||[],T=H.find(U,Y,X[Y]);if(T===-1){W.push(X);this.targets=W;this.targetsLastMod=new Date();this.raiseEvent({name:"updateTargets",targets:this.targets});}Z.setSelectedItems([X],Z.multiSelect);if(Z.onObjBrowsed){Z.onObjBrowsed(X);}},onEBSelect:function(){var U=this.eb.browser,W=this.columnWalk.es.es;W.set("selectedIndices",{});var T=W.items,V=[];H.forEach(U.selectedItems||[],function(Y){if(H.find(W.items,"v",Y.v)<0){V.push(Y);}});var X=W.insertUnlistedValuesAt||0;if(X<0){X=T.length;}W.set("items",T.slice(0,X).concat(V).concat(T.slice(X)));W.setSelectedItems(U.selectedItems,false);},destroy:function Q(U){var T=this.walkProvider;if(T&&T.destroy){this.walkProvider.destroy();}this._super(U);}});mstrmojo.rw.ConditionWalk.getAttForms=N;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.rw.ConditionWalk","mstrmojo.Label","mstrmojo.ui.Pulldown","mstrmojo.ui.Checkbox","mstrmojo.expr","mstrmojo.css");var F=mstrmojo.expr.ET.MQ,H=mstrmojo.expr.ET.MC,C=mstrmojo.css,B=mstrmojo.desc(14387,"Evaluate this condition independent of other dataset level conditions");var G=function(K,M){var J=K.et,L=((J===F||J===H)&&!this.inRelation)?"block":"none",I=((M===1)||J!==F)?1:0;C.toggleClass(this.toolNode,"unselectable",J===H);this.toolNode.style.display=L;this.level.set("selectedIndex",I);this.includeExist.set("visible",I===1&&(J===H||J===F));this.includeExist.set("checked",K.idcsi===undefined?false:K.idcsi);};mstrmojo.fe.ConditionWalk=mstrmojo.declare(mstrmojo.rw.ConditionWalk,null,{scriptClass:"mstrmojo.fe.ConditionWalk",markupString:'<div class="mstrmojo-rw-ConditionWalk" mstrAttach:click><div class="condition mstrmojo-ConditionNode"><div class="mstrmojo-cond-contents"></div></div><div class="walk"></div><div class="tools"></div><div class="apply"></div></div>',markupSlots:mstrmojo.hash.copy({toolNode:function(){return this.domNode.childNodes[2];}},mstrmojo.hash.copy(mstrmojo.rw.ConditionWalk.prototype.markupSlots)),layoutConfig:{h:{conditionNode:"auto",walkNode:"100%",toolNode:"auto",applyNode:"auto"},xt:true},postCreate:function E(){this.children=mstrmojo.hash.clone(this.children).concat([{scriptClass:"mstrmojo.Label",slot:"toolNode",text:mstrmojo.desc(13517,"Calculate on")},{scriptClass:"mstrmojo.ui.Pulldown",slot:"toolNode",alias:"level",isHostedWithin:false,items:[{n:mstrmojo.desc(13518,"Template level"),v:0},{n:mstrmojo.desc(13519,"Dataset level"),v:1}],onitemSelected:function I(J){var K=this.parent;if(K&&K.condition&&K.visible){K.includeExist.set("visible",J.v===1);K.condition.level=J.v;}}},{scriptClass:"mstrmojo.ui.Checkbox",alias:"includeExist",slot:"toolNode",postBuildRendering:function(){this.domNode.innerHTML=B;},oncheckedChange:function(){var J=this.parent;if(J){J.model.set("idcsi",this.checked);}}}]);if(this._super){this._super();}},onvisibleChange:function A(I){var J=this.condition;if(J&&this.toolNode&&this.visible){G.call(this,J.data,J.tree.level);}if(this._super){this._super(I);}},onmodeledit:function D(I){if(this._super){this._super(I);}if(this.toolNode){G.call(this,this.model.get(),this.model.level);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.rw.ConditionWalk","mstrmojo.array","mstrmojo.css","mstrmojo.expr","mstrmojo.mstr.EnumNodeDimty","mstrmojo.mstr.DocElementDataHelper","mstrmojo.ui._IsIncFetchList");var E=mstrmojo.array,G=mstrmojo.css,C=mstrmojo.mstr.EnumNodeDimty,K=E.hash([C.NodeDimtyUnspecified,C.NodeDimtyNone]);function H(){var L=this.thresholdRow,M=this.editor;if(L){this.removeChildren(L);}G.toggleClass(M.content.domNode,"no-overflow",false);this.set("visible",false);M.setRowPanelVisibility(true);}mstrmojo.threshold.ConditionWalk=mstrmojo.declare(mstrmojo.rw.ConditionWalk,[mstrmojo.ui._IsIncFetchList],{objectBrowsingEnabled:false,dimtyTypes:K,targets:null,targetsLastMod:null,ets:null,condition:null,onOK:function B(){var L=this.editor;L.model.setConditionData(this.condition,this.model.get());H.call(this);L.toggleButtonStatus(true);},close:function I(){var O=this.editor;var Q=this.condition,M=Q.tree.parent,L=M.exprTree;if(Q.isEmpty()){Q.del();}var N=L&&L.items,P=N&&N.length;if(!P||P===0){O.model.deleteThreshold(M.threshold);}H.call(this);O.toggleButtonStatus(true);},browse:function F(L){this._super(L);if(L.alias==="es"){G.toggleClass(this.eb.domNode,"adv-threshold",true);}},getAttributeForms:function J(L){return mstrmojo.rw.ConditionWalk.getAttForms(L,this.editor.controller.datasets);},getElements:function D(N,P){var O={},L=P.complete,M=this;this.scrollNode=this.columnWalk.es.scrollNode;if(!this.ifDataHelper){this.ifDataHelper=new mstrmojo.mstr.DocElementDataHelper({source:this.editor.controller.dataService});}else{this.ifDataHelper.set("items",null);}this.columnWalk.es.es.allowUnlistedValues=false;this.updateBrowseElementsParams(O,N);this.ifDataHelper.browseConfig=O;P=mstrmojo.func.wrapMethods(P,{complete:function(Q){M.initScroll();}});this.ifDataHelper.getItems(1,P);},postNext:function A(){this.columnWalk.es.updateList(this.ifDataHelper.items);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash","mstrmojo.Container","mstrmojo.threshold.TextGroup","mstrmojo.threshold.ThresholdRow","mstrmojo.ui.editors.controls.ContainerGroup","mstrmojo.ui.editors.controls.CharacterGroup");var G=mstrmojo.Widget,F=mstrmojo.hash,D="180px";mstrmojo.threshold.PropertyPanel=mstrmojo.declare(mstrmojo.Container,[mstrmojo.threshold.PropertyPanel],{markupString:'<div class="mstrmojo-threshold-PropertyPanel"><div class="condition"></div><div class="format mstrmojo-vi-PropEditor"><div class="text"><div class="title">'+mstrmojo.desc(5998,"Replace Data")+'</div></div><div class="font mstrmojo-vi-EditorGroup"><div class="title">'+mstrmojo.desc(3433,"Font")+'</div></div><div class="border"><div class="title">'+mstrmojo.desc(5616,"Color And Borders")+'</div></div></div><div class="apply"></div></div>',markupSlots:{conditionNode:function(){return this.domNode.firstChild;},textNode:function(){return this.domNode.children[1].firstChild;},fontNode:function(){return this.domNode.children[1].children[1];},borderNode:function(){return this.domNode.children[1].children[2];},applyNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:G.visibleMarkupMethod,onheightChange:G.heightMarkupMethod,onwidthChange:G.widthMarkupMethod},model:undefined,editor:undefined,textGroup:undefined,charGroup:undefined,containerGroup:undefined,onvisibleChange:function A(){if(this.visible){var J=this.model;J.updateControl(this);var H=F.clone(J.threshold),I=this.thresholdRow;if(I){this.removeChildren(I);}this.addChildren({scriptClass:"mstrmojo.threshold.ThresholdRow",alias:"thresholdRow",slot:"conditionNode",idx:J.thresholdRow.idx,model:this.editor.model,threshold:H,onclick:mstrmojo.emptyFn});this.refresh();}},onOK:function B(){this.model.submitChange();this.close();},close:function E(){var H=this.thresholdRow;if(H){this.removeChildren(H);}this.set("visible",false);this.editor.toggleButtonStatus(true);this.editor.setRowPanelVisibility(true);},children:[{scriptClass:"mstrmojo.threshold.TextGroup",slot:"textNode",alias:"textGroup",width:D,onGroupValueChange:function C(H,I){this.parent.model.changeFormatProperty("threshold",H,I);}},{scriptClass:"mstrmojo.ui.editors.controls.CharacterGroup",slot:"fontNode",alias:"charGroup",width:D,onGroupValueChange:function C(H,I){this.parent.model.changeFormatProperty("fmt",H,I);}},{scriptClass:"mstrmojo.ui.editors.controls.ContainerGroup",slot:"borderNode",alias:"containerGroup",width:D,onGroupValueChange:function C(H,I){this.parent.model.changeFormatProperty("fmt",H,I);}},{alias:"cancelBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"cancelBtn",onclick:function(){var H=this.parent;if(H.close){H.close();}}},{alias:"okBtn",slot:"applyNode",scriptClass:"mstrmojo.Button",cssClass:"okBtn",onclick:function(){var H=this.parent;if(H.onOK){H.onOK();}}},{scriptClass:"mstrmojo.Label",alias:"tip",slot:"applyNode",cssClass:"tip",text:mstrmojo.desc(14000,"Press ## after finishing formatting.").replace("##",'"√"')}]});}());(function(){mstrmojo.requiresClsP("mstrmojo","array","css","hash","color","Editor","Button","Box","Label","num");mstrmojo.requiresClsP("mstrmojo.ui","Pulldown","Checkbox","CheckList");mstrmojo.requiresClsP("mstrmojo.threshold","ColorSlider","ThresholdModel");mstrmojo.requiresClsP("mstrmojo.models","FormatModel");mstrmojo.requiresDescs(2268,2281,2491,2519,3606,5585,7665,7666,7905,7907,7908,7909,7910,12110,12111,13613,13614,13615);var M=mstrmojo.array,X=mstrmojo.css,P=mstrmojo.hash,Q=mstrmojo.Button.newWebButton,U=mstrmojo.num,E=mstrmojo.models.FormatModel.getFormatUpdate,A=4;var V=mstrmojo.threshold.ThresholdModel.SLIDER_MODE,F=mstrmojo.threshold.ThresholdModel.FEATURES;var K=null,B=null,W=[{n:mstrmojo.desc(527,"Value"),v:7},{n:mstrmojo.desc(4405,"Lowest"),v:4},{n:mstrmojo.desc(529,"Highest"),v:5},{n:mstrmojo.desc(4406,"Lowest %"),v:1},{n:mstrmojo.desc(4407,"Highest %"),v:2}];function S(m){var n=[],k=this.colorSlider,j=k.getComp(),d=k.getPalette(),l=this.basedOn.value,f=this.model,g=this.controller,o=f.orgThresholds,a=this.metricId,c=o&&o[a],Z=this.breakBy.breakByList,h=Z.items[Z.selectedIndex],b=j.length,e,p;if(k.getReversedValue()){d=d.concat().reverse();}for(e=0;e<b;e++){p={};if(this.colorSlider.sliderMode===V.IMAGE_BASED){p.rtp=4;p.rtxt=d[e];}else{p.fmt=E("bc",d[e]);}if(e>0){p.flr=U.toLocaleString(f.getRealValue(j[e-1],l));}if(e<b-1||b===1){p.ceil=U.toLocaleString(f.getRealValue(j[e],l));}if(h&&h.did!==-1){p.dmy={did:h.did,t:h.t};}n.push(p);}g.onSubmitActions(n,c,a,g.supportsFeature(F.SHOW_BASED_ON)?this.basedOn.selectedMetric:a,this.basedOn.value,m,A);}function J(j){var f=this.model,b=f.thresholds&&f.thresholds[j],u=f.data.gsi,m=this.colorSlider,h=[],y=[],g=[],l,x,Z,o=this.colorPalettes,k=this.imageSelector,s=o.colorPulldown,w=this.typeSelector.typeCheckList,a=k.imagePulldown,i=this.basedOn,d=i.options,r=i.metricsList,q=this.breakBy.breakByList,p=this.controller.supportsFeature(F.SHOW_BASED_ON);if(b&&b.length>0){l=f.getSimpleThresholdType(j);if(l!==-2){Z=f.isImageBasedType(j);b.forEach(function(e){var AA=P.copy(e),z=AA.ceil;if(z!==Infinity){AA.comp=f.getNormalizedValue(z,e.ttp);}else{AA.comp=1;}h.push(AA);});h.sort(function(z,e){return z.comp-e.comp;});h.forEach(function(e){y.push(e.comp);if(Z){g.push(e.rtxt);}else{g.push(e.fmt.bc);}});w.set("selectedIndex",Z?V.IMAGE_BASED:V.COLOR_BASED);if(Z){x=f.getImageSetName(g);a.set("selectedIndex",M.find(B,"v",x));}else{x=f.getColorScheme(g);if(x==="custom"){this.switchToCustomScheme(y,g);m.unselectAll();m.update();}else{s.set("items",K);s.set("selectedIndex",M.find(K,"v",x));}}m.set("baseColor",x);m.setColorComp(x,y);if(f.isMapReversed(x,g,Z)){m.reverseMapColor();}if(p){var c=b[0].expr,n=c.m||c.nds[0].m;r.set("selectedIndex",M.find(u.mx,"did",(n&&n.did)||f.metricId));}d.set("selectedIndex",M.find(d.items,"v",l));var v;try{v=b[0].expr.nds[0].dmy.uts[0].utgt.did;}catch(t){}q.set("selectedIndex",Math.max(0,M.find(q.items,"did",v)));}}else{w.set("selectedIndex",V.COLOR_BASED);s.set("items",K);s.set("selectedIndex",0);m.update();if(p){r.set("selectedIndex",0);}q.set("selectedIndex",0);}}function N(Z){this.parent.colorSlider.set("baseColor",Z);this.selectedColor=Z;}function O(){return mstrmojo.Button.newWebButton(mstrmojo.desc(12282,"Reversed"),function(){this.parent.parent.colorSlider.reverseMapColor(this.checked);},false,{cssClass:"reverse"});}function L(){var Z=this.model,b=this.basedOn.options,d=b.items,e=isNaN(Z.getMetricsMaxValue())||isNaN(Z.getMetricsMinValue()),a=(e||!this.controller.supportsFeature(F.SHOW_VALUE_ITEM))?W.slice(1):W,c=d[b.selectedIndex];if(a.length!==d.length){b.set("items",a);b.set("selectedIndex",Math.max(a.indexOf(c),0));}}mstrmojo.threshold.SimpleThresholdEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.threshold.SimpleThresholdEditor",cssClass:"mstrmojo-SimpleThresholdEditor",title:mstrmojo.desc(3647,"Thresholds"),help:"thresholds_editor.htm",model:undefined,controller:undefined,metricId:undefined,metricName:undefined,typeSelector:undefined,basedOn:undefined,breakBy:undefined,colorSlider:undefined,colorPalettes:undefined,imageSelector:undefined,showAdvancedEditorLink:undefined,init:function R(b){this._super(b);var a=mstrApp.customization.getCustomThresholds(),Z=function(c){return{n:mstrmojo.desc(c.title,"N/A"),v:c.id,cls:c.id};};if(!K){K=a.color.map(function(c){return Z(c);});}this.colorPalettes.colorPulldown.set("items",K);if(!B){B=a.image.map(function(d){var c=Z(d);c.bc=d.combinedImageUrl;return c;});this.imageSelector.imagePulldown.set("items",B);}},onOpen:function D(){var Z=this.controller,a=this.model,e=this.basedOn,c=e.options,f=e.metricsList,b=this.metricId,d=a.data.gsi;this.colorSlider.resetColorMap();X.toggleClass(this.containerNode,"hideImage",!Z.supportsFeature(F.SHOW_IMAGE));if(Z.supportsFeature(F.SHOW_BASED_ON)){X.addClass(c.domNode,"short");f.set("items",d.mx);f.set("visible",true);}else{f.set("visible",false);X.removeClass(c.domNode,"short");}this.breakBy.breakByList.set("items",[{n:mstrmojo.desc(2057,"None"),did:-1}].concat(this.targets.filter(function(g){return g.t===12;})));this.showAdvancedEditorLink.set("visible",Z.supportsFeature(F.SHOW_ADVANCED_EDITOR));J.call(this,b);this.colorSlider.updateLabels();this.domNode.oncontextmenu=function(){if(mstrApp.isSingleTier){return false;}};},onClose:function C(){this.model.cleanUp();},switchToCustomScheme:function H(b,g){var f="custom",c=this.colorSlider,d=this.colorPalettes.colorPulldown,e=d.items,a=e.map(function(h){return h.v;}).indexOf(f)!==-1;b=b||c.getComp().concat();if(!g){var Z=c.getPalette().concat();g=c.getReversedValue()?Z.reverse():Z;}c.addCustomScheme(b,g);if(!a){d.set("items",e.concat({n:mstrmojo.desc(2056,"Custom"),v:f}));}d.set("selectedIndex",M.find(d.items,"v",f));},children:[{scriptClass:"mstrmojo.Box",cssClass:"row",alias:"typeSelector",typeCheckList:undefined,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12112,"Thresholds Type:")},{scriptClass:"mstrmojo.ui.CheckList",alias:"typeCheckList",multiSelect:false,orientation:"h",postselectionChange:function I(k){var f=this.parent.parent,d=f.model,g=f.colorSlider,b=f.colorPalettes,i=f.imageSelector,c=i.imagePulldown,a=K[b.colorPulldown.selectedIndex],Z=B[c.selectedIndex],j=k.added[0],e=j?Z:a,h=j?d.getDefaultImages()[0].id:d.getDefaultColors()[0].id;b.set("visible",!j);i.set("visible",!!j);g.set("sliderMode",j);g.set("baseColor",(e&&e.v)||h);g.editableBubble.set("visible",false);if(j===V.IMAGE_BASED&&!c.selectedIndex){c.set("selectedIndex",0);}},selectedIndex:0,items:[{n:mstrmojo.desc(12113,"Color-based"),v:"color",cls:"color"},{n:mstrmojo.desc(12114,"Image-based"),v:"image",cls:"image"}]}]},{scriptClass:"mstrmojo.Box",cssClass:"row",alias:"colorPalettes",selectedColor:undefined,colorPulldown:undefined,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2060,"color:")},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"short",alias:"colorPulldown",onitemSelected:function G(Z){N.call(this.parent,Z.v);},selectedIndex:0,items:K},O()]},{scriptClass:"mstrmojo.Box",cssClass:"row",alias:"imageSelector",visible:false,selectedColor:undefined,imagePulldown:undefined,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(6369,"Images:")},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"image-pulldown short",alias:"imagePulldown",onitemSelected:function G(Z){N.call(this.parent,Z.v);},getPopupListConfig:function T(){var Z=mstrmojo.ui.Pulldown.prototype.getPopupListConfig.call(this);Z.getItemMarkup=function b(){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}" title="{@title}"><div class="text">{@n}</div><div class="bc" style="{@bc}"></div></{@tag}>';};Z.getItemProps=function a(e,c){var d=mstrmojo._IsList.getItemProps.call(this,e,c);d.bc="background:url("+e.bc+")";return d;};return Z;},items:B},O()]},{scriptClass:"mstrmojo.Box",cssClass:"row",alias:"basedOn",value:"",metricsList:undefined,options:undefined,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(4402,"Based on:")},{scriptClass:"mstrmojo.ui.Pulldown",cssClass:"short",alias:"metricsList",onitemSelected:function G(c){var b=this.parent,Z=b.parent,a=c.did;b.selectedMetric=Z.model.basedOnId=a;Z.colorSlider.updateLabels();L.call(Z);}},{scriptClass:"mstrmojo.ui.Pulldown",selectedIndex:3,cssClass:"short option",alias:"options",onitemSelected:function G(b){var e=this.parent,a=e.parent,d=a.breakBy,c=b.v,Z=c===7;e.value=c;a.colorSlider.set("selectedOption",b.v);d.set("visible",!Z);if(Z){d.breakByList.set("selectedIndex",0);}},items:W}]},{scriptClass:"mstrmojo.Box",cssClass:"row",alias:"breakBy",breakByList:undefined,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(4564,"Break By:")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"breakByList"}]},{scriptClass:"mstrmojo.threshold.ColorSlider",alias:"colorSlider"},{scriptClass:"mstrmojo.Label",cssClass:"link",alias:"showAdvancedEditorLink",slot:"buttonNode",text:mstrmojo.desc(4569,"Advanced Thresholds Editor..."),onclick:function Y(){var b=this.parent,a=b.breakBy.breakByList,Z=a.items[a.selectedIndex].did!==-1,c=function(){b.colorSlider.unselectAll();b.close();b.model.editorMode=mstrmojo.threshold.ThresholdModel.EDITOR_TYPES.ADVANCED_EDITOR;};mstrmojo.warn(Z?mstrmojo.desc(14160,"Save thresholds definition before proceeding to the Advanced Thresholds Editor? The Break By attribute will be lost."):mstrmojo.desc(14159,"Save thresholds definition before proceeding to the Advanced Thresholds Editor?"),undefined,{cssClass:"save-threshold-warning",buttons:[Q(mstrmojo.desc(2827,"Clear"),function(){c();b.controller.openEditor();},false,{cssClass:"nosave"}),Q(mstrmojo.desc(2031,"Apply"),function(){c();a.set("selectedIndex",0);S.call(b,true);},true),Q(mstrmojo.desc(2223,"Cancel"))]});}},{scriptClass:"mstrmojo.Box",cssClass:"editor-buttons",slot:"buttonNode",children:[Q(mstrmojo.desc(221,"Cancel"),function Y(){var Z=this.parent.parent;Z.colorSlider.unselectAll();Z.close();}),Q(mstrmojo.desc(1442,"OK"),function Y(){var Z=this.parent.parent;S.call(Z);Z.colorSlider.unselectAll();Z.close();},true),Q(mstrmojo.desc(2031,"Apply"),function Y(){var Z=this.parent.parent;S.call(Z,true);Z.colorSlider.unselectAll();},true)]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.Button","mstrmojo.Widget","mstrmojo.Label","mstrmojo.Box","mstrmojo.desc","mstrmojo.css","mstrmojo.hash","mstrmojo.array","mstrmojo.expr","mstrmojo.models.FormatModel","mstrmojo.ui._HasScroller","mstrmojo.threshold.ThresholdRow","mstrmojo.threshold.ConditionWalk","mstrmojo.threshold.PropertyPanel","mstrmojo.threshold.PropertyModel","mstrmojo.threshold.ThresholdRowPanel");var f=mstrmojo.css,U=mstrmojo.hash,e=mstrmojo.expr,J=e.ET,T=e.BRANCH_FNS,Y=mstrmojo.Button.newWebButton,L=mstrmojo.models.FormatModel.getFormatUpdate,g="";var D=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,G=[D.BORDER_TOP_STYLE,D.BORDER_RIGHT_STYLE,D.BORDER_BOTTOM_STYLE,D.BORDER_LEFT_STYLE],Q={0:"none",1:"1pt solid",3:"1pt dashed",4:"1pt dotted",5:"1.5pt solid"};function H(i,k){var j=[];if(k){k.forEach(function(m){var n=m.fmt,l={};U.forEach(n,function(o,p){var q=false;if(G.indexOf(p)===-1){L(p,o,l);}else{if(!n.borderStyle&&!q){L(D.BORDER_STYLE,Q[o],l);}}});i.setAttIdToNDE(m.expr);j.push({n:m.n,scope:m.scope,rtp:m.rtp,rtxt:m.rtxt,expr:mstrmojo.fe.FilterUtils.getExprXml(m.expr),fmt:l});});}return j;}function a(m){var j=this.controller,k=this.model,l=k.thresholds,n=this.metricId,p=l&&l[n],o=k.orgThresholds,i=o&&o[n];j.onSubmitActions(H(k,p),i,n,undefined,-1,m,this.objectType);}function X(i){(i||[]).forEach(function(j){delete j.dmy;var k=j.nds;if(k){X(k);}});}function R(){var m=this.content,j=this.model,q=j.thresholds,l=this,n=[],p=m.rowPanel,o=q&&q[j.metricId],k=0;if(o){o.forEach(function(i){X(i.expr.nds);n.push({scriptClass:"mstrmojo.threshold.ThresholdRow",threshold:i,editor:l,model:j,idx:k++});});}p.destroyChildren(false);p.addChildren(n);this.updateScrollbars();}function d(){var n=this.content.rowPanel,l=n.children,j=(l&&l.length)||0,k=this.model,o=k.thresholds,m=o&&o[k.metricId],i={expr:{et:14,fn:19}};if(!o){o=k.thresholds={};}if(!m){m=o[k.metricId]=[];}m.push(i);n.addChildren([{scriptClass:"mstrmojo.threshold.ThresholdRow",threshold:i,editor:this,model:k,idx:j}]);n.children[j].exprTree.newCondition(null);this.updateScrollbars();}function V(j){var i=this.model,l=i.thresholds,k=l&&l[i.metricId];if(k){k.forEach(function(m){i.toggleThresholdSelected(m,j);});}}function N(m,n){var i=this.controller,j=this.model,k=this.metricId,l=j.selectedThresholds;if(l.length>0){i.onSaveThresholds(H(j,l),k,-1,m,n);}}function K(j){var l="mstrIVE_THRESHOLD_SAVER",i=j.controller.dataService.model,k=mstrmojo.all[l];if(!k){k=new mstrmojo.SaveAsEditor({id:l,zIndex:j.zIndex+1,folderLinksContextId:32,rootFolderID:i.isnew?null:i.pfid,showCompletePath:false,saveParams:{},typeDesc:mstrmojo.desc(null,"Thresholds"),saveAs:function(o){var m=this.contPanel;this.name=m.name.value;this.desc=m.desc.value;if(!this.name){mstrmojo.alert(mstrmojo.desc(3380,"Please enter valid name"));return ;}var p=this.saveParams||{};p.folderId=this.ob.currentFolder.did;p.name=this.name||"New Thresholds";p.saveAsOverwrite=!!o;var n=this.saveAsCallback();n.failure=function(r){var q=r.code,s=this.parent;if(q==="-2147217373"||q==="-2147216857"){mstrmojo.warn(mstrmojo.desc(7986,"The ## '###' already exists. Do you want to replace the existing one?").replace("##",s.typeDesc||"Object").replace("###",s.name),{confirmBtn:{fn:function(){s.saveAs(true);}}},{title:mstrmojo.desc(3179,"Confirm Overwrite"),zIndex:s&&s.zIndex+10});}else{mstrmojo.alert(mstrmojo.desc(7985,"Error while saving: ")+r.message);}};n.parent=this;N.call(j,p,n);}});k.render();}k.open();}function E(k){var p="mstrIVE_THRESHOLD_LOADER",n=mstrmojo.all[p],j=k.controller.dataService.model,o=[72];if(!n){n=new mstrmojo.vi.ui.editors.ObjectPicker({id:p,supportedTypes:mstrmojo.array.hash(o),zIndex:k.zIndex+1,rootFolderID:j.isnew?null:j.pfid,onOpen:function i(){this.browse();},postBuildRendering:function m(){mstrmojo.Editor.prototype.postBuildRendering.apply(this);},OKFn:function(q){if(q){k.controller.onLoadThresholds(k.metricId,q.did);}}});var l=n.ob;l.set("folderLinksContextId",32);l.set("multiSelect",false);l.set("searchVisible",true);l.set("upButtonVisible",true);l.set("browsableTypes","8,"+o.join(","));n.render();}n.open();}mstrmojo.threshold.AdvancedThresholdEditor=mstrmojo.declare(mstrmojo.Editor,[mstrmojo.ui._HasScroller],{scriptClass:"mstrmojo.threshold.AdvancedThresholdEditor",cssClass:"adv-threshold",title:"Advanced Threshold Editor",help:"advanced_thresholds_editor_for_html5_dashboards.htm",model:undefined,targets:undefined,content:undefined,buttonBar:undefined,init:function Z(i){this._super(i);g=this.id;},postBuildRendering:function c(){this._super();var i=this.content;R.call(this);i.conditionWalk.set("editor",this);i.property.set("editor",this);},onOpen:function I(){R.call(this);this.setRowPanelVisibility(true);var i=this.content;i.conditionWalk.set("visible",false);i.property.set("visible",false);var j=this.buttonBar&&this.buttonBar.quickLink;if(!!j){j.set("visible",this.objectType!==12);}},setupScrollNodes:function P(){this.scrollNode=this.content.containerNode;},onClose:function F(){this.model.cleanUp();},onmodelChange:function O(){var i=this.model;if(i){i.attachEventListener("modelEdit",this.id,"onmodelEdit");i.attachEventListener("selectedThresholdsChange",this.id,"onselectedThresholdsChange");R.call(this);}},onselectedThresholdsChange:function b(){},openConditionWalk:function C(i,k){var n=this,o=n.content,p=o.conditionWalk,j=k.tree.parent,l=U.clone(j.threshold),m=p.thresholdRow;l.expr=i;if(m){p.removeChildren(m);}var q=new mstrmojo.threshold.ThresholdRow({alias:"thresholdRow",slot:"conditionNode",idx:j.idx,model:this.model,threshold:l,onclick:mstrmojo.emptyFn});p.addChildren(q);q.render();p.set("objectBrowsingEnabled",n.objectBrowsingEnabled);p.set("targets",n.targets);p.set("targetsLastMod",new Date());p.set("ets",k.tree.validExprTypes);p.set("condition",k);p.set("model",U.clone(i));n.setRowPanelVisibility(false);f.toggleClass(n.content.domNode,"no-overflow",true);p.set("visible",true);p.doLayout();n.toggleButtonStatus(false);this.updateScrollbars();},onmodelEdit:function S(){R.call(this);},openPropertyPanel:function M(i){this.setRowPanelVisibility(false);var k=this.content.property,j=k.model=new mstrmojo.threshold.PropertyModel({thresholdRow:i,threshold:U.clone(i.threshold),gridValueFormat:U.clone(this.model.getGridValueFormat())});this.disposables.push(j);j.attachEventListener("propertyModelChange",i.id,"onpropertyModelChange");k.set("visible",true);this.toggleButtonStatus(false);this.updateScrollbars();},openAndORPopup:function W(l,i){var j=new mstrmojo.ui.menus.MenuConfig();j.hostId=this.id;j.hostElement=i;j.isHostedWithin=false;j.menuCssClass="andor-PopupList";var k=function k(r){var m=l,q=r.ctxt.did,p=q>21?true:null,o=q-(p?21:0);var n=m&&m.parent;if(n&&n.data&&n.data.et===J.ANDOR){n.edit(m,o,p);}else{var s=m&&m.data;if(s&&(s.not!==p)){s.not=p;m.paint();}}};j.addMenuItem(T[19],"",k,{did:19});j.addMenuItem(T[20],"",k,{did:20});j.addMenuItem(T["19_21"],"",k,{did:19+21});j.addMenuItem(T["20_21"],"",k,{did:20+21});this.openPopup(j.newInstance());},toggleButtonStatus:function A(i){this.buttonBar.children.forEach(function(j){j.set("enabled",i);});},setRowPanelVisibility:function B(j){var i=this.content;i.rowPanel.set("visible",j);i.newCondition.set("visible",j);this.updateScrollbars();},children:[{scriptClass:"mstrmojo.Widget",alias:"rulesTitles",markupString:"<div class='rulesTitles'><div class='container'></div><div class='order'>"+mstrmojo.desc(3095,"Order")+"</div><div class='condition'>"+mstrmojo.desc(11890,"Threshold Conditions")+"</div><div class='format'>"+mstrmojo.desc(11891,"Format Preview")+"</div></div>"},{scriptClass:"mstrmojo.Box",cssClass:"content",alias:"content",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}"><div class="scroll-container"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},rowPanel:undefined,newCondition:undefined,conditionWalk:undefined,property:undefined,children:[{scriptClass:"mstrmojo.threshold.ThresholdRowPanel",alias:"rowPanel",children:[]},{scriptClass:"mstrmojo.Label",alias:"newCondition",cssClass:"link",text:mstrmojo.desc(4585,"New Threshold"),onclick:function h(){d.call(mstrmojo.all[g]);}},{scriptClass:"mstrmojo.threshold.ConditionWalk",alias:"conditionWalk",height:"300px",width:"750px",visible:false},{scriptClass:"mstrmojo.threshold.PropertyPanel",alias:"property",visible:false}]},{alias:"buttonBar",scriptClass:"mstrmojo.Box",slot:"buttonNode",children:[Y(mstrmojo.desc(221,"Cancel"),function(){mstrmojo.all[g].close();}),Y(mstrmojo.desc(1442,"OK"),function(){a.call(mstrmojo.all[g],false);mstrmojo.all[g].close();},true),Y(mstrmojo.desc(2031,"Apply"),function(){a.call(mstrmojo.all[g],true);},true),{scriptClass:"mstrmojo.Label",cssClass:"link",alias:"quickLink",text:mstrmojo.desc(14004,"Quick Thresholds Editor..."),onclick:function h(){var k=mstrmojo.all[g],j=k.model,i=k.controller,m=j.isAdvanced(j.metricId),n=function(){k.close();j.editorMode=mstrmojo.threshold.ThresholdModel.EDITOR_TYPES.SIMPLE_EDITOR;},l=[Y(m?mstrmojo.desc(1442,"OK"):mstrmojo.desc(2827,"Clear"),function(){n();i.openEditor();},m,m?undefined:{cssClass:"nosave"})];if(!m){l.push(Y(mstrmojo.desc(2031,"Apply"),function(){n();a.call(k,true);},true));}l.push(Y(mstrmojo.desc(2223,"Cancel")));mstrmojo.warn(m?mstrmojo.desc(13998,"This action will clear the thresholds definition. Do you want to proceed?"):mstrmojo.desc(13999,"Do you want to apply your thresholds before using the Quick Thresholds Editor?"),undefined,{cssClass:m?undefined:"save-threshold-warning",buttons:l});}}]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.css","mstrmojo.dom","mstrmojo.expr","mstrmojo.hash","mstrmojo.Box","mstrmojo.Button","mstrmojo.Dial","mstrmojo.Editor","mstrmojo.FilterExpr","mstrmojo.HBox","mstrmojo.Label","mstrmojo.Obj","mstrmojo.CheckBox","mstrmojo.warehouse.EnumObjectTypes","mstrmojo.fe.FilterExprTree","mstrmojo.fe.RelationFilterExprTree","mstrmojo.fe.CreateSetEditor","mstrmojo.fe.ConditionWalk","mstrmojo.ui.Pulldown","mstrmojo.ui.StatusButton");var Z=mstrmojo.expr,I=Z.ET,P=Z.BRANCH_FNS,X=mstrmojo.Obj,W=mstrmojo.dom,a=mstrmojo.array,T=mstrmojo.hash,d=mstrmojo.css,C=mstrmojo.warehouse.EnumObjectTypes,K={TEMPLATE:0,DATASET:1},E=mstrmojo.mstr.EnumNodeDimty,R=a.hash([E.NodeDimtyUnspecified,E.NodeDimtyNone]),N=200,H=mstrmojo.ui.PopupConfig.ENUM_CORNERS;function B(g){a.forEach(this.buttonBar.children[0].children,function(h){h.set("enabled",g);});}function Y(){var g=this.avatar;if(g){g.parentNode.removeChild(g);delete this.avatar;d.removeClass(g,[this.avatarCssClass]);}}mstrmojo.fe.FilterEditorBase=mstrmojo.declare(mstrmojo.Editor,null,{onSave:null,title:mstrmojo.desc(12032,"View Filter Editor"),help:"view_filter_editor_for_report_services_documents.htm",cssClass:"mstrmojo-charcoalboxe mstrmojo-FE",showLimits:true,objectBrowsingEnabled:false,children:null,init:function U(g){this.children=[{alias:"feContent",scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-FE-content",postCreate:function(){this.children=[{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-FE-exprTool",children:[{scriptClass:"mstrmojo.ui.StatusButton",cssClass:"mstrmojo-FE-addCondition",postCreate:function h(){this.editor=this.parent.parent.parent;this.statusList=this.editor.getAddConditionList();this.status=this.statusList[0];},onButtonClick:function(i){if(i){i.handler.apply(this.editor);}}}]},this.parent.getExpressionContainerCfg()];}},this.getConditionWalkConfig(),{alias:"buttonBar",scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBar",slot:"buttonNode",children:[{scriptClass:"mstrmojo.HBox",cssText:"float:right; border-collapse: separate",cellSpacing:3,children:[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton hot",text:mstrmojo.desc(118,"Save"),onclick:function(){var h=this.editor;M(h);h.close();},bindings:{enabled:function(){return !this.editor.readOnly;},editor:"this.parent.parent.parent"}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-WebButton",text:mstrmojo.desc(221,"Cancel"),onclick:function(){this.editor.close();},bindings:{editor:"this.parent.parent.parent"}}]}]}];this._super(g);this.model=this.model||new X();},getExpressionContainerCfg:function(){var g=this;return{alias:"feExpr",scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-FE-expr-list",postCreate:function(){this.children=g.getExpressionContentsConfig();},onRender:function(){W.attachMarkupEvent(this.id,this.domNode,"mousedown");},onmousedown:function(h){var i=W.eventTarget(h.hWin,h.e);if(this.isBlankArea(i)){this.clearSelect();}},isBlankArea:function(h){return h===this.domNode;},clearSelect:function(){}};},getExpressionContentsConfig:function(){return[];},getConditionWalkConfig:function(){var h=this;return{scriptClass:"mstrmojo.rw.ConditionWalk",width:"750px",objectBrowsingEnabled:false,dimtyTypes:R,alias:"walk",visible:false,onOK:function g(){var j=this.condition;h.feContent.set("visible",true);this.set("visible",false);h.onConditionEdit(j,this.model.get());B.call(h,true);},close:function i(){h.feContent.set("visible",true);this.set("visible",false);var j=this.condition;if(j.isEmpty()){j.del();}B.call(h,true);},targets:null,targetsLastMod:null,ets:null,condition:null,bindings:{disableElementsBrowsing:"this.parent.disableElementsBrowsing"}};},onConditionEdit:function(h,g){h.tree.modifyConditionNode(h,g);},getAddConditionList:function c(){return[{n:mstrmojo.desc(1994,"Add Condition"),handler:function(){this.mainExpr.newCondition(null,true);}}];},andOrPopupRef:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-FE-andOrPopup mstrmojo-CGE-andOrPopup mstrmojo-ConditionWalk",contentNodeCssClass:"mstrmojo-balloon",slot:"containerNode",modal:false,autoClose:true,showTitle:false,draggable:false,openEffect:null,closeEffect:null,onOpen:function(){var g=this.condition,j=g&&g.data&&g.data.not,k=g&&g.parent,h=k&&k.data,i=(h&&h.fn)+(j?21:0);this.list.opening=true;this.list.set("selectedItem",isNaN(i)?null:{did:i});this.list.opening=false;},children:[{scriptClass:"mstrmojo.Dial",cssClass:"mstrmojo-CGE-andOrDial",alias:"list",itemMarkup:'<div class="dial-item {@css}">{@n}</div>',itemIdField:"did",items:[{did:19,n:P[19]},{did:20,n:P[20]},{did:19+21,n:P["19_21"]},{did:20+21,n:P["20_21"]}],onchange:function(){if(this.opening){return ;}var h=this.parent,g=h.condition,m=this.selectedItem,l=m&&m.did,k=l>21?true:null,j=l-(k?21:0);h.close();var i=g&&g.parent;if(i&&i.data&&i.data.et===I.ANDOR){i.edit(g,j,k);}else{var n=g&&g.data;if(n&&(n.not!==k)){n.not=k;g.paint();}}}}]},createSetPopupRef:{scriptClass:"mstrmojo.fe.CreateSetEditor",contentNodeCssClass:"",cssClass:"CreateSet-Editor",title:mstrmojo.desc(12034,"Create a Set"),slot:"containerNode"},_set_busy:function(h,g){if(g){this.set("enabled",false);this.set("iconClass","mstrmojo-WaitIcon");}else{this.set("enabled",true);this.set("iconClass","");}},_set_model:function(k,h){var i=this.model,j=i!==h;if(j){this.model=h;this.modelLastSet=new Date();var g=function(l){return Q(J(l));};h.exprForest=g(h.expr);h.limitExprForest=g(h.limitExpr);if(this.feContent&&this.feContent.feExpr.ve){this.feContent.feExpr.ve.nameFactory.clear();}}return j;},onUpdateBrowseElementsParams:mstrmojo.emptyFn});mstrmojo.fe.ReportFilterEditor=mstrmojo.declare(mstrmojo.fe.FilterEditorBase,null,{getExpressionContainerCfg:function(){var g=this._super();return mstrmojo.mixin({clearSelect:function(){this.re.clearTreeSelect();}},g);},getExpressionContentsConfig:function(){return[{alias:"re",scriptClass:"mstrmojo.fe.ReportFilterExprTree",level:K.DATASET,bindings:{items:"this.editor.model.exprForest || []"},postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("mainExpr",this);}}];}});mstrmojo.fe.ReportFilterExprTree=mstrmojo.declare(mstrmojo.fe.FilterExprTree,null,{scriptClass:"mstrmojo.fe.ReportFilterExprTree",cssClass:"mstrmojo-expr mstrmojo-FE-datasetExpr",onNew:function(g){g.data.isNew=true;F(this.editor,g.data,g.widget.ctxtBuilder.itemWidgets[g.index],"condition");},onnodeclick:function A(g){F(g.editor||this.tree.editor,this.data,this,g&&g.part);},allowDrop:function G(g){var i=g&&g.src,k=i&&i.data,j=k&&k.et,h=i&&i.widget&&i.widget.tree;return j&&this!==h;}});mstrmojo.fe.FilterEditor=mstrmojo.declare(mstrmojo.fe.FilterEditorBase,null,{getExpressionContainerCfg:function(){var g=this._super();return mstrmojo.mixin({isBlankArea:function(h){if(this._super(h)){return true;}return !a.filterOne([this.ve,this.vle],function(i){if(W.contains(i.domNode,h,true)){return true;}});},clearSelect:function(){this.ve.clearTreeSelect();this.vle.clearTreeSelect();}},g);},getExpressionContentsConfig:function(){return[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11746,"Dataset Level Conditions"),cssClass:"mstrmojo-FE-expr-header dl",bindings:{visible:"true || this.parent.parent.parent.showLimits"}},{alias:"ve",scriptClass:"mstrmojo.fe.RWViewFilterExprTree",level:K.DATASET,bindings:{items:"this.editor.model.exprForest || []"},onBlankClick:function(g){this.parent.clearSelect(g);},supportRelation:true,postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("mainExpr",this);}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11747,"Template Level Conditions"),cssClass:"mstrmojo-FE-expr-header tl",bindings:{visible:"this.parent.parent.parent.showLimits"}},{alias:"vle",scriptClass:"mstrmojo.fe.RWViewLimitExprTree",level:K.TEMPLATE,bindings:{visible:"this.editor.showLimits",items:"this.editor.model.limitExprForest || []"},onBlankClick:function(g){this.parent.clearSelect(g);},postApplyProperties:function(){this.editor=this.parent.parent.parent;this.editor.set("limitExpr",this);}}];},getConditionWalkConfig:function(){var g=this._super();T.copy({scriptClass:"mstrmojo.fe.ConditionWalk"},g);return g;},getAddConditionList:function c(){var g=this._super();g.push({n:mstrmojo.desc(12055,"Add Dynamic Condition"),handler:function(){this.mainExpr.newCondition({et:I.XML,idc:1,ph:{}},true);}});return g;},onConditionEdit:function(i,h){if(i.tree.level===i.level||i.tree.level===undefined){this._super(i,h);}else{i.parent.remove(i.data);var g=K.TEMPLATE===i.level?this.limitExpr:this.mainExpr;g.addSingleCondition(h);}}});mstrmojo.fe.RWViewFilterExprTree=mstrmojo.declare(mstrmojo.fe.RelationFilterExprTree,null,{scriptClass:"mstrmojo.fe.RWViewFilterExprTree",cssClass:"mstrmojo-expr mstrmojo-FE-datasetExpr",onNew:function(g){g.data.isNew=true;if(!g.data.ph){F(this.editor,g.data,g.widget.ctxtBuilder.itemWidgets[g.index],"condition");}},onnodeclick:function A(g){F(g.editor||this.tree.editor,this.data,this,g&&g.part);},ondragend:function O(i){var h=i&&i.tgt,g=h&&h.widget;if(this.tree&&g&&g.tree&&g.tree!==this.tree){Y.call(this);return ;}this._super(i);},getItemConfig:function(i,g,j){var h=this._super(i,g,j);return T.copy({getConditionTextPostfix:function(){if(this.data.et!==I.MQ){return"";}return'<img class="mstrmojo-moveToViewLimit" src="../images/1ptrans.gif" title="'+mstrmojo.desc(4978,"Move to view limit")+'"onclick="var w = mstrmojo.all[\''+this.id+"']; w.tree.moveMQNodeToViewLimit(w); return false;\" />";}},h);},moveMQNodeToViewLimit:function(i){if(i.data.et!==I.MQ){return ;}var h=T.copy(i.data);i.parent.remove(i.data);var g=this.editor.limitExpr;g.addSingleCondition(h);},allowDrop:function G(g){var i=g&&g.src,l=i&&i.data,k=l&&l.et,j=this.tree,h=i&&i.widget&&i.widget.tree;return k&&(this===j?(h!==j):true);}});mstrmojo.fe.RWViewLimitExprTree=mstrmojo.declare(mstrmojo.fe.FilterExprTree,null,{scriptClass:"mstrmojo.fe.RWViewLimitExprTree",cssClass:"mstrmojo-expr mstrmojo-FE-limitExpr",validExprTypes:a.hash([I.MQ]),onnodeclick:function A(g){F(this.tree.editor,this.data,this,g&&g.part);},onConditionEdit:function(h,g){this._super(h,g);h.data.mdxUnitId=h.data.m.did;V(h);},addSingleCondition:function(h){var g=this._super(h);V(g);},allowDrop:function(g){var j=g&&g.src,l=j&&j.data,k=l&&l.et,i=this.tree,h=j&&j.widget&&j.widget.tree;if(i===h){return this!==h&&this.data&&(this===j.parent||this.data.mdxUnitId===l.mdxUnitId);}return k===I.MQ;},ondrop:function L(h){var k=h&&h.src,g=k&&k.widget;if(g&&g.tree!==this.tree){var j=k&&k.data;if(j&&j.index!==null){var i=g.ctxtBuilder.itemWidgets[j.index];i.tree.moveMQNodeToViewLimit(i);}k.data=null;}this._super(h);},isEditable:function(g){return g.mdxUnitId&&this._super(g);},ondragend:function S(g){var j=g&&g.tgt,h=j&&j.widget;if(h&&h.tree!==this.tree){var i=g.src&&g.src.data;if(i&&(i.indices||(i.index!==null))){this.remove(i.indices||i.index);}Y.call(this);}else{this._super(g);}},moveMQNodeToViewFilter:function(h){var g=this.editor.mainExpr;h.parent.remove(h.data);g.addSingleCondition(h.data);},getItemConfig:function(i,g,j){i.mdxUnitId=D(i);var h=this._super(i,g,j);return T.copy({cssClass:f(i,g,j)?"per-metric-limit":"",forbidRelation:true,getConditionTextPostfix:function(){if(this.data.et!==I.MQ){return"";}return'<img class="mstrmojo-moveToViewFilter" src="../images/1ptrans.gif" title="'+mstrmojo.desc(9746,"Move to view filter")+'"onclick="var w = mstrmojo.all[\''+this.id+"']; w.tree.moveMQNodeToViewFilter(w); return false;\" />";}},h);}});function F(o,l,m,r){var h=W.delta(m.domNode,o.containerNode);h.y+=(r==="andor"?16:parseInt(m.domNode.offsetHeight,10));var p={condition:m,zIndex:o.zIndex+10,left:h.x+"px",top:h.y+"px"},g;switch(r){case"andor":if(o.skipAndOrPopup){return ;}g="andOrPopupRef";break;case"createSet":case"createSetOpt":var q=o.model.targets;g="createSetPopupRef";p.type=r;p.model={attrs:a.filter(q,function(n){return n.t===C.ATTRIBUTE;}),metrics:a.filter(q,function(n){return n.t===C.METRIC;})};if(r==="createSetOpt"){p.condition=m.parent;p.model.childIdx=m.childIndex();}break;case"condition":var k=o.walk,i=m.textNode.cloneNode(true),j=k.conditionNode.firstChild;d.removeClass(i,"editable");d.addClass(k.conditionNode,"mstrmojo-ConditionNode");if(j.firstChild){j.removeChild(j.firstChild);}j.appendChild(i);k.set("objectBrowsingEnabled",o.objectBrowsingEnabled);k.set("targets",o.model.targets);k.set("targetsLastMod",o.modelLastSet);k.set("ets",m.tree.validExprTypes||o.validExprTypes);k.set("condition",m);k.set("model",T.clone(l));k.set("hasPrompt",o.model.hasPrompt);k.set("disableElementsBrowsing",o.disableElementsBrowsing||k.disableElementsBrowsing);k.set("editor",o);k.set("inRelation",m.inRelation);o.feContent.set("visible",false);k.set("visible",true);k.columnWalk.target.updateScrollbars();B.call(o,false);return ;}o.openPopup(g,p);}function M(h){var g=h.model;g.expr=e(g.exprForest);g.limitExpr=e(b(g.limitExprForest));h.onSave(g);}function Q(h){var g=[];a.forEach(h,function(i){if(!i){return ;}if(i.et===I.ANDOR){i.nds=Q(i.nds);if(i.nds.length===0){return ;}else{if(i.nds.length===1){var j=i.nds[0];if(i.not){j.not=!j.not;}g.push(j);return ;}}}g.push(i);});return g;}function J(g){return g?[g]:[];}function e(g){return g&&g.length===1?g[0]:null;}function b(i){var h=Q(i),g;if(!h[0]||h[0].mdxUnitId){g={et:I.ANDOR,fn:Z.FN.AND,nds:h};}else{g=h[0];}return[g];}function f(h,g,i){return(i===i.tree||i.parent===i.tree)&&!!h.mdxUnitId;}function D(h){if(!("mdxUnitId" in h)){var g;switch(h.et){case I.MQ:g=h.m.did||null;break;case I.ANDOR:a.forEach(h.nds,function(j){var i=D(j);if(g===undefined){g=i;}else{if(g!==i){g=null;return false;}}return true;});break;default:g=undefined;break;}h.mdxUnitId=g;}return h.mdxUnitId;}function V(l){var n=l.tree,m=n.ctxtBuilder.itemWidgets[0],q=l.parent,o=a.indexOf(q.items,l.data),j=q.items[o],h=j.mdxUnitId;if(q===n){return ;}if(q.data.mdxUnitId===h){return ;}if(m.data.mdxUnitId){var i={et:I.ANDOR,fn:Z.FN.AND,nds:[m.data,j]};n.remove(0);n.add([i]);n.ctxtBuilder.itemWidgets[0].ctxtBuilder.itemWidgets[0].remove(j);}else{var k=m,g;a.forEach(m.data.nds,function(s,r){if(s.mdxUnitId===j.mdxUnitId&&m.items[r]!==j){k=m.ctxtBuilder.itemWidgets[r];g=r;return false;}});if(k===q){return ;}if(k.data.et!==I.ANDOR){var p={et:I.ANDOR,fn:Z.FN.AND,nds:[k.data,j]};m.add([p],g+1);m.remove(k.data);}else{k.add([j]);}q.remove(j);}}}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.css","mstrmojo.expr","mstrmojo.ValidationTextBox","mstrmojo.HBox","mstrmojo.ui.menus.EditorConfig","mstrmojo.mstr.EnumFunction","mstrmojo.DropDownList","mstrmojo.ui.Pulldown","mstrmojo.SearchablePulldown","mstrmojo.ButtonList","mstrmojo.Box","mstrmojo.Label","mstrmojo.RadioList","mstrmojo.CheckList","mstrmojo.EditableLabel","mstrmojo.CheckBox","mstrmojo.fe.FilterEditor","mstrmojo._FormatDefinition","mstrmojo.num","mstrmojo.locales","mstrmojo.vi.models.VIComponentMap","mstrmojo.func","mstrmojo.dom","mstrmojo.ME.AttributeEditBox","mstrmojo.string","mstrmojo.dom","mstrmojo.models.datasets.DataInterface","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.vi.ui.editors.ObjectPicker","mstrmojo.vi.ui.editors.AttributeLinkEditor","mstrmojo.vi.ui.NumberFormatter");mstrmojo.requiresDescs(1442,1885,1886,2022,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,3993,4564,11494,11495,11496,11497,14612);var l=mstrmojo.mstr.EnumFunction,X=mstrmojo.hash,o=mstrmojo.array,AB=mstrmojo.expr.ET,D=mstrmojo.css,V=mstrmojo.dom,r=mstrmojo.Button.newWebButton,S=mstrmojo.ME.MetricToken.brackets,T=mstrmojo._FormatDefinition,m=mstrmojo.models.datasets.DataInterface,K=mstrmojo.vi.models.VIComponentMap.TYPES,U=mstrmojo.chart.model.enums.EnumDSSObjectType;var Y={SUM:mstrmojo.desc(2131,"Sum"),ADD:mstrmojo.desc(6017,"Add"),AVG:mstrmojo.desc(2122,"Average"),MAX:mstrmojo.desc(2125,"Maximum"),GST:mstrmojo.desc(5869,"Greatest"),MIN:mstrmojo.desc(2127,"Minimum"),LST:mstrmojo.desc(5868,"Least"),CNT:mstrmojo.desc(2123,"Count"),MTP:mstrmojo.desc(5418,"Multiply"),STD:mstrmojo.desc(2130,"Standard Deviation"),PTD:mstrmojo.desc(11494,"Population Standard Deviation")},c={SUM:{n:Y.SUM,t:l.FunctionSum},ADD:{n:Y.ADD,t:l.FunctionPlus},AVG:{n:Y.AVG,t:l.FunctionAvg},MAX:{n:Y.MAX,t:l.FunctionMax},GST:{n:Y.GST,t:l.FunctionGreatest},MIN:{n:Y.MIN,t:l.FunctionMin},LST:{n:Y.LST,t:l.FunctionLeast},TMS:{n:Y.MTP,t:l.FunctionTimes},CNT:{n:Y.CNT,t:l.FunctionCount},GEM:{n:mstrmojo.desc(2124,"Geometric Mean"),t:l.FunctionGeomean},MED:{n:mstrmojo.desc(2126,"Median"),t:l.FunctionMedian},MOD:{n:mstrmojo.desc(2128,"Mode"),t:l.FunctionMode},PDT:{n:mstrmojo.desc(2129,"Product"),t:l.FunctionProduct},STD:{n:mstrmojo.desc(2130,"Standard Deviation"),t:l.FunctionStdev},VAR:{n:mstrmojo.desc(2132,"Variance"),t:l.FunctionVar}},Z=[{n:Y.SUM,t:l.FunctionOLAPSum},{n:Y.AVG,t:l.FunctionOLAPAvg},{n:Y.MIN,t:l.FunctionOLAPMin},{n:Y.MAX,t:l.FunctionOLAPMax},{n:Y.CNT,t:l.FunctionOLAPCount}],AC=[{n:Y.SUM,t:l.FunctionOLAPSum},{n:Y.AVG,t:l.FunctionOLAPAvg},{n:Y.MIN,t:l.FunctionOLAPMin},{n:Y.MAX,t:l.FunctionOLAPMax},{n:Y.CNT,t:l.FunctionOLAPCount}],M=[{n:mstrmojo.desc(1058,"Previous"),t:l.FunctionLag},{n:mstrmojo.desc(1059,"Next"),t:l.FunctionLead},{n:mstrmojo.desc(4046,"First"),t:l.FunctionFirst},{n:mstrmojo.desc(4049,"Last"),t:l.FunctionLast}];function e(AG,AI,AH,AE){return{scriptClass:"mstrmojo.ui.Pulldown",items:AG,selectedIndex:AI,onitemSelected:function AF(AJ){var AK=this.parent;while(!AK.data||!AK.data[AH]){AK=AK.parent;}AK.data.set(AH,AE?AE(AJ):AJ.v);}};}function s(AF,AE){return{scriptClass:"mstrmojo.Box",cssClass:"breakByBox",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13903,"Break by:")},e(AF,AE,"breakBy",function(AG){return{id:AG.did,type:AG.t,dmy:AG.dmy};})]};}function z(AH){var AI=AH.metrics,AJ=AH.propName,AG=AH.optionValueField||"id",AE=o.find(AI,AG,AH.value),AK=function AK(AM){var AL=this.parent;while(!AL.data||!AL.data.hasOwnProperty(AJ)){AL=AL.parent;}AL.data.set(AJ,AM?{id:AM[AG],type:4}:{cst:this.text});};return{scriptClass:"mstrmojo.ui.SearchablePulldown",items:AI,selectedIndex:AE,useRichTooltip:true,bindings:AH.bindings,valid:true,allowCustomText:true,allowEmptyText:true,onvalidChange:function AF(){mstrmojo.css.toggleClass(this.domNode,"invalid",!this.valid);if(this.hasRendered){this.hideTooltip();this.showTooltip();}},updateTooltipConfig:function(){if(this.valid){this.richTooltip=null;return ;}this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-C vi-calculation-warning",left:this.domNode.offsetWidth+12,top:this.domNode.offsetHeight+5,refNode:this.domNode,content:mstrmojo.desc(13819,"Invalid input")};},onitemSelected:AK,onTextEditComplete:function(){AK.call(this,this.items[this.selectedIndex]);},onPopupWidgetOpened:function(){this.set("valid",true);},postkeyup:AH.postkeyup};}function R(AH,AG,AF){if(AH&&AH.datap){var AE=o.filterOne(AH.datap,function(AJ){return AJ.tbid===AG;}),AI=AE&&AE.maps.amps;return o.filterOne(AI,function(AJ){return AF===AJ.aimp.atid;});}return null;}function h(AE,AI){var AG=o.filterOne(AE&&AE.afmps,function(AJ){return AJ.fmid===AI;}),AH=AG&&(AG.sqc?AG:AG.col.oi),AF;if(AH&&AH.sqc){AF={did:AH.sqc.id,n:mstrmojo.string.decodeHtmlString(AH.cln),coldtp:AH.sqc.dt.tp,georole:AH.geo,timerole:AH.tim,der:AH.sqc.der};}else{if(AH){AF={did:AH.did,n:mstrmojo.string.decodeHtmlString(AH.def.cln),coldtp:AH.def.dt.tp,georole:AG.geo,timerole:AH.def.dicl.time,der:AH.def.dicl.der};}}return AF;}function C(AF,AE,AH){var AG={success:function(AI){if(AI&&AI.msgid){mstrApp.serverRequest({taskId:"qBuilder.GetReportXDADefinition",msgid:AI.msgid,bindingflag:2,previewflag:261,browsetype:5},AH);}},failure:function(AI){mstrApp.onerror(AI);}};mstrApp.serverRequest({taskId:"duplicateReportInstance",datasetID:AE,messageID:AF},AG);}function I(AJ,AK,AH){var AF=AJ.srcTableId,AM=AJ.tgtTableId,AE,AI,AG=function(AQ,AP){var AS="<mpcs><mpc ",AO,AR;for(AO in AP){AR=AP[AO];AS+='$ACT="$VAL" '.replace("$ACT",AO).replace("$VAL",AR);}AS+="/></mpcs>";return{act:"changeEMMAMapping",tbid:AQ,dsid:AJ.dsid,mapping:AS};},AN=function(AQ){var AR={success:function(){AL();}},AP,AO;AE=R(AQ,AF,AJ.srcId);AI=R(AQ,AM,AJ.tgtId);AP=h(AE,AE.afmps[0].fmid);AO=[AG(AF,{did:AP.did,oid:AI.aimp.atid,fg:1})];AK.getDataService().submitUpdates(AO,AR);},AL=function(){var AO=[],AR={},AP,AQ;if(!AE||!AI){return ;}AR[AF]={};AR[AM]={};o.forEach(AE.afmps,function(AV){var AT=o.find(AI.afmps,"fmid",AV.fmid),AW,AU,AS;if(AT>=0){AP=h(AE,AV.fmid);AQ=h(AI,AV.fmid);if(AP.georole!==AQ.georole){AS=(AP.georole===0)?AF:AM;AW=(AP.georole===0)?AP.did:AQ.did;AU=AP.georole||AQ.georole;AR[AS][AW]=X.copy({did:AW,georole:AU},AR[AS][AW]);}if(AP.timerole!==AQ.timerole){AS=(AP.timerole===0)?AF:AM;AW=(AP.timerole===0)?AP.did:AQ.did;AU=AP.timerole||AQ.timerole;AR[AS][AW]=X.copy({did:AW,timerole:AU},AR[AS][AW]);}if(AP.der!==AQ.der){AU=AP.der|AQ.der;AR[AF][AP.did]=X.copy({did:AP.did,drvflg:AU},AR[AF][AP.did]);AR[AM][AQ.did]=X.copy({did:AQ.did,drvflg:AU},AR[AM][AQ.did]);}}});X.forEach(AR,function(AS,AT){X.forEach(AS,function(AU){AO.push(AG(AT,AU));});});AP=h(AE,AE.afmps[0].fmid);AO.push(AG(AF,{did:AP.did,oid:AI.aimp.atid}));if(AH){AH(AO);}};C(AK.mid,AJ.dsid,{success:AN});}function W(AJ,AG,AF,AK){var AE=0,AI=[],AH=function(AL){var AM=AF[AE-1];if(AL&&AL.tks&&AM){AI.push({fid:AM.fid,fnm:AM.fnm,ftk:AL.tks.items});}if(AE===AF.length){AK(AI);return ;}AM=AF[AE++];mstrmojo.ME.MetricDataService.validateMetric({metricId:AG,formID:AM.fid,objectType:12,tokenStreamXML:"",metricXML:"",msgID:AJ},{success:AH});};AH();}function v(AE,AF){return{v:S(AE.n)+"@"+S(AF.fnm),tp:275,lv:1,exv:AF.fid,extp:8,oi:{did:AE.did,t:AE.t,n:AE.n}};}mstrmojo.vi.ui.DatasetUnitMenuUtils=mstrmojo.provide("mstrmojo.vi.ui.DatasetUnitMenuUtils",{getAvailableShortcutMetricFunctionsGroup:function y(AE){return{"12":[[c.AVG,c.CNT,c.MAX,c.MIN,c.STD,c.SUM,c.VAR]],"4":[[c.SUM,c.AVG,c.MIN,c.MAX,c.CNT],[c.GEM,c.MED,c.MOD,c.PDT,c.STD,c.VAR]]}[AE.t];},isAmongFunctions:function A(AF,AE){return AE.some(function(AG){return AG.some(function(AH){return AH.t===AF;});});},getMultiSelectionShortcutMetricFunctions:function J(AE){var AF=true;o.forEach(AE,function(AG){if(4!==AG.t){AF=false;return false;}return true;});return AF?[c.ADD,c.AVG,c.GST,c.LST,c.TMS]:[];},getRelativeReferenceMenu:function b(AI,AG,AL,AE){var AH=0,AF=M[AH],AK=0,AJ=AL&&AL[AK];return new mstrmojo.ui.menus.EditorConfig({data:{item:AI,relativeRef:AF,breakBy:AJ},cssClass:"RelativeReference-MenuEditor",contents:[{scriptClass:"mstrmojo.Box",cssClass:"funcBox",children:[{scriptClass:"mstrmojo.Label",visible:AG&&AG.length,text:AG},e(M,AH,"relativeRef",function(AM){return AM.t;})]},s(AL,AK)],fnOk:function(AM){return AE(AM.item,AM.relativeRef,[AM.breakBy]);}});},getMovingTotalMenu:function B(AO,AI,AK){var AP=1,AH=AC[AP].t,AJ=1,AF=mstrmojo.desc(13289,"Starting previous##rows").split("##"),AN=0,AG=AI&&AI[AN];return new mstrmojo.ui.menus.EditorConfig({cssClass:"MovingTotal-MenuEditor",data:{item:AO,funcType:AH,windowSize:AJ,breakBy:AG},contents:[e(AC,AP,"funcType",function(AQ){return AQ.t;}),{alias:"winSzBox",scriptClass:"mstrmojo.HBox",children:[{scriptClass:"mstrmojo.Label",cssClass:"WinSzPrefix",text:AF[0]},{alias:"winSz",scriptClass:"mstrmojo.ValidationTextBox",required:true,dtp:mstrmojo.expr.DTP.INTEGER,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL,min:1},postCreate:function AM(){this.set("value",AJ);},_ontooltipover:function(){var AQ=mstrmojo.all[this.id];AQ._hovered=true;AQ.showTooltip();},_ontooltipout:function(){var AQ=mstrmojo.all[this.id];AQ._hovered=false;AQ.hideTooltip();},useRichTooltip:true,tooltipOpenDelay:0,onInvalid:function(){var AQ=this.validationStatus.msg,AR=!(this.richTooltip&&AQ===this.richTooltip.content);this.richTooltip={posType:mstrmojo.tooltip.POS_BOTTOMLEFT,cssClass:"vi-warning vi-tooltip-V",top:-5,refNode:this.domNode,content:AQ};if(this._hovered&&AR){this.hideTooltip();this.showTooltip();}},onValid:function(){this.richTooltip=null;this.hideTooltip();},postvalueChange:function AL(){var AQ=this.isValid();this.parent.parent.popupConfig.data.set("windowSize",AQ?parseInt(this.value,10):0);}},{scriptClass:"mstrmojo.Label",cssClass:"WinSzSuffix",text:AF[1]}]},s(AI,AN)],bindings:{okEnabled:function(){return !!this.data.windowSize;}},fnOk:function AE(AQ){if(AK){AK(AO,AQ.funcType,AQ.windowSize,[AQ.breakBy]);}}});},getRunningTotalMenu:function x(AH,AK,AF){var AG=0,AE=Z[AG].t,AJ=0,AI=AK&&AK[AJ];return new mstrmojo.ui.menus.EditorConfig({data:{item:AH,func:AE,breakBy:AI},cssClass:"RunningTotal-MenuEditor",contents:[e(Z,AG,"func",function(AL){return AL.t;}),s(AK,AJ)],fnOk:function(AL){return AF(AL.item,AL.func,[AL.breakBy]);}});},getRankMetricEditor:function t(AI,AL,AG){var AE=[{n:mstrmojo.desc(1886,"Descending"),v:"0"},{n:mstrmojo.desc(1885,"Ascending"),v:"-1"}],AF=0,AH=AE[AF].v,AK=0,AJ=AL&&AL[AK];return new mstrmojo.ui.menus.EditorConfig({data:{item:AI,order:AH,breakBy:AJ},cssClass:"NewRankMetric-MenuEditor",contents:[{scriptClass:"mstrmojo.Box",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(14612,"Sort:")},e(AE,AF,"order")]},s(AL,AK)],fnOk:function(AM){return AG(AM.item,AM.order,[AM.breakBy]);}});},insertAddUnitToFilterMenu:function H(AJ,AF,AE){var AH=this,AG=mstrmojo.desc(2022,"Add to Filter"),AI=o.ensureArray(AE).filter(function(AK){return AH.isValidAddToFP(AF,AK);});if(AI.length>0){AJ.addMenuItem(AG,"",function(){AF.addFilterStackSelectors(AI);});}else{AJ.addDisabledMenuItem(AG,"");}},isValidAddToFP:function N(AH,AJ){var AF=AH.controller.view.builder,AG=AF.getLayoutVIMap(AH.getCurrentLayoutKey()).getComponent(K.FILTER_STACK),AK;AK=(!AG||o.find(AG.getFilterDefinitions(),"srcid",AJ.did)===-1);if(AK&&AJ.lock){var AE=AJ.fs||[],AI;AK=false;for(AI=0;AI<AE.length;AI++){if(AE[AI].iidx){AK=true;break;}}}return AK;},renameItem:function n(AJ,AM,AF,AH){var AI=AJ.mstrmojoId,AL=mstrmojo.dom.findWidget(AJ);AH=AH||{};if(!AI){var AK=mstrmojo.insert({scriptClass:"mstrmojo.EditableLabel",editOnClick:false,text:AM.n,title:AM.dsc||"",allowEmptyText:AH.allowEmptyText,cssClass:AH.cssClass||"",placeholder:AJ,onTextEditComplete:function AE(AN){if(AN){return AF(this);}},onmousedown:function AG(AN){if(this.isEditing){AN.cancel();}}});if(AL&&AL.draggable){AK.parent=AL;}AK.render();AI=AK.id;}mstrmojo.all[AI].set("isEditing",true);return mstrmojo.all[AI];},getMultipleMetricsCalculationMenus:function g(AL,AE,AO){var AK=new mstrmojo.ui.menus.MenuConfig(),AQ=mstrmojo.vi.ui.DatasetUnitMenuUtils.getMultiSelectionShortcutMetricFunctions(AL),AI=function(AS,AT,AR){return{dsid:AE,funcType:AT,funcType2:AR,items:AS};};AK.useTooltip=true;AQ.forEach(function(AR){AK.addMenuItem(AR.n,"",function(){AO(AI(AL,AR.t));});});if(AL.length===2){var AJ=mstrmojo.mstr.EnumFunction,AH=AJ.FunctionDivide,AF=AJ.FunctionMinus,AN=AL[0],AM=AL[1],AP=function(AV,AT,AR,AU,AS){AK.addMenuItem(AV,"",function(){AO(AI([AT,AR],AU,AS));});},AG=[{n:function(AS,AR){return AS.n+"/"+AR.n;},fn:AH},{n:function(AS,AR){return AS.n+"-"+AR.n;},fn:AF},{n:function(AS,AR){return"("+AS.n+"-"+AR.n+")/"+AR.n;},fn:AF,fn2:AH}];AG.forEach(function(AR){AK.addSeparator();AP(AR.n(AN,AM),AN,AM,AR.fn,AR.fn2);AP(AR.n(AM,AN),AM,AN,AR.fn,AR.fn2);});}return AK;},getCalculationMetricEditor:function L(AM,AN,AL){var AG=[{n:"",css:"operator-plus",funcType:l.FunctionPlus},{n:"",css:"operator-minus",funcType:l.FunctionMinus},{n:"",css:"operator-multiply",funcType:l.FunctionTimes},{n:"",css:"operator-divide",funcType:l.FunctionDivide},{n:"%",css:"operator-percent-diff",funcType:l.FunctionMinus,funcType2:l.FunctionDivide}],AH={m1:AN.did,m2:AM[0].did,operator:l.FunctionPlus,u1:{id:AN.did,type:4},u2:null},AF=function(AO){return{}.hasOwnProperty.call(AO,"cst");},AK=function(AO){return typeof AO==="string"&&!!AO.length&&!isNaN(Number(AO));};var AE="this.parent.popupConfig.valid || this.selectedIndex !== -1 || (!!this.selectedNode && this.selectedNode.innerHTML.length === 0)",AJ=function AJ(){var AO=this.parent.popupConfig;if(AO){AO.set("okEnabled",this[this.editableSlot].innerHTML.length!==0);}};return new mstrmojo.ui.menus.EditorConfig({cssClass:"Calculation-MenuEditor",contents:[z({metrics:AM,value:AH.m1,propName:"u1",optionValueField:"did",bindings:{valid:AE},postkeyup:AJ}),{scriptClass:"mstrmojo.ButtonListHoriz",items:AG,selectedIndex:0,postselectionChange:function AI(){this.parent.data.set("operator",this.selectedItem.funcType);this.parent.data.set("operator2",this.selectedItem.funcType2);}},z({metrics:AM,value:null,propName:"u2",optionValueField:"did",bindings:{valid:AE},postkeyup:AJ})],data:AH,okEnabled:false,bindings:{valid:function(){var AQ=this.data.u1,AP=this.data.u2,AR=this.data.operator;if(!AQ||!AP||!AR){return false;}var AO=!(AF(AQ)&&AF(AP))&&(!AF(AQ)||AK(AQ.cst))&&(!AF(AP)||AK(AP.cst));this.set("okEnabled",AO);return AO;}},fnOk:function(AO){return AL(AO.u1,AO.u2,AO.operator,AO.operator2);}});},getFilterEditor:function F(AF){var AK="dfe",AJ,AG={},AI=AF.datasetFilter;function AH(AL){if(!AL.et){return false;}if(AL.et===AB.RLS){return false;}if(AL.p){return false;}if(AL.cs&&AL.cs.some(function(AM){return !!AM.p;})){return false;}return !AL.nds||AL.nds.every(AH);}function AE(){o.forEach(AF.att,function(AM){if(AM.t!==12||AM.da){return ;}AG[AM.did]={did:AM.did,n:AM.n,t:AM.t,fs:AM.fs};});o.forEach(AF.mx,function(AM){if(AM.um){return ;}AG[AM.did]={did:AM.did,n:AM.n,t:AM.t};});if(AI){mstrmojo.expr.findTargets(AI,"did",AG);}var AL={expr:X.clone(AI),targets:X.valarray(AG)};AJ=AK&&window.mstrmojo&&mstrmojo.all[AK];if(!AJ){AJ=mstrmojo.insert({id:AK,scriptClass:"mstrmojo.fe.ReportFilterEditor",showLimits:false,objectBrowsingEnabled:true});}if(AF.zIndex){AJ.set("zIndex",AF.zIndex);}AJ.set("title",mstrmojo.desc(12138,"Dataset Filter #").replace("#",AF.datasetName));AJ.set("onSave",AF.fnOk);AJ.set("model",AL);AJ.onUpdateBrowseElementsParams=AF.browseParam;AJ.open();}if(AI&&!AH(AI)){mstrmojo.warn(mstrmojo.desc(13527,"The filter contains an advanced condition that cannot be edited."),{confirmBtn:{t:mstrmojo.desc(13528,"Clear existing filter"),fn:function(){AI=null;AE();}}},{title:mstrmojo.desc(11812,"Notification")});}else{AE();}},getCfgForAddUnitFromAllObject:function(AE,AF){var AG=null,AH=null,AI=[],AJ=function(AK,AL){if(!AL){return false;}return o.find((AL.att||[]).concat(AL.mx||[]),"did",AK.did)>-1;};X.forEach(AF,function(AL,AK){if(AL.idd){AG=AK;AH=AL;return false;}return true;});if(!AG){AG="$GUID_141";AI.push({act:"createDataset",mgo:true,prm:true,name:mstrApp.projectName,idd:true,newObjectIds:[AG]});}o.forEach(AE,function(AK){if(!AJ(AK,AH)){AI.push({act:"addUnitToDataset",dsid:AG,unitId:AK.did,unitType:AK.t});}});return{actions:AI,dsid:AG};},getAggregateByMenu:function k(AJ,AH){var AF=new mstrmojo.ui.menus.MenuConfig(),AG=function(AN,AM){var AP,AO;if(AM){var AL=AN.mexp.args[0];AP=AL.did;AO=AL.t;}else{AP=AN.did;AO=AN.t;}return{did:AP,t:AO};},AE=this.getAvailableShortcutMetricFunctionsGroup(AJ),AK=AJ.mexp?AJ.mexp.ft:null,AI=AJ.mexp&&this.isAmongFunctions(AK,AE);AE.forEach(function(AL,AM){if(AM!==0){AF.addSeparator();}AL.forEach(function(AN){AF.addMenuItem(AN.n,"",function(){AH(AG(AJ,AI),AN.t);});});});return AF;},showObjectPicker:function j(AF,AE){var AG="object_picker";return function(){var AH=mstrmojo.all[AG];if(!AH){AH=new mstrmojo.vi.ui.editors.ObjectPicker({id:AG});if(AE){AH.supportedTypes=o.hash(AE);AH.ob.browsableTypes="8,"+AE.join(",");}AH.render();}else{if(AE){AH.supportedTypes=o.hash(AE);AH.ob.browsableTypes="8,"+AE.join(",");}AH.browse();}AH.OKFn=AF||mstrmojo.emptyFn;AH.open();};},generateNumberFormat:function q(AJ){var AE=T.DefaultFormat.FormattingNumber,AF=T.NumberFormatCategory,AH=AJ||{},AG=AH.nct,AI=AG===AF.General&&AH.nfs==="General";return{category:(AG===undefined||AI)?AF.Automatic:AG,decimalPlaces:AH.ndp===undefined?2:AH.ndp,thousandSeparator:AH.nth?-1:0,currencySymbol:AH.ncs||AE.CurrencySymbol,currencyPosition:AH.ncp||AE.CurrencyPosition,format:AH.nfs||"",negativeNumbers:AH.nnn||AE.NegativeNumbers};},getNumberFormatEditor:function u(AH,AG,AF){var AE=this.generateNumberFormat(AG),AI=X.clone(AE),AK=X.clone(AE);return new mstrmojo.ui.menus.EditorConfig({data:AI,bindings:{okEnabled:function(){return !(this.data.category===AK.category&&this.data.format===AK.format);}},cssClass:"NumberFormat-MenuEditor",contents:[{scriptClass:"mstrmojo.vi.ui.NumberFormatter",formatValue:AE,myData:AI,oldData:AK,adjustAfterCategoryChange:function(){this.parent.adjustCornersForPopupOverflow();}}],fnOk:function AJ(AL){if(!(AL.category===AK.category&&AL.format===AK.format)){return AF(AL,AK);}}});},getHighlightElementHandler:function(AG,AF,AE){return function(){D.toggleClass(AF,AE||"open",AG);};},getConfDataTypeMenuCfg:function w(AE,AZ,AR,Am){var Ah="ToString",AY="ToNumber",AW="ToDateTime",AQ="keepOriginal",AH="Default",Ai={ToString:3,ToNumber:2,ToDateTime:8},AM={ToString:"D1ED29645DEC4DBF99E8E09ED939074B",ToNumber:"399C3EC1041643F1ACE8F2A92B1C1F2F",ToDateTime:"0A558C7295DE42DAA8C5594F1724563F"},AK="_pattern",Ak="_func",AU="_bft",Ap="_state",An={UNCHANGED:0,TO_CREATE:1,TO_UPDATE:2},AJ={n:"Default",v:"Default"},Af=[{n:"MM-DD-Year",v:"MM-DD-Year"},{n:"MM/DD/Year",v:"MM/DD/Year"},{n:"DD-MM-Year",v:"DD-MM-Year"},{n:"DD/mm/Year",v:"DD/mm/Year"},AJ],AG=[{n:mstrmojo.desc(13772,"Keep Original"),v:AQ},{n:mstrmojo.desc(12276,"String"),v:Ah},{n:mstrmojo.desc(2052,"Date"),v:AW},{n:mstrmojo.desc(3434,"Number"),v:AY}],AP=X.clone(AG).slice(1),AX=AZ.fs.filter(function(Ar){return AZ.da||Ar.obf;}),Aq=AX.length>1,AS=AX.length>5,AL=false,Ag=false,Aa=[],Ae=[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13773,"Select Data Type for New Attribute:")}],Ao={okEnabled:false},Aj=function(){var Ar=false;AX.forEach(function(As){Ar=Ar||(Ao[As.fnm+Ak+Ap]!==An.UNCHANGED)||(Ao[As.fnm+AK+Ap]!==An.UNCHANGED);});return Ar;},Ab=function(At,As){var Ar=0;if(At.da){o.forEach([Ah,AW,AY],function(Aw,Au){var Av=new RegExp("^\\s*"+Aw+"\\s*(<.*>)?\\s*\\((.+)\\)\\s*$","i").exec(As.f);if(Av&&Av[2]){Ar=Au+1;return false;}});}return Ar;},Ad=function(At,As){var Au=AH;if(AZ.da){var Ar=new RegExp("^\\s*"+As+'\\s*<\\s*Pattern\\s*=\\s*"(.+)"\\s*>.*$',"i").exec(At.f);if(!mstrmojo.string.isEmpty(Ar&&Ar[1])){Au=Ar[1];}}return Au;},Ac=function(){return AS?this.parent.parent.parent:(Aq?this.parent.parent:this.parent);},AV=function(Ar){if(AS){Ar.formList.updateScrollbars();}},AI=function(Ay,Az,Ax){var Ar=Az.fnm,Au=AS?Ay.formList[Az.fnm+AK]:Ay[Az.fnm+AK],Av=Aq?Au.children[1]:Au,Aw=Ao[Ar+Ak],At=AL&&(Aw===AW||Aw===Ah),As=Au.visible!==At;if(As){Au.set("visible",At);if(At){AV(Ay);}else{Av.hideTooltip();}}if(Ax){Av.set("text",Ad(Az,Aw));Av.set("items",Aw===AW?Af:[AJ]);}},AT=function(Ar){var As=false;AX.forEach(function(At){if(Ao[At.fnm+Ak]===AW||Ao[At.fnm+Ak]===Ah){As=true;return false;}});Ar.advancedLabel.set("visible",As);},AF=function(Au,As,Av,Ar){return{scriptClass:"mstrmojo.ui.Pulldown",items:Au,alias:Av.fnm+Ak,selectedIndex:As,onPopupWidgetOpened:function(){AV(Ac.call(this));},onitemSelected:function At(A0,Ay){var Az=Ac.call(this),A1=Az.data,A2=Av.fnm,Ax=A0.v,Aw=function(A3){if(A3){return(Au.length===3?An.TO_UPDATE:An.TO_CREATE);}return An.UNCHANGED;};A1.set(A2+Ak,Ax);A1.set(A2+AK,Ad(Av,Ax));A1.set(A2+AU,Ax===AQ?Av.bftp:Ai[Ax]);A1.set(A2+Ak+Ap,Aw(Ay!==As));A1.set("okEnabled",Aj());AI(Az,Av,true);AT(Az);}};},AO=function(At,Au,Ar){return{scriptClass:"mstrmojo.ui.SearchablePulldown",alias:At.fnm+AK,useRichTooltip:true,visible:Ar,allowCustomText:true,allowEmptyText:true,onPopupWidgetOpened:function(){AV(Ac.call(this));},customizeSearchResult:function(Av){if(o.find(Av,"v","Default")===-1&&this.items.length>0){Av.push(AJ);}},onclick:function(Av){mstrmojo.ui.SearchablePulldown.prototype.onclick.call(this,Av);this.set("isEditing",true);},updateData:function(Ax){var Av=Ac.call(this),Aw=Av.data,Ay=At.fnm;Aw.set(Ay+AK,Ax);Aw.set(Ay+AK+Ap,Au!==Ax?An.TO_UPDATE:An.UNCHANGED);Aw.set("okEnabled",Aj());},onitemSelected:function As(Aw,Av){if(Aw){this.updateData(Aw.v);}},onkeyup:function(Av){mstrmojo.ui.SearchablePulldown.prototype.onkeyup.call(this,Av);var Aw=this[this.editableSlot],Ax=Aw.innerText||Aw.textContent;this.updateData(Ax);},updateTooltipConfig:function(Aw){this.tooltipOpenDelay=Aw?500:0;var Av=V.position(this.domNode);this.richTooltip={content:mstrmojo.desc(14114,'Pattern determines the formatting for the resulting string of characters. You can use the custom numeric, date, and time formatting symbols. <br/> Example: if pattern is defined as "0,000.00" for "1001", it returns the string "1,001.00"'),posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-C",top:Av.y-2,left:Av.x+Av.w+10};}};},Al=function(Az,Ay,Ar,As,Ax){var Au=Ab(Az,Ay),Aw=Ad(Ay,AG[Au].v),At=Ay.fnm,Av=AG;if(Au>0){Av=AP;Au--;}As[At+AK]="";As[At+Ak]="";As[At+AU]="";As[At+Ak+Ap]=As[At+AK+Ap]=An.UNCHANGED;if(Ax){Ar.push({scriptClass:"mstrmojo.HBox",cssClass:"func-input",alias:At+Ak,children:[{scriptClass:"mstrmojo.Label",text:At,useRichTooltip:true,updateTooltipConfig:function(A2){this.tooltipOpenDelay=A2?500:0;var A1=this.domNode;var A0=V.position(A1);if(A1.scrollWidth>A1.offsetWidth){this.richTooltip={content:A1.innerText,posType:mstrmojo.tooltip.POS_TOPLEFT,cssClass:"vi-regular vi-tooltip-V",top:A0.y-A0.h-10,left:A0.x-10};}}},AF(Av,Au,Ay,true)]});Ar.push({scriptClass:"mstrmojo.HBox",cssClass:"pattern-input",alias:At+AK,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(12078,"Pattern")},AO(Ay,Aw,true)]});}else{Ar.push(AF(Av,Au,Ay,false));Ar.push(AO(Ay,Aw,false));}};o.forEach(AZ.fs,function(Ar){if(AE.als&&AE.als.links[AZ.did+" "+Ar.fid]){Ag=true;return false;}});if(Aq){AX.forEach(function(Ar){Al(AZ,Ar,AS?Aa:Ae,Ao,true);});}else{Al(AZ,AX[0],Ae,Ao,false);}if(AS){Ae.push({scriptClass:"mstrmojo.ui.ScrollableContainer",alias:"formList",cssClass:"formList",children:Aa});}Ae.push({scriptClass:"mstrmojo.Label",cssClass:"advancedLabel",alias:"advancedLabel",allowHTML:true,text:"<span>"+mstrmojo.desc(702,"Advanced")+"</span>",onclick:function(){var As=this.parent,At,Ar,Au=true;AL=!AL;D.toggleClass(this.domNode,"expanded",AL);AX.forEach(function(Av){AI(As,Av,false);At=AS?As.formList[Av.fnm+AK]:As[Av.fnm+AK];Ar=Aq?At.children[1]:At;if(At.visible&&Au&&!AS){Au=false;Ar.showTooltip();}});}});return new mstrmojo.ui.menus.EditorConfig({data:Ao,cssClass:"ConfDataType-MenuEditor",contents:Ae,onOpen:function(){AV(this);},bindings:{okEnabled:"this.data.okEnabled"},fnOk:function AN(At){var Ar=[],Av=[],As=false,Au=function(Ay,Az,Ax){var A1=[],A0=function(A2){var A3=A2.ftk&&A2.ftk.slice(2,-2);if(!A3){return null;}while((A3.shift()).v!=="("){}return A3;},Aw=A0(Ax)||[v(AZ,Ax)];A1.push({v:"!",tp:33,lv:4});if(Ay!==AQ){A1.push({v:Ay,oi:{did:AM[Ay],t:11,st:2816,n:Ay}});if(!mstrmojo.string.isEmpty(Az)&&Az!==AH&&(Ay===AW||Ay===Ah)){A1.push({v:'<Pattern="'+Az+'">(',tp:"2",lv:1});}else{A1.push({v:"(",tp:"2",lv:1});}A1=A1.concat(Aw);A1.push({v:")",tp:"2",lv:1});}else{A1=A1.concat(Aw);}A1.push({v:"",tp:-1,lv:4});return mstrmojo.ME.AttributeEditBox.getTokenStreamXML({items:A1});};if(Ag){As=true;}else{AX.forEach(function(Aw){if(At[Aw.fnm+Ak+Ap]===An.TO_CREATE){As=true;return false;}else{if(At[Aw.fnm+Ak+Ap]===An.TO_UPDATE||(At[Aw.fnm+AK+Ap]===An.TO_UPDATE&&(At[Aw.fnm+Ak]===AW||At[Aw.fnm+Ak]===Ah))){Av.push(Aw);}}});}if(As){AX.forEach(function(Aw){Ar.push({n:Aw.fnm,formula:Au(At[Aw.fnm+Ak],At[Aw.fnm+AK],Aw),bft:At[Aw.fnm+AU]});});Am(As,Ar);}else{if(AZ.da){W(AE.mid,AZ.did,Av,function(Aw){Aw.forEach(function(Ax){Ar.push({did:Ax.fid,formula:Au(At[Ax.fnm+Ak],At[Ax.fnm+AK],Ax),bft:At[Ax.fnm+AU]});});Am(As,Ar);});}}}});},getCreateTimeDAEditorCfg:function O(AI,AH){var AG=function(AM){var AN=8,AO=1,AL=o.filter(AM.fs,function(AP){return(AM.da||AP.obf)&&(AP.bftp===AN||AP.bftp===AO);}),AK=o.find(AL,"idf",true);return AL[AK>=0?AK:0];},AE=AG(AI);if(!AE){return null;}return new mstrmojo.ui.menus.EditorConfig({data:{okEnabled:false},cssClass:"CreateTimeAttribute-MenuEditor",contents:[{scriptClass:"mstrmojo.ui.CheckList",alias:"time_type",items:[{n:mstrmojo.desc(873,"Year"),v:"Year"},{n:mstrmojo.desc(10051,"Quarter of Year"),v:"QuarterOfYear"},{n:mstrmojo.desc(10050,"Quarter"),v:"Quarter"},{n:mstrmojo.desc(10049,"Month of Year"),v:"MonthOfYear"},{n:mstrmojo.desc(871,"Month"),v:"Month"},{n:mstrmojo.desc(10047,"Week of Year"),v:"WeekOfYear"},{n:mstrmojo.desc(10048,"Week"),v:"Week"},{n:mstrmojo.desc(11608,"Day of Year"),v:"DayOfYear"},{n:mstrmojo.desc(10046,"Day of Month"),v:"DayOfMonth"},{n:mstrmojo.desc(10045,"Day of Week"),v:"DayOfWeek"}],onchange:function AF(){var AK=false;X.forEach(this.selectedIndices,function(AL){if(AL){AK=true;return false;}});this.parent.data.set("okEnabled",AK);}}],bindings:{okEnabled:function(){return this.data.okEnabled;}},fnOk:function AJ(AP,AQ){var AU=AQ.time_type,AT=AU.selectedIndices,AR=AU.items,AO=[],AK=[],AL="@form",AN={Year:"6F7DF5F8449111D5BEA300B0D01A55EF",Quarter:"6F7DF5F7449111D5BEA300B0D01A55EF",Concat:"6F7DF5FF449111D5BEA300B0D01A55EF",QuarterStartDate:"59E10CE2ADDD4A6DAC2416A72999A9ED",Month:"6F7DF5F6449111D5BEA300B0D01A55EF",ToString:"D1ED29645DEC4DBF99E8E09ED939074B",MonthStartDate:"7C63D4E70B2741C3A5B54A2EFD40961B",Week:"6F7DF5F5449111D5BEA300B0D01A55EF",WeekStartDate:"44681336D0DB4E43AC333FFB3CC4400D",DayOfMonth:"6F7DF5F2449111D5BEA300B0D01A55EF",DayOfWeek:"6F7DF5F3449111D5BEA300B0D01A55EF",DayOfYear:"6F7DF5F4449111D5BEA300B0D01A55EF"},AS=function(AV){switch(AV){case"Year":return{ID:["Year","(",AL,")"]};case"Quarter":return{ID:["Year","(",AL,") * 10 + ","Quarter","(",AL,")"],DESC:["Concat",'("Q", ',"Quarter","(",AL,")",', ", ", ',"Year","(",AL,"))"],DATE:["QuarterStartDate","(",AL,")"]};case"QuarterOfYear":return{ID:["Quarter","(",AL,")"],DESC:["Concat",'("Q", This@ID)']};case"Month":return{ID:["Year","(",AL,") * 100 + ","Month","(",AL,")"],DESC:["ToString",'<Pattern="mmm yyyy">(',AL,")"],DATE:["MonthStartDate","(",AL,")"]};case"MonthOfYear":return{ID:["Month","(",AL,")"],DESC:["ToString",'<Pattern="mmmm">(',AL,")"]};case"Week":return{ID:["Year","(",AL,") * 100 + ","Week","(",AL,")"],DESC:["Concat",'("W", ',"Week","(",AL,'), ", ", ',"Year","(",AL,"))"],DATE:["WeekStartDate","(",AL,")"]};case"WeekOfYear":return{ID:["Week","(",AL,")"]};case"DayOfMonth":return{ID:["DayOfMonth","(",AL,")"]};case"DayOfWeek":return{ID:["DayOfWeek","(",AL,")"],DESC:["ToString",'<Pattern="ddd">(',AL,")"]};case"DayOfYear":return{ID:["DayOfYear","(",AL,")"]};}},AM=function(AV,AX,AZ){var AY=[{v:"!",tp:33,lv:4}],AW;AZ.forEach(function(Ab,Aa){if(Ab===AL){AY.push(v(AV,AX));}else{AW=AN[Ab];if(AW){AY.push({v:AW,oi:{did:AW,t:11,st:2816,n:AW}});}else{AY.push({v:Ab,tp:"2",lv:1});}}});AY.push({v:"",tp:-1,lv:4});return mstrmojo.ME.AttributeEditBox.getTokenStreamXML({items:AY});};X.forEach(AT,function(AV,AW){if(AV){AK=[];X.forEach(AS(AR[AW].v),function(AX,AY){AK.push({n:AY,formula:AM(AI,AE,AX),bft:(AY==="DATE"?8:0)});});AO.push({isTokenStream:true,forms:AK,name:AI.n+" ("+AR[AW].n+")"});}});return AH(AO);}});},RefreshAndCloseAllObjectBrowserCallback:function(AF,AE){return mstrmojo.func.wrapMethods(AE.getDatasetsUpdateCallback(),{success:function(){if(o.find(AF,"act","createDataset")!==-1){AE.controller.datasetsPanel.set("allObjectBrowserOpened",false);}}});},getUnitFromDataset:function a(AF,AH,AE){var AG=null;X.forEach(AF,function(AJ){var AI=AJ.att||[];if(AE===4){AI=AJ.mx||[];}o.forEach(AI,function(AK){if(AK.did===AH){AG=AK;return false;}});if(AG){return false;}});return AG;},getDatasetFromId:function P(AE,AF){var AG=null;X.forEach(AE,function(AH){if(AH.did===AF){AG=AH;return false;}});return AG;},getDatasetFromAttributeId:function P(AE,AF){var AG=null;X.forEach(AE,function(AH){if(o.find(AH.att,"did",AF)>=0){AG=AH;return false;}});return AG;},getSortedDatasetUnits:function E(AE){var AF=function AF(AG){return AG.t===U.DssTypeMetric?2:1;};AE=AE.concat();AE.sort(function(AJ,AH){var AK=AF(AJ)-AF(AH),AI=AJ.n.toUpperCase(),AG=AH.n.toUpperCase();return AK!==0?AK:(AI!==AG?AI.localeCompare(AG):AJ.n.localeCompare(AH.n));});return AE;},getUnitCssClass:function(AF){var AE=AF.t;if(AF.fs&&AF.fs.length&&AF.fs.some(function(AG){return AG.fgr>0;})){AE+="g";}else{if((AF.dm||AF.um)||AF.da){AE+="d";}else{if(AF.de){AE+="de";}}}if((AF.t===47&&AF.st===12033)||(AF.t===12&&AF.st&&AF.st===3076)){AE+=(" st"+AF.st);}return"ic"+AE;},hasMultiForms:function i(AF,AE){return m.getFormsByAttrId(AF,AE).length>1;},getDisplayFormsMenu:function G(AQ,AO,AI,AN){var AM=[],AP=[],AH=[],AK=[{n:mstrmojo.desc(2411,"Off"),v:0},{n:mstrmojo.desc(2410,"On"),v:1},{n:mstrmojo.desc(8504,"Form Name Only"),v:2},{n:mstrmojo.desc(8505,"Show Attribute Name Once"),v:3},{n:mstrmojo.desc(4531,"Automatic"),v:4}];var AJ=AO.model.data,AE=AJ.gts,AL;o.forEach((AE.row||[]).concat(AE.col||[]),function(AR){if(AR.id===AQ.did){AP=AP.concat(AR.fs);}});AL=m.getFormsByAttrId(AQ.did,AI);o.forEach(AL||[],function(AS){var AT=AS.fid;if(o.find(AM,"id",AT)<0){AM.push({id:AT,n:AS.fnm});var AR=o.find(AP,"id",AT);if(AR>-1){AH[AM.length-1]=true;}}});return new mstrmojo.ui.menus.EditorConfig({data:{item:AQ,oldSelected:X.copy(AH,{})},contents:[{alias:"fs",scriptClass:"mstrmojo.ui.CheckList",minimumSelectCnt:1,items:AM,selectedIndices:AH},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11918,"Display attribute form names:")},{alias:"longNames",scriptClass:"mstrmojo.ui.Pulldown",items:AK,selectedIndex:o.find(AK,"v",AJ.lnm||0),onitemSelected:function AF(AR){this.v=String(AR.v);}}],okBtnText:mstrmojo.desc(1442,"Ok"),fnOk:function AG(AW,Aa){var AV=Aa.fs,AT=AV.selectedIndices,AY=AV.items,Ae=[],AX=[],Ab=[];if(!AV.getSelectedItems().length){mstrmojo.alert("Please select at least one form!");return ;}var AS=AW.oldSelected,Ad=AT,AU,AZ={},Ac={};for(AU=0;AU<AY.length;AU++){if(AS[AU]&&!Ad[AU]){AZ[AU]=true;}else{if(!AS[AU]&&Ad[AU]){Ac[AU]=true;}}}X.forEach(AZ,function(Af,Ag){if(Af){AX.push({act:"removeForm",unitId:AQ.did,attFormId:AY[Ag].id});}});var AR=AO.model.data.gts;(AR.row||[]).concat(AR.col||[]).forEach(function(Af){if(Af.id===AQ.did){(Af.fs||[]).forEach(function(Ag){if(o.find(AM,"id",Ag.id)<0){AX.push({act:"removeForm",unitId:AQ.did,attFormId:Ag.id});}});}});X.forEach(Ac,function(Af,Ag){if(Af){Ae.push({act:"addForm",unitId:AQ.did,attFormId:AY[Ag].id,unitPos:0});}});Ab.push({act:"putProperties",prs:"Template Formatting",pr:"LongNames",v:Aa.longNames.v});if(AN){AN([{act:"updateTemplate",keyContext:AO.k,partialRetrieval:{nodes:[AO.k]},actions:AX.concat(Ae).concat(Ab)}]);}}});},getAttributeLinkMenu:function d(AQ,AT,AO,AS,AJ){var AU=-2147483648,AL=AS.datasets,AM=AL[AO],AR=AM.tables||[],AE={},AN=[],AH=(AT.fs&&AT.fs[0])||{},AP=[],AK=779,AG=AT.art>1,AF=!AG&&X.keyarray(AL).length>1,AI=function(){mstrmojo.vi.ui.editors.AttributeLinkEditor.open({attribute:AT,docModel:AS,datasetId:AO});};if((AM.st!==AK)||AR.length<=1||AT.da){if(AF){AQ.addMenuItem(mstrmojo.desc(11941,"Link to Other Dataset..."),"",AI);}return ;}o.forEach(AM.att,function(AX){var AY=true,AW=null,AV=(AX.fs&&AX.fs[0])||{};if(AX.da){return ;}if(AH.der===AU||AV.der===AU||AH.fgr===-1||AV.fgr===-1||AH.ftr===-1||AV.ftr===-1){return ;}if(AH.fgr&&AV.fgr&&AH.fgr!==AV.fgr){return ;}if(AH.ftr&&AV.ftr&&AH.ftr!==AV.ftr){return ;}o.forEach(AR,function(AZ){var Aa=o.find(AZ.attRefs,"did",AT.did),Ab=o.find(AZ.attRefs,"did",AX.did);if(Aa>=0&&o.indexOf(AN,AZ.did)<0){AN.push(AZ.did);}if(Ab>=0){AW=AZ.did;}if(Aa>=0&&Ab>=0){AY=false;}});if(AY&&!AX.hide){AE[AX.did]=AW;AP.push(AX);}});if(AP.length>0&&AM.hcs!==true){AQ.addEditorMenuItem(mstrmojo.desc(13172,"Map Attributes"),"",function(){return new mstrmojo.ui.menus.EditorConfig({data:{},cssClass:"mapAttribute",okVisible:false,cancelVisible:false,contents:[{scriptClass:"mstrmojo.ui.ScrollableContainer",children:[{scriptClass:"mstrmojo.vi.ui.InteractiveUnitList",draggable:false,CLS_HAS_MENU:"",items:AP,listHooks:{select:function AV(AW,AX){AS.warnForEditStandaloneDS(AM,function(){o.forEach(AN,function(AY){I({dsid:AO,srcId:AT.did,srcTableId:AY,tgtId:AX.did,tgtTableId:AE[AX.did]},AS,AJ);});});}}}]}]});});}if(AF){AQ.addMenuItem(mstrmojo.desc(11941,"Link to Other Dataset..."),"",AI);}},isDocumentLevelItem:function p(AE){return AE&&(AE.um||AE.da||(AE.t===47&&AE.st===12033));},isLegalObjectName:function Q(AE){var AF=/["\[\]\\]/g;if(AE.match(AF)){return false;}return true;},validateName:function f(AF,AG,AE){if(this.isLegalObjectName(AF)){AG();}else{mstrmojo.alert(mstrmojo.desc(8622,"The # cannot contain the reserved characters ##.").replace("##","'[', ']', '\"' and '\\'").replace("#",mstrmojo.desc(945,"Name")),AE,mstrmojo.desc(1388,"Rename"));}},hasCGorCon:function AD(AE){return AE.att.some(function(AG){var AI=(AG.t===1||AG.t===47),AH=(AG.t===12&&AG.de),AF=(AG.t===47&&AG.st===12033);return(AI&&!AF||AH);});},hasOldDEOverDatasets:function(AH,AG){var AF=false,AE;X.forEach(AG,function(AI){AE=o.find((AI.att||[]),"did",AH);if(AE!==-1&&AI.att[AE].de){AF=true;return false;}});return AF;},getMarkGeoRoleEditorCfg:function AA(AE,Aq,AY,AV,Az,A1){var AU=268435456,Aw=536870912,AJ=1073741824,Ai=268435456,At=805306368,Ao=805306368,Ac=1879048192,A0=-2147483648,Ar=0,As=1,AL=2,AT=3,AX=4,AR=5,Ay=6,AO=7,Aa=8,AZ=9,Ak=10,AH=2,Ah=3,Ap={v:Ar,n:mstrmojo.desc(2057,"None")},A2={v:AT,n:mstrmojo.desc(7674,"Country"),der:AU},An={v:AL,n:mstrmojo.desc(7676,"State"),parents:[A2],der:Aw},AP={v:AZ,n:mstrmojo.desc(12919,"County"),parents:[A2,An]},Au={v:As,n:mstrmojo.desc(7675,"City"),parents:[A2,An],der:AJ},Ad={v:Aa,n:mstrmojo.desc(7677,"Zip Code"),parents:[A2,An,Au]},AW={v:AR,n:mstrmojo.desc(7696,"Latitude")},Al={v:Ay,n:mstrmojo.desc(7697,"Longitude")},AS={v:AX,n:mstrmojo.desc(7675,"City")+", "+mstrmojo.desc(7676,"State")},Ag={v:Ak,n:mstrmojo.desc(12973,"Area Code")},Aj={v:AO,n:mstrmojo.desc(2056,"Custom")},AQ={ID:[Ap,A2,An,AP,Au,Ad,AW,Al,AS,Ag,Aj],ID_NUMERIC:[Ap,Ad,Ag,AW,Al],NON_ID:[Ap,A2,An,AP,Au,Ad,AS,Ag,Aj],NON_ID_NUMERIC:[Ap,Ad,Ag]},Ae=o.filter(Aq.fs,function(A3){return(A3.bftp===AH||A3.bftp===Ah)&&A3.der!==A0;});var Am=(Ae.length>1),AG=o.find(Ae,"idf",true),AI=(AG===-1?0:AG),Af=Ae[AI],AN,AF,Ab,AK=[],AM=function(A3){var A4=(A3.idf?"ID":"NON_ID")+(A3.bftp===AH?"_NUMERIC":"");return AQ[A4];},Ax=function(A4,A3){return o.find(AM(A3),"v",A4);};if(Ae.length===0||o.find(Aq.fs,"fgr",-1)!==-1||Af.der===A0){return null;}o.forEach(Ae,function(A5,A3){var A4=X.clone(A5);A4.n=A4.fnm;AK.push(A4);if(A5.fgr){Af=A4;AI=A3;}});AN=Af.fid;Ab=Af.fgr||0;AF=Ax(Ab,Af);return new mstrmojo.ui.menus.EditorConfig({data:{item:Aq,geoForm:Af,geoRole:Ab},cssClass:"MarkGeoRole-MenuEditor",contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13522,"Select Attribute Form:"),visible:Am},{scriptClass:"mstrmojo.ui.Pulldown",items:AK,selectedIndex:AI,alias:"formList",visible:Am,onitemSelected:function Av(A5){var A3=this.parent.data,A4=this.parent.geoRoleList;if(A3.geoForm.fid!==A5.fid){A3.set("geoForm",A5);A3.set("geoRole",A5.fgr);A4.set("items",AM(A5));A4.set("selectedIndex",Ax(A5.fgr,A5));}}},{scriptClass:"mstrmojo.ToolSeparator",visible:Am,markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13523,"Select Geographic Type:")},{scriptClass:"mstrmojo.ui.Pulldown",items:AM(Af),selectedIndex:AF,alias:"geoRoleList",onitemSelected:function Av(A9){var A8=this.parent,A3=A8.data,BA=A8.geoDrvList;var A5=[],A7=[],A4=Af.der,A6;A3.set("geoRole",A9.v);o.forEach(A9.parents,function(BB,BC){A6=BB;A5.push({n:A6.n,der:A6.der});if((A4&A6.der)!==0){A7[BC]=true;}});BA.set("items",A5);BA.set("selectedIndices",A7);o.forEach(["geoDrvSeparator","geoDrvLabel","geoDrvList"],function(BB){A8[BB].set("visible",A5.length>0);});}},{scriptClass:"mstrmojo.ToolSeparator",markupMethods:{onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},alias:"geoDrvSeparator"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(13524,"(Optional) Create Additional Attributes:"),alias:"geoDrvLabel"},{scriptClass:"mstrmojo.ui.CheckList",alias:"geoDrvList"}],fnOk:function(A6,A5){var A3=function(BC){var BB=function(BG){var BH="<mpcs>";o.forEach(BG,function(BI){BH+='<mpc did="'+BI.did+'" n="'+BI.n+'" georole="'+BI.georole+'" drvflg="'+BI.drvflg+'" />';});BH+="</mpcs>";return BH;},A7=function(BG,BI,BK,BH){var BJ=function(BO,BL,BN){var BM=R(BC,BO,BL),BP=h(BM,BN);return BP&&BP.did;};Az.forEach(function(BL,BM){var BN=BJ(BL.did,Aq.did,BI.fid);if(BN){BG[BM]=BG[BM]||[];BG[BM].push({did:BN,n:BI.fnm,georole:BK,drvflg:BH});}});},A9=[],BF=[],BD=A5.geoDrvList,A8=0,BA=false,BE={2:Ai,1:At,9:Ao,8:Ac}[A6.geoRole]||0;X.forEach(BD.selectedIndices,function(BH,BG){if(BH){A8|=BD.items[BG].der;}});A8&=BE;if(Af.fgr!==A6.geoRole||Af.fid!==A6.geoForm.fid||Af.der!==A8){if(Am&&Af.fid!==A6.geoForm.fid){if(Af.fgr!==Ar){A7(BF,Af,Ar,0);if(Af.der>0){BA=true;}}}if(A6.geoForm.fgr!==A6.geoRole||A6.geoForm.der!==A8){A7(BF,A6.geoForm,A6.geoRole,A8);if((A8&A6.geoForm.der)!==A6.geoForm.der){BA=true;}}if(BF.length>0){BF.forEach(function(BH,BG){A9.push({act:"changeEMMAMapping",dsid:AY,tbid:Az[BG].did,mapping:BB(BH)});});A1(A9,BA);}}},A4=function(){C(AE.mid,AY,{success:A3});};if(!AV){mstrmojo.warn(mstrmojo.desc(13525,"Modifications to this dataset will affect other reports, documents, and dashboards that share the dataset. Do you want to continue?"),{},{buttons:[r(mstrmojo.desc(219,"Yes"),function(){A4();},true,{width:"60px"}),r(mstrmojo.desc(221,"Cancel"),function(){})]});}else{A4();}}});}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.hash","mstrmojo.threshold.ThresholdModel","mstrmojo.threshold.SimpleThresholdEditor","mstrmojo.threshold.AdvancedThresholdEditor");var E=mstrmojo.hash,A="mstrmojo-simple-threshold-editor",C="mstrmojo-advanced-threshold-editor",G=mstrmojo.threshold.ThresholdModel.EDITOR_TYPES;mstrmojo.threshold.ThresholdController=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.threshold.ThresholdController",metricId:undefined,data:undefined,model:undefined,targets:undefined,editor:undefined,messageId:undefined,datasets:undefined,dataService:undefined,onSubmitActions:mstrmojo.emptyFn(),onSaveThresholds:mstrmojo.emptyFn(),onLoadThresholds:mstrmojo.emptyFn(),supportsFeature:function F(H){return true;},init:function D(H){this._super(H);this.model=new mstrmojo.threshold.ThresholdModel({controller:this});},openEditor:function B(){var L=this.data;if(!L){throw new Error("Visualization data not provided.");}var I=this.metricId,H=this.objectType,M=this.model,P=this.messageId,N;M.set("data",E.clone(L));M.metricId=I;M.objectType=H;var O=M.isAdvanced(I),J=M.editorMode,K=J===G.SIMPLE_EDITOR;if(J===G.ADVANCED_EDITOR||(!K&&O)){N=mstrmojo.all[C]||new mstrmojo.threshold.AdvancedThresholdEditor({id:C,onUpdateBrowseElementsParams:function Q(T){var S,R=this.controller.datasets,U=function(V){return V.did===T.attributeID;};for(S in R){if(R[S].att.filter(U).length>0){T.datasetID=S;break;}}T.messageID=P;T.templateNodeKey=L.k;}});}else{if(O){M.clearData();}N=mstrmojo.all[A]||new mstrmojo.threshold.SimpleThresholdEditor({id:A});}this.editor=N;N.set("model",M);N.set("controller",this);N.set("metricId",I);N.set("objectType",H);N.set("title",this.title);N.set("targets",this.targets);N.open();this.addDisposable([M,N]);}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.models.template.DataInterface","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.ui.menus.MenuConfig","mstrmojo.ui.menus.EditorConfig","mstrmojo.Button","mstrmojo.Label","mstrmojo.ui.CheckList","mstrmojo.ui.Pulldown","mstrmojo.models.datasets.DataInterface","mstrmojo.vi.models.VIComponentMap","mstrmojo.threshold.ThresholdController","mstrmojo.threshold.ThresholdModel","mstrmojo.chart.model.enums.EnumDSSAxisName","mstrmojo.chart.model.enums.EnumDSSDynamicShortcut","mstrmojo.chart.model.enums.EnumDSSXMLAxesBitMap","mstrmojo.mstr.EnumDSSXMLBaseFormType","mstrmojo.mstr.EnumDSSXMLObjectTypes");var Z=mstrmojo,L=Z.array,Q=Z.hash,AH=mstrmojo.chart.model.enums.EnumDSSObjectType,c=Z.vi.ui.DatasetUnitMenuUtils,U=mstrmojo.models.datasets.DataInterface,AD=Z.vi.models.VIComponentMap,G=1,AC=2,F=3,AJ=4,N=5,x=6,f=7,M=8,q=9,AM=10,A=11,u=12,D="00000000000000000000000000000000",AA=-1,a=mstrmojo.chart.model.enums.EnumDSSXMLAxesBitMap,w=mstrmojo.chart.model.enums.EnumDSSAxisName,AR=mstrmojo.chart.model.enums.EnumDSSDynamicShortcut,P=mstrmojo.mstr.EnumDSSXMLBaseFormType,S=mstrmojo.mstr.EnumDSSXMLObjectTypes;function T(AW){var AX=this.getHost(),AY=AX.model.data.gsi;return AY.cols.concat(AY.rows).filter(function(AZ){return AZ.t===AW;});}function t(AW,AY,AX){return{act:"updateTemplate",keyContext:AW.k,partialRetrieval:{nodes:AX?null:[AW.k]},actions:AY};}function AI(Aa,AY,AX){var Ac=[];if(AY.useDropzone){Aa.useDropzone=true;Aa.dropzoneId=AY.zone.id;if(AY.item.ax!==undefined){Aa.ax=AY.item.ax;}}Aa.position=AY.idx+1+(AX.offset||0);if(AX.replaceSourceId){Aa.replaceSourceId=AX.replaceSourceId;}Aa.partialRetrieval={nodes:[Aa.nodeKey]};Ac.push(Aa);var Ab="$GUID_115",AZ=[],AW=this.checkAndAddThresholdAction(AY.zone.id,{did:Ab,t:4},AZ);if(AW){Aa.newObjectIds=[Ab];Ac.push(this.getUpdateTemplateAction(AZ));}return Ac;}function AV(AZ){var AW=this.getHost().model.data.datasetId,AY=L.ensureArray(AZ),AX=L.hash(AY);if(!AW){Q.forEach(this.docModel.datasets,function(Ac,Ad){var Aa=(Ac.att||[]).concat(Ac.mx||[]),Ab=Aa.some(function(Ae){return AX[Ae.did];});if(Ab){AW=Ad;return false;}});}return AW;}function AN(AW,Aa,AX){var Ad=this,Ah=this.docModel,Ac=AW.item,Af=c.getUnitFromDataset(Ad.docModel.datasets,Ac.did,Ac.t)||Ac,Ai=this.getHost(),Ae=Ad.docModel.getDataService(),Ab=Aa==="edit",AY,AZ={dsid:Ab?Ah.findDatasetIdFromUnit(Af.did):AV.call(Ad,Af.did),alias:Af.alias||Af.n},Ag=null;if(Af.t===4){if(Ab){AY={metricId:Af.did,action:{cmd:Aa,n:Af.n,alias:Ac.n}};AZ.did=Af.did;AZ.nodeKey=Ai.k;Ag=Ae.getEditDerivedMetricSubmitFunc(AZ);}else{AY={metricId:"",action:{cmd:Aa,refOi:{did:Af.did,n:Af.n}}};AZ.nodeKey=Ai.k;AZ.idx=AW.idx;AZ.host=Ai;AZ.zoneid=AW.zone.id;if(AX){AZ.replace={did:Af.did,t:Af.t};}if(AW.useDropzone){Ag=Ae.getAddNewDerivedMetricToDropzoneSubmitFunc(AZ);}else{Ag=Ae.getAddNewDerivedMetricToXtabSubmitFunc(AZ);}}if(Ad.docModel.isFromSolrCube(Af.did)||Ad.docModel.isFromMDXCube(Af.did)){AY.disableAFB=true;}Ad.docModel.controller.openDME(Ai,AY,Ag);}}mstrmojo.vi.models._DropZoneCommon=mstrmojo.provide("mstrmojo.vi.models._DropZoneCommon",{_mixinName:"mstrmojo.vi.models._DropZoneCommon",isMetric:function e(AW){return AW&&AW.t===S.Metric&&AW.id!==D;},isAttribute:function y(AW){return AW&&AW.t===S.Attribute;},isRecursiveAttribute:function Y(AW){return AW&&AW.t===S.Attribute&&AW.st===3076;},isNewDerivedElement:function AE(AW){return AW.t===S.Consolidation&&AW.st===12033;},isConsolidation:function AP(AW){return AW.t===S.Consolidation&&AW.st===12032;},isCustomGroup:function C(AW){return AW.t===S.Filter;},isAttrCategory:function V(AW){return AW&&(AW.t===S.Attribute||AW.t===S.Filter||AW.t===S.Consolidation);},isMetricName:function AL(AW){return AW&&(AW.id===D||AW.did===D);},differInType:function R(AX,AW){return(this.isMetric(AX)&&this.isAttrCategory(AW))||(this.isAttrCategory(AX)&&this.isMetric(AW));},isDynamicLink:function H(AX){if(this.isAttribute(AX)){var AW=AX.fs||U.getFormsByAttrId(AX.did,this.docModel.datasets);return AW.length===2&&AW[1].bftp===P.DssXmlBaseFormHTMLTag&&AW[1].fnm==="DYNAMICLINK";}return false;},getZoneModelByZoneId:function(AW){var AX=this.dropZones,AY;L.forEach(AX,function(AZ){if(AZ.id===AW){AY=AZ;return false;}});return AY;},hGetItemOccurrence:function(Aa,Ac){Ac=Ac||[];if(Ac.length===0){Ac=[G,AC,F,AJ,f,N,M,q,x,AM];}var AY,AW,AX,Ab=Ac.length,AZ=[];for(AY=0;AY<Ab;AY++){AX=this.getZoneModelByZoneId(Ac[AY]);if(!AX){continue;}AW=this.getUnitIndexInZone(AX,Aa);if(AW!==-1){AZ.push({zoneId:Ac[AY],itemIndex:AW});}}return AZ;},removeColorByItemFromBreakByIfExists:function v(AZ,Ab){var Aa,AY,AW,AX;Aa=this.hGetItemOccurrence(AZ,[G,AC,F,AJ,N,M,x]);if((Aa.length===1)&&(Aa[0].zoneId===N||Aa[0].zoneId===x)){AY=Aa[0];AW=this.getZoneModelByZoneId(AY.zoneId);AX=AW.items[AY.itemIndex];if(AX.hidden){Ab.push(this.getRemoveDropZoneUnitAction(AW,AX));}}},updateBreakByAndSliceUnits:function h(){var AW=this,AY=[G,AC,F,AJ,f,M,A,u],AX=this.getZoneModelByZoneId(x)||this.getZoneModelByZoneId(N),AZ;AX.items.forEach(function(Aa){if(AW.isAttrCategory(Aa)||AW.isMetricName(Aa)){AZ=AW.hGetItemOccurrence(Aa,AY);if((AZ.length===1)&&(AZ[0].zoneId===f)){Aa.hidden=true;}}});},getAxisSummary:function AF(){var AW={};AW[F]=this.getItemCountInZone(F);AW[AJ]=this.getItemCountInZone(AJ);AW[AM]=this.getItemCountInZone(AM);return AW;},getItemCountInZone:function(AW){var AX=this.getZoneModelByZoneId(AW);if(AX){return AX.items.length;}return 0;},isOnlyMetricZone:function d(AW){var AY,Aa,AZ,AX=this.getZoneModelByZoneId(AW);if(!AX){return false;}AZ=AX.items;Aa=AZ.length;if(Aa===0){return false;}for(AY=0;AY<Aa;AY++){if(!this.isMetric(AZ[AY])){return false;}}return true;},isMetricZone:function s(AW){var AY,Aa,AZ,AX=this.getZoneModelByZoneId(AW);if(!AX){return false;}AZ=AX.items;Aa=AZ.length;if(Aa===0){return false;}for(AY=0;AY<Aa;AY++){if(!this.isMetric(AZ[AY])){if(this.isMetricName(AZ[AY])){continue;}else{return false;}}}return true;},getMetricCntInZone:function(AW){var AY=this,AX=this.getZoneModelByZoneId(AW),Aa=AX.items,AZ=0;L.forEach(Aa,function(Ab){if(AY.isMetric(Ab)){AZ++;}});return AZ;},isAttrCategoryZone:function(AW){var AY,Aa,AZ,AX=this.getZoneModelByZoneId(AW);if(!AX){return false;}AZ=AX.items;Aa=AZ.length;if(Aa===0){return false;}for(AY=0;AY<Aa;AY++){if(!this.isAttrCategory(AZ[AY])&&!this.isMetricName(AZ[AY])){return false;}}return true;},showNumberFormat:function(AW){return mstrmojo.all[this.hostId].model.showNumberFormat(AW);},renameItem:function(AX,AW){var AY=this.id;c.renameItem(AX,AW,function(Ac){var Ae=mstrmojo.all[AY],Ah=Ae.getHost(),Ab=Ae.getHostModel().gsi,Ad=Ac.text.trim(),Ai=AW.t===4,Aa=Ai?Ab.mx:Ab.rows.concat(Ab.cols),Ag=function(){Ae.submitDropZoneUpdates(t(Ah,[{act:"renameUnit",id:AW.did,type:AW.t,name:Ad,isDynamicAlias:AW.t===4}]));},AZ=function(){Ac.set("text",AW.n);},Af=Aa.some(function(Aj){return Aj.did!==AW.did&&(Ai||Aj.t===AW.t)&&Aj.n===Ad;});if(Af){mstrmojo.warn(mstrmojo.desc(11664,'"##" already exists in the visualization. Do you want to proceed?').replace("##",Ad),{confirmBtn:{fn:Ag},cancelBtn:{fn:AZ}});}else{Ag();}},{allowEmptyText:true,cssClass:AX.className});},getPageByUnit:function AS(){var AX=this.getHost(),AW=AX.builder.getLayoutVIMap(AX.defn._lkz).getComponent(AD.TYPES.PAGEBY_PANEL);return AW&&AW.unit;},shouldShowDisplayFormsMenu:function E(AZ){if(!this.isAttribute(AZ)||this.isDynamicLink(AZ)){return false;}var AW=U.getFormsByAttrId(AZ.did,this.docModel.datasets),Aa=this.getHost().model.data,AX=Aa.gts,AY=AW.length>1;if(AW.length===1){var Ab=false;L.forEach((AX.row||[]).concat(AX.col||[]),function(Ac){if(Ac.id===AZ.did&&L.find(Ac.fs||[],"id",AW[0].fid)>-1){Ab=true;return false;}});if(!Ab){AY=true;}}return AY;},getDisplayFormsMenu:function(AX){var AW=this;return c.getDisplayFormsMenu(AX,AW.getHost(),AW.docModel.datasets,function(AY){AW.submitDropZoneUpdates(AY);});},editDerivedMetric:function(AW){AN.call(this,AW,"edit");},newDerivedMetric:function(AX){var AW=mstrmojo.all[this.hostId].zonesModel.allowInsertNewMetric(AX.zone);if(AX.zone.id===f){AW=false;}AN.call(this,AX,"editNew",!AW);},newDerivedAttribute:function b(Ab,AX){var Ac=Ab.item,Aa=c.getUnitFromDataset(this.docModel.datasets,Ac.did,Ac.t)||Ac,AZ=this.getHost(),AY=this,AW={forceRefresh:true,alias:"New Attribute",precreate:function(Ae){if(AY.getAddItemActions){var Ad=AY.getAddItemActions(Ab.zone,[{did:"$GUID_1",t:12}]);Ae.newObjectIds=["$GUID_1"];if(AX){Ad=[AY.getRemoveDropZoneUnitAction(Ab.zone,Aa)].concat(Ad);}Ae=[Ae,{act:"updateTemplate",keyContext:AZ.k,actions:Ad}];}else{Ae=Q.copy({act:"addDAToTemplate",nodeKey:AZ.k,treeType:AZ.defn.tt},Ae);if(Ab.useDropzone){Ae.useDropzone=true;Ae.dropzoneId=Ab.zone.id;if(Ab.item.ax!==undefined){Ae.ax=Ab.item.ax;}if(AX){Ae.replaceSourceId=Aa.did;}}else{Ae.axis=Ab.axis;}}return Ae;}};this.docModel.controller.openDAE(this,AW,mstrmojo.emptyFn,Aa);},newDynamicLinkAttr:function r(Ab,AX){var Ac=Ab.item,Aa=c.getUnitFromDataset(this.docModel.datasets,Ac.did,Ac.t)||Ac,AZ=this.getHost(),AY=this,AW={forceRefresh:true,alias:"New Link",precreate:function(Ae){if(AY.getAddItemActions){var Ad=AY.getAddItemActions(Ab.zone,[{did:"$GUID_1",t:12}]);Ae.newObjectIds=["$GUID_1"];if(AX){Ad=[AY.getRemoveDropZoneUnitAction(Ab.zone,Aa)].concat(Ad);}Ae=[Ae,{act:"updateTemplate",keyContext:AZ.k,actions:Ad}];}else{Ae=Q.copy({act:"addDAToTemplate",nodeKey:AZ.k,treeType:AZ.defn.tt},Ae);if(Ab.useDropzone){Ae.useDropzone=true;Ae.dropzoneId=Ab.zone.id;if(Ab.item.ax!==undefined){Ae.ax=Ab.item.ax;}if(AX){Ae.replaceSourceId=Aa.did;}}else{Ae.axis=Ab.axis;Ae.pos=Ab.idx+2;}}return Ae;}};this.docModel.controller.openDynamicLinkEditor(this,AW,mstrmojo.emptyFn,Aa);},editDerivedAttribute:function(AZ){var Ae=this.getHost(),Ab=AZ.item,Ad=c.getUnitFromDataset(this.docModel.datasets,Ab.did,Ab.t)||Ab,AX=this.docModel.findDatasetIdFromUnit(Ad.did),Aa={dsid:AX,did:Ad.did,n:Ad.n,alias:Ab.n,forms:Ad.fs,preupdate:function(Ag){var Af=Ag.name;Ag.name=Ad.n;Ag=[Ag,t(Ae,[{act:"renameUnit",id:Ad.did,type:12,name:Af}],true)];return Ag;}};var AY=window&&window.event,Ac=!!(AY.ctrlKey&&AY.altKey),AW=Aa.forms||[];if(this.isDynamicLink(Ab)&&!Ac){this.docModel.controller.openDynamicLinkEditor(this,Aa,mstrmojo.emptyFn);}else{this.docModel.controller.openDAE(this,Aa,mstrmojo.emptyFn);}},getTemplateAttributes:function g(){return T.call(this,12);},getTemplateHierarchies:function W(){return T.call(this,14);},getTemplateDEs:function AO(){var AW=this.getHost(),AX=AW.model.data.gsi;return AX.cols.concat(AX.rows).filter(function(AY){return AY.st===12033;});},getUnitInfoInTemplate:function j(AX){var AY={},AW=this.getHost().model.data.gts;[{axis:G,name:"row"},{axis:AC,name:"col"}].forEach(function(AZ){L.forEach(AW[AZ.name],function(Ab,Aa){if(Ab.id===AX){AY.axis=AZ.axis;AY.axisName=AZ.name;AY.tplIdx=Aa;AY.unit=Ab;return false;}});});return AY;},sortGrid:function n(Ac,Aa){var Ad=this.getHost(),AZ=Ac.t,Ab=Ac.did,AW=null,AY=null;if(AZ===AH.DssTypeMetric){AY=["","","",1];}else{AW=this.getUnitInfoInTemplate(Ac.did);AY=[AW.unit.fid||(AW.unit.fs&&AW.unit.fs[0].id),"21","",AW.axis];}var Ae=AW?AW.axis:G,AX=Ad.model.data.gts[(Ae===G?"row":"col")+"SubPos"];Ad.controller.onSort(Ad,Ad.model.getSortGridAction(AX,[AZ,Ab].concat(AY).join("!"),Ae,Aa));},addSortMenu:function X(AW,AZ,Ad){var Ab=this,Ae=this.getHost(),Af=AW.item,AX=Ae.model.data,Ac=AX.gsi.tma,Aa=Q.copy(Af);if(Af.t===AH.DssTypeFilter){return ;}if(Af.t===AH.DssTypeDimension){L.forEach((AX.gts.row||[]).concat(AX.gts.col||[]),function(Ah){if(Ah.hid===Aa.did){Aa.did=Ah.id;Aa.t=Ah.otp;return false;}});}if(AW.axis!==AA||Ac!==G){AZ.addMenuItem(mstrmojo.desc(7974,"Sort Ascending"),"xt",function(){Ab.sortGrid(Aa,true);});AZ.addMenuItem(mstrmojo.desc(7975,"Sort Descending"),"xt",function(){Ab.sortGrid(Aa,false);});}if(Ad){AZ.addMenuItem(mstrmojo.desc(11099,"Advanced Sort..."),"xt",function(){var Ah=AW.axis;if(Ah===AA){Ah=Ac;}Ae.controller.onGetAdvSortData(Ae,Ah,Aa.t);});}else{var AY=AX.gsi.sorts.some(function(Ah){return !!Ah.length;}),Ag=mstrmojo.desc(11699,"Clear Sort");if(AY){AZ.addMenuItem(Ag,"",function(){Ab.submitDropZoneTemplateUpdates([{act:"clearSort"}]);});}}},convertToMetric:function k(Ac){var Ab=this.getHost(),AW=Ab.model&&Ab.model.data&&Ab.model.data.datasetId,AY=Ab.k,Aa=Ab.defn.tt,AZ=Ac.item;if(!AW){mstrmojo.hash.forEach(this.docModel.datasets,function(Ae,Af){if(mstrmojo.array.find((Ae.att||[]),"did",AZ.did)!==-1){AW=Af;return false;}});}var AX=mstrmojo.mstr.EnumFunction,Ad=AI.call(this,{act:"addShortcutMetric",nodeKey:AY,treeType:Aa,funcType:AZ.formType===2?AX.FunctionSum:AX.FunctionCount,units:[{id:AZ.did,type:AZ.t}],dsid:AW,replaceSourceId:AZ.did},Ac);this.submitActionForDatasetUpdate(Ad);},getAddMetricNameAction:function(Af,Ab){if(!this.gmZones){return null;}var Ad=this,AX=0,Ac=false,Aa,AW=Ad.gmZones.getZoneModelByZoneId((Ab===G)?AJ:F),Ae={n:"Metric Names",did:D,t:0},AZ=Q.clone(Ae),AY=Ad.gmZones.hGetItemOccurrence(AZ,[G,AC,F,AJ,f]);L.forEach(AW.items,function(Ag){if(Ad.isMetric(Ag)){AX++;}});if(AY.length===0&&AX<=1){Ac=true;}if(Ac){Aa={act:"updateTemplate",keyContext:Af.k,actions:Ad.gmZones.getUpdateMetricNameUnitActions(Ac,Ab)};}return Aa;},getAggregateByMetricSubMenu:function(AX){var Ab=this,Aa=AX.item,Ad=c.getUnitFromDataset(this.docModel.datasets,Aa.did,Aa.t)||Aa,AW=this.id,Ae=this.getHost(),AZ=Ae.k,AY=Ae.defn.tt,Ac=this.submitActionForDatasetUpdate;return c.getAggregateByMenu(Ad,function(Ai,Ag){var Af=Ab.allowInsertNewMetric(AX.zone),Ak=[];if(AX.zone.id===f){Af=false;}if(Af&&AX.useDropzone&&Ab.gmZones){var Aj=Ab.gmZones.getZoneModelByZoneId((AX.zone.id===AJ)?G:AC);var Ah=Ab.getAddMetricNameAction(Ae,Aj.id);if(Ah){Ak.push(Ah);}Ah=Ab.gmZones.getUpdateGroupInfoActionForNewMetric(AX.zone.id,AX.idx+1,Aa.ax===0);if(Ah){Ak.push(Ah);}}Ac.call(mstrmojo.all[AW],Ak.concat(AI.call(Ab,{act:"addShortcutMetric",dsid:AV.call(Ab,Ad.did),nodeKey:AZ,treeType:AY,funcType:Ag,units:[{id:Ai.did,type:Ai.t}]},AX,{offset:Af?1:0,replaceSourceId:Af?null:Ad.did})));});},getCalculationEditorCfg:function AK(AW){var Ab=this,Ad=this.getHost(),Aa=this.submitActionForDatasetUpdate.bind(this),AZ=Ad.k,Ac=Ad.model.data.gsi,AX=Ad.defn.tt,Ae=Ab.allowInsertNewMetric(AW.zone),AY=[];if(AW.zone.id===f){Ae=false;}return c.getCalculationMetricEditor(Ac.mx,AW.item,function(Ag,Af,Ak,Ah){if(Ae&&AW.useDropzone&&Ab.gmZones){var Aj=Ab.gmZones.getZoneModelByZoneId((AW.zone.id===AJ)?G:AC);var Ai=Ab.getAddMetricNameAction(Ad,Aj.id);if(Ai){AY.push(Ai);}Ai=Ab.gmZones.getUpdateGroupInfoActionForNewMetric(AW.zone.id,AW.idx+1,AW.item.ax===0);if(Ai){AY.push(Ai);}}Aa(AY.concat(AI.call(Ab,{act:"addShortcutMetric",dsid:AV.call(Ab,AW.item.did),nodeKey:AZ,treeType:AX,funcType:Ak,funcType2:Ah,units:[Ag,Af]},AW,{offset:Ae?1:0,replaceSourceId:Ae?null:AW.item.did})));});},submitAddShortcutMetric:function(Ac,An){var Ap=this,Ai=Ap.id,Ag=this.getHost(),AX=Ag.k,AZ=Ag.defn.tt,Aq=Ap.submitActionForDatasetUpdate,Al=Ap.allowInsertNewMetric(Ac.zone),Ad=[];if(Ac.zone.id===f){Al=false;}if(Al&&Ac.useDropzone&&Ap.gmZones){var Ab=Ap.gmZones.getZoneModelByZoneId((Ac.zone.id===AJ)?G:AC);var Ak=Ap.getAddMetricNameAction(Ag,Ab.id);if(Ak){Ad.push(Ak);}Ak=Ap.gmZones.getUpdateGroupInfoActionForNewMetric(Ac.zone.id,Ac.idx+1,Ac.item.ax===0);if(Ak){Ad.push(Ak);}}var Am=An.item,Af=An.extraItem,Ao=An.funcType,AY=An.funcType2,Ae=An.breakBys,AW=An.sortBys,Aa=An.prs,Aj=[{id:Am.did,type:Am.t}],Ah;if(Af){Aj.push(Af);}Ah={act:"addShortcutMetric",dsid:AV.call(Ap,Am.did),nodeKey:AX,treeType:AZ,funcType:Ao,units:Aj,breakBys:Ae,sortBys:AW};if(AY){Ah.funcType2=AY;}if(Aa){Ah.prs=Aa;}Ad=Ad.concat(AI.call(Ap,Ah,Ac,{offset:Al?1:0,replaceSourceId:Al?null:Am.did}));Aq.call(mstrmojo.all[Ai],Ad);},getDynamicBreakByAxisOptions:function(AY){var Aa=this,AZ=Aa.getHost(),Ab=AZ.model.data.gsi,AW=[],AX=function AX(Ac){return Ac.some(function(Ad){return Aa.isAttribute(Ad)||Aa.isNewDerivedElement(Ad)||Aa.isCustomGroup(Ad)||Aa.isConsolidation(Ad);});};if(AX(Ab.rows)){AW.push({n:AY?mstrmojo.desc(3326,"By Columns"):mstrmojo.desc(122,"Columns"),axes_bitmap:a.DssXmlAxisRowsBit,dmy:"@cols"});}if(AX(Ab.cols)){AW.push({n:AY?mstrmojo.desc(3327,"By Rows"):mstrmojo.desc(2968,"Rows"),axes_bitmap:a.DssXmlAxisColumnsBit,dmy:"@rows"});}return AW;},getBreakByAxisOptions:function(AX){var AW=[{n:mstrmojo.desc(4531,"Automatic"),axes_bitmap:w.DssAxisDynamicShortcutRoot+AR.DssDynamicShortcutAuto,dmy:"@auto"},{n:AX?mstrmojo.desc(13408,"By None"):mstrmojo.desc(2057,"None"),axes_bitmap:a.DssXmlAxisPagesBit,dmy:"@p"}];if(AX){AW.splice(1,0,{isSeparator:true});}return AW.concat(this.getDynamicBreakByAxisOptions(AX));},getBreakByAttributeOptions:function(){var AW=this,AX=[],AZ=AW.getTemplateAttributes().concat(AW.getTemplateDEs()),AY=AW.getPageByUnit();AX=AX.concat(AZ);if(AY&&AY.srcid){if(L.find(AX,"did",AY.srcid)===-1){AX.push({n:AY.n,did:AY.srcid,t:AY.srct});}}return AX;},getDynamicBreakByOptions:function(AW){var AX=this,AY=AX.getBreakByAttributeOptions();if(AW&&AY.length){AY.unshift({isSeparator:true});}return AX.getBreakByAxisOptions(AW).concat(AY);},getDynamicLevelOptions:function(){var AW=this,AY=AW.getBreakByAxisOptions(true),AX=AW.getBreakByAttributeOptions();AY.some(function(AZ){if(AZ.axes_bitmap===a.DssXmlAxisPagesBit){AZ.n=mstrmojo.desc(3329,"Grand Total");return true;}});if(AX.length){AX.unshift({isSeparator:true});}return AY.concat(AX);},getShortcutMetricSubMenu:function(Aa){var AZ=this,AW=new mstrmojo.ui.menus.MenuConfig(),Ab=Aa.item,AY=c.getUnitFromDataset(this.docModel.datasets,Ab.did,Ab.t)||Ab,AX=AZ.allowInsertNewMetric(Aa.zone);if(AY.t===4){AZ.addRankShortcutMenu(Aa,AW);AZ.addPercentileShortcutMenu(Aa,AW);AZ.addPercentToTotalShortcutMenu(Aa,AW);AW.addSeparator();AZ.addPercentOfShortcutMenu(Aa,AW);AZ.addPercentChangeShortcutMenu(Aa,AW);AZ.addDifferenceShortcutMenu(Aa,AW);AW.addSeparator();AZ.addMovingTotalShortcutMenu(Aa,AW);AZ.addRunningTotalShortcutMenu(Aa,AW);AZ.addPercentRunningTotalShortcutMenu(Aa,AW);}AW.addSeparator();AW.addMenuItem(mstrmojo.desc(11491,"More Functions..."),"",function(){AN.call(AZ,Aa,"add",!AX);},AY);return AW;},hasReplaceCandidates:function(AW){var AX=this.getReplaceCandidates(AW.zone,AW.item);return AX&&AX.length>0;},getReplaceSubMenu:function(AX,AZ){var Ad,Ae=AX.item,Aa=AX.zone,AY=this.getReplaceCandidates(Aa,Ae),Ab=this;Ad=AZ?[AZ]:[];Ad.push({scriptClass:"mstrmojo.ui.ScrollableContainer",alias:"scrollableContainer",children:[{scriptClass:"mstrmojo.vi.ui.InteractiveUnitList",draggable:false,CLS_HAS_MENU:"",items:AY,listHooks:{select:function Ac(Af,Ag){Ab.unitsDropped(Aa,{src:{data:{item:Ag,items:[Ag],dsid:Ag.dsId}},getCtxtDragData:function(){var Ah=this.src;return(Ah&&Ah.data)||{};}},{allowedItems:[Ag],idx:L.find(Aa.items,"did",Ae.did)===-1?Ae._renderIdx:L.find(Aa.items,"did",Ae.did),edge:mstrmojo.vi.models.DropZonesModel.ENUM_TARGET_POSITION.ON,removeReplaced:true});if(this.parent&&this.parent.parent&&this.parent.parent.closeAllMenus){this.parent.parent.closeAllMenus();}}}}]});return new mstrmojo.ui.menus.EditorConfig({data:{},cssClass:"replaceReference",okVisible:false,cancelVisible:false,contents:Ad,onOpen:function AW(){this.scrollableContainer.updateScrollbars();}});},addRankShortcutMenu:function m(AZ,AX){var AY=this,Ab=this.id;function AW(Ae,Ad,Ac){AY.submitAddShortcutMetric(AZ,{item:Ae,funcType:mstrmojo.mstr.EnumFunction.FunctionRank,prs:[{n:"ASC",v:Ad}],breakBys:Ac});}function Aa(Ac){return c.getRankMetricEditor(Ac.item,AY.getDynamicBreakByOptions(),AW);}AX.addActionPopupMenuItem(mstrmojo.desc(2789,"Rank"),Ab,function(){AW(AZ.item,"0",[{dmy:"@auto"}]);},Aa,"",AZ);},addPercentileShortcutMenu:function l(AY,AW){var AX=this,Ab=this.id;function AZ(Ac){var Ad;if(Ac.dmy){Ad={dmy:Ac.dmy};}else{Ad={id:Ac.did,type:Ac.t};}AX.submitAddShortcutMetric(AY,{item:AY.item,funcType:mstrmojo.mstr.EnumFunction.FunctionPercentRank,breakBys:[Ad],prs:[{n:"inclusive",v:"False"}]});}function Aa(){var Ad=new mstrmojo.ui.menus.MenuConfig(),Ac=AX.getDynamicBreakByOptions(true);Ac.forEach(function(Ae){if(Ae.isSeparator){Ad.addSeparator();return ;}Ad.addMenuItem(Ae.n,"",function(){AZ(Ae);});});return Ad;}AW.addActionPopupMenuItem(mstrmojo.desc(13409,"Percentile Rank"),Ab,function(){AZ({dmy:"@auto"});},Aa,"",AY);},addPercentToTotalShortcutMenu:function z(AX,Ad){var Af=this,AW=this.id,Ai=AX.item,Aj=Af.getHost(),Ae=Af.submitActionForDatasetUpdate.bind(Af),Ac=Af.getDynamicLevelOptions(),Ab=Aj.k,AY=Aj.defn.tt,Ah=Af.allowInsertNewMetric(AX.zone),Aa=[];if(AX.zone.id===f){Ah=false;}function Ag(Ak){if(Ah&&AX.useDropzone&&Af.gmZones){var Am=Af.gmZones.getZoneModelByZoneId((AX.zone.id===AJ)?G:AC);var Al=Af.getAddMetricNameAction(Aj,Am.id);if(Al){Aa.push(Al);}Al=Af.gmZones.getUpdateGroupInfoActionForNewMetric(AX.zone.id,AX.idx+1,AX.item.ax===0);if(Al){Aa.push(Al);}}Ae(Aa.concat(AI.call(Af,{act:"addPercentToTotalMetric",nodeKey:Ab,treeType:AY,metric_id:Ai.did,axes_bitmap:Ak.axes_bitmap||0,units:Ak.did&&[{id:Ak.did,type:Ak.t}]},AX,{offset:Ah?1:0,replaceSourceId:Ah?null:AX.item.did})));}function AZ(){var Ak=new mstrmojo.ui.menus.MenuConfig();Ac.forEach(function(Al){if(Al.isSeparator){Ak.addSeparator();return ;}Ak.addMenuItem(Al.n,"",function(){Ag(Al);});});return Ak;}Ad.addActionPopupMenuItem(mstrmojo.desc(3323,"Percent to Total"),AW,function(){Ag({axes_bitmap:w.DssAxisDynamicShortcutRoot+AR.DssDynamicShortcutAuto});},AZ,"",AX);},addPercentOfShortcutMenu:function J(Aa,AW){var AZ=this,Ab=this.id;function AY(Ad,Ae,Ac){AZ.submitAddShortcutMetric(Aa,{item:Ad,funcType:Ae,funcType2:mstrmojo.mstr.EnumFunction.FunctionDivide,breakBys:Ac,sortBys:[{dmy:"@auto"}]});}function AX(Ac){return c.getRelativeReferenceMenu(Ac.item,mstrmojo.desc(13394,"Percent of:"),AZ.getDynamicBreakByOptions(),AY);}AW.addActionPopupMenuItem(mstrmojo.desc(13390,"Percent Of"),Ab,function(){AY(Aa.item,mstrmojo.mstr.EnumFunction.FunctionLag,[{dmy:"@auto"}]);},AX,"",Aa);},addPercentChangeShortcutMenu:function i(AZ,AX){var AY=this,Ab=this.id;function Aa(Ad,Ae,Ac){AY.submitAddShortcutMetric(AZ,{item:Ad,funcType:Ae,funcType2:mstrmojo.mstr.EnumFunction.FunctionVar,breakBys:Ac,sortBys:[{dmy:"@auto"}]});}function AW(Ac){return c.getRelativeReferenceMenu(Ac.item,mstrmojo.desc(146,"From:"),AY.getDynamicBreakByOptions(),Aa);}AX.addActionPopupMenuItem(mstrmojo.desc(13391,"Percent Change"),Ab,function(){Aa(AZ.item,mstrmojo.mstr.EnumFunction.FunctionLag,[{dmy:"@auto"}]);},AW,"",AZ);},addDifferenceShortcutMenu:function I(AZ,AW){var AY=this,Ab=this.id;function AX(Ad,Ae,Ac){AY.submitAddShortcutMetric(AZ,{item:Ad,funcType:Ae,funcType2:mstrmojo.mstr.EnumFunction.FunctionMinus,breakBys:Ac,sortBys:[{dmy:"@auto"}]});}function Aa(Ac){return c.getRelativeReferenceMenu(Ac.item,mstrmojo.desc(146,"From:"),AY.getDynamicBreakByOptions(),AX);}AW.addActionPopupMenuItem(mstrmojo.desc(11495,"Difference"),Ab,function(){AX(AZ.item,mstrmojo.mstr.EnumFunction.FunctionLag,[{dmy:"@auto"}]);},Aa,"",AZ);},addMovingTotalShortcutMenu:function AB(AY,AW){var AX=this,Ab=this.id;function Aa(Af,Ae,Ad,Ac){AX.submitAddShortcutMetric(AY,{item:Af,funcType:Ae,breakBys:Ac,sortBys:[{dmy:"@auto"}],prs:[{n:"OLAPWinStType",v:"3"},{n:"OLAPWinStOffset",v:Ad.toString()},{n:"OLAPWinEndType",v:"2"}]});}function AZ(Ac){return c.getMovingTotalMenu(Ac.item,AX.getDynamicBreakByOptions(),Aa);}AW.addActionPopupMenuItem(mstrmojo.desc(13392,"Moving Average"),Ab,function(){Aa(AY.item,mstrmojo.mstr.EnumFunction.FunctionOLAPAvg,1,[{dmy:"@auto"}]);},AZ,"",AY);},addRunningTotalShortcutMenu:function AQ(Aa,AW){var AZ=this,Ab=this.id;function AY(Ae,Ad,Ac){AZ.submitAddShortcutMetric(Aa,{item:Ae,funcType:Ad,breakBys:Ac,sortBys:[{dmy:"@auto"}],prs:[{n:"OLAPWinStType",v:"0"},{n:"OLAPWinEndType",v:"2"}]});}function AX(Ac){return c.getRunningTotalMenu(Ac.item,AZ.getDynamicBreakByOptions(),AY);}AW.addActionPopupMenuItem(mstrmojo.desc(11906,"Running Total"),Ab,function(){AY(Aa.item,mstrmojo.mstr.EnumFunction.FunctionOLAPSum,[{dmy:"@auto"}]);},AX,"",Aa);},addPercentRunningTotalShortcutMenu:function B(AZ,AX){var AY=this,Ab=this.id;function AW(Ae,Ac){var Ad=[];Ac.forEach(function(Af){if(Af.dmy){Ad.push({dmy:Af.dmy});}else{Ad.push({id:Af.did,type:Af.t});}});AY.submitAddShortcutMetric(AZ,{item:Ae,funcType:mstrmojo.mstr.EnumFunction.FunctionOLAPSum,funcType2:mstrmojo.mstr.EnumFunction.FunctionDivide,breakBys:Ad,sortBys:[{dmy:"@auto"}],prs:[{n:"OLAPWinStType",v:"0"},{n:"OLAPWinEndType",v:"2"}]});}function Aa(Ae){var Ad=new mstrmojo.ui.menus.MenuConfig(),Ac=AY.getDynamicLevelOptions();Ac.forEach(function(Af){if(Af.isSeparator){Ad.addSeparator();return ;}Ad.addMenuItem(Af.n,"",function(){AW(Ae.item,[Af]);});});return Ad;}AX.addActionPopupMenuItem(mstrmojo.desc(13393,"Percent Running Total"),Ab,function(){AW(AZ.item,[{dmy:"@auto"}]);},Aa,"",AZ);},getMultipleMetricsCalcMenus:function p(Ad,Ac,Af){var Ae=this,Ag=this.getHost(),Ab=this.submitActionForDatasetUpdate.bind(this),AZ=Ag.k,AX=Ag.defn.tt,AY=Ac.map(function(Ah){return Ah.did;}),AW=Ad.items.map(function(Ah){return Ah.did;}),Aa=-1;AY.forEach(function(Ah){var Ai=L.indexOf(AW,Ah);if(Ai>Aa){Aa=Ai;}});return c.getMultipleMetricsCalculationMenus(Ac,Ag.model.data.datasetId,function(Aj){var Ai={act:"addShortcutMetric",dsid:AV.call(Ae,AY),nodeKey:AZ,treeType:AX,funcType:Aj.funcType,funcType2:Aj.funcType2,units:Aj.items.map(function(Al){return{id:Al.did,type:Al.t};}),position:Aa+2,partialRetrieval:{nodes:[AZ]}},Ak=[],Ah;if(Af){Ai.useDropzone=Af;Ai.dropzoneId=Ad.id;}Ak.push(Ai);if(Ae.gmZones){Ah=Ae.gmZones.getUpdateGroupInfoActionForNewMetric(Ad.id,Aa+1,true);}if(Ah){Ak.push(Ah);}Ab(Ak);});},getCreateOrEditElementGroupFunc:function AU(AX){var AW=this;return function(){var Ab=AW.getHost(),Ac=Ab.model,Aa=AX.item,AZ=Aa.did,AY=AW.getUnitInfoInTemplate(AZ),Ae="$GUID_1",Ad=AY.unit.ost===12033&&Ac.docModel.getDEObject(AZ);Ab.controller.openDEEditor(Ab,Ad?{deObj:Ad}:{dsId:Ac.data.datasetId,attId:AZ,attName:Aa.n,deId:Ae,getExtraSaveActions:function(){var Af=AX.zone;return AW.getUpdateTemplateAction([AW.getRemoveDropZoneUnitAction(Af,Aa),AW.getAddDropZoneUnitAction(Af,{did:Ae,t:AH.DssTypeConsolidation},AX.idx)]);}});};},buildThresholdMenuOptions:function o(AX,AY,AW){mstrmojo.all[this.hostId].model.buildThresholdMenuOptions(AX,AY,AW,this.canSupportImageThreshold());},canSupportImageThreshold:function K(){return false;},getNumberFormatEditorCfg:function O(AW){return mstrmojo.all[this.hostId].model.getNumberFormatEditorCfg(AW);},submitUpdatesAndPersistWidgetXMLIfNecessary:function AT(AZ,AY,AX){var AW=AZ.model.docModel,Aa=AW.getDataService(),Ac,Ab;if(!AZ.isXMLDirty()){AZ.controller.onSubmitTemplateUpdates(AZ,AY,AX);}else{Ab={act:"updateTemplate",keyContext:AZ.k,actions:AY};Ac=AZ.getPersistAction();Aa.submitUpdates([Ab,Ac],mstrmojo.func.wrapMethods(AZ.controller._getXtabCallback(AZ),AX));AZ.resetXMLDirtyFlag();}},submitActionForDatasetUpdate:function AG(AX){var AW=this.docModel;this.submitDropZoneUpdates(AX,mstrmojo.func.wrapMethods(AW.getDatasetsUpdateCallback(),AW.controller._getXtabCallback(this.getHost())));}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo.array","mstrmojo.hash","mstrmojo.func","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.vi.models.EnumDragSources","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.vi.models.DatasetDoubleClick","mstrmojo.vi.models._CheckDataCards","mstrmojo.vi.util.TemplateUtils");var Q=mstrmojo.hash,d=mstrmojo.array,r=mstrmojo.func,V=mstrmojo.vi.util.TemplateUtils,m=mstrmojo.vi.ui.DatasetUnitMenuUtils,T="00000000000000000000000000000000",e=mstrmojo.vi.models.EnumDragSources,S=mstrmojo.chart.model.enums.EnumDSSObjectType;var U={ABOVE:0,ON:1,BELOW:2};mstrmojo.vi.models.DropZoneItemType=null;mstrmojo.vi.models.DropZoneType=null;mstrmojo.vi.models.DropZonesEditorConfigType=null;function G(AA,w,y,AB,AE,z,AC,AD){var x={act:AA,zoneId:w,unitId:y,unitType:AB};if(AE!==undefined){x.unitPos=AE+1;}if(AD!==undefined){x.is_disableonly=AD;}if(z){x.datasetId=String(z);x.datasetType=String(AC);}return x;}function L(w){return function(x){var y=[{t:w,did:NaN}];return !!this.getAllowDropInfo(x,y,x.items.length-1,U.BELOW,{src:{data:{src:e.DATASETS}}}).allowedItems.length;};}mstrmojo.vi.models.DropZonesModel=mstrmojo.declare(mstrmojo.Obj,[mstrmojo.vi.models._CheckDataCards],{scriptClass:"mstrmojo.vi.models.DropZonesModel",hostId:"",docModel:null,getDropZones:mstrmojo.emptyFn,getDZFlatStruct:function I(){var z=this.getHost().model.data,AA=z.gsi||{},w=(AA.rows||[]).concat(AA.cols||[]),y={},x={};w.forEach(function(AB){if(AB.hasOwnProperty("st")&&AB.hasOwnProperty("did")){y[AB.did]=AB.st;}});if(z.dz){Object.keys(z.dz).forEach(function(AD){var AB=z.dz[AD],AC=(AB.TemplateUnit||[]).concat(AB.TemplateMetric||[]);AC.forEach(function(AE){var AF=AE.id;if(AE.st===undefined&&y.hasOwnProperty(AF)){AE.st=y[AF];}});x[AD]=AC;});}return x;},getAvatarIconClass:function Y(){throw new Error(this.scriptClass+" must implement getAvatarIconClass method.");},canSwapAxis:function l(){return false;},swapAxis:function A(){if(this.canSwapAxis()){throw new Error(this.scriptClass+" must implement swapAxis method if this.canSwapAxis returns true.");}},canDefineSubtotals:function(){return false;},getZoneMenuItems:function o(x,w){},getUnitMenuItems:function f(x,w,z,y){},getMultiUnitsMenuItems:function c(x,w,y){var z=this.id;if(m.getMultiSelectionShortcutMetricFunctions(y).length){x.addSubMenuItem(mstrmojo.desc(5188,"Calculation"),"",this.id,function(){return mstrmojo.all[z].getMultipleMetricsCalcMenus(w,y,true);});}x.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){mstrmojo.all[z].deleteItems(w,y);});},deleteItem:function H(x,w){this.throwAbstractMethodError("deleteItem");},deleteItems:function H(w,x){this.throwAbstractMethodError("deleteItems");},addZoneItem:function b(y,z){y.t=y.t||4;if(y.did===undefined){y.did=y.id;}var w=V.findUnitsById(this.getHost().model.data.gsi,y.did)[0];if(w){Q.copyProps(["n","um"],w,y);}if(y.t===12||y.t===47||y.t===4){var x=this.docModel.datasets,AB=false,AA=y.t===4?"mx":"att";Object.keys(x).every(function(AC){(x[AC][AA]||[]).every(function(AD){if(AD.did===y.did){AB=true;var AE;for(AE in AD){if(!y.hasOwnProperty(AE)){y[AE]=AD[AE];}}}return !AB;});return !AB;});}z.push(y);},getZone:function n(AB,AA,z,w,x){var y=[];(z||[]).forEach(function(AC){this.addZoneItem(Q.copy(AC),y,x);},this);return{n:AB,id:AA,enabled:!w,cssClass:(x&&x.allowSingle)?"singleUnitZone":"",getDropIconCls:function(){return"pivot";},title:(x&&x.title)||"",items:y};},getZoneForObject:function O(x){var w=null;this.getDropZones().zones.every(function(y){if(d.find(y.items,"did",x)>-1){w=y;return false;}return true;});return w;},getUnitIndexInZone:function j(w,x){return d.find(w.items,"did",x.did);},isZoneDropAllowed:function R(w){if(!w.enabled){return false;}return true;},getAllowDropInfo:function C(x,y,w,z){return{allowedItems:y.concat(),removeReplaced:z===U.ON&&d.find(y,"did",x.items[w].did)===-1};},getTargetEdgePortion:function M(w){return 0.33;},allowInsertNewMetric:L(4),allowInsertNewAttribute:L(12),unitsDropped:function s(w,x,y,AA,z){if(this.unitDropped!==mstrmojo.vi.models.DropZonesModel.prototype.unitDropped){return this.unitDropped(w,x,y.idx,y.edge,AA,z);}this.throwAbstractMethodError("unitsDropped");},getHost:function Z(){return mstrmojo.all[this.hostId];},getHostModel:function B(){this.throwAbstractMethodError("getHostModel");},shouldMetricNameShowIcon:function v(){return true;},addUnitsFromDataSource:function F(AD,AB,y,x){var AA=this.docModel.controller,w;y=y||[];var z=false,AF=this.getHost(),AC=[],AG;[].concat(AD).forEach(function(AH){AG=this.isMetric(AH);z=AG||z;w=mstrmojo.vi.models.DatasetDoubleClick.addObject(AH,AB,this);y=y.concat(w);if(AG){AC.push(AH);}},this);if(y&&y.length){if(z&&w&&w[0].actions){w[0].actions.push(AF.model.getValuesDefaultFormatGridZoneAction(AC));}var AE=AA._getXtabCallback(this.getHost());if(x){AE=r.wrapMethods(x,AE);}if(this.existLargeOrManyItems()){this.warnAndExecCallBackForAddUnits(function(){AA.submitUndoRedoUpdates(y,{},AE);});return ;}AA.submitUndoRedoUpdates(y,{},AE);}},changeZoneUnits:function k(x,w,y){},getZoneAddCandidates:function X(w){return[];},getRequiredItemsInfo:function g(x){if(!x){return 0;}var w=[];this.getDropZones().zones.forEach(function(y){w=w.concat(y.items);});return Number(w.reduce(function(y,z){if(parseInt(z.did,10)!==-1&&z.t===x){return y+1;}return y;},0));},getUpdateCallback:function P(){var x=this.getHost().parent.k,w=this.docModel;return{success:function(){w.getPanel().getUnitByKey(x).selectVIUnit(true);}};},getUpdateTemplateAction:function K(w){return this.docModel.getDataService().getUpdateTemplateAction(this.getHost().k,w);},getReplaceCandidates:function J(w,y){var x=[],AB=y.t,AA=y.did,z=this.getHostModel().datasetId;this.getDropZones().zones.forEach(function(AC){((AC&&AC.items)||[]).forEach(function(AE){var AF=AE.t,AD=AE.did;if(AF!==21&&AD!=="-1"&&AD!==T&&((AF===4&&AB===4)||(AF!==4&&AB!==4))&&AD!==AA&&d.find(x,"did",AD)===-1){x.push(AE);}});});if(z){this.docModel.getDatasetUnits(AB===4?["mx"]:["att"],null,z).forEach(function(AC){if(d.find(x,"did",AC.did)===-1&&AC.did!==AA&&!AC.hide){x.push(AC);}});}return m.getSortedDatasetUnits(x);},getDropTargetIndex:function D(x,z){var w=z.idx,y=(z.edge===U.ON&&!z.removeReplaced)?U.BELOW:z.edge,AB=w,AA=this,AC={};z.allowedItems.forEach(function(AE){var AD=AA.getUnitIndexInZone(x,AE);if(AD!==-1){AC[AD]=AE;}});Q.forEach(AC,function(AE,AF){var AD=parseInt(AF,10);if(AD<w){AB--;}else{if(AD===w){y=U.ON;}}});return y===U.BELOW?(AB+1):AB;},getAddDropZoneUnitAction:function i(x,z,w,y){return G("addDropZoneUnit",x.id,z.did,z.t,w,y&&y.datasetId,(y&&y.datasetType)||S.DssTypeReportDefinition);},getAddDropZoneUnitsActions:function u(x,y,w,z){return y.reverse().map(function(AA){return G("addDropZoneUnit",x.id,AA.did,AA.t,w,z&&z.datasetId,(z&&z.datasetType)||S.DssTypeReportDefinition);});},getRemoveDropZoneUnitAction:function W(w,x,y){return G("removeDropZoneUnit",w.id,x.did,x.t,undefined,undefined,undefined,y);},checkAndAddThresholdAction:function q(y,w,x){return false;},getAllZones:function(){return this.getDropZones().zones||[];},getClearAllUnitsActions:function N(){var w=[];(this.getAllZones()).forEach(function(x){((x&&x.items)||[]).forEach(function(y){w.push(this.getRemoveDropZoneUnitAction(x,y));},this);},this);return w;},getClearAllUnitsUnTemplateActions:function a(){return[];},clearAllDropZones:function p(AF){var y=this.getClearAllUnitsActions(),AA=this.getClearAllUnitsUnTemplateActions(),AH=this.getHost(),AD=AH.id,z=AH.gridData||AH.model.data||AH.node.data,AC=z.vlexpr,AI=this.docModel,x=AH.model,AB=AI.controller,AE=r.wrapMethods({success:function(){var AJ=mstrmojo.all[AD];if(AJ._viSelections){AJ.clearSelections();AJ.endSelections();}}},AB._getXtabCallback(AH),{success:function AG(){mstrmojo.all[AD].raiseEvent({name:"regenerateToolbar"});}}),w=x.getKeepOnlyActionsForAssociatedNodes([],AE);if(AC){w.actions.push(AB.dataService().getUpdateTemplateAction(AH.k,x.getRemoveMetricLimitsAction(AC)));}if(AF){AF.actions=[].concat(AF.actions).concat(w.actions);AF.callback=r.wrapMethods(AF.callback,w.callback);}else{AF=w;}if(AA&&AA.length>0){AF.actions=AF.actions.concat(AA);}this.submitDropZoneTemplateUpdates(y,AF);},submitDropZoneUpdates:function h(AC,AD,y){var AA=this.getHost(),x=this.docModel,w=x.controller,z=[].concat(AC||[]);if(z&&z.length){var AB=AD||w._getXtabCallback(AA);w.cmdMgr.execute({execute:function(){this.submit(z,AB,y);},urInfo:{callback:AB}});}},submitDropZoneTemplateUpdates:function E(w,y){var x=(w&&w.length)?[this.getUpdateTemplateAction(w)]:[];if(y&&y.actions){x=x.concat(y.actions);}this.submitDropZoneUpdates(x,y&&y.callback,y&&y.extras);},getHighlightTargets:function t(x,w){return[w];}});mstrmojo.vi.models.DropZonesModel.ENUM_TARGET_POSITION=U;mstrmojo.vi.models.DropZonesModel.ENUM_REQUIREMENT_TYPE={ATTRIBUTE:12,METRIC:4,LONGITUDE:"long",LATITUDE:"lat"};}());(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.Button","mstrmojo.Label","mstrmojo.Box","mstrmojo.ui.Checkbox","mstrmojo.ui.CheckList","mstrmojo.DataGrid","mstrmojo.hash","mstrmojo.models.FormatModel","mstrmojo.ui.editors.controls.TwoColumnContainer","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.func","mstrmojo.array");var S=mstrmojo.hash,M=mstrmojo.array,V=mstrmojo.Button.newWebButton,J=mstrmojo.ui.Pulldown.newPulldown,K=mstrmojo.models.FormatModel.getFormatUpdate,O=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,H=mstrmojo.vi.ui.DatasetUnitMenuUtils,a;var U=1,T=2,b=3,E="410px";var Y=[{n:mstrmojo.desc(6031,"Off"),v:"0"},{n:mstrmojo.desc(6030,"On"),v:"1"},{n:mstrmojo.desc(8504,"Form name only"),v:"2"},{n:mstrmojo.desc(8505,"Show attribute name once"),v:"3"},{n:mstrmojo.desc(4531,"Automatic"),v:"4"}],Z=[{n:mstrmojo.desc(13786,"Show both nulls and zeros"),v:"-1"},{n:mstrmojo.desc(13787," Hide both nulls and zeros"),v:"2"},{n:mstrmojo.desc(9845,"Hide nulls only"),v:"0"},{n:mstrmojo.desc(9846,"Hide zeros only"),v:"1"}],A=[{n:mstrmojo.desc(13544,"Last selection only"),v:0},{n:mstrmojo.desc(13545,"Intersection of all selections"),v:1}],I=[{n:mstrmojo.desc(959,"Default"),v:"-1",title:mstrmojo.desc(959,"Default")},{n:mstrmojo.desc(9640,"Inner Join"),v:"0",title:mstrmojo.desc(9640,"Inner Join")},{n:mstrmojo.desc(9641,"Outer Join"),v:"1",title:mstrmojo.desc(9641,"Outer Join")}],P=[{n:mstrmojo.desc(959,"Default"),v:"-1",title:mstrmojo.desc(959,"Default")},{n:mstrmojo.desc(13177,"Inner Join"),v:"0",title:mstrmojo.desc(13178,"Results displaying only those attribute elements that have metric value")},{n:mstrmojo.desc(13179,"Outer Join - Ignore Filter"),v:"2",title:mstrmojo.desc(13180,"Outer join to attribute's look up table without considering the filter on template")},{n:mstrmojo.desc(13181,"Outer Join - Preserve Filter"),v:"3",title:mstrmojo.desc(13182,"Outer join to attribute's look up table after considering the filter on template")}];var R={"-1":mstrmojo.desc(959,"Default"),"0":mstrmojo.desc(9640,"Inner Join"),"2":mstrmojo.desc(13179,"Outer Join - Ignore Filter"),"3":mstrmojo.desc(13181,"Outer Join - Preserve Filter")},D={"-1":mstrmojo.desc(959,"Default"),"0":mstrmojo.desc(9640,"Inner Join"),"1":mstrmojo.desc(9641,"Outer Join")};function Q(h,e,d,g){var f={scriptClass:"mstrmojo.ui.editors.controls.TwoColumnContainer",col1Width:h,col2Width:e,children:d};return S.copy(g,f);}function X(e,f,d){return S.copy(d,{scriptClass:"mstrmojo.Label",slot:f,text:e});}function B(g,d){return[X(g,"col1Node",{cssClass:"subTitle"}),{scriptClass:"mstrmojo.ui.CheckList",orientation:"h",slot:"col2Node",preBuildRendering:function e(){var j=mstrmojo.all[a].data[d],h=this.items,i=this.selectedIndices;if(j){M.forEach(h,function(l,k){i[k]=j[l.id]==="-1";});}},postselectionChange:function f(h){var j=this.items,i=[h.added,h.removed];i.forEach(function(l,k){if(l&&l.length>0){K(d+j[l[0]].id,k===0?"-1":"0",mstrmojo.all[a].newData);}});},items:[{n:mstrmojo.desc(2969,"Show"),id:O.SHOW_HEADER},{n:mstrmojo.desc(1095,"Merge"),id:O.MERGE_HEADER},{n:mstrmojo.desc(2970,"Lock"),id:O.LOCK_HEADER}]}];}function G(e){var d=mstrmojo.all[a];if(e){d.update=d.update.actions?d.update:{actions:[]};d.update.actions=d.update.actions.concat(mstrmojo.hash.valarray(d.joinActions));d.update.callback=mstrmojo.func.wrapMethods(d.update.callback,d.host.parent.model.getRebuildCallback());d.submitAction(d.newData,d.update.actions,d.update.callback,d.update.extras);}d.newData=d.update={};d.joinActions={};d.close();}function N(e){var h=e.parent.data,f=mstrmojo.all[a],d=f.host.k,g=f.host.controller,i=new mstrmojo.ui.menus.MenuConfig();f.joinActions=f.joinActions||{};if(h.did==="AllAttr"){P.forEach(function(j){i.addMenuItem(j.n,"",function(){e.parent.jtValue.set("text",j.n);h.v=j.v;h.dv=j.n;f.joinActions.AllAttr=g.dataService().getSetAttributesJoinTypeAction(d,j.v);});});}else{I.forEach(function(j){i.addMenuItem(j.n,"",function(){e.parent.jtValue.set("text",j.n);h.v=j.v;h.dv=j.n;f.joinActions[h.did]=g.dataService().getSetMetricJoinTypeAction(d,h.did,h.dt,h.t,j.v);});});}i.hostId=a;i.isHostedWithin=false;i.hostElement=e.domNode;i.menuCssClass="joinbehavior";i.setAlignment(3,2);f.openPopup(i.newInstance());}mstrmojo.vi.ui.editors.MoreOptionsEditor=mstrmojo.declare(mstrmojo.Editor,[mstrmojo.ui.menus._HasMenuPopup],{scriptClass:"mstrmojo.vi.ui.editors.MoreOptionsEditor",host:undefined,showHeadersSection:false,data:undefined,lockHeadersCase:undefined,update:undefined,newData:undefined,joinActions:undefined,cssClass:"mstrmojo-MoreOptions-Editor",title:mstrmojo.desc(9126,"More options"),help:"more_options_dialog_box.htm",submitAction:mstrmojo.emptyFn,init:function W(d){this._super(d);a=this.id;this.newData=this.update={};this.joinActions={};this.onshowHeadersSectionChange(this.showHeadersSection);},onOpen:function F(){this.refresh();},_set_lockHeadersCase:function c(g,d){this.lockHeadersCase=d;var e=this.data,f=this.lockHeadersCase;if(!e){e=this.data={rows:{},cols:{}};}else{e.rows=e.rows||{};e.cols=e.cols||{};}e.rows.lhv=(f===b||f===U)?"-1":"0";e.cols.lhv=(f===b||f===T)?"-1":"0";},onshowHeadersSectionChange:function L(e){var f=e.value,d=this.headersSection;if(!f&&d){this._headersSecOrphan=d;this.removeChildren(d);}else{if(f&&!d){this.addChildren(this._headersSecOrphan,0);}}},children:[Q("26%","74%",[X(mstrmojo.desc(2967,"Headers"),"col1Node",{cssClass:"title"}),Q("20%","80%",B(mstrmojo.desc(2968,"Rows"),"rows"),{slot:"col2Node"}),Q("20%","80%",B(mstrmojo.desc(122,"Columns"),"cols"),{slot:"col2Node"})],{alias:"headersSection",cssClass:"headers",width:E}),Q("26%","74%",[X(mstrmojo.desc(4083,"Display"),"col1Node",{cssClass:"title"}),{scriptClass:"mstrmojo.Box",slot:"col2Node",cssClass:"row1",children:[X(mstrmojo.desc(8503,"Show attribute form names:"),"containerNode",null),J(Y,function(d){K(O.LONG_NAME,d.v,mstrmojo.all[a].newData);},0,{width:"151px",preBuildRendering:function C(){var d=this.items.map(function(e){return e.v;}).indexOf(mstrmojo.all[a].data[O.LONG_NAME]);this.selectedIndex=Math.max(d,0);}},true)]},{scriptClass:"mstrmojo.Box",slot:"col2Node",cssClass:"row2",children:[X(mstrmojo.desc(13200,"Hide Null/Zero"),"containerNode",null),J(Z,function(e){var d=e.v,f=d==="-1"?"-1":"0";if(d!=="-1"){K(O.HIDE_NULL,d,mstrmojo.all[a].newData);}K(O.SHOW_ALL_ROWS,f,mstrmojo.all[a].newData);},0,{width:"181px",preBuildRendering:function C(){var e=mstrmojo.all[a].data,d=e[O.SHOW_ALL_ROWS]==="-1"?0:this.items.map(function(f){return f.v;}).indexOf(e[O.HIDE_NULL]);this.selectedIndex=Math.max(d,0);}},true)]}],{alias:"viewSection",cssClass:"view",width:E}),Q("26%","74%",[X(mstrmojo.desc(13546,"Filtering"),"col1Node",{cssClass:"title"}),{scriptClass:"mstrmojo.Box",slot:"col2Node",cssClass:"row1",children:[X(mstrmojo.desc(13547,"When this visualization is filtered by multiple other visualizations, filter by:"),"containerNode",{cssClass:"dropdownLabel"}),J(A,function(d){var e=mstrmojo.all[a],f=e.host;if(f.switchFilterType){e.update=f.switchFilterType(d.v);}},0,{width:"181px",preBuildRendering:function C(){var d=mstrmojo.all[a].host;if(d.getFilterType){this.selectedIndex=d.getFilterType();}}},true)]}],{alias:"filteringSection",cssClass:"filtering",width:E}),Q("26%","74%",[X(mstrmojo.desc(4571,"Join Behavior"),"col1Node",{cssClass:"title"}),{scriptClass:"mstrmojo.DataGrid",slot:"col2Node",cssClass:"jointype",banding:false,columns:[{headerText:mstrmojo.desc(5467,"Objects"),dataField:"n",headerCss:"objects-hd",tooltip:true,itemTooltipField:"tf",itemCSSField:"itemCss",colWidth:140,colHeight:24},{headerText:mstrmojo.desc(13176,"Join Type"),headerCss:"jointype-hd",dataWidget:{scriptClass:"mstrmojo.Box",cssClass:"jt-col",children:[{scriptClass:"mstrmojo.Label",cssClass:"jt-value",alias:"jtValue",bindings:{text:"this.parent.data.dv"}},{scriptClass:"mstrmojo.Button",cssClass:"jt-menu",alias:"jtBtn",onclick:function(){var d=mstrmojo.all[a];N.call(d,this);}}]}}],items:[],itemFunction:function(){var d=mstrmojo.DataGrid.prototype.itemFunction.apply(this,arguments);d.themeClassName="mojo-theme-dark";return d;},preBuildRendering:function C(){var n=mstrmojo.all[a].host,m=n.model&&n.model.docModel,g=n.gridInfo||{},o=g.rows||[],k=g.cols||[],l=g.mx||[],h=g.dmx||[],j=n.tmsProps,e=j.tpltProp&&j.tpltProp["VLDB Select"]&&j.tpltProp["VLDB Select"][0].v,i=[];e=(e&&e.length)?e:"-1";(o.concat(k)).some(function(p){if(p.t===12){i.push({did:"AllAttr",n:mstrmojo.desc(13185,"All Attributes"),v:e,dv:R[e],itemCss:"jt-allattr"});return true;}return false;});var d=l.concat(h);d=M.filter(d,function(q){var r=H.getUnitFromDataset(m.datasets,q.did,4),p=q.isSmart&&q.decomposable===2;return r&&(!r.um||q.afb||!q.isSmart||p);});var f=[].concat(j.mxProp);h.forEach(function(q){var p={};p[q.did]=q.prop;f.push(p);});(d||[]).forEach(function(q){var p={v:"-1"};(f||[]).forEach(function(r){if(r[q.did]){(r[q.did]["VLDB Select"]||[]).forEach(function(s){if(s.n==="Metric Join Type"){p=s;}});}});i.push({did:q.did,n:q.n,dt:p.dt,t:4,v:p.v,dv:D[p.v],itemCss:"jt-metric"});});this.items=i;mstrmojo.DataGrid.prototype.preBuildRendering.apply(this,arguments);}}],{alias:"JoinBehaviorSection",cssClass:"joinbehavior",width:E}),{alias:"buttonBar",scriptClass:"mstrmojo.Box",slot:"buttonNode",children:[V(mstrmojo.desc(221,"Cancel"),function(){G(false);}),V(mstrmojo.desc(118,"Save"),function(){G(true);},true)]}]});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.elementHelper","mstrmojo.func","mstrmojo.VisEnum","mstrmojo.num","mstrmojo.array","mstrmojo.VisMenuList","mstrmojo.mstr.EnumFunction","mstrmojo._HasMarkup","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.models.FormatModel","mstrmojo.css","mstrmojo.chart.enums.EnumFontStyle","mstrmojo.vi.ui.DatasetUnitMenuUtils");mstrmojo.requiresClsP("mstrmojo.ui.menus","MenuConfig","EditorConfig");var m=document.getElementById("vis-measure-canvas"),A=document.getElementById("vis-measure-span"),AA={},Y={},q={},S=mstrmojo.dom,d=mstrmojo.elementHelper,p=mstrmojo.vi.ui.DatasetUnitMenuUtils,y=mstrmojo.VisEnum.EnumColorRankMode,z=mstrmojo.chart.model.enums.EnumDSSObjectType,c=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,J=mstrmojo.chart.enums.EnumFontStyle,T=mstrmojo.hash,R=mstrmojo.func.wrapMethods,u=mstrmojo.VisEnum,e=u.SERVER_JSON_ERROR_TYPE;var o=64,f=128,O=4,k=5,t=6,v=7,i=mstrmojo,j=i.array,s=mstrmojo.array,P=i.desc,x=i.mstr.EnumFunction,a=mstrmojo.vi.enums.EnumDerivedElementType,Z=i._HasMarkup,F=i.css;mstrmojo.requiresDescs(221,358,1422,2122,6017,5868,5869);function AC(AI,AH){var AJ=n.pluck(AH,"tid"),AK=n.pluck(AH,"eid"),AG=(AI.getDocModel&&AI.getDocModel())||n.getPropertyByPath(AI,"model.docModel");if(n.getPropertyByPath(AG,"getColorBy") instanceof Function){return AG.getColorBy(AJ,AK);}}function AB(AG,AI,AK){var AJ=AI.id,AH=AI.getHost();if(AH&&AH.observableModel){AG.forEach(function(AM){var AL=AH.observableModel[AM];if(AL){AL.attachEventListener("valueChanged",AJ,AK);}});}}function U(AH){var AG={SINGLE:[{text:P(358,"Absolute"),value:x.FunctionAbs,n:P(358,"Absolute"),v:x.FunctionAbs}],PAIR:[{text:P(6017,"Add"),value:x.FunctionAdd,n:P(6017,"Add"),v:x.FunctionAdd},{text:P(2122,"Average"),value:x.FunctionAverage,n:P(2122,"Average"),v:x.FunctionAverage},{text:P(5868,"Least"),value:x.FunctionLeast,n:P(5868,"Least"),v:x.FunctionLeast},{text:P(5869,"Greatest"),value:x.FunctionGreatest,n:P(5869,"Greatest"),v:x.FunctionGreatest},{text:"A-B",value:x.FunctionMinus+";0",n:"A-B",v:x.FunctionMinus+";0"},{text:"B-A",value:x.FunctionMinus+";1",n:"B-A",v:x.FunctionMinus+";1"},{text:"A/B",value:x.FunctionDivide+";0",n:"A/B",v:x.FunctionDivide+";0"},{text:"B/A",value:x.FunctionDivide+";1",n:"B/A",v:x.FunctionDivide+";1"}],MORE:[{text:P(6017,"Add"),value:x.FunctionAdd,n:P(6017,"Add"),v:x.FunctionAdd},{text:P(2122,"Average"),value:x.FunctionAverage,n:P(2122,"Average"),v:x.FunctionAverage},{text:P(5868,"Least"),value:x.FunctionLeast,n:P(5868,"Least"),v:x.FunctionLeast},{text:P(5869,"Greatest"),value:x.FunctionGreatest,n:P(5869,"Greatest"),v:x.FunctionGreatest}]};return AG[AH];}function B(AH,AG){return !!(((AH&&AH.at)||0)&AG);}function N(AG){return !AG.selCells.some(function(AH){var AI=AG.getCellForNode(AH);return d.isNonGroupNull(AI)||!B(AI,o)||AI.dei!==undefined||AG.model.isRecursiveAttribute(AI.tid);});}function I(AH){var AG;return !AH.selCells.some(function(AI){AG=AH.getCellForNode(AI);return(d.isNonGroupNull(AG)||!B(AG,f))||AH.model.isRecursiveAttribute(AG.tid);});}function E(AJ,AI,AL,AK,AH){var AG=AL&&AL.func;if((AG===AK)||(typeof AK==="string"&&AK.indexOf(AG)===0&&AK.indexOf(";0")>0)){return ;}if(AH){AJ.editDECalculation(AI,AK);}else{AJ.derivedElementCalculation(AI,AK);}}function M(AS,AQ,AO){var AR=AQ&&AQ.es,AG=(AR&&AR.length)||AS.selCells.length,AJ=(AG===1)?"SINGLE":((AG===2)?"PAIR":"MORE"),AP=U(AJ),AI=(AQ&&AQ.func),AK,AT=AS.selCells,AH,AN,AM,AL;if(AJ==="PAIR"){if(AQ){AL=AR[0].v>AR[1].v;if(AL){AM=AR[0].n;AN=AR[1].n;AP[4]={value:x.FunctionMinus+";1",v:x.FunctionMinus+";1"};AP[5]={value:x.FunctionMinus+";0",v:x.FunctionMinus+";0"};AP[6]={value:x.FunctionDivide+";1",v:x.FunctionDivide+";1"};AP[7]={value:x.FunctionDivide+";0",v:x.FunctionDivide+";0"};}else{AN=AR[0].n;AM=AR[1].n;}}else{AN=AO(AT[0]);AM=AO(AT[1]);}AP[O].text=AN+" - "+AM;AP[k].text=AM+" - "+AN;AP[t].text=AN+" / "+AM;AP[v].text=AM+" / "+AN;AP[O].n=AN+" - "+AM;AP[k].n=AM+" - "+AN;AP[t].n=AN+" / "+AM;AP[v].n=AM+" / "+AN;}for(AK in AP){if(typeof AP[AK].value==="string"&&AP[AK].value.indexOf(AI)===0&&AP[AK].value.indexOf(";0")>0){AH=AP[AK];break;}if(AP[AK].value===AI){AH=AP[AK];break;}}return{items:AP,selectedItem:AH};}function V(AG,AJ){if(!AG){return AG;}if(AJ.length===1){return AG[AJ[0]];}var AI=(AJ&&AJ.length)||0,AH;for(AH=0;AH<AI;AH++){AG=AG[AJ[AH]];if(!AG){break;}}return AG;}function w(AI,AH,AG){return AI.every(function(AJ){return AJ.ttp===AH||AJ.ttp===AG;});}function AF(AH,AK,AL){var AJ=(AK&&AK.length)||0,AI,AG,AM=AH;for(AI=0;AI<AJ-1;AI++){AG=AK[AI];if(!AM[AG]){AM[AG]={};}AM=AM[AG];}AM[AK[AJ-1]]=AL;}function X(AO){var AP,AN,AJ,AL,AG,AM=this.model.docModel.datasets,AH=false,AK=false,AI={isDM:false};for(AP in AM){if(AM.hasOwnProperty(AP)){AN=AM[AP].mx;j.forEach((AN||[]),function(AQ){if(AQ.did===AO){if(AQ.um||AQ.rdm){AK=true;}AH=true;return false;}});if(AH){break;}}}if(AK){AG=this.model.data.gts.col;AJ=(AG&&AG[AG.length-1]);if(AJ&&AJ.otp===-1){AL=AJ.es;}j.forEach((AL||[]),function(AQ){if(AQ.oid===AO){AI={isDM:true,id:AQ.id};return false;}});}return AI;}function H(AG,AJ){var AM=[],AI={act:"updateElementsPropertiesMap",epm:AM},AK=[],AH={},AO=[AH],AN=this;AM.push({epmk:AK,epmv:AO});AG.forEach(function(AQ){var AR=AQ.tid,AP=AR===-1,AS={ob:{did:AP?"":AR}};AK.push(AS);});if(AJ&&AJ.indexOf("default")<0){AH.v={vv:AJ};}var AL=[];AH.k={chn:AL};AG.forEach(function(AR){var AS=AR.tid,AP=AS===-1,AQ;if(AP){AQ=X.call(AN,AR.eid);if(AQ.isDM){AL.push({emt:2,ei:AQ.id});}else{AL.push({emt:2,mt:{did:AR.eid,tp:4,ql:0}});}}else{AL.push({emt:1,ei:AR.eid,at:{did:AS,tp:AR.tp,ql:0}});}});return AI;}function C(AK,AI){var AJ="00000000000000000000000000000000",AH=AK&&AK.dropZones,AG=j.find(AH,"id",AI);return AG===-1?[]:j.filter(AH[AG].items,function(AL){return AL.t===4&&AL.id!==AJ;});}function b(AH,AG){return function(){var AI=new i.ui.menus.MenuConfig();AI.addNonInteractiveMenuItem(mstrmojo.desc(11859,"Based on"),"xt",true);AI.addRadioMenuGroup(null,AH,AG,"checkMark",undefined,true);return AI;};}mstrmojo.VisUtility=mstrmojo.provide("mstrmojo.VisUtility",{getCache:function(){return JSON.stringify(q);},getUpdateColorMapAction:function(AH,AG){return H.call(this,AH,AG);},measureTextSize:function(AH,AG,AI){return{width:this.measureTextWidth(AH,AG,AI),height:this.measureTextHeight(AH,AG,AI)};},measureTextWidth:function(AJ,AI,AK,AH,AG){if(S.isIE||S.isIEW3C){return this.measureTextWidthWithSpan(AJ,AI,AK,AH,AG);}return this.measureTextWidthWithCanvas(AJ,AI,AK);},measureTextWidthWithCanvas:function(AJ,AK,AN,AL){AL=AL||false;if(AJ===""){return 0;}if(AJ===" "){AJ="\u00A0";}var AM=AK.fontFamily,AP=AK.fontSize,AI=AK.fontStyle,AO=AK.fontWeight;if(typeof AP==="number"){AP+="pt";}AI=AI||"normal";AO=AO||"normal";AN=AN||0;var AH=AL?undefined:V(AA,[AM,AP,AI,AO,AJ]);if(!AH){if(!m){m=document.createElement("canvas");m.width=0;m.height=0;m.id="vis-measure-canvas";m.style.position="absolute";m.style.top="0";m.style.fontSize="medium";document.body.appendChild(m);}var AG=m.getContext("2d");AG.font=AI+" "+AO+" "+AP+" "+AM;AH=Math.ceil(AG.measureText(AJ).width);AF(AA,[AM,AP,AI,AO,AJ],AH);}return AH+AN;},measureTextWidthWithSpan:function(AI,AJ,AN,AP,AK){if(AI===""){return 0;}if(AI===" "){AI="\u00A0";}var AL=AJ.fontFamily,AQ=AJ.fontSize,AH=AJ.fontStyle,AM=AJ.fontWeight;if(typeof AQ==="number"){AQ+="px";}AH=AH||"normal";AM=AM||"normal";AP=AP||"auto";AN=AN||0;AK=!!AK;if(typeof AP==="number"){AP+="px";}var AG=V(Y,[AL,AQ,AH,AM,AP,AI]);if(!AG){var AO;if(!A){A=document.createElement("span");AO=A.style;A.id="vis-measure-span";AO.position="absolute";AO.top="0";AO.visibility="hidden";AO.width="auto";AO.height="auto";if(AK){AO.whiteSpace="nowrap";}else{AO.whiteSpace="normal";}document.body.appendChild(A);}AO=A.style;if(AK){AO.whiteSpace="nowrap";}else{AO.whiteSpace="normal";}AO.width="auto";AO.height=AP;AO.fontFamily=AL;AO.fontSize=AQ;AO.fontStyle=AH;AO.fontWeight=AM;A.innerHTML=AI;AG=Math.ceil(A.clientWidth);AF(Y,[AL,AQ,AH,AM,AP,AI],AG);}return AG+AN;},measureTextHeight:function(AI,AJ,AO,AQ,AG,AL,AK){if(AI===""){return 0;}if(AI===" "){AI="\u00A0";}var AM=AJ.fontFamily,AS=AJ.fontSize,AH=AJ.fontStyle,AN=AJ.fontWeight;AG=AG||"normal";AK=!!AK;if(typeof AS==="number"){AS+="px";}AH=AH||"normal";AN=AN||"normal";AQ=AQ||"auto";AO=AO||0;if(typeof AQ==="number"){AQ+="px";}var AR=AL?undefined:V(q,[AM,AS,AH,AN,AQ,AI]);if(!AR){var AP;if(!A){A=document.createElement("span");AP=A.style;A.id="vis-measure-span";AP.position="absolute";AP.top="0";AP.visibility="hidden";AP.width="auto";AP.height="auto";if(AK){AP.whiteSpace="nowrap";}else{AP.whiteSpace="normal";}document.body.appendChild(A);}AP=A.style;if(AK){AP.whiteSpace="nowrap";}else{AP.whiteSpace="normal";}AP.heigth="auto";AP.width=AQ;AP.fontFamily=AM;AP.fontSize=AS;AP.fontStyle=AH;AP.fontWeight=AN;AP.wordBreak=AG;A.innerHTML=AI;AR=A.clientHeight;if(!AL){AF(q,[AM,AS,AH,AN,AQ,AI],AR);}}return AR+AO;},getVisEmptyMsg:function(AG){var AH="";switch(AG){case"AE_ERROR":AH='<div class="gm-vis-msg-container"><div class="gm-vis-msg-vcenter"><div class="gm-vis-msg-hcenter"><div style="padding:25px"><div class="gm-warning-icon" style="padding-bottom:18px"></div><div style="padding-bottom:8px">'+mstrmojo.desc(14436,"Unable to load visualization.")+"</div><div>"+mstrmojo.desc(14437,"Use a filter to reduce the data and try again.")+"</div></div></div></div></div>";break;case"NODATA_OTHERERROR":AH='<div class="gm-vis-msg-container"><div class="gm-vis-msg-vcenter"><div class="gm-vis-msg-hcenter"><div>'+(this.errorMsg||mstrmojo.desc(12093,"Filter excludes all data"))+"</div></div></div></div>";break;default:AH='<div class="mstrmojo-Label dropMsg" style="display: block;" >'+mstrmojo.desc(11668,"Drag objects here.")+"</div>";}return AH;},applyStyles2DomNode:function(AL,AO){var AG,AM=AL.style;if(Object.prototype.hasOwnProperty.call(AO,"backgroundColor")&&AO.backgroundColor!==""&&AO.backgroundColor!=="transparent"){var AK=1;if(Object.prototype.hasOwnProperty.call(AO,"opacity")&&AO.opacity!==""){AK=AO.opacity;}var AH=AO.backgroundColor,AN=function AN(AP){if(isNaN(AP)){AP=0;}AP%=16777216;return{b:AP%256,g:(AP>>8)%256,r:(AP>>16)%256};},AJ="";if(AH){var AI=function AI(AQ,AR){if(AQ==="transparent"){return"rgba(0,0,0,0)";}AQ=this.parseCSSColor(AQ,false);var AP=AN(AQ);return"rgba("+AP.r+" ,"+AP.g+" ,"+AP.b+" ,"+AR+" )";}.bind(this);if(AH.c1!==undefined&&AH.c2!==undefined&&AH.or!==undefined){AJ=(F.buildGradient(AH.or,AI(AH.c1,AK),AI(AH.c2,AK))).v;}else{AJ=AI(AH,AK);}AM.background=AJ;}}else{AM.backgroundColor="rgba(0,0,0,0)";}for(AG in AO){if(AG!=="backgroundColor"&&AG!=="opacity"&&Object.prototype.hasOwnProperty.call(AO,AG)&&AO[AG]&&AO[AG]!==""){AM[AG]=AO[AG];}}},parseCSSColor:function(AK,AH){var AG,AI;if(AK.length===7){if(AH===true){AG=AK[5]+AK[6]+AK[3]+AK[4]+AK[1]+AK[2];}else{AG=AK.slice(1);}}else{AG=[];var AJ=AK.slice(1);if(AH===true){for(AI=2;AI>=0;AI--){AG.push(AJ[AI]);AG.push(AJ[AI]);}}else{for(AI=0;AI<3;AI++){AG.push(AJ[AI]);AG.push(AJ[AI]);}}AG=AG.join("");}return parseInt(AG,16);},positionDomNode:function(AI,AK){var AH,AN,AL,AJ=["width","height","top","left","right","bottom"],AM=AJ.length,AG=AI.style;for(AH=0;AH<AM;AH++){AN=AJ[AH];AL=AK[AN];if(AL!==undefined){if((typeof AL)==="number"){AL+="px";}AG[AN]=AL;}}},getComputedFontStyle:function G(AI){var AG=mstrmojo.css.getComputedStyle(AI);var AJ={};AJ.fontFamily=AG.fontFamily;AJ.fontSize=AG.fontSize;AJ.fontStyle=AG.fontStyle;AJ.fontWeight=AG.fontWeight;AJ.fontVariant=AG.fontVariant;var AH=parseInt(AG.paddingLeft)||0,AK=parseInt(AG.paddingLeft)||0;AJ.bonus=AH+AK;return AJ;},splitWordIfTooLong:function(AQ,AO,AJ){var AM=[];var AN=AQ.length;var AK;for(AK=0;AK<AN;AK++){var AH=AQ[AK];while(true){var AR=this.measureTextWidth(AH,AJ);if(AR>AO){var AP=(AO/AR)*AH.length;var AG=Math.max(Math.round(AP),1);while(AG>0){var AL=AH.substr(0,AG);var AI=Math.round(this.measureTextWidth(AL,AJ));if(AI<=AO||AG===1){AM.push(AL);break;}else{AG--;}}AH=AH.substr(AG,AH.length-AG);}else{AM.push(AH);break;}}}return AM;},truncateTextToLineWithWordWrap:function Q(Ag,AZ,AX,AM,AY,AQ){var AU=Ag.split(" "),Aa=AU.length;if(!AQ){AU=this.splitWordIfTooLong(AU,AX,AZ);}var An,AS=[],Ai=[],AG=0,AK=AU.length,Ap=this.measureTextWidth(" ",AZ),AJ=0,AP=false,AW=(Aa===AU.length);Ai.push(0);for(An=0;An<AK;An++){var Ae=this.measureTextWidth(AU[An],AZ);if(!AQ&&Ae>AX){var AH=AU[An];var Al=(AX/Ae)*AH.length;AU[An]=AH.substr(0,parseInt(Al,10));Ae=AX;}AS.push(Ae);AG+=Ae;Ai.push(AG);if(An!==AK-1){AG+=Ap;}}var Ak,Am,Ac=AM;for(Ak=0,Am=0;Am<Ai.length;){var AO=Ai[Am]-Ai[Ak];if(Ak>0&&Am!==Ak){AO-=Ap;}var AN=Ai[Am+1]-Ai[Ak];if(Ak>0&&Am+1!==Ak){AN-=Ap;}if(AO<=AX&&((Am+1===Ai.length)||(AN>AX))){AJ=Math.max(AJ,AO);Ac--;if(Ac===0||Am===AK){break;}else{Ak=Am;Am++;}}else{Am++;}}if(Am>AK){Am=AK;}var AR=Ai[Am]-Ai[Ak];if(Ak>0&&Am!==Ak){AR-=Ap;}var Af;if(Am>=AK&&AR<AX){Af=AU.join(" ");}else{AP=true;AJ=AX;Af=AU.slice(0,Am).join(" ");var AT=this.measureTextWidth("...",AZ);if(AR+AT<=AX){if(AR+Ap+AT>AX){Af+="...";}else{var Ao=AU[Am],AV;for(var Ab=1;Ab<Ao.length;Ab++){AV=this.measureTextWidth(Ao.substr(0,Ab),AZ);if(AR+Ap+AV+AT>AX){break;}}Af+=" "+Ao.substr(0,Ab-1)+"...";}}else{if(Af.charAt(Af.length-1)===" "){Af=Af.substr(0,Af.length-1);}var Ad=Af.lastIndexOf(" ");var AI=Af.length-1-Ad;if(AI===3){Af=Af.substr(0,Af.length-3)+" ...";}else{var Ah=0,AL="",Aj=0;while(Ah<AT&&Af.length>Aj){Aj++;AL=Af.substr(Af.length-Aj,Af.length);Ah=this.measureTextWidth(AL,AZ);}Af=Af.substr(0,Af.length-Aj)+"...";}}}if(AY){return{text:Af,truncated:AP,maxLineLen:AJ,canWordWrap:AW};}return Af;},measureSuperTextWidth:function AE(AH,AI,AG,AJ){return AH?this.measureTextWidth("<sup>"+AI+"</sup>",AG,AJ):this.measureTextWidth(AI,AG,AJ);},splitTokenIfTooLong:function h(AR,AP,AJ){var AN=[];var AO=AR.length;var AK,AH,AS,AM,AT;for(AK=0;AK<AO;AK++){AH=AR[AK];AM=AH.isSuper;while(true){AS=AH.v;if(AH.textWidth!==undefined){AT=AH.textWidth;}else{AT=AH.textWidth=this.measureSuperTextWidth(AM,AS,AJ);}if(AT>AP){var AQ=(AP/AT)*AS.length;var AG=Math.max(Math.round(AQ),1);while(AG>0){var AL=AS.substr(0,AG);var AI=Math.round(this.measureSuperTextWidth(AM,AL,AJ));if(AI<=AP||AG===1){AN.push({v:AL,isSuper:AM,textWidth:AI});break;}else{AG--;}}AH={v:AS.substr(AG,AS.length-AG),isSuper:AM};}else{AN.push(AH);break;}}}return AN;},truncateTextToLineWithWordWrapForTokens:function W(AQ,AK,Aj,Ab,Ak,AW){var Ae=AQ.length;AQ=this.splitTokenIfTooLong(AQ,Aj,AK);var Ai,AV=[],AG=0,AZ=AQ.length,AH=0,Aa=false,AM=(Ae===AQ.length),AO,AT,Ac,AI,Ag,AP,AU;if(AW&&!AM){return{canWordWrap:AM};}AV.push(0);for(Ai=0;Ai<AZ;Ai++){AO=AQ[Ai];Ac=AO.v;AT=AO.isSuper;if(AO.textWidth!==undefined){AI=AO.textWidth;}else{AI=AO.textWidth=this.measureSuperTextWidth(AT,Ac,AK);}if(AI>Aj){var Ah=(Aj/AI)*Ac.length;AO.v=Ac.substr(0,parseInt(Ah,10));AI=AO.textWidth=Aj;}AG+=AI;AV.push(AG);}var AS,Ad,AR=Ab;for(AS=0,Ad=0;Ad<AV.length;){var AN=AV[Ad]-AV[AS];var AL=AV[Ad+1]-AV[AS];if(AN<=Aj&&((Ad+1===AV.length)||(AL>Aj))){AH=Math.max(AH,AN);AR--;if(AR===0||Ad===AZ){break;}else{AS=Ad;Ad++;}}else{Ad++;}}if(Ad>AZ){Ad=AZ;}var AY=AV[Ad]-AV[AS];var Al;if(Ad>=AZ&&AY<Aj){Al=AQ;}else{Aa=true;AH=Aj;Al=AQ.slice(0,Ad);var AJ=this.measureTextWidth("...",AK);if(AY+AJ<=Aj){AP=AQ[Ad];Ac=AP.v;AT=AP.isSuper;for(Ag=1;Ag<Ac.length;Ag++){AU=this.measureSuperTextWidth(AT,Ac.substr(0,Ag),AK);if(AY+AJ+AU>Aj){break;}}if(Ag>1){AO={v:Ac.substr(0,Ag-1),isSuper:AT};AO.textWidth=this.measureSuperTextWidth(AT,AO.v,AK);Al.push(AO);Al.push({v:"...",textWidth:AJ});}}else{var AX=0,Af;for(Ai=Al.length-1;Ai>=0;Ai--){AO=Al[Ai];Ac=AO.v;AT=AO.isSuper;Af=0;for(Ag=Ac.length-1;Ag>=0;Ag--){Af=this.measureSuperTextWidth(AT,Ac.substr(Ag),AK);if(AX+Af>=AJ){break;}}if(Ag>=0){break;}else{AX+=Af;}}if(Ai>=0){if(Ag>0){AO.v=Ac.substr(0,Ag);AO.textWidth=this.measureSuperTextWidth(AT,AO.v,AK);Al=Al.slice(0,Ai+1);}else{if(Ag===0){Al=Al.slice(0,Ai);}}Al.push({v:"...",textWidth:AJ});}else{Al=[{v:"...",textWidth:AJ}];}}}if(Ak){return{text:Al,truncated:Aa,maxLineLen:AH,canWordWrap:AM};}return Al;},getRankMode:function g(AM){var AO=1,AN=2,AL=3,AH=4,AJ=5,AG=6,AK=7,AI=y.INVALID;if(AM){if(w(AM,AL,AN)){AI=y.TOP_PERCENT;}else{if(w(AM,AL,AO)){AI=y.BOTTOM_PERCENT;}else{if(w(AM,AG,AH)){AI=y.BOTTOM;}else{if(w(AM,AG,AJ)){AI=y.TOP;}else{if(w(AM,AK)){AI=y.VALUE;}}}}}}return AI;},getColorByTitle:function L(AH,AG){if(AG===y.BOTTOM_PERCENT||AG===y.TOP_PERCENT){AH=mstrmojo.desc(2787,"Percentage of ##").replace("'##'",AH);}else{if(AG===y.BOTTOM||AG===y.TOP){AH=mstrmojo.desc(2788,"Rank of ##").replace("'##'",AH);}}return AH;},getColorByFormatStr:function r(AH,AG){if(AG===y.BOTTOM_PERCENT||AG===y.TOP_PERCENT){AH="0%;(0%)";}else{if(AG===y.BOTTOM||AG===y.TOP){AH="";}}return AH;},getColorByItems:function AD(AG,AQ,AX,AT,AO,AM,AU){var AS=[],AY,AI,AN=mstrmojo.num,AL,AP;if(AG===undefined||AG.length===0){return AS;}var Aa=true;if(AG.length>1){if(AG[0].ceil===AG[1].flr){Aa=false;}else{Aa=true;}}for(AY=0;AY<AG.length;AY++){var AZ=AG[AY],AK={},AH=AZ.ceil,AW=AZ.flr;if((AY===0&&Aa)||(AY===AG.length-1&&!Aa)){if(AQ===y.BOTTOM_PERCENT||AQ===y.TOP_PERCENT){AK.flr=AW/100;AK.ceil=1;}else{if(AQ===y.TOP||AQ===y.BOTTOM){AW+=1;AK.flr=Math.floor(AW);AK.ceil=AO;}else{AK.flr=AW;AK.ceil=AX;}}AP=AK.ceil;}else{if((AY===0&&!Aa)||(AY===AG.length-1&&Aa)){if(AQ===y.BOTTOM_PERCENT||AQ===y.TOP_PERCENT){AK.flr=0;AK.ceil=AH/100;}else{if(AQ===y.TOP||AQ===y.BOTTOM){AK.flr=0;AK.ceil=Math.floor(AH);}else{AK.flr=AT;AK.ceil=AH;}}AL=AK.flr;}else{if(AQ===y.BOTTOM_PERCENT||AQ===y.TOP_PERCENT){AW=AW/100;AH=AH/100;}else{if(AQ===y.TOP||AQ===y.BOTTOM){AW+=1;AW=Math.floor(AW);AH=Math.floor(AH);}}AK.flr=AW;AK.ceil=AH;}}if(AQ===y.TOP||AQ===y.BOTTOM){AK.ceil=AK.ceil>AO?AO:AK.ceil;}if(AM){AK.label=AN.formatByMask(AM,AK.flr)+" - "+AN.formatByMask(AM,AK.ceil);}else{AK.label=AK.flr+" - "+AK.ceil;}if(AZ.fmt&&AZ.fmt.bc){AK.color=AZ.fmt.bc;}else{AK.color=AU;}AS.push(AK);}AS=AS.filter(function(Ab){return Ab.flr<=Ab.ceil&&!(Ab.flr>AP||Ab.ceil<AL);});if(AQ===y.TOP||AQ===y.BOTTOM){AI=AO;}else{if(AS.length>0){if(Aa){AI=AS[0].ceil-AS[(AS.length-1)].flr;}else{AI=AS[(AS.length-1)].ceil-AS[0].flr;}}}var AV=0,AR,AJ;for(AY=0;AY<AS.length;AY++){if(AY===AS.length-1){AS[AY].scopePercent=1-AV;}else{if(AQ===y.TOP||AQ===y.BOTTOM){AJ=AS[AY].ceil-AS[AY].flr+1;}else{AJ=AS[AY].ceil-AS[AY].flr;}AR=AJ/AI;AS[AY].scopePercent=AR;AV+=AR;}}return AS;},getDefaultColorByItems:function(AJ,AH,AI){var AG={};AG.label=AI+" - "+AH;AG.flr=AI;AG.ceil=AH;AG.color=AJ;AG.scopePercent=1;return[AG];},getNumberFormat:function(AJ,AH){var AK=AJ.nf,AI=AJ.gvs;function AG(){var AN=(AI&&AI.items&&AI.items[0]&&AI.items[0].items)||[],AM=AN[AH]||{},AL=AM.nfs;return typeof AL==="string"?AL:"";}if(typeof AK[AH].nfs!=="string"){AK[AH].nfs=AG();}return AK[AH].nfs;},hasOnlyMetricsOnColumn:function(AH){var AG=(AH&&AH.gts&&AH.gts.col)||[];return AG.every(function(AI){return AI.otp===z.DssTypeUnknown&&(AI.es||[]).every(function(AJ){return AJ.otp===z.DssTypeMetric;});});},hasNoMetricOnRow:function(AH){var AI=(AH&&AH.gts&&AH.gts.row)||[],AG=function(AJ){return AJ.otp!==z.DssTypeMetric;};return AI.every(AG);},isOnExpressMode:function(){return mstrApp.isExpress;},modifyScExp:function(AO,AG,AS,AM){if(!AO||!AG){return ;}var AJ=AO.nds,AN,AH,AP,AR,AQ,AL,AK,AI;s.forEach(AJ||[],function(AT){AN=AT.nds;s.forEach(AN||[],function(AU){AH=AU.es;s.forEach(AH||[],function(AV){AR=AV.v;AL=AM[AR];if(!AL){AL=AS.getNormalizedFormElementId(AR);AM[AR]=AL;}s.forEach(AG||[],function(AW){AP=AW.es;s.forEach(AP||[],function(AX){AI=false;AQ=AX.id;if(AQ===AR){AI=true;}else{AK=AM[AQ];if(!AK){AK=AS.getNormalizedFormElementId(AQ);AM[AQ]=AK;}if(AL===AK){AI=true;}}if(AI){AV.v=AX.id;AV.n=AX.n;return false;}});if(AI){return false;}});});});});},modifyScExpDeprecated:function(AM,AN,AK,AI){if(!AM||!AN){return ;}var AJ=AM.nds,AH,AG,AL;s.forEach(AJ||[],function(AO){AH=AO.nds;s.forEach(AH||[],function(AP){AG=AP.es;s.forEach(AG||[],function(AQ){s.forEach(AN||[],function(AR){s.forEach(AR||[],function(AS){AL=AS.es;s.forEach(AL||[],function(AT){if(AK.call(AI,AT.id,AQ.v)){AQ.v=AT.id;AQ.n=AT.n;}});});});});});});},getMouseOffset:function(AH){var AG=(AH.offsetX!==undefined)?AH.offsetX:(AH.layerX),AI=(AH.offsetY!==undefined)?AH.offsetY:(AH.layerY);return{x:AG,y:AI};},translateLineStyle:function(AG){var AI=["none","solid","solid","dashed","dotted"],AH=["1px","1px","2px","1px","1px"];return{width:AH[AG]||"0px",style:AI[AG]||"none"};},getGroupAndCalculationContextMenuForDataPoints:function(AP,Ad){var AR,AT=[],AI=[],Aa=[],AN=Ad.fnCellName,AV=Ad.fnUnique,AM=Ad.fnMakeNode,AY=AP.getCellForNode.bind(AP),Af=Ad.selection;var AL=new i.ui.menus.MenuConfig(),AH=new i.ui.menus.MenuConfig(),AX=new i.ui.menus.MenuConfig(),Ac=new i.ui.menus.MenuConfig();function Ae(Ag){AP.selCells=AT[Ag].selCells;AP.derivedElementGroup(AY(AP.selCells[0]));}function AO(Ai){AP.selCells=AI[Ai].selCells;var Ah=AY(AI[Ai].selCells[0]),Ag=AP.getDEInfo(Ah);AP.derivedElementsEdit(AY(AP.selCells[0]),Ag);}function AU(Ah){AP.selCells=AI[Ah].selCells;var Ag=AY(AI[Ah].selCells[0]);AP.removeQuickDE(Ag);}function AS(Ah){AP.selCells=AI[Ah].selCells;var Ag=AY(AI[Ah].selCells[0]);AP.renameDEList(Ag);}function AW(Ag){E(AP,AY(AP.selCells[0]),null,Ag,false);}function AG(Ag){E(AP,AY(AP.selCells[0]),null,Ag,true);}function AK(Ah){var Ag=AY(AI[Ah].selCells[0]);AP.removeQuickDE(Ag);}function Ab(Ah){var Ag=AY(AI[Ah].selCells[0]);AP.editDECalculation(Ag);}function AQ(Ag){Ag=Ag||[];function Ah(Al){var Ai=Al.extra||{},Am=Al.setup||mstrmojo.emptyFn,Aj=Al.action||mstrmojo.emptyFn,Ak=[];Am(Ak,Ai);Aj(Ak,Ai);}Ag.forEach(Ah);}var AJ=[{name:"group",setup:function(Ag){AT.forEach(function(Ah){AP.selCells=AT[Ah.v].selCells;if(!Object.prototype.hasOwnProperty.call(AI,Ah.v)&&N(AP)){Ag.push(Ah);}});},action:function(Ah){var Ag;if(Ah.length===1){Ag=Ah[0].v;AL.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){AP.selCells=AT[Ag].selCells;AP.derivedElementGroup(AY(AP.selCells[0]));});}if(Ah.length>1){AL.addPopupMenuItem(mstrmojo.desc(1911,"Group"),AP.id,b(Ae,Ah),"xt");}}},{name:"edit-group",setup:function(Ag){AI.forEach(function(Ak){var Aj=AY(AI[Ak.v].selCells[0]),Ai=AP.getDEInfo(Aj),Ah=Ai&&Ai.de;if(Ah&&Ah.t===a.LIST){Ag.push(Ak);}});},action:function(Ah){var Ag,Aj,Ai;if(Ah.length===1){Ag=AI[Ah[0].v].selCells;Aj=AY(Ag[0]);Ai=AP.getDEInfo(Aj);AH.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){AP.selCells=Ag;AP.derivedElementsEdit(AY(AP.selCells[0]),Ai);});AH.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){AP.selCells=Ag;AP.removeQuickDE(Aj);});Ac.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){AP.selCells=Ag;AP.renameDEList(Aj);});}if(Ah.length>1){AH.addPopupMenuItem(mstrmojo.desc(13395,"Edit Group..."),AP.id,b(AO,Ah),"xt");AH.addPopupMenuItem(mstrmojo.desc(12195,"Ungroup"),AP.id,b(AU,Ah),"xt");Ac.addPopupMenuItem(mstrmojo.desc(13968,"Rename Group..."),AP.id,b(AS,Ah),"xt");}}},{name:"calculation",setup:function(Ag){Aa.forEach(function(Aj,Ai,Ah){AP.selCells=Ah[Aj.v].selCells;var Al=AY(AP.selCells[0]),Ak=AP.getDEInfo(Al),Am=Ak&&Ak.de;if(!(Am&&Am.t===a.RESIDUE)&&I(AP)){Ag.push(Aj);}});},action:function(Ag){if(Ag.length===1){AL.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),AP.id,function(){var Ah=Ag[0].v,Ai=new i.ui.menus.MenuConfig();AP.selCells=Aa[Ah].selCells;Ai.addRadioMenuGroup(null,AW,M(AP,null,AN).items,"checkMark",undefined,true);return Ai;},"xt");}if(Ag.length>1){AL.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),AP.id,function(){return new mstrmojo.ui.menus.EditorConfig({cssClass:"base-on-calculation-editor",data:{},contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:Ag,selectedIndex:0,onitemSelected:function(Ah){var Ai=Ah.v;AP.selCells=Aa[Ai].selCells;this.parent.checkList.set("items",[]);this.parent.checkList.set("items",M(AP,null,AN).items);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:function(Ai,Ah){E(AP,AY(AP.selCells[0]),null,Ah.checkList.selectedItem.v,false);}});});}}},{name:"edit-calculation",setup:function(Ag){AI.forEach(function(Ak){var Aj=AY(AI[Ak.v].selCells[0]),Ai=AP.getDEInfo(Aj),Ah=Ai&&Ai.de;if(Ah&&Ah.t===a.CALCULATION){Ag.push(Ak);}});},action:function(Ag){function Ah(){var Ai=Ag[0].v;AP.selCells=AI[Ai].selCells;var Am=AY(AP.selCells[0]),Al=AP.getDEInfo(Am),An=Al&&Al.de,Ak=M(AP,An,AN),Aj=new i.ui.menus.MenuConfig();Aj.addRadioMenuGroup(Ak.selectedItem.value,AG,Ak.items,"checkMark",undefined,true);return Aj;}if(Ag.length===1){AX.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),AP.id,Ah,"xt");AX.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){var Ai=Ag[0].v;AP.selCells=AI[Ai].selCells;var Aj=AY(AP.selCells[0]);AP.removeQuickDE(Aj);});Ac.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){var Ai=Ag[0].v;AP.selCells=AI[Ai].selCells;var Aj=AY(AP.selCells[0]);AP.editDECalculation(Aj);});}if(Ag.length>1){AX.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),AP.id,function(){return new mstrmojo.ui.menus.EditorConfig({data:{},contents:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(11859,"Based on")},{scriptClass:"mstrmojo.ui.Pulldown",alias:"attrList",items:Ag,selectedIndex:0,onitemSelected:function(Al){var Am=Al.v;AP.selCells=AI[Am].selCells;var Ak=AY(AP.selCells[0]),Aj=AP.getDEInfo(Ak),An=Aj&&Aj.de;var Ai=M(AP,An,AN);this.parent.checkList.set("items",[]);this.parent.checkList.set("items",Ai.items);this.parent.checkList.set("selectedItem",Ai.selectedItem);this.parent.data.set("valid",false);}},{scriptClass:"mstrmojo.VisMenuList",alias:"checkList"}],bindings:{okEnabled:"this.valid",valid:function(){return this.data.valid;}},fnOk:function(Aj,Ai){E(AP,AY(AP.selCells[0]),null,Ai.checkList.selectedItem.v,true);}});});AX.addPopupMenuItem(mstrmojo.desc(12197,"Delete Calculation"),AP.id,b(AK,Ag),"xt");Ac.addPopupMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),AP.id,b(Ab,Ag),"xt");}}}];AR=AV(Af);AR.forEach(function(Ah){var Aj=AM(Ah),Ag=AY(Aj),Ai,Ak,Al;if(!AP.model.supportsViewFilterActions(Ag.tid)){return ;}Ai=Ag.dei===undefined?AT:AI;Ak=Ag.tid;Al=AP.model.getObjectInfo(Ak).n;if(Ai[Ak]===undefined){Ai[Ak]={};Ai[Ak].selCells=[];Ai.push({n:Al,v:Ak,text:Al,value:Ak});}Ai[Ak].selCells.push(Aj);if(Aa[Ak]===undefined){Aa[Ak]={};Aa[Ak].selCells=[];Aa.push({n:Al,v:Ak,text:Al,value:Ak});}Aa[Ak].selCells.push(Aj);});var AZ=this.getPropertyByPath(AP,"model.data.visName")||this.getPropertyByPath(AP,"model.data.vis.vn");if(AZ==="VIHeatMapVisualizationStyle"){AJ.splice(2,2);}AQ(AJ);return{createDe:AL,editGroup:AH,editCalculation:AX,renameDe:Ac};},getGroupAndCalculationContextMenu:function(AO,Ac,AZ){var Ab=AO,AV=AZ.skipSingleAttrCheck||Ab.isSingleAttrSelection(),AJ=false,AL=Ab.isSingleSelection(),AP=Ab.getDEInfo(Ac),AK=AP&&AP.deObject,AY=AP&&AP.de,AT=AK&&Ab.getOthersDEInfo(AK),AR=Ab.getSelections(),AX=true,AN=AZ.fnCellName,Aa=this.getPropertyByPath(Ab,"model.data.visName")||this.getPropertyByPath(Ab,"model.data.vis.vn");var AM=new i.ui.menus.MenuConfig(),AH=new i.ui.menus.MenuConfig(),AS=new i.ui.menus.MenuConfig(),AW=new i.ui.menus.MenuConfig();Ab.selCells=AZ.selection;if(AO.model.supportsViewFilterActions(Ac.tid)){if((AJ||AV)&&B(Ac,o)&&N(Ab)){AM.addMenuItem(mstrmojo.desc(1911,"Group"),"xt",function(){AO.derivedElementGroup(Ac);});}if(AL&&AY&&AY.t===a.LIST){AH.addMenuItem(mstrmojo.desc(13395,"Edit Group..."),"xt",function(){AO.derivedElementsEdit(Ac,AP);});AH.addMenuItem(mstrmojo.desc(12195,"Ungroup"),"xt",function(){AO.removeQuickDE(Ac);});AW.addMenuItem(mstrmojo.desc(13968,"Rename Group..."),"xt",function(){AO.renameDEList(Ac);});}var AQ=function(Ad){E(Ab,Ac,AY,Ad,false);},AU=function(Ad){E(Ab,Ac,AY,Ad,true);};if(AT&&!AL&&AV){j.forEach(AR,function(Ad){if(Ad[0]&&Ad[0].eid.indexOf(AT.id)>-1){AX=false;return false;}});}if(Aa!=="VIHeatMapVisualizationStyle"&&!(AL&&AY&&AY.t===a.RESIDUE)&&(AJ||AV)&&B(Ac,f)&&I(Ab)){var AG=function(){var Ad=new i.ui.menus.MenuConfig(),Ae=M(Ab,null,AN);Ad.addRadioMenuGroup(null,AQ,Ae.items,"checkMark",undefined,true);return Ad;};AM.addPopupMenuItem(mstrmojo.desc(5188,"Calculation"),this.id,AG,"xt");}if(AL&&AY&&AY.t===a.CALCULATION){var AI=function(){var Ad=new i.ui.menus.MenuConfig(),Ae=M(Ab,AY,AN);Ad.addRadioMenuGroup(Ae.selectedItem.value,AU,Ae.items,"checkMark",undefined,true);return Ad;};AS.addPopupMenuItem(mstrmojo.desc(12196,"Edit Calculation"),this.id,AI,"xt");AS.addMenuItem(mstrmojo.desc(12197,"Delete Calculation"),"xt",function(){AO.removeQuickDE(Ac);});AW.addMenuItem(mstrmojo.desc(13967,"Rename Calculation..."),"xt",function(){AO.editDECalculation(Ac);});}}return{createDe:AM,editGroup:AH,editCalculation:AS,renameDe:AW};},isHostedPopupNode:function(AK,AI,AH,AG){var AL=AH?AK:AK&&AK.parentNode;while(AL&&(AL!==AG)){var AJ=AL.getAttribute&&AL.getAttribute(AI);if(AJ!==null&&AJ.indexOf("mstrmojo-popup-widget-hosted")>=0){return true;}AL=AL.parentNode;}return false;},applyStyle2Legend:function(AJ,AI,AH){var AG,AL={},AK={};for(AG in AJ){if(AG.indexOf("font")>=0||AG.indexOf("color")>=0||AG.indexOf("textDecoration")>=0){AL[AG]=AJ[AG];}else{AK[AG]=AJ[AG];}}if(AI){AI.style.background="";this.applyStyles2DomNode(AI,AK);}if(AH){this.applyStyles2DomNode(AH,AL);}},mergeMenuConfigs:function K(AH,AG){function AI(AK,AL,AJ){if(!AL){return ;}if(!AJ&&AK.hasMenuItems()&&AL.hasMenuItems()){AK.addSeparator();}if(AL.hasMenuItems()){AK.absorbMenuItems(AL);}}return AG.reduce(function(AJ,AK){AI(AJ,AH[AK.name],AK.noSeparator);return AJ;},new mstrmojo.ui.menus.MenuConfig());},absorbMenuItems:function(AH,AG,AI){AH.addDisposable(AG);AH.absorbMenuItems(AG);if(AI&&AG.menus.length>0){AH.addSeparator();}},addWheelListener:(function(){var AJ=mstrmojo.dom,AI=AJ.attachEvent,AH=AJ.preventDefault,AK;function AG(AO,AN,AP,AM){var AL=(AK==="wheel")?AP:function(AQ){if(!AQ){AQ=window.event;}var AS={originalEvent:AQ,target:AQ.target||AQ.srcElement,type:"wheel",deltaMode:(AQ.deltaMode!==undefined?AQ.deltaMode:1),deltaX:0,deltaZ:0,preventDefault:function(){AH(window,AQ);}},AR=this;if(AK==="mousewheel"){AS.deltaY=-AQ.wheelDelta;if(AQ.wheelDeltaX!==undefined){AS.deltaX=-AQ.wheelDeltaX;}}else{AS.deltaY=AQ.detail;}return AP.call(AR,AS);};return AI(AO,AN,AL,AM);}if(Object.prototype.hasOwnProperty.call(document.createElement("div"),"onwheel")){AK="wheel";}else{AK=document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll";}return function(AM,AN,AL){return AG(AM,AK,AN,AL);};}()),isNearZero:function(AH,AG){AG=AG||5;var AI=1/Math.pow(10,AG);return(Math.abs(AH)<AI);},hasMergedRowCells:function(AG){return false;},getMockUpThresholds:function(AI,AJ){var AG=[{tid:1,n:"threshold 0",scope:1,rtp:2,rtxt:"",fmt:{bc:"#cc2525",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,flr:0,ceil:10},{tid:2,n:"threshold 1",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e34b4b",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"10%",dtp:5},{v:"30%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:10,ceil:30},{tid:3,n:"threshold 2",scope:1,rtp:2,rtxt:"",fmt:{bc:"#e97d7d",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"30%",dtp:5},{v:"50%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:30,ceil:50},{tid:4,n:"threshold 3",scope:1,rtp:2,rtxt:"",fmt:{bc:"#79d479",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"50%",dtp:5},{v:"70%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:50,ceil:70},{tid:5,n:"threshold 4",scope:1,rtp:2,rtxt:"",fmt:{bc:"#57ba57",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"70%",dtp:5},{v:"90%",dtp:5}],fn:3,fnt:3}],fn:19},ttp:3,flr:70,ceil:90},{tid:6,n:"threshold 5",scope:1,rtp:2,rtxt:"",fmt:{bc:"#2ca02c",bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:"4C051DB611D3E877C000B3B2D86C964F",n:"Profit"},cs:[{v:"90%",dtp:5}],fn:5,fnt:3}],fn:19},ttp:1,flr:90,ceil:100}];j.forEach(AG,function(AL){var AK=AL.expr.nds[0].m;AK.did=AI;AK.n=AJ;});var AH={};AH[AI]=AG;return AH;},generateThresholdsInfo:function(AI,AN,AG,AK){var AM=AG.length,AH=[],AQ,AJ,AR=0,AP=0;for(var AL=0;AL<AM;AL++){AJ=Math.round(AK[AL]*100);AP=AR;AR=AJ||100;AQ={tid:AL+1,n:"threshold "+AL,scope:1,rtp:2,rtxt:"",fmt:{bc:AG[AL],bgs:0},expr:{et:14,nds:[{et:10,dmt:7,m:{did:AI,n:AN},cs:[{v:AJ+"%",dtp:5}],fn:2,fnt:3}],fn:19},ttp:1,ceil:AR,flr:AP};AH.push(AQ);}var AO={};AO[AI]=AH;return AO;},psPt2CssPt:function(AI,AH){var AG=parseInt(AI,10)*0.75;if(AH instanceof Function){AG=AH(AG);}return AG+"pt";},captureEventOnce:function(AL,AK,AG,AJ,AI){function AH(AM){AK.call(AG,Z.newDomEvent(AL,window,AM||window.event),AI);S.detachEvent(AJ,AL,AH);}AI=AI||{};AJ=AJ||document;S.attachEvent(AJ,AL,AH);},getPropertyByPath:function(AK,AJ,AG){var AH,AI;if(typeof AJ!=="string"){return AG;}AH=AJ.split(".");AI=AH.every(function(AM){var AL=AK[AM];if(AL!==undefined){AK=AL;return true;}return false;});return AI?AK:AG;},mergeHashes:function(){return Array.prototype.slice.apply(arguments).reduce(function(AG,AH){if(AH){Object.keys(AH).forEach(function(AI){AG[AI]=AH[AI];});}return AG;},{});},toggleControlEnabled:function(AG,AH){[].concat(AG).forEach(function(AI){AI.set("enabled",!!AH);});},findInArray:function(AJ,AI,AH){var AL=-1,AK,AG;if(!Array.isArray(AJ)){return AL;}for(AK=AH===undefined?0:AH,AG=AJ.length;AK<AG;AK+=1){if(AI(AJ[AK])){return AK;}}return AL;},arrayUnique:function(AG,AH){if(!Array.isArray(AG)){return AG;}return AG.filter(function(AI,AJ){return n.findInArray(AG,function(AK){return AH(AI,AK);},AJ+1)===-1;});},range:function(AG,AK,AJ){AJ=AJ||1;var AI,AH=[];for(AI=AG;AI!==AK;AI+=AJ){AH.push(AI);}return AH;},drawDashLine:function D(AO,AI,AM,AH,AK,AG,AN){var AL=(AI===AH),AJ;AO.beginPath();AO.moveTo(AI,AM);if(AL){AJ=0;AM+=AG;while(AM<=AK){if(AJ%2===0){AO.lineTo(AI,AM);AM+=AN;}else{AO.moveTo(AI,AM);AM+=AG;}AJ++;}if(AJ%2===0){AO.lineTo(AH,AK);}}else{AJ=0;AI+=AG;while(AI<=AH){if(AJ%2===0){AO.lineTo(AI,AM);AI+=AN;}else{AO.moveTo(AI,AM);AI+=AG;}AJ++;}if(AJ%2===0){AO.lineTo(AH,AK);}}AO.stroke();},repeat:function(AI,AJ){var AG=[],AH;AJ=Math.max(0,AJ);for(AH=0;AH<AJ;AH+=1){AG[AH]=AI;}return AG;},isHierarchyObject:function(AG){return(AG&&AG.t)===z.DssTypeDimension;},selectPropertyPanel:function(AH,AI){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AH.getDocModel().selectVIUnit(AH.parent.id,true);var AG=AH.edtModel;if(AG){AG.selectTargetByValue(AI);}},pluck:function(AH,AG){if(!j.isArray(AH)){return AH;}return AH.map(function(AI){return AI&&AI[AG];});},pick:function(AH,AG){return AG.reduce(function(AJ,AI){AJ[AI]=AH[AI];return AJ;},{});},isColorManuallySet:function(AI,AH){var AG=AC(AI,AH);if(AG){return AG.isManual;}},getCombColor:function(AI,AH){var AG=AC(AI,AH);if(AG){return AG.color;}},setColorPickerShowAutomatic:function(AH,AG){AH.children[0].fillColor.colorPicker.showAutomatic=AG;},getCharGroupValueChangeCb:function(AG){var AH=(function(){var AI={};AI[c.FONT_WEIGHT]=J.FS_BOLD;AI[c.FONT_STYLE]=J.FS_ITALIC;AI[c.UNDERLINE]=J.FS_UNDERLINE;AI[c.LINE_THROUGH]=J.FS_STRIKETHROUGH;return function(AJ,AK){return AJ^AI[AK];};}());return function(AJ,AI){if(AG instanceof Function){AG=AG();}if(!AG){return ;}switch(AJ){case c.COLOR:AG.fontColor.fill.value.setValue(AI);break;case c.FONT_SIZE:AG.fontSize.setValue(AI);break;case c.FONT_FAMILY:AG.fontFamily.setValue(AI);break;case c.FONT_WEIGHT:case c.FONT_STYLE:case c.UNDERLINE:case c.LINE_THROUGH:AG.fontStyle.setValue(AH(AG.fontStyle.getValue(),AJ));break;}};},getMetricsInDropZone:C,addLegendFontChangeListeners:function(AH,AI){var AG=["lgdFntClr","lgdFntSz","lgdFntFml","lgdFntStyle"];AB(AG,AH,AI);},addLegendBackgroundChangeListeners:function(AH,AI){var AG=["lgdBgFillClr","lgdBgFillTrans"];AB(AG,AH,AI);},isValidDropZone:function(AG){if(AG===undefined){return false;}var AI=Object.keys(AG).filter(function(AJ){return AJ!=="visProp";});var AH=T.copyProps(AI,AG);return AG&&!T.equals(AH,{});},getDrillCandidates:function(AL){var AI=AL.modelData,AJ=AL.model,AH=AJ.docModel.datasets,AG=AI.gts,AK=AI.datasetId,AM=AH[AK],AN=AM.att||[];return AN.filter(function(AQ){var AP=AQ.did,AR=AG.row||[],AO=AG.col||[];return AR.concat(AO).every(function(AS){return AS.id!==AP&&AQ.hide!==true;});});},getDrillMenuItemsCallback:function(AH,AI,AG){return function(){var AK=n.getDrillCandidates(AH),AJ=new mstrmojo.ui.menus.MenuConfig({supportsScroll:true,maxHeight:350});AK.forEach(function(AL){AJ.addMenuItem(AL.n,"xt",AI,T.copy(AG,{drillUnit:AL}));});return AJ;};},doDrill:function(AI,AW,AR,AX){var AY=AI;function AO(Aa){return Aa.model.controller.cmdMgr;}function AU(){return{success:function Aa(){n.visPrint("reaise");this.raiseEvent({name:"regenerateToolbar"});}.bind(this)};}var AH=AY.model,AV=(AY.getDocModel&&AY.getDocModel())||AY.model.docModel,AT=AV.getDataService(),AL=AT.newUpdate();var AN=true;if(AV.prefs&&AV.prefs.rtprnt){AN=parseInt(AV.prefs.rtprnt,10)===1;}else{if(AH.xtab.defn.tkp!==undefined){AN=parseInt(AH.xtab.defn.tkp,10)===-1;}}AX=AX||{};AX.keepParent=AN;var AM=AR.call(AI,AW,AX);var AP=AY.zonesModel,AZ=AP.getUpdateCallback(),AQ=AY.model.controller||AV.controller,AJ=AQ._getXtabCallback(AY);AL.add(AM,R(AZ,AJ));var AG=AH.getSelectorDataFromViewFilter(AY.model.data.vfexpr).concat({keepOnly:true,data:AY.getSelections()}),AS=AV.getKeepOnlyOrExcludeAction(AY.k,AG);AL.add(AS,AU.call(AY));AO(AY).execute({execute:function AK(){this.submitUpdate(AL);},urInfo:{callback:AL.callback}});},strStartsWith:function(AI,AH,AG){AG=AG||0;return AI.lastIndexOf(AH,AG)===AG;},changeWidgetBackground:function(AI,AJ,AH){var AG=AI.parent;if(AG&&AJ!==AH){AG.changeUnitFormats(false,1,AI.getFormats(),c.BACKGROUND_COLOR,AJ,AH);AG.raiseEvent({name:"BEMFormatChange",propertyName:c.BACKGROUND_COLOR,value:AJ,isTitle:false});}},translateGridError:function(AH,AG){if(AG===undefined){AG=e.AE_ERROR;}if(AG===e.EMPTY_DATA){AH=mstrmojo.desc(12093,"Filter excludes all data");}if(AG===e.NO_DATASET||AG===e.NO_TEMPLATE_UNIT){AH=mstrmojo.desc(11668,"Drag objects here.");}if(!AH){AH=mstrmojo.desc(13687,"Unknown error");}return{msg:AH,type:AG};},hasValidValueInMetric:function(AI,AG){var AH=n.getPropertyByPath(AI,"model.data.gsi.mx");if(AH===undefined||AH.length<=AG||AG<0){return false;}var AJ=AH[AG];return["min","max"].every(function(AK){var AL=AJ[AK];return AL!==undefined&&AL!==null&&AL!=="";});},renderWidgetErrorRSD:function(AJ,AL,AH){var AN=document.createElement("div");var AM='<div style="display: table; height: 100%; width: 100%; background-color:#F5F5F2; border: solid 1px #A7A7A7; box-sizing: border-box;"><div style="display: table-cell; vertical-align: middle; text-align: center; color: #000000; font-size: 14pt;">'+AL+"</div></div>";AN.innerHTML=AM;AN=AN.firstChild;var AG=AJ.width,AI=AJ.height;if(AG!==undefined){AN.style.width=AG+"px";}if(AI!==undefined){AN.style.height=AI+"px";}var AK=AJ.domNode;if(AK){AH.forEach(function(AO){AK["on"+AO]=undefined;});while(AK.firstChild){AK.removeChild(AK.firstChild);}AK.appendChild(AN);}else{AJ.parent.domNode.appendChild(AN);}},visPrint:function(){var AG=mstrmojo.VisUtility.enableInVis;if(AG&&window.mstr_profile&&mstr_profile.enabled&&console){Function.prototype.apply.call(console.log,console,arguments);}},hasCGorCon:function(AJ,AG){var AI=AG&&AG.did,AH=AJ.model.data.datasetId||"",AK=null;if(AI){AK=p.getDatasetFromAttributeId(AJ.model.docModel.datasets,AI);}else{if(AH){AK=p.getDatasetFromId(AJ.model.docModel.datasets,AH);}}return AK&&p.hasCGorCon(AK);},findElementsByAttribute:function l(AI,AK,AJ,AG){AG=!!AG;var AL=[];if(AJ.constructor!==Array){AJ=[AJ];}var AM=function(AN){if(AG){return AN.identity&&AN.identity.tlOpt&&AN.identity.tlOpt[AK];}else{return AN.getAttribute(AK);}};function AH(AP){var AN=AM(AP),AO;if(AP.hasChildNodes()){AO=AP.firstChild;while(AO){if(AO.nodeType===1){AN=AM(AO);if(AJ.indexOf(AN)!==-1){AL.push(AO);}else{AH(AO);}}AO=AO.nextSibling;}}}AH(AI);return AL;}});mstrmojo.VisUtility.enableInVis=true;var n=mstrmojo.VisUtility;}());(function(){mstrmojo.requiresCls("mstrmojo.locales");mstrmojo.requiresCls("mstrmojo.chart.enums.EnumFontStyle");mstrmojo.requiresCls("mstrmojo.VisUtility");mstrmojo.requiresClsP("mstrmojo.chart.common","DSSDateTime","ScalePlate");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphProperty","EnumDSSGraphDataTextShowType","EnumDSSGraphObject");var g=mstrmojo.chart,c=g.model,o=mstrmojo.VisUtility,Q=g.enums,E=Q.EnumFontStyle,S=c.enums,x=S.EnumDSSGraphProperty,X=S.EnumDSSGraphDataTextShowType,y=S.EnumDSSGraphObject;var F=mstrmojo.gm.EnumDataLabels;var V=[["xAxLbFntClr","yAxLbFntClr","dlFntClr","lgdFntClr"],["xAxLbFntFml","yAxLbFntFml","dlFntFml","lgdFntFml"],["xAxLbFntSz","yAxLbFntSz","dlFntSz","lgdFntSz"],["xAxLbFntStyle","yAxLbFntStyle","dlFntStyle","lgdFntFml"]];var p=[["majorGridLnThk","minerGridLnThk","majorGridLnThk","minerGridLnThk"],["majorGridLnClr","minerGridLnClr","majorGridLnClr","minerGridLnClr"],["majorGridLnStyle","minerGridLnStyle","majorGridLnStyle","minerGridLnStyle"]];var Y=[["bgFillClr"],["bgFillStyle"],["bgFillTrans"]];function U(AH){switch(AH){case x.DssGraphFontColor:return 0;case x.DssGraphFontName:return 1;case x.DssGraphFontSize:return 2;case x.DssGraphFontStyle:return 3;case x.DssGraphFontSize100:return 4;default:return -1;}}function t(AH){switch(AH){case x.DssGraphAreaColor:return 0;case x.DssGraphFillEffect:return 1;case x.DssGraphAreaAlpha:return 2;}return -1;}function v(AH){var AI;switch(AH){case y.DssGraphX1Body:case y.DssGraphX1Label:case y.DssGraphX1Major:case y.DssGraphX1Minor:case y.DssGraphUserLabel3:case y.DssGraphUserLine3:AI="X1";break;case y.DssGraphX2Body:case y.DssGraphX2Label:case y.DssGraphX2Major:case y.DssGraphX2Minor:case y.DssGraphUserLabel4:case y.DssGraphUserLine4:AI="X2";break;case y.DssGraphY1Body:case y.DssGraphY1Label:case y.DssGraphY1Major:case y.DssGraphY1Minor:case y.DssGraphUserLabel1:case y.DssGraphUserLine1:AI="Y1";break;case y.DssGraphY2Body:case y.DssGraphY2Label:case y.DssGraphY2Major:case y.DssGraphY2Minor:case y.DssGraphUserLabel2:case y.DssGraphUserLine2:AI="Y2";break;case y.DssGraphZBody:AI="Z";break;case y.DssGraphO1Body:case y.DssGraph2DO1Label:case y.DssGraphO1Major:case y.DssGraphO1Minor:AI="O1";break;case y.DssGraphO2Body:case y.DssGraph2DO2Label:case y.DssGraphO2Major:case y.DssGraphO2Minor:AI="O2";break;default:AI="No_Axis";break;}return AI;}function d(AH,AI){if(!!AH===false){return undefined;}return undefined;}function W(AM,AH){if(!!AM===false){return undefined;}var AR,AP,AO=AH.isVertical!==undefined?AH.isVertical:true,AJ=AH.isGridChart||false,AS=AH.isPieShape||false,AN={Name:0,Value:0},AK=AM.gaid,AL=AM.goid,AI=AM.gsid,AQ=AM.v;if(!!AK===false){return undefined;}switch(AK){case x.DssGraphShowLBLFeeler:if(AS){AN.Name="DataLabel";if((AQ&X.DssGraphDataTextValue)!==0){AN.Value=F.SHOW_VALUE_ONLY;}else{if((AQ&X.DssGraphDataTextLabel)!==0){AN.Value=F.SHOW_TEXT_ONLY;}else{AN.Value=F.HIDE;}}}break;case x.DssGraphAreaColor:case x.DssGraphFillEffect:case x.DssGraphAreaAlpha:AP=t.call(this,AK);if(AP<0){return undefined;}if(AL===y.DssGraphBackground){AN.Name=Y[AP][0];if(AN.Name.search("Trans")!==-1){AN.Value=AQ/255*100;}else{AN.Value=AQ;}}break;case x.DssGraphShowLegendText:AN.Name="LegendVisibleness";AN.Value=AQ===0?false:true;break;case x.DssGraphSDShowDataText:AN.Name="ShowSeriesDataLabel";AN.Value=AQ!==0;break;case x.DssGraphShowDataText:if(AS===false){AN.Name="DataLabel";AN.Value=F.HIDE;if(AQ&X.DssGraphDataTextValue){AN.Value=F.SHOW_VALUE_ONLY;}else{if(AQ&X.DssGraphDataTextLabel){AN.Value=F.SHOW_TEXT_ONLY;}}}break;case x.DssGraphFontColor:case x.DssGraphFontName:case x.DssGraphFontSize100:case x.DssGraphFontSize:case x.DssGraphFontStyle:AN.Value=AQ;AR=v.call(this,AL);AP=U.call(this,AK);if(AP<0){return undefined;}if(AP===4){AP=3;AN.Value/=100;}if(AR==="No_Axis"){if(AL===y.DssGraphDataText){if(AS){return undefined;}AN.Name=V[AP][2];}else{if(AL===y.DssGraphPieFeelerLabel||AL===y.DssGraphPieFeelerLabel){if(AS===false){return undefined;}AN.Name=V[AP][2];}else{if(AL===y.DssGraphLegendText){AN.Name=V[AP][3];}else{return undefined;}}}}else{if(AR[0]==="X"){AN.Name=V[AP][0];}else{if(AR[0]==="Y"){AN.Name=V[AP][1];}else{if(AR[0]==="O"){AN.Name=AO?V[AP][0]:V[AP][1];}else{return undefined;}}}}break;}return AN;}var T,i=String.fromCharCode,AB=mstrmojo.locales.datetime,AG=0,L=document.getElementById("measureText"),B={},h={};var m=0.03,K=0,R=0,H=0.2;function n(AI){var AH,AJ=[],AK;for(AH=0;AH<=AI;AH++){AK=AH.toString(16);if(AK.length===1){AK="0"+AK;}AJ[AH]=AK;}T=AJ;return AJ;}function AE(AH){var AI=parseFloat(AH);if(isNaN(AI)===false&&AI!==undefined&&AI!==null){return AI;}return 0;}function D(AH){AH=AH.replace(/ddd/g,"EEE");AH=AH.replace(/AM\/PM/g,"a");AH=AH.replace(/tt/g,"a");AH=AH.replace(/:'/g,":");AH=AH.replace(/'\/'/g,"/");AH=AH.replace(/\\/g,"");var AI,AK=true,AJ=AH.length;for(AI=0;AI<AJ;AI++){if(AH[AI]==="h"||AH[AI]==="H"||AH[AI]===":"){AK=true;}else{if(AH[AI]===" "&&AK){AK=true;}}if(AH[AI]==="m"&&AK){AH=AH.substring(0,AI)+"M"+AH.substring(AI+1);}}return AH;}mstrmojo.chart.common.Utility=mstrmojo.provide("mstrmojo.chart.common.Utility",{point2D:{},rect2D:{},tripleId:{create:function M(AI,AM,AK,AJ,AL){if(AI===null||AI===undefined){AI=-3;}if(AM===null||AM===undefined){AM=-3;}if(AK===null||AK===undefined){AK=-3;}var AH={mObjectId:AI,mSeriesId:AM,mGroupId:AK};if(AJ!==undefined&&AJ!==null){AH.angleByIndex=AJ;}if(AL!==undefined&&AL!==null){AH.sliceById=AL;}return AH;},walks:function k(AL,AJ){if(!!AL===false||!!AJ===false){return null;}if(AL.length===1){return AJ[AL[0]];}var AK=(AL&&AL.length)||0,AI,AH=AL[AI];for(AI=0;AI<AK;AI++){if(AJ[AH]===undefined){AJ[AH]={};}AJ=AJ[AH];}return AJ;},equal:function a(AH,AI){return(AH.mObjectId===AI.mObjectId&&AH.mSeriesId===AI.mSeriesId&&AH.mGroupId===AI.mGroupId);},reset:function q(AJ,AL,AK,AI,AH,AM){AJ.mObjectId=AL!==undefined?AL:-3;AJ.mSeriesId=AK!==undefined?AK:-3;AJ.mGroupId=AI!==undefined?AI:-3;if(AH!==undefined&&AH!==null){AJ.angleByIndex=AH;}if(AM!==undefined&&AM!==null){AJ.sliceById=AM;}return AJ;}},transformProperty:function A(AH,AJ,AI){if(AJ===0){return W.call(this,AH,AI);}return d.call(this,AH,AI);},abbreviateNumber:function b(AR,AH){var AS,AI,AT="",AK=(AR<0),AU=(this.isIntegar(AR)===false);if(AU){AH++;}if(AR<0){AH++;}var AN=AK?-AR:AR;var AO=0;if(AN>=1e+27){AN=999;AT="Y";}else{if(AN>=1e+24){AN/=1e+24;AT="Y";}else{if(AN>=1e+21){AN/=1e+21;AT="Z";}else{if(AN>=1000000000000000000){AN/=1000000000000000000;AT="E";}else{if(AN>=1000000000000000){AN/=1000000000000000;AT="P";}else{if(AN>=1000000000000){AN/=1000000000000;AT="T";}else{if(AN>=1000000000){AN/=1000000000;AT="B";}else{if(AN>=1000000){AN/=1000000;AT="M";}else{if(AN>=1000){AN/=1000;AT="K";}else{if(AN>=1){AO++;}else{if(AN>=0.001){AO++;}else{if(AN>=0.000001){AO++;}else{if(AN>=1e-9){AO++;}else{if(AN>=1e-12){AO++;}else{AK=false;}}}}}}}}}}}}}}if(this.isIntegar(AN)===false){AS=AN.toString();var AJ=5,AM=2,AV;AI=AS.indexOf(".");AV=AS.length-AI-1;if(AV>AJ||(AV>AM&&AV>AI)){if(AV>AJ&&AH-AV<0){AM=Math.max(AM,Math.min(AM,AH-AV));}else{AM=Math.max(1,Math.min(AM,AH-AV));}AN=AN.toFixed(AM);}}AS=AN.toString();if(this.isIntegar(AN)===false){var AQ=AS.length-1;AI=AS.indexOf(".");if(AI!==-1){if(AI>=AQ){AS=AS.substring(0,AI);}else{var AP,AL=true;for(AP=AQ;AP>AI&&AL;--AP){if(AS[AP]!=="0"){AL=false;}}if(AL){AS=AS.substring(0,AI);}}}}if(AK){AS="-"+AS;}AS+=AT;return AS;},getScalePlate:function AD(AH){AH=AH||false;this.mScalePlate=mstrmojo.chart.common.ScalePlate;if(AH){this.mScalePlate.clear();}return this.mScalePlate;},prepareScalePlateOptions:function AA(AJ,AI,AK){var AH={mUseLogarithmicScale:AJ,mAlwaysIncludeZero:!AJ&&(AI||!!(AK&1)||!!(AK&2)),mShowMinLabel:true,mShowMaxLabel:true,mDrawCustomLine:false,mAxisMinValue:0,mAxisMaxValue:0,mAxisCustomValue:0,mUseCustomMinMax:false};return AH;},evaluateTextMargin:function P(AH){this.mTextMargins=this.mTextMargins||{};var AI=this.mTextMargins;if(AI[AH]){return AI[AH];}var AJ=[];AJ[0]=Math.floor(AH*m+0.5);AJ[1]=Math.floor(AH*K+0.5);AJ[2]=Math.max(Math.floor(AH*R+0.5),1);AI[AH]=AJ;return AJ;},AlmostZero:function w(AH){return(Math.abs(AH)<0.000001);},isValidNumber:function J(AH){if(typeof AH==="number"){if(AH===0){return true;}return !!AH;}return false;},isIntegar:function j(AH){return AH===+AH&&AH===(AH|0);},HasArrayIntersection:function O(AI,AH){var AJ;for(AJ=0;AJ<AI.length;AJ++){if(AH.indexOf(AI[AJ])!==-1){return true;}}return false;},EscapeString:function C(AH){var AJ='"',AI='\\"',AK=new RegExp(AJ,"g");return String(AH).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"\\\\").replace(AK,AI).replace(/\r\n/g,"<br/>").replace(/\r/g,"<br/>").replace(/\n/g,"<br/>");},EscapeStringForJSON:function N(AH){var AJ='"',AI='\\"',AK=new RegExp(AJ,"g");return String(AH).replace(/\\/g,"\\\\").replace(AK,AI).replace(/\r/g,"\\r").replace(/\n/g,"\\n");},TrimLastComma:function AC(AI){var AH;if(!AI.buf||AI.len===-1){return ;}AH=AI.len;var AJ=String(AI.buf[AH]);if(AJ&&AJ[AJ.length-1]===","){AI.buf[AH]=AJ.slice(0,-1);}},decodeUTF8:function f(AH){var AI="",AK=0,AM=0,AL=0,AJ=0;while(AK<AH.length){AM=AH.charCodeAt(AK);if(AM<128){AI+=i(AM);AK++;}else{if((AM>191)&&(AM<224)){AL=AH.charCodeAt(AK+1);AI+=i(((AM&31)<<6)|(AL&63));AK+=2;}else{AL=AH.charCodeAt(AK+1);AJ=AH.charCodeAt(AK+2);AI+=i(((AM&15)<<12)|((AL&63)<<6)|(AJ&63));AK+=3;}}}return AI;},formatDateTimeValue:function e(AI,AN){var AL=new mstrmojo.chart.common.DSSDateTime({ifTime:AN});var AH="";var AK="";var AO=0;while(AO<AI.length){var AJ=1;switch(AI.charAt(AO)){case"[":AO++;while(AO<AI.length&&AI.charAt(AO)!=="]"){AK+=AI.charAt(AO);AO++;}if(AK.length>0&&(AK[0]===">"||AK[0]==="<"||AK[0]==="=")){AK="";}AO++;break;case"y":AO++;while(AO<AI.length&&AI.charAt(AO)==="y"){AJ++;AO++;if(AJ===4){break;}}if(AJ===1||AJ===2){AH+=this.fillZeroToWidth(AL.mnYear%100,2);}else{if(AJ===3){AH+=this.fillZeroToWidth(AL.mnYear%100,2);AO--;}else{if(AJ===4){AH+=AL.mnYear;}}}break;case"M":AO++;while(AO<AI.length&&AI.charAt(AO)==="M"){AJ++;AO++;}if(AJ<3){AH+=this.fillZeroToWidth(AL.mnMonth,AJ);}else{if(AJ===3){AH+=AB.MONTHNAME_SHORT[AL.mnMonth];}else{AH+=AB.MONTHNAME_FULL[AL.mnMonth];}}break;case"d":AO++;while(AO<AI.length&&AI.charAt(AO)==="d"){AJ++;AO++;}if(AJ<3){AH+=this.fillZeroToWidth(AL.mnDay,AJ);}else{if(AJ===3){AH+=AB.dayShortNames[AL.mnDay];}else{AH+=AB.dayNames[AL.mnDay];}}break;case"h":AO++;while(AO<AI.length&&AI.charAt(AO)==="h"){AJ++;AO++;}var AM=AL.mnHour;if(AM===0){AM=12;}if(AM>12){AM-=12;}AH+=this.fillZeroToWidth(AM,AJ);break;case"H":AO++;while(AO<AI.length&&AI.charAt(AO)==="H"){AJ++;AO++;}AH+=this.fillZeroToWidth(AL.mnHour,AJ);break;case"m":AO++;while(AO<AI.length&&AI.charAt(AO)==="m"){AJ++;AO++;}AH+=this.fillZeroToWidth(AL.mnMinute,AJ);break;case"s":AO++;while(AO<AI.length&&AI.charAt(AO)==="s"){AJ++;AO++;}AH+=this.fillZeroToWidth(AL.mnSecond,AJ);break;case"S":AO++;while(AO<AI.length&&AI.charAt(AO)==="S"){AJ++;AO++;}AH+=this.fillZeroToWidth(AL.mnMillisecond,AJ);break;case"a":AM=AL.mnHour;if(AM<12){AH+=AB.AM_NAME;}else{AH+=AB.PM_NAME;}AO++;break;default:AH+=AI.charAt(AO++);break;}}if(AK.length!==0){AH='<SPAN STYLE="COLOR: '+AK+'" >'+AH+"</SPAN>";}return AH;},fillZeroToWidth:function l(AL,AJ){var AI="",AK=AI+AL;var AH=AK.length;while(AH<AJ){AK="0"+AK;AH++;}return AK;},updateCache:function AF(AI,AL,AM){var AK=(AL&&AL.length)||0,AJ,AH,AN=AI;for(AJ=0;AJ<AK-1;AJ++){AH=AL[AJ];if(!AN[AH]){AN[AH]={};}AN=AN[AH];}AN[AL[AK-1]]=AM;},measureTextHeight:function(AM,AJ,AQ,AN,AH){var AP,AL=AM;if(AL===" "){AL="\u00A0";}AH=AH||"pt";if(typeof AQ==="number"){AQ=AQ+AH;}var AI="none",AO="normal";if(AN&E.FS_ITALIC){AI="italic";}if(AN&E.FS_BOLD){AO="bold";}var AK={fontFamily:AJ,fontSize:AQ,fontStyle:AI,fontWeight:AO};if(h&&h.H&&h.H[AJ]&&h.H[AJ][AQ]&&h.H[AJ][AQ][AN]){AP=h.H[AJ][AQ][AN];}else{AP=o.measureTextHeight("H",AK,1);this.updateCache(h,["H",AJ,AQ,AN],AP);}return AP;},measureText:function u(AO,AL,AU,AP,AJ){var AI=true,AH,AS=AU+1;var AN=AO;if(AN===" "){AN="\u00A0";}AJ=AJ||"pt";if(typeof AU==="number"){AU=AU+AJ;}if(B&&B[AN]&&B[AN][AL]&&B[AN][AL][AU]&&B[AN][AL][AU][AP]){return B[AN][AL][AU][AP];}if(AI){var AK="normal",AQ="normal";if(AP&E.FS_ITALIC){AK="italic";}if(AP&E.FS_BOLD){AQ="bold";}var AM={fontFamily:AL,fontSize:AU,fontStyle:AK,fontWeight:AQ};if(h&&h.H&&h.H[AL]&&h.H[AL][AU]&&h.H[AL][AU][AP]){AS=h.H[AL][AU][AP];}else{AS=o.measureTextHeight("H",AM,true);this.updateCache(h,["H",AL,AU,AP],AS);}AH=o.measureTextWidth(AO,AM,0);}else{if(!L){var AR=document.createElement("div");AR.id="measureText";AR.style.position="absolute";AR.style.top="0";AR.style.visibility="hidden";AR.style.height="auto";AR.style.width="auto";document.body.appendChild(AR);L=AR;}L.innerHTML="";L.appendChild(document.createTextNode(AN));L.style.fontFamily=AL;L.style.fontSize=AU;L.style.fontWeight="normal";L.style.fontStyle="none";if(AP&E.FS_ITALIC){L.style.fontStyle="italic";}if(AP&E.FS_BOLD){L.style.fontWeight="bold";}AH=L.scrollWidth+1;AS=L.scrollHeight+1;}var AT={Width:AH,Height:AS};this.updateCache(B,[AN,AL,AU,AP],AT);return AT;},ReplaceDecimalPoint:function z(AI,AH){return AI.replace(".",AH);},ReplaceMinusSign:function s(AH,AI){return AH.replace("-",AI);},insert:function G(AI,AH,AJ){if(typeof AI==="string"&&typeof AH==="string"&&AJ<=AI.length){return AI.substr(0,AJ)+AH+AI.substr(AJ);}return AI;},InsertThousandSeparator:function r(AJ,AK,AO){var AH=AO.mstrDecimalPoint;var AI=AJ.indexOf(AH);if(AI===-1){AI=AJ.length;}var AL=0;while(AL<AI&&!this.chk_val(AJ.charAt(AL))){AL++;}var AN=AJ;var AM;for(AM=AI-3;AM>AL;AM-=3){AN=this.insert(AN,AK,AM);}return AN;},chk_val:function I(AH){return/^\d+$/.test(AH);},hFormatValue:function Z(AU,AL,Af,A4){var AS=0;var An=0;var Ab=AU.length;var BC=false;if(!A4){A4={};var Al=window.navigator.userLanguage||window.navigator.language;var BN=Al.split("-");this.mstrLanguageCode=BN[0];this.mstrCountryCode=BN[1]||BN[0];A4.mstrThousandSeparator=mstrmojo.locales.number.THOUSANDSEPARATOR||",";A4.mstrCurrencySymbol="$";A4.mstrDecimalPoint=mstrmojo.locales.number.DECIMALSEPARATOR||".";A4.mstrPercentSign="%";A4.mstrMinusSign="-";}while(AS<Ab){if(AU.charAt(AS)==='"'){AS++;while(AS<Ab&&AU.charAt(AS)!=='"'){AS++;}}else{if(AU.charAt(AS)==="["){AS++;var Am="";while(AS<Ab&&AU.charAt(AS)!=="]"){Am+=AU.charAt(AS);AS++;}if(Am.length>1&&(Am.charAt(0)===">"||Am.charAt(0)==="<"||Am.charAt(0)==="=")){var AI=-1;var A6=0;switch(Am.charAt(0)){case">":if(Am.charAt(1)>="0"&&Am.charAt(1)<="9"){AI=1;A6=1;}else{if(Am.charAt(1)==="="&&Am.length>2&&Am.charAt(2)>="0"&&Am.charAt(2)<="9"){AI=2;A6=2;}}break;case"=":if(Am.charAt(1)>="0"&&Am.charAt(1)<="9"){AI=3;A6=1;}else{if(Am.charAt(1)==="="&&Am.length>2&&Am.charAt(2)>="0"&&Am.charAt(2)<="9"){AI=3;A6=2;}}break;case"<":if(Am.charAt(1)>="0"&&Am.charAt(1)<="9"){AI=5;A6=1;}else{if(Am.charAt(1)==="="&&Am.length>2&&Am.charAt(2)>="0"&&Am.charAt(2)<="9"){AI=4;A6=2;}}break;}if(AI>0){var AW=Am.substr(A6);var BF=parseFloat(AW);if((AI===1&&AL>BF)||(AI===2&&AL>=BF)||(AI===3&&AL===BF)||(AI===4&&AL<=BF)||(AI===5&&AL<BF)){BC=true;}}}}else{if(AU.charAt(AS)===";"){if(BC){Ab=AS;break;}else{An=AS+1;AS++;}}else{AS++;}}}}if(!BC){An=0;}AS=An;var As=false;while(AS<Ab){if(AU.charAt(AS)==='"'){AS++;while(AS<Ab&&AU.charAt(AS)!=='"'){AS++;}}else{if(AU.charAt(AS)==="["){AS++;while(AS<Ab&&AU.charAt(AS)!=="]"){AS++;}}else{if(AU.charAt(AS)==="y"||AU.charAt(AS)==="M"||AU.charAt(AS)==="d"||AU.charAt(AS)==="h"||AU.charAt(AS)==="H"||AU.charAt(AS)==="m"||AU.charAt(AS)==="s"||AU.charAt(AS)==="S"){As=true;break;}else{AS++;}}}}if(As){var BA="";if(BC){BA=AU.substr(An,Ab-An);}else{BA=AU;}return mstrmojo.num.formatByMask(BA,AL);}var BE;var Aj;var Ap=false;var AO=false;var A9=false;var Aa=false;var BK=[];var Ae="K";var AX=0;var A5=false;var AV=0;var BL="";var AP="";var Ai="";var A3="";var AT=0;var BH=0;var BG=false;var A7=A4.mstrCurrencySymbol;var Ay=A4.mstrThousandSeparator;var Au=A4.mstrDecimalPoint;var A8=A4.mstrPercentSign;var A2=A4.mstrMinusSign;AS=An;var Ah="";if(AL<0&&!BC){while(AS<Ab&&AU.charAt(AS)!==";"){if(AU.charAt(AS)==='"'){AS++;while(AS<Ab&&AU.charAt(AS)!=='"'){AS++;}}AS++;}AS++;if(AS>=Ab){if(AL<0){BL+="-";}AS=An;}}var BM=false;while(AS<Ab){var Ao=false;switch(AU.charAt(AS)){case"[":AS++;while(AS<Ab&&AU.charAt(AS)!=="]"){Ai+=AU.charAt(AS);AS++;}if(Ai.length>0&&(Ai.charAt(0)===">"||Ai.charAt(0)==="<"||Ai.charAt(0)==="=")){Ai="";}AS++;break;case'"':AS++;while(AS<Ab&&AU.charAt(AS)!=='"'){if(AU.charAt(AS)==="K"){A9=true;Ae="K";}else{if(BM){AP+=AU.charAt(AS);}else{BL+=AU.charAt(AS);}}AS++;}AS++;break;case"#":case"0":var AZ=AU.charAt(AS);BM=true;var Ad=1;AS++;while(AS<Ab&&AU.charAt(AS)===AZ){Ad++;AS++;}if(AS+1<Ab&&AU.charAt(AS)==="-"&&AU.charAt(AS+1)===AZ){Aa=true;BK.push(Ad);AS++;while(true){Ad=0;while(AS<Ab&&AU.charAt(AS)===AZ){Ad++;AS++;}BK.push(Ad);if(AS>=Ab||AU.charAt(AS)!=="-"){break;}AS++;}}while(AS<Ab){if(AU.charAt(AS)===","){if(AS+1<Ab&&AU.charAt(AS+1)===AZ){Ap=true;}else{break;}}else{if(AU.charAt(AS)!==AZ){break;}}AS++;}break;case".":BM=true;AS++;AX=0;while(AS<Ab&&AU.charAt(AS)==="0"){AX++;AS++;}if(AX===0){while(AS<Ab&&AU.charAt(AS)==="#"){AX++;AS++;}}break;case"E":BH=6;while(AS<Ab&&AU.charAt(AS)!=="0"){if(AU.charAt(AS)==="+"&&AS<Ab&&AU.charAt(AS+1)==="0"){AO=true;}else{A3+=AU.charAt(AS);}AS++;}AT=0;while(AS<Ab&&AU.charAt(AS)==="0"){AT++;AS++;}break;case"%":BH=4;AS++;break;case"(":AS++;BL+="(";break;case")":AS++;AP+=")";break;case"-":AS++;if(AL<0){BL+=A2;}break;case"?":AS++;break;case"/":if(AS>An&&AU.charAt(AS-1)==="?"&&AS+1<Ab&&AU.charAt(AS+1)==="?"){BH=5;A5=false;Aj=AS-1;while(Aj>An&&AU.charAt(Aj)==="?"){Aj--;}while(Aj>An&&AU.charAt(Aj)===" "){Aj--;}if(Aj>=An&&(AU.charAt(Aj)==="#"||AU.charAt(Aj)==="0")){A5=true;}AV=0;AS++;while(AS<Ab&&AU.charAt(AS)==="?"){AV++;AS++;}}else{AS++;}break;case",":if(AS>An&&(AU.charAt(AS-1)==="0"||AU.charAt(AS-1)==="#")){if(AS+1<Ab&&(AU.charAt(AS+1)==="K"||AU.charAt(AS+1)==="k")){A9=true;Ae=AU.charAt(AS+1);AS++;}}Aj=AS+1;while(Aj<Ab){if(AU.charAt(Aj)===","){Aj++;continue;}else{break;}}if(Aj===Ab||AU.charAt(Aj)==="."){BG=true;}if(BG||(!BG&&AS+1<Ab&&AU.charAt(AS+1)===",")){while(AS<Ab&&AU.charAt(AS)===","){AL/=1000;AS++;}AS--;}AS++;break;case";":Ao=true;break;case"$":if(BM){AP+=A7;}else{BL+=A7;}AS++;break;default:if(BM){AP+=AU.charAt(AS);}else{BL+=AU.charAt(AS);}AS++;}if(Ao){break;}}if(AL<0){AL=-AL;}var Aw="";if(Aa){var Ar=0;for(BE=0;BE<BK.length;BE++){Ar+=BK[BE];}Aw=Ah=this.fillZeroToWidth(Ar,AL.toFixed());for(BE=0;BE<BK.length-1;BE++){Ar-=BK[BE];var Aq=Aw.length-Ar;Aw=Aw.slice(0,Aq)+"-"+Aw.slice(Aq);}}else{switch(BH){case 0:if(A9){AL/=1000;}var A0=AL;if(A0<0){A0=-A0;}var AH=0;while(A0>=10){A0/=10;AH++;}if(AH>=15){Aw=Ah=this.fillZeroToWidth((AL<0?-AL:AL),10);var Ak=Aw.indexOf(".");if(Ak!==-1){Aw=Aw.slice(0,Ak)+Aw.slice(Ak+1);}Aw=Aw.substr(0,16);if(Aw.charAt(15)>="5"){var AR=14;while(AR>=0&&Aw.charAt(AR)==="9"){Aw=Aw.slice(0,AR)+"0"+Aw.slice(AR+1);AR--;}var AM=Aw.charAt(AR);AM++;if(AR>=0){Aw=Aw.slice(0,AR)+AM+Aw.slice(AR+1);}else{Aw="1"+Aw;}}Aw=Aw.substr(0,15);var BD;for(BD=AH-14;BD>0;BD--){Aw+="0";}if(AL<0){Aw=A2+Aw;}}else{Ah+=(AL+Math.pow(0.1,AX+6)).toFixed(AX);Aw=Ah;Aw=this.ReplaceDecimalPoint(Aw,Au);if(AL<0){Aw=this.ReplaceMinusSign(Aw,A2);}}if(Ap){Aw=this.InsertThousandSeparator(Aw,Ay,A4);}if(A9){Aw+=Ae;}break;case 5:if(A9){AL/=1000;}var Ag=10;for(BE=1;BE<AV;BE++){Ag*=10;}var AJ={numerator:0,denominator:1};var AQ={numerator:1,denominator:1};var AN={numerator:1,denominator:2};var Av={numerator:0,denominator:1};var Ac=AL>=0;var A1=Math.abs(AL);var Az=parseInt(A1,10);A1-=Az;while(AN.denominator<Ag){if(Math.abs(AE.call(AN)-A1)<1e-15){Av=AN;break;}if(AE.call(AN)>A1){AQ=AN;}else{AJ=AN;}AN.denominator=AJ.denominator+AQ.denominator;AN.numerator=AJ.numerator+AQ.numerator;}if(AN.denominator>=Ag){if(A1-AE.call(AJ)<AE.call(AQ)-A1){Av=AJ;}else{Av=AQ;}}if(Az>0){Av.numerator+=Az*Av.denominator;}if(Av.denominator===0){A5=false;}var BB=false;var Ax=false;var BJ=Av.numerator;if(A5){Az=Math.floor(Av.numerator/Av.denominator);BJ=Av.numerator%Av.denominator;Ax=Ax||(BJ!==0);if(Az>0){BB=true;Ah+=Az;if(Ax){Ah+=" ";}}}if(!Ax&&!BB&&BJ===0){Ah+="0";}else{if(!Ax&&BB&&BJ===0){AG++;}else{Ah+=BJ;Ah+="/";Ah+=Av.denominator;}}Aw=Ah;if(!Ac){Aw=A2+Aw;}if(Ap){Aw=this.InsertThousandSeparator(Aw,Ay,A4);}if(A9){Aw+=Ae;}break;case 4:AL*=100;Ah+=(AL+Math.pow(0.1,AX+6)).toFixed(AX);Aw=Ah;Aw=this.ReplaceDecimalPoint(Aw,Au);if(AL<0){Aw=this.ReplaceMinusSign(Aw,A2);}if(Ap){Aw=this.InsertThousandSeparator(Aw,Ay,A4);}Aw+=A8;break;case 6:var At=AL;var BI=0;if(At>1){while(At>=10){At/=10;BI++;}}else{if(At!==0){while(At<1){At*=10;BI--;}}}Ah+=(At+Math.pow(0.1,AX+6)).toFixed(AX);Ah+=A3;if(AO&&BI>=0){Ah<<"+";}if(BI<0){Ah<<"-";BI=-BI;}Ah+=this.fillZeroToWidth(BI,AT);Aw=Ah;Aw=this.ReplaceDecimalPoint(Aw,Au);if(AL<0){Aw=this.ReplaceMinusSign(Aw,A2);}break;}}var AK=BL+Aw+AP;var AY=false;if(Ai.length!==0&&AY){AK='<SPAN STYLE="COLOR: '+Ai+'" >'+AK+"</SPAN>";}return AK;}});}());(function(){mstrmojo.requiresCls("mstrmojo.gm.GMEnums","mstrmojo.hash","mstrmojo.DocDataService","mstrmojo.VisEnum.GMLegendFormatingPropertyTag","mstrmojo.VisUtility");var E=mstrmojo.array,D=mstrmojo.hash,A=mstrmojo.func.wrapMethods;function B(F){return F.model.controller.cmdMgr;}mstrmojo._colorPalette=mstrmojo.provide("mstrmojo._colorPalette",{listenToUpdateColorMap:function(I){if(mstrmojo.VisUtility.isOnExpressMode()){return ;}var H=this,G,F=(H.getDocModel&&H.getDocModel())||H.model.docModel;if(F){return F.attachEventListener("colorMapChanged",H.id,function(K){G=H.parent.parent;if(G.isPanelDisplaying()){I.call(H);}else{var J=G.attachEventListener("panelDisplaying",H.id,function(L){if(H.postBuilderingCalled){I.call(H);}G.detachEventListener(J);});}});}},detachUpdateColorMapListener:function(G){if(!G){return ;}var F=(this.getDocModel&&this.getDocModel())||this.model.docModel;F.detachEventListener(G);},submitUpdatesAndPersistXML:function C(H,L,F,P){if(!H||H.length===0){return ;}var G={},M=this,Q=(M.getDocModel&&M.getDocModel())||M.model.docModel,O=Q.getDataService(),I=M.model.controller||Q.controller,J=I._getXtabCallback(M);if(F){D.copy(mstrmojo.DocDataService.SUPPRESS_DATA,G);}if(P){D.copy(mstrmojo.DocDataService.REQUEST_ONLY_DEFINITION,G);}var K=false;E.forEach(H,function(R){if(R.act==="updateElementsPropertiesMap"){K=true;}});if(K){A(Q.getUpdateColorMapCallback(),J);}B(M).execute({execute:function N(){var R=O.newUpdate(this,undefined);R.add(H,L,G);this.submitUpdate(R);},urInfo:{callback:J}});},updateColorMap:function(I,G){if(!E.isArray((G))){G=[G];I=[I];}if(I.length!==G.length){throw new Error("comb and color number mismatch");}var F=(this.getDocModel&&this.getDocModel())||this.model.docModel,J=mstrmojo.VisUtility.getUpdateColorMapAction.bind(this),H=I.map(function(L,K){return J(L,JSON.stringify({color:G[K]}));});this.submitUpdatesAndPersistXML(H,F.getUpdateColorMapCallback(),false,true);}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.func","mstrmojo.array","mstrmojo.vi.models.editors.ControlsViewFactory","mstrmojo.Label","mstrmojo.vi.ui.TextAlignButtonBar","mstrmojo.vi.ui.editors.EditorGroup","mstrmojo.ui.editors.controls.CharacterGroup","mstrmojo.ui.editors.controls.ContainerGroup","mstrmojo.vi.ui.editors.MoreOptionsEditor");var E=mstrmojo.hash,A=mstrmojo.ui.editors.controls.ContainerGroup.CTRL_FLAGS,I="mstrmojo-more-options-editor";mstrmojo.vi.models.editors.EditorModel=mstrmojo.declare(mstrmojo.vi.models.editors.ControlsViewFactory,null,{scriptClass:"mstrmojo.vi.models.editors.EditorModel",hostId:"",help:"",getHost:function Q(){return mstrmojo.all[this.hostId];},docModel:null,getEditorContents:mstrmojo.emptyFn,getGroupTitle:function J(R){return new mstrmojo.Label({cssClass:"edt-title",text:R});},getShowTitleCheckbox:function C(){var R=this.getHost();return this.getCheckboxAndLabel(R.parent.getTitleBarVisibility(),mstrmojo.desc(13599,"Show titlebar"),function(S){R.parent.toggleTitleBar(!!S);});},getTextAlign:function L(T,U,S){var R=new mstrmojo.vi.ui.TextAlignButtonBar(!S?null:{itemsValueMap:S});R.singleSelect(mstrmojo.array.find(R.items,"id",T));R.onValueChange=U;return R;},getWrapText:function B(S,R){return this.getCheckboxAndLabel(S,mstrmojo.desc(13577,"Wrap text"),R);},getTextDirection:function K(S,T){var R=0;if(S){R=S===3?1:2;}return this.getLabelAndControl(mstrmojo.desc(11914,"Direction:"),this.getPulldown([{n:mstrmojo.desc(2066,"Horizontal"),v:0},{n:mstrmojo.desc(5155,"90 degrees"),v:90},{n:mstrmojo.desc(5156,"-90 degrees"),v:-90}],T,R));},getOverflow:function O(S,R){return this.getLabelAndControl(mstrmojo.desc(11915,"Overflow:"),this.getPulldown([{n:mstrmojo.desc(2974,"Clip"),v:false},{n:mstrmojo.desc(2976,"Scroll"),v:true}],R,S?1:0));},getChangeFormatPropertyFn:function H(R,S){var T=this.id;return function(W,U){var V=mstrmojo.all[T];V.docModel.changeUnitFormatProperty(V.getHost().parent,[{formatType:S||1,propertyName:R,newValue:W,oldValue:U}]);};},getChangeGroupPropertyFn:function P(R){var S=this.id;return function(T,V,U){(mstrmojo.all[S].getChangeFormatPropertyFn(T,R))(V,U);};},getCharacterGroup:function G(U,R,S){var V={onGroupValueChange:U};if(S){V.visibleControls=S;}var T=new mstrmojo.ui.editors.controls.CharacterGroup(V);T.setFormatSource(R);return T;},getContainerGroup:function F(R,U,S,T){var V=new mstrmojo.ui.editors.controls.ContainerGroup(E.copy(T,{onGroupValueChange:U||this.getChangeGroupPropertyFn(),visibleControls:S||(A.FILL_COLOR+A.BORDER)}));V.setFormatSource(R);return V;},getMoreOptionsEditorLink:function N(S,R,T){return new mstrmojo.Label({text:mstrmojo.desc(9126,"More options"),cssClass:"edt-link",onclick:function(){this.openMoreOptionsEditor(S,R,T);}.bind(this)});},openMoreOptionsEditor:function D(V,R,W){var T=this.getHost();var S=mstrmojo.all[I]||new mstrmojo.vi.ui.editors.MoreOptionsEditor({id:I,submitAction:function U(Z,X,d,Y){var a=this.host,b=a.controller,c=[];if(!E.isEmpty(Z)){d=mstrmojo.func.wrapMethods(b._getXtabCallback(a),d);c=[b.dataService().getUpdateTemplateAction(a.k,[a.model.getAdvancedPropertiesAction(Z)])];}c=c.concat(X||[]);if(!E.isEmpty(c)){b.submitUndoRedoUpdates(c,null,d,Y);}}});S.set("data",V);S.set("showHeadersSection",!!R);S.set("lockHeadersCase",W);S.set("host",T);S.open();},replaceChildControls:function M(T,S){var R=[].concat(T.children||[]);T.removeChildren();R.forEach(function(U){U.destroy();});T.addChildren(S);T.doLayout();}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.DropZonesModel","mstrmojo.array","mstrmojo.vi.models._DropZoneCommon","mstrmojo.vi.ui.DatasetUnitMenuUtils","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.mstr.EnumDSSXMLBaseFormType");mstrmojo.requiresDescs(190,1388,3224,5188,11806,12287,13295,13296,13624,13625,14003,14655,14656,14717);var H=mstrmojo.array,E=mstrmojo.vi.ui.DatasetUnitMenuUtils,C="-1",G=mstrmojo.mstr.EnumDSSXMLBaseFormType,D=mstrmojo.mstr.EnumDSSXMLObjectTypes;mstrmojo.vi.models.TemplateBasedDropZones=mstrmojo.declare(mstrmojo.vi.models.DropZonesModel,[mstrmojo.vi.models._DropZoneCommon],{getClearAllUnitsActions:function B(){var J=[],I=this.getHost().model;this.getDropZones().zones.forEach(function(K){K.items.forEach(function(L){if(L.did!==C){J.push(I.getRemoveTemplateUnitAction(L));}});});return J;},getMultiUnitsMenuItems:function F(J,I,K){var L=this.id;if(E.getMultiSelectionShortcutMetricFunctions(K).length){J.addSubMenuItem(mstrmojo.desc(5188,"Calculation"),"",this.id,function(){return mstrmojo.all[L].getMultipleMetricsCalcMenus(I,K,false);});J.addSeparator();}J.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){mstrmojo.all[L].deleteItems(I,K);});},getExtraUnitMenuItems:function A(J,I,L,K){},getUnitMenuItems:function A(P,S,X,U){if(!X){throw new Error(this.scriptClass+"::getUnitMenuItems: Item must be provided.");}var R=S.items,W=this.getHost(),L=R.length,M=S.id,K={zone:S,axis:M,idx:H.indexOf(R,X),cnt:L,item:X,metricsAxis:(this.getHost().gridInfo||{}).tma,useDropzone:false},T=this,J=this.id,Q=X.did===C,I=(X.t===D.Consolidation&&X.st===12033);if(I){P.addMenuItem(mstrmojo.desc(13296,"Edit Groups..."),"eg",function(){var Y={otp:X.t,id:X.did,n:X.n,axis:S.id,ui:K.idx};W.derivedElementsEdit(Y);});P.addSeparator();}if(!Q){if(X.t===D.Attribute&&X.st===3076){P.addMenuItem(mstrmojo.desc(14655,"Expand All Levels"),"",function(){var Y={id:X.did};W.raExpandAll(Y,true);});P.addMenuItem(mstrmojo.desc(14656,"Collapse All Levels"),"",function(){var Y={id:X.did};W.raExpandAll(Y,false);});P.addSeparator();}this.addSortMenu(K,P,true);P.addSeparator();if(X.t===D.Metric){if(X.um){P.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){T.editDerivedMetric(K);},K);P.addSeparator();}if(this.docModel.findDatasetIdFromUnit(X.did)&&!this.docModel.isFromSolrCube(X.did)&&!this.docModel.isFromMDXCube(X.did)){P.addSubMenuItem(mstrmojo.desc(11806,"Aggregate By"),"",J,T.getAggregateByMetricSubMenu,K);P.addSeparator();}P.addEditorMenuItem(mstrmojo.desc(5188,"Calculation"),J,T.getCalculationEditorCfg,K);P.addSubMenuItem(mstrmojo.desc(12287,"Shortcut Metric"),"",J,T.getShortcutMetricSubMenu,K);P.addMenuItem(mstrmojo.desc(13624,"Create Metric..."),"",function(){T.newDerivedMetric(K);},K);}if(X.t===D.Attribute){var O=X.did||"",N=O?E.getDatasetFromAttributeId(this.docModel.datasets,O):null,V=this.isDynamicLink(X);if(!N||!this.docModel.isMDXDataset(N)){if(X.da){P.addMenuItem(mstrmojo.desc(3224,"Edit..."),"",function(){T.editDerivedAttribute(K);},K);P.addSeparator();}if(((!N)||!E.hasCGorCon(N))&&!V){P.addMenuItem(mstrmojo.desc(13625,"New Attribute..."),"",function(){T.newDerivedAttribute(K);},K);P.addMenuItem(mstrmojo.desc(14717,"Create Links..."),"",function(){T.newDynamicLinkAttr(K);},K);}}if(!E.hasOldDEOverDatasets(X.did,this.docModel.datasets)&&X.st!==3076&&!V){P.addMenuItem(mstrmojo.desc(13295,"Create Groups..."),"eg",function(){var Y={otp:X.t,id:X.did,n:X.n,axis:S.id,ui:K.idx};W.derivedElementsEdit(Y);});}}this.getExtraUnitMenuItems(P,S,X,K);P.addSeparator();if(T.hasReplaceCandidates(K)){P.addSubMenuItem(mstrmojo.desc(14003,"Replace With"),"",J,T.getReplaceSubMenu,K);}P.addMenuItem(mstrmojo.desc(1388,"Rename"),J,function(){mstrmojo.all[J].renameItem(U,X);});P.addMenuItem(mstrmojo.desc(190,"Remove"),"xt",function(){mstrmojo.all[J].deleteItem(S,K.idx);});}}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.TemplateBasedDropZones","mstrmojo.vi.models.EnumDragSources","mstrmojo.mstr.EnumDSSXMLObjectTypes","mstrmojo.array","mstrmojo.hash","mstrmojo.func");var I=mstrmojo.array,C=mstrmojo.hash,M="-1",P=mstrmojo.vi.models.DropZonesModel.ENUM_TARGET_POSITION;function O(){var Q=this.getHostModel();return Q?Q.gsi:null;}function L(Y,V,T,X,Q){var Z=this.getHost(),U=Z.controller,S,W;S=Y.did;W=Y.t;if(Q){var R=this.getUnitIndexInZone(V,Y);if(R!==-1){if(R<X){X--;}}}U.submitUndoRedoUpdates(this.getUpdateTemplateAction([Z.model.getPivotUnitAction(T,X,S,W)]),null,mstrmojo.func.wrapMethods(U._getXtabCallback(Z),this.getUpdateCallback()));}function J(T){var c=T.item,X=T.zone,Q=T.dsid,a=T.index,R=T.edge,Z=T.isPivot;var d=this.getHost(),W=d.controller,b=X.items,V=d.model,S=X.id,U=[];if(b.length){if(R===P.ON){var Y=b[a];U.push(V.getRemoveTemplateUnitAction(Y));}else{if(R===P.BELOW){a++;}}}else{a=0;}if(Z&&R!==P.ON){L.call(this,c,X,S,a,true);return ;}U.push(V.getAddTemplateUnitAction(c,Q,S,a));W.submitUndoRedoUpdates((T.actions||[]).concat(this.getUpdateTemplateAction(U)),null,mstrmojo.func.wrapMethods(W._getXtabCallback(d),this.getUpdateCallback()));}function K(Q){return Q.src.data.src===mstrmojo.vi.models.EnumDragSources.VIZ_EDITOR;}mstrmojo.vi.models.BaseVisDropZones=mstrmojo.declare(mstrmojo.vi.models.TemplateBasedDropZones,null,{scriptClass:"mstrmojo.vi.models.BaseVisDropZones",addZoneItem:function A(S,T,R){var U=R.mx,Q;if(S.did===M){I.forEach(U,function(V){Q={did:V.did,n:V.n,t:4};T.push(Q);});}else{this._super(S,T);}},getDropZones:function N(){var Q=O.call(this),R=this.getHost();return Q?{n:R.defn.ttl,zones:[this.getZone(mstrmojo.desc(3581,"Attributes"),1,Q.rows,false,{mx:Q.mx,title:mstrmojo.desc(13828)}),this.getZone(mstrmojo.desc(3582,"Metrics"),-1,Q.mx,false,{mx:Q.mx,title:mstrmojo.desc(13827)})]}:{n:R.defn.ttl,zones:[]};},getAvatarIconClass:function G(){return"viXtab";},getAllowDropInfo:function F(R,S,Q,U,T){var W=this._super(R,S,Q,U,T),V=R.id===-1;return C.copy({allowedItems:W.allowedItems.filter(function(Y){var X=Y.t===4;return V?X:!X;})},W);},unitsDropped:function E(Q,S,T,V,U){var R=T.allowedItems[0];J.call(this,{item:R,zone:Q,dsid:S.src.data.dsid,index:T.idx,edge:T.edge,isPivot:K(S),actions:S.actions});},deleteItem:function B(R,Q){this.deleteItems(R,[R.items[Q]]);},deleteItems:function D(R,S){var T=this.getHost(),Q=T.controller,U=[];(S||[]).forEach(function(V){U.push(T.model.getRemoveTemplateUnitAction(V));});if(U.length){Q.submitUndoRedoUpdates(this.getUpdateTemplateAction(U),null,mstrmojo.func.wrapMethods(Q._getXtabCallback(T),this.getUpdateCallback()));}},getExtraUnitMenuItems:function H(R,Q,T,S){this._super(R,Q,T,S);if(T.t===mstrmojo.mstr.EnumDSSXMLObjectTypes.Metric&&this.getHost().showThreshold){R.addSeparator();this.buildThresholdMenuOptions(R,{item:T},true);}},getHostModel:function(){return this.getHost().model.data;}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.editors.EditorModel","mstrmojo.models.FormatModel","mstrmojo.ui.editors.controls.CharacterGroup","mstrmojo.ui.editors.controls.ContainerGroup","mstrmojo.vi.ui.TextAlignButtonBar","mstrmojo.ui.editors.CharacterToolbarPopup","mstrmojo.array","mstrmojo.hash");var B=0,I=mstrmojo.ui.editors.controls.ContainerGroup.CTRL_FLAGS,S=mstrmojo.models.FormatModel,H=S.ENUM_PROPERTY_NAMES.TEXT_ALIGN,K=mstrmojo.hash,T=B;function L(Z,U,W,a,X){var V=Z===this.getTitleFormatCode(),Y;if(W===H){Y=function(b){return this.titleAlignButtonBar.items.filter(function(c){return c.v===b;})[0].id;}.bind(this);}this.getHost().parent.changeUnitFormats(V,Z,U,W,a,X,Y,function(b){this.raiseEvent({name:"BEMFormatChange",propertyName:W,value:b,isTitle:V});}.bind(this));}function Q(V,W){var U=new mstrmojo.vi.ui.TextAlignButtonBar({includeJustify:false});this.titleAlignButtonBar=U;U.singleSelect(U.items.map(function(X){return X.id;}).indexOf(V));U.onValueChange=function(Y,X){W(H,Y,X);};return this.getLabelAndControl(mstrmojo.desc(13597,"Alignment:"),U);}function C(X){var W=this.getHost().getFormats(),b=W.ttl,V=[];if(b){var a=L.bind(this,this.getTitleFormatCode(),W),Z=this.getHost(),U=Z.parent.getTitleBarVisibility(),Y=[this.getCharacterGroup(a,b),this.getContainerGroup(b,a,I.FILL_COLOR,{showBackgroundNoFill:false}),Q.call(this,S.getFormatBlockValue(b,H),a)];Y.forEach(function(c){c.set("enabled",U);});V.push(this.getEditorGroup([this.getGroupTitle(mstrmojo.desc(4756,"Title")),this.getCheckboxAndLabel(U,mstrmojo.desc(13599,"Show titlebar"),function(c){Z.parent.toggleTitleBar(!!c);})].concat(Y),{cssClass:"bem-tc-title",showDivider:false}));}V.push(this.getEditorGroup([this.getGroupTitle(mstrmojo.desc(11917,"Container")),this.getContainerGroup(W,L.bind(this,1,W),this.getContainerCtrlFlags(),{showBackgroundNoFill:false,showBorderNoFill:false})],{cssClass:"bem-tc-container"}));this.replaceChildControls(X,V.concat(this.getTitleAndContainerControls()));}function D(U){var W=this.getTargetPulldownItems(U);var V=this.getPulldown(W,function(X){T=X;W[W.map(function(Y){return Y.v;}).indexOf(X)].h(X);});V.set("selectedIndex",Math.max(W.map(function(X){return X.v;}).indexOf(T),0));return V;}mstrmojo.vi.models.editors.BaseEditorModel=mstrmojo.declare(mstrmojo.vi.models.editors.EditorModel,null,{scriptClass:"mstrmojo.vi.models.editors.BaseEditorModel",titleAlignButtonBar:null,init:function N(U){this._super(U);T=this.getInitialTarget();},selectTargetByValue:function M(U){if(U!==undefined){var V=this._targetPulldown;if(V){V.selectItemByField("v",U);}}},getInitialTarget:function R(){return B;},getEditorContents:function O(){var U=this.getEditorGroup([],{cssClass:"bem-dynamic-grp",showDivider:false,isNested:true,isContainer:true});var W=this._targetPulldown=D.call(this,U),V=[U].concat(this.getCommonControls());if(W.items.length>1){V.unshift(this.getEditorGroup([W]));}return V;},getFormattingToolbar:function F(V,a,W){if(V===B){var Z=this.getHost(),U=Z.getFormats(),Y=U.ttl;if(Y){Y=K.copy(Y);Y[H]=this.titleAlignButtonBar.items.filter(function(b){return b.id===Y["text-align"];})[0].v;var X=new mstrmojo.ui.editors.CharacterToolbarPopup(K.copy({onGroupValueChange:L.bind(this,this.getTitleFormatCode(),U),textAlignJustify:false,textAlignFmtName:H,anchorElement:a},W));X.setFormatSource(Y);return X;}}return null;},getCommonControls:function E(){return[];},getContainerCtrlFlags:function A(){return I.FILL_COLOR+I.BORDER;},getTitleAndContainerControls:function P(){return[];},getTargetPulldownItems:function G(V){var U=this.getHost().getFormats(),W=[];if(U&&(this.getHost().showTitleAndContainerFormats!==false)){W.push({n:mstrmojo.desc(12049,"Title and Container"),v:B,h:C.bind(this,V)});}return W;},getTitleFormatCode:function J(){return 2;}});mstrmojo.vi.models.editors.BaseEditorModel.TITLE_CONTAINER_VALUE=B;}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.num","mstrmojo.VisEnum","mstrmojo.VisUtility","mstrmojo.gm.GMEnums","mstrmojo.color","mstrmojo.chart","mstrmojo.chart.common.Utility");mstrmojo.requiresClsP("mstrmojo.chart.enums","EnumGraphMajorType");mstrmojo.requiresClsP("mstrmojo.chart.model.enums","EnumDSSGraphObject");var m=mstrmojo,n=mstrmojo.array,P=mstrmojo.hash,H=mstrmojo.num,G=mstrmojo.VisUtility,a=mstrmojo.chart,K=a.enums,b=K.EnumGraphMajorType,J=a.common.Utility,T=a.model,M=T.enums,u=M.EnumDSSGraphObject,y=mstrmojo.VisEnum.ControlType,v=m.gm,U=mstrmojo.gm.EnumTextAlignH,p=mstrmojo.gm.EnumTextAlignV,t=";",i=",",A="_tmsp",L=" ",Y=-20,j=mstrmojo.gm.EnumSelectionOptionLevel,AA=mstrmojo.gm.EnumShape,f=mstrmojo.color,I=mstrmojo.gm.EnumIdentityType,R=0.00001,D,Z=Math.pow(2,30),c=Math.pow(2,60);var e=["Reserved",mstrmojo.desc(2125,"Maximum"),mstrmojo.desc(2127,"Minimum"),mstrmojo.desc(2122,"Average"),mstrmojo.desc(2126,"Median"),mstrmojo.desc(4046,"First"),mstrmojo.desc(4049,"Last"),mstrmojo.desc(7194,"Constant")];function k(AG,AF){var AH,AE=AG.length;if(AE!==AF.length){return false;}for(AH=0;AH<AE;AH++){if(AG[AH]!==AF[AH]){return false;}}return true;}function z(AH,AF,AI){var AG=false,AJ=AI+A,AE=AH[AJ],AK=AF[AJ];if(AF[AI]===undefined){AG=true;}else{if((AK===undefined&&AE!==undefined)||(AK!==undefined&&AE!==undefined&&AK<AE)){AG=true;}}if(AG){AF[AI]=AH[AI];if(AK!==undefined){AF[AJ]=AE;}}}function AD(AF,AE){var AG;for(AG in AF){if(AF.hasOwnProperty(AG)){z(AF,AE,AG);}}return AE;}function W(AI){var AH={},AG,AF=[],AE;n.forEach(AI,function(AJ){if(AJ!==undefined){AF.push(AJ);}});AE=AF.length;if(AE===1){return AF[0];}for(AG=0;AG<AE;AG++){AD(AF[AG],AH);}return AH;}function x(AE){return{n:AE,s:AE.toString(),on:AE};}function X(AG,AE,AI){if(AE===AG){return 0;}var AF=AE-AG,AH=1;while(AF<1){AF*=10;AH/=10;}while(AF>=10){AF/=10;AH*=10;}if(AF<1.8){AH*=0.2;}else{if(AF<3.1){AH*=0.4;}else{if(AF<4.6){AH*=0.5;}else{if(AF>=8.1){AH*=2;}}}}if(AI){AH=Math.round(AH);if(AH<1){AH=1;}}return AH;}function B(AH,AL,AN,AF){var AJ=[];if(AH===AL){if(AH<0){AJ.push(mstrmojo.gm.GMUtility.formatNumber(AH,"nearest"));}AJ.push({n:0,s:"0",on:0});if(AH>0){AJ.push(mstrmojo.gm.GMUtility.formatNumber(AH,"nearest"));}return AJ;}var AE=AF>0?AF:X(AH,AL,AN);var AG=Math.ceil(AL/AE)*AE;if(AG-AL>=AE*0.9){AG=Math.floor(AL/AE)*AE;}var AK=Math.floor(AH/AE)*AE;if(AH-AK>=AE*0.9){AK=Math.ceil(AH/AE)*AE;}var AM=Math.floor((AG-AK+AE/100)/AE)+1,AI;for(AI=0;AI<AM;++AI){AJ.push(mstrmojo.gm.GMUtility.formatNumber(AK+AI*AE,"nearest"));}return AJ;}function S(AE,AH){var AG;AE.mMaxTick=1;if(this.mChartContextPtr.mIsGraphMatrix){AE.mStep=this.mMinimum<0?0.2:0.1;if(AH.mUseCustomMinMax){var AF=AH;AE.mMaxTick=AF.mAxisMaxValue;AE.mMinTick=AF.mAxisMinValue;AE.mMaxTick=Math.min(1,AE.mMaxTick);AE.mMinTick=Math.max(-1,AE.mMinTick);AE.mStep=0.1;}else{if(this.mMaximum>=0.5){AE.mMaxTick=1;AE.mMinTick=Math.floor(this.mMinimum/AE.mStep)*AE.mStep;AE.mMinTick=(AE.mMinTick*this.mMinimum<0)?0:(AE.mMinTick>0?0:AE.mMinTick);if(this.mMinimum<-0.5){AE.mMinTick=-1;}}else{if(this.mMaximum>0){AE.mMaxTick=Math.ceil(this.mMaximum/AE.mStep)*AE.mStep;AE.mMinTick=-1;}else{AE.mStep=0.1;AE.mMaxTick=0;AE.mMinTick=-1;}}}}else{AE.mMinTick=(this.mMinimum<0)?-1:0;if(s.call(this,AE)){return ;}AE.mStep=this.mMajorGrid.mUseManualGrid?this.mMajorGrid.mGridInterval:(AE.mMaxTick-AE.mMinTick)/10;}for(AG=AE.mMinTick+AE.mStep;AG+a.gModuleMain.mTolerance<AE.mMaxTick;AG+=AE.mStep){AE.mTicks.push(Math.round(AG*100)/100);}}function O(AE,AJ){var AI,AF,AL=AJ,AK=AL.mDrawCustomLine,AG=AL.mAxisCustomValue,AH;AE.mStep=1;if(this.mMaximum<=0){AE.mMinTick=1;AE.mMaxTick=10;if(AK&&AG<=1){AL.mAxisCustomValue=AE.mMinTick;}return ;}if(this.mMinimum<=0){AF=this.mMaximum>1?0:-1;AE.mMinTick=Math.pow(10,AF);if(AL.mUseCustomMinMax){AE.mMaxTick=this.mMaximum;AI=Math.floor(g.call(this,this.mMaximum));if(g.call(this,this.mMaximum)===AI){AI--;}}else{AI=Math.ceil(g.call(this,this.mMaximum));AE.mMaxTick=Math.pow(10,AI);}for(AH=AF+1;AH<AI;++AH){AE.mTicks.push(Math.pow(10,Math.floor(AH)));}if(AK&&AG<=0){AL.mAxisCustomValue=Math.max(AE.mMinTick,AL.mAxisCustomValue);}return ;}if(AL.mUseCustomMinMax){AI=g.call(this,this.mMaximum);AF=g.call(this,this.mMinimum);AE.mMaxTick=this.mMaximum;AE.mMinTick=this.mMinimum;}else{AI=Math.ceil(g.call(this,this.mMaximum));AF=Math.floor(g.call(this,this.mMinimum));AE.mMaxTick=Math.pow(10,AI);AE.mMinTick=Math.pow(10,AF);}for(AH=AF+1;AH<AI;++AH){AE.mTicks.push(Math.pow(10,Math.floor(AH)));}if(AK&&AG<=0){AL.mAxisCustomValue=AE.mMinTick;}}function q(AO,AJ){var AG=AJ,AE,AH;AO.mStep=d.call(this,this.mMaximum,this.mMinimum,AG.mAlwaysIncludeZero);AO.mMaxTick=Math.ceil(this.mMaximum/AO.mStep)*AO.mStep;AO.mMinTick=Math.floor(this.mMinimum/AO.mStep)*AO.mStep;AO.mMinTick=(AO.mMinTick*this.mMinimum<0)?0:AO.mMinTick;if(AG.mAlwaysIncludeZero){AO.mMaxTick=(this.mMaximum<0)?0:AO.mMaxTick;AO.mMinTick=(this.mMinimum>0)?0:AO.mMinTick;}var AI=AO.mMaxTick-AO.mMinTick;if(AO.mStep>=AI){return ;}if(s.call(this,AO)){return ;}AE=Math.floor((AO.mMaxTick-AO.mMinTick+AO.mStep/100)/AO.mStep)+1;var AK=this.mNumberFormat;for(AH=1;AH<AE-1;++AH){var AM=AO.mMinTick+AH*AO.mStep,AN,AF,AL;if(AO.mStep<1&&AK.mFormatType===4&&AK.mCustomFormat.indexOf("%")!==-1){AN=AM*100;if(!J.isIntegar(AN)){AF=Math.round(AN);AL=Math.abs(AN-AF);if(AL<R){AM=AF/100;}}}AO.mTicks.push(AM);}}function C(AO,AI){var AN=AI,AH,AE,AL,AG,AK,AJ,AF,AM;AO.mMaxTick=AN.mAxisMaxValue;AO.mMinTick=AN.mAxisMinValue;if(s.call(this,AO)){return ;}if(!V.call(this)||this.mMajorGrid.mUseManualGrid){AO.mStep=d.call(this,AO.mMaxTick,AO.mMinTick,false);AH=AO.mMaxTick-AO.mMinTick;if(AO.mStep>=AH){return ;}AE=Math.floor(AH/AO.mStep);if(!(this.mChartContextPtr.mIsTimeSeriesChart)&&AH===AE*AO.mStep){for(AG=1;AG<AE;++AG){AO.mTicks.push(AO.mMinTick+AG*AO.mStep);}}else{AH=AO.mMaxTick-AO.mMinTick;AL=10;AK=false;for(AG=3;AG<AE;++AG){AJ=AH/AG;while(AJ<1){AJ*=10;}while(AJ>=10){AJ/=10;}if(AJ===Math.floor(AJ)){AL=AG;AK=true;break;}}if(AK){AO.mStep=AH/AL;for(AG=1;AG<AL;++AG){AO.mTicks.push(AO.mMinTick+AG*AO.mStep);}}else{AF=Math.ceil((AO.mMinTick+AO.mStep/100)/AO.mStep)*AO.mStep;AM=Math.floor((AO.mMaxTick-AO.mStep/100-AF)/AO.mStep)+3;for(AG=0;AG<AM-2;++AG){AO.mTicks.push(AF+AG*AO.mStep);}}}}else{AH=AO.mMaxTick-AO.mMinTick;AL=10;for(AG=6;AG<=9;++AG){AJ=AH/AG;while(AJ<10){AJ*=10;}while(AJ>=100){AJ/=10;}if(AJ===Math.floor(AJ)){AL=AG;break;}}AO.mStep=AH/AL;for(AG=1;AG<AL;++AG){AO.mTicks.push(AO.mMinTick+AG*AO.mStep);}}}function E(AE,AI){var AH,AF,AG;AE.mMaxTick=AI.mAxisMaxValue;if(AE.mMaxTick<=this.mMinimum){this.mMinimum=AE.mMaxTick-1;}AE.mStep=d.call(this,AE.mMaxTick,this.mMinimum,AI.mAlwaysIncludeZero&&(AE.mMaxTick>0));AH=(AI.mAlwaysIncludeZero&&(this.mMinimum>0))?0:this.mMinimum;if(V.call(this)){AE.mMinTick=AE.mMaxTick-Math.ceil((AE.mMaxTick-AH)/AE.mStep)*AE.mStep;}else{AE.mMinTick=Math.floor(AH/AE.mStep)*AE.mStep;}if(s.call(this,AE)){return ;}AF=Math.floor((AE.mMaxTick-AE.mStep/100-AE.mMinTick)/AE.mStep)+2;for(AG=1;AG<AF-1;++AG){AE.mTicks.push(AE.mMinTick+AG*AE.mStep);}}function h(AE,AJ){var AF,AI,AG,AH;AE.mMinTick=AJ.mAxisMinValue;if(AE.mMinTick>=this.mMaximum){this.mMaximum=AE.mMinTick+1;}AE.mStep=d.call(this,this.mMaximum,AE.mMinTick,AJ.mAlwaysIncludeZero&&(AE.mMinTick<0));AF=(AJ.mAlwaysIncludeZero&&(this.mMaximum<0))?0:this.mMaximum;if(V.call(this)){AE.mMaxTick=AE.mMinTick+Math.ceil((AF-AE.mMinTick)/AE.mStep)*AE.mStep;}else{AE.mMaxTick=Math.ceil(AF/AE.mStep)*AE.mStep;}if(s.call(this,AE)){return ;}AI=Math.ceil((AE.mMinTick+AE.mStep/100)/AE.mStep)*AE.mStep;AG=Math.floor((AE.mMaxTick-AI+AE.mStep/100)/AE.mStep)+2;for(AH=0;AH<AG-2;++AH){AE.mTicks.push(AI+AH*AE.mStep);}}function d(AU,AO,AG){var AN,AI;if(this.mMajorGrid.mUseManualGrid){return this.mMajorGrid.mGridInterval;}AN=0;if(AG){AN=Math.max(AU,AU-AO);AN=Math.max(AN,-AO);}else{AN=AU-AO;}if(AN===0){this.mIsShown=false;return 1;}if(AN>=1&&AN<=4&&parseInt(AN)===AN){var AV=this.PrimaryMetricIndex,AJ=AV.length;for(var AQ=0;AQ<AJ;AQ++){var AM=this.mChartContextPtr.mDatasetPtr,AP=AM.dataProvider,AH=AP.getSeriesCount(),AL=AP.getGroupCount(),AF=AV[AQ],AK,AS;for(var AT=0;AT<AH;AT++){AK=AP.getMetricIndexForSeries(AT);if(AK===AF){AS=true;for(var AR=0;AR<AL;AR++){var AW=AM.GetData(AT,AR);if(parseInt(AW)!==AW){AS=false;break;}}}if(AS){return 1;}}}}var AE=AN;AI=1;while(AN<1){AN*=10;AI/=10;}while(AN>=10){AN/=10;AI*=10;}if(AN<1.8){AI*=2;AI/=10;}else{if(AN<3.1){AI*=4;AI/=10;}else{if(AN<4.6){AI*=5;AI/=10;}else{if(AN>=8.1){AI*=2;}}}}AI=this.postProcessStep(AI,AE);return AI;}function s(AE){if(this.mChartContextPtr.mIsGraphMatrix){return false;}var AF=this.mMajorGrid;return AF.mUseManualGrid&&(AF.mGridInterval<(AE.mMaxTick-AE.mMinTick)/30);}function g(AE){return Math.log(AE)/Math.log(10);}function V(){return(this.mGraphMajorType===b.GMT_HISTOGRAM||this.mGraphMajorType===b.GMT_POLAR)&&this.mTripleId.mObjectId===u.DssGraphX1Body;}function w(AH){var AI=this,AE=AI.id,AG=AH.metricId,AF=new m.ui.menus.MenuConfig();(AH.options).forEach(function(AJ){if(AJ!==v.EnumRefLineModelType.CONST){AF.addMenuItem(e[AJ],"xt",function(){AI.toggleRefLineEnabled(AG,AJ,true);});}else{AF.addEditorMenuItem(e[v.EnumRefLineModelType.CONST],AE,function(){return new mstrmojo.ui.menus.EditorConfig({data:{},contents:[{scriptClass:"mstrmojo.ValidationTextBox",alias:"constVal",dtp:mstrmojo.expr.DTP.FLOAT,constraints:{trigger:mstrmojo.validation.TRIGGER.ONBLUR},onEnter:function(){this.validate();}}],fnOk:function(AL,AK){var AM=AK.constVal;if(AM.isValid()){AI.toggleRefLineEnabled(AG,AJ,true,AM.value);}}});});}});return AF;}function r(AG){var AH=this,AF=AG.metricId,AE=new m.ui.menus.MenuConfig();(AG.options).forEach(function(AK){var AI=AK.refType,AJ=e[AI]+((AI===v.EnumRefLineModelType.CONST)?("-["+H.toLocaleString(AK.c)+"]"):"");AE.addMenuItem(AJ,"xt",function(){AH.toggleRefLineEnabled(AF,AI,false,0,AK.modix);});});return AE;}function AB(AI,AE){var AH=AI.GMController,AF=AH.getForbiddenShapeForMetric(AE),AG=[];[{text:mstrmojo.desc(12097,"Bar"),value:AA.BAR},{text:mstrmojo.desc(2059,"Line"),value:AA.LINE},{text:mstrmojo.desc(9738,"Area"),value:AA.AREA},{text:mstrmojo.desc(12100,"Circle"),value:AA.CIRCLE},{text:mstrmojo.desc(12101,"Square"),value:AA.SQUARE},{text:mstrmojo.desc(12102,"Tick"),value:AA.TICK}].forEach(function(AJ){if(AF.indexOf(AJ.value)<0){AG.push(AJ);}});return AG;}function o(AF,AE){return function(AH,AG){if(AH!==AG){AE({ctxt:{sp:AH,mid:AF}});}};}function AC(AH){var AF=AH.options,AE=this.getMenuHandler("changeShape"),AG=new mstrmojo.ui.menus.MenuConfig();AG.addRadioMenuGroup(AH.currValue,o(AH.metricId,AE),AF,"checkMark",undefined,true);return AG;}mstrmojo.gm.GMUtility=mstrmojo.provide("mstrmojo.gm.GMUtility",{mTimers:[],mUseTimer:true,timerId:0,startTimer:function Q(AF){if(this.mUseTimer){var AE=this.timerId++;this.mTimers.push({timeStamp:new Date(),timerId:AE,desc:AF.functionName+": "+AF.purpose});return AE;}},endTimer:function F(AE){if(this.mUseTimer){var AI,AH=this.mTimers;if(AE===undefined){AI=AH.pop();}else{var AG,AF;for(AG=0;AG<AH.length;AG++){AF=AH[AG];if(AF.timerId===AE){AI=AF;AH.splice(AG,1);AG--;}}}if(AI){G.visPrint("%c"+AI.desc+": "+(new Date()-AI.timeStamp)+"ms","color: blue");}}},computeTicksForPercentchart:function(AF,AE,AG){return B(AF,AE,false,AG);},computeTicksForFlexMinMax:function(AF,AE,AG,AH){return B(AF,AE,AG,AH);},formatNumber:function(AG,AF,AE){return x(AG,AF,AE===undefined?3:AE);},sizeCalculator:{sum:function(AE,AI,AJ){var AG,AF=0,AH=0;if(AJ===undefined){AJ=AE.length;}AI=AI||1;for(AG=0;AG<AJ;AG++){if(AE[AG]>0){AH+=AE[AG];AF+=1;}}if(AF>1){AH+=(AF-1)*AI;}return AH;},add:function(AG,AE,AF){AF=AF||1;if(AE>0){AG+=(AE+AF);}return AG;},minus:function(AG,AE,AF){if(AE>0){AG-=(AE+AF);}return AG;}},replaceSpecialChars:function(AE){AE=AE.replace(/&/g,"&amp;");AE=AE.replace(/</g,"&lt;");AE=AE.replace(/>/g,"&gt;");AE=AE.replace(/"/g,"&quot;");return AE;},restoreSpecialChars:function(AE){AE=AE.replace(/&nbsp;/g," ");AE=AE.replace(/&lt;/g,"<");AE=AE.replace(/&gt;/g,">");AE=AE.replace(/&quot;/g,'"');AE=AE.replace(/&amp;/g,"&");return AE;},removeExtraSpace:function(AE){return AE.replace(/ {2,}/g," ");},stringToJSON:function(AE){if(AE===undefined){return undefined;}if(typeof AE==="string"){AE=AE.replace(/'/g,'"');return JSON.parse(AE);}return AE;},everythingToString:function(AF){if(AF===undefined){return undefined;}var AE;if(typeof AF==="object"){AE=JSON.stringify(AF.jsonObj||AF);}else{AE=AF.toString();}AE=AE.replace(/"/g,"'");return AE;},compareElementObj:function(AI,AF){var AH=AI.tid.toString(),AE=AF.tid.toString(),AJ=AI.eid,AG=AF.eid;if(AH!==AE){return AH>AE?1:-1;}if(AJ===AG){return 0;}return AJ>AG?1:-1;},isEqualComb:function(AF,AE){var AJ=true,AI,AH=AF.length,AG=AE.length;if(AH!==AG){return false;}if(AF.length>1){AF.sort(this.compareElementObj);}if(AE.length>1){AE.sort(this.compareElementObj);}for(AI=0;AI<AH;AI++){if(this.compareElementObj(AF[AI],AE[AI])!==0){AJ=false;break;}}return AJ;},serializeCombination:function(AF){var AE="";if(AF.length>1){AF.sort(this.compareElementObj);}n.forEach(AF,function(AG){if(AE!==""){AE+=t;}AE+=(AG.tid+i+AG.eid);});return AE;},deserializeCombination:function(AF){var AG=AF.split(t),AE=[];n.forEach(AG,function(AK){var AH=AK.split(i);var AJ=AH[0];var AI=AH[1];AE.push({tid:AJ,eid:AI});});return AE;},getElementCombinationForMetric:function(AE){var AF=[];AF.push({tid:-1,eid:AE});return AF;},getResolvedFormatsObject:function(AE){return W(AE);},isDigitalArrayEqual:function(AF,AE){return k.call(this,AF,AE);},indexOf:function(AF,AH){var AG,AE=AF.length;for(AG=0;AG<AE;AG++){if(k(AF[AG],AH)){return AG;}}return -1;},parseAxisScaleData:function(AI){var AG,AJ,AF,AE=AI.split(","),AH=[];for(AG=0,AJ=AE.length;AG<AJ;AG++){AF=AE[AG].split(":");AH.push(AF);}return AH;},parseCSSColor:function(AI,AF){var AH=AI.slice(1),AE=[],AG;if(AH.length===6){if(AF===true){AE[0]=AH[4];AE[1]=AH[5];AE[2]=AH[2];AE[3]=AH[3];AE[4]=AH[0];AE[5]=AH[1];}else{for(AG=0;AG<6;AG++){AE[AG]=AH[AG];}}}else{if(AF===true){for(AG=2;AG>=0;AG--){AE.push(AH[AG]);AE.push(AH[AG]);}}else{for(AG=0;AG<3;AG++){AE.push(AH[AG]);AE.push(AH[AG]);}}}return parseInt("0x"+AE.join(""),16);},RGB_BRG_Switch:function(AF){var AH=(AF>>16)&255,AG=(AF>>8)&255,AE=(AF>>0)&255;return(AE<<16)|(AG<<8)|(AH<<0);},encodeColor:function(AF){if(AF===undefined||AF===null||AF==="transparent"||AF==="default"){return AF;}var AG=false,AE={};if(AG){if(typeof AF==="object"){AE.c1=this.RGB_BRG_Switch(f.encodeColor(AF.c1));AE.c2=this.RGB_BRG_Switch(f.encodeColor(AF.c2));AE.or=AF.or;return AE;}return this.RGB_BRG_Switch(f.encodeColor(AF));}if(typeof AF==="object"){AE.c1=f.encodeColor(AF.c1);AE.c2=f.encodeColor(AF.c2);AE.or=AF.or;return AE;}return f.encodeColor(AF);},checkEquality:function(AF,AE){if(typeof AF==="object"&&AF.c1!==undefined){if(AF.c1!==AE.c1){return false;}if(AF.c2!==AE.c2){return false;}if(AF.or!==AE.or){return false;}return true;}return AF===AE;},decodeColor:function(AF){if(AF===undefined||AF===null||AF==="transparent"||AF==="default"){return AF;}var AG=false,AE={};if(AG){if(typeof AF==="object"){AE.c1=f.decodeColor(this.RGB_BRG_Switch(AF.c1));AE.c2=f.decodeColor(this.RGB_BRG_Switch(AF.c2));AE.or=AF.or;return AE;}return f.decodeColor(this.RGB_BRG_Switch(AF));}if(typeof AF==="object"){AE.c1=f.decodeColor(AF.c1);AE.c2=f.decodeColor(AF.c2);AE.or=AF.or;return AE;}return f.decodeColor(AF);},getTrendLineToggleHandler:function(AE,AG,AF){return function(){AE.switchOnOffTrendLineForMetric(AG,AF);};},getTrendLineToggleState:function(AE,AF){return AE.queryTrendLineStatusForMetric(AF);},getEditTrendLineHandler:function(AE,AF){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AE.raiseEventCMSelection(I.TREND_LINE,AF);};},getEditRefLineHandler:function(AE,AF){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AE.raiseEventCMSelection(I.REF_LINE,AF);};},getEditAxisScaleHandler:function(AE,AF){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AE.raiseEventCMSelection(I.AXIS_SCALE,AF);};},getEditAxisOriginHandler:function(AE,AF){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AE.raiseEventCMSelection(I.AXIS_ORIGIN_DEFINE,AF);};},getEditLogScaleHandler:function(AE,AF){return function(){mstrApp.rootCtrl.docCtrl.selectViPanel("propertiesPanel");AE.raiseEventCMSelection(I.LOG_SCALE,AF);};},getOptionObjArr:function(AE,AG,AI){if(!D){D=mstrmojo.gm.GMUtility;}var AF={},AH;if(AG!==undefined){AG=AG.toLowerCase();if(AG==="x1"){AG="x";}else{if(AG==="y1"){AG="y";}}}if(AE.length>1||(AI&&AE.length===1)){if(AG==="x"){AF.opt=mstrmojo.desc(11712,"Bottom Axis");AF.key="XAxis";}else{if(AG==="x2"){AF.opt=mstrmojo.desc(11710,"Top Axis");AF.key="X2Axis";}else{if(AG==="y"){AF.opt=mstrmojo.desc(11715,"Left Axis");AF.key="YAxis";}else{if(AG==="y2"){AF.opt=mstrmojo.desc(11713,"Right Axis");AF.key="Y2Axis";}else{if(AG==="z"){AF.opt=mstrmojo.desc(12090,"SizeBy");AF.key="SizeBy";}}}}}AF.optLvl=j.AXIS;AF.mos=this.getMetricFormatFromIndexArray(AE);}else{if(AE.length===1){AH=this.getMetricFormat(AE[0]);AF.opt=AH.n;AF.mos=[AH];AF.key=AH.mId;AF.comb=D.getElementCombinationForMetric(AH.mId);AF.optLvl=j.METRIC;if(AG==="z"){AF.sizeBy=true;}}}return AF;},filterInValidMetricIndex:function(AF){var AE=[];n.forEach(AF,function(AG){if(AG!==Y){AE.push(AG);}});return AE;},fillBackgroundDiv:function(AF){var AE=document.createElement("div");AE.setAttribute("class","gm-bk-div");AE.style.backgroundColor="rgba(0,0,0,0)";AF.appendChild(AE);},getSubMenu:function(AJ,AK,AI,AH){var AG=AB(AJ,AH),AE=AJ.getMenuHandler("changeShape"),AF=AJ.GMController.getOnTheFlyShapeForMetric(AH);if(AG.length>1){AK.addSubMenuItem(mstrmojo.desc(11972,"Change Shape"),"",AJ.id,AC,{currValue:AF,options:AG,metricId:AI});}else{AK.addRadioMenuGroup(AF,o(AI,AE),AG,"checkMark",undefined,true);}},getReferenceLineSubMenu:function(AF,AJ,AK,AE){var AL=mstrmojo.gm.EnumSubtype,AI=AF.GMController.chartSubType;if(AK&&AI===AL.PERCENT){return ;}var AM=AF.id,AG=AF.getAvailableRefLineTypes(AE)||[];if(AG.length>0){AJ.addSubMenuItem(mstrmojo.desc(13021,"Add Reference Line"),"xt",AM,w,{metricId:AE,options:AG});}var AH=AF.getExistingRefLineOptions(AE)||[];if(AH.length>0){AJ.addMenuItem(mstrmojo.desc(13659,"Edit Reference Line"),"xt",D.getEditRefLineHandler(AF,AE));AJ.addSubMenuItem(mstrmojo.desc(13022,"Remove Reference Line"),"xt",AM,r,{metricId:AE,options:AH});}},reverseMapping:function l(AF){var AH={},AG,AE=AF.length;for(AG=0;AG<AE;AG++){AH[AF[AG]]=AG;}return AH;},longIntAnd:function(AF,AE){var AG;if(AF===AE){return AF;}if(AF>c||AE>c){throw new Error("Operand exceeds valid data range.");}if(AF<Z&&AE<Z){return AF&AE;}if(AF>=Z||AE>=Z){if(AF<AE){AG=AF;AF=AE;AE=AG;}}var AI=Math.floor(AF/Z),AH=Math.floor(AE/Z),AK=AF-AI*Z,AJ=AE-AH*Z;return(AK&AJ)+(AI&AH)*Z;},longIntOr:function(AF,AE){var AG;if(AF===AE){return AF;}if(AF<Z&&AE<Z){return AF|AE;}if(AF<AE){AG=AF;AF=AE;AE=AG;}AG=this.longIntAnd(AF,AE);return AE-AG+AF;},parseNumeric:function(AE){return +AE||parseFloat(AE);},fillTextInDiv:function(AE,AN,AP,AF,AQ,AG,AS,AI,AL){if(AF===undefined){AF=AE.offsetWidth;}if(AQ===undefined){AQ=AE.offsetHeight;}if(AI===undefined){AI=U.MIDDLE;}if(AL===undefined){AL=p.MIDDLE;}if(AG===undefined){AG=false;}var AM,AO,AK,AR=AG?"gm-text-body":"gm-text-body-nowrap",AH=false,AJ;AM=G.measureTextWidth(AP,AS,6);AJ=G.measureTextWidth("...",AS,6);if(AM>AF&&AJ>AF){return ;}AK=document.createElement("div");AK.setAttribute("class",AR);AK.setAttribute("type",y.GM_TEXT_BODY);AK.identity=AN;G.applyStyles2DomNode(AK,AS);AK.innerHTML=AP;AE.appendChild(AK);if(AG){if(AM>AF){AO=AK.offsetHeight;}else{AO=G.measureTextHeight(AP,AS,4);}}else{AO=G.measureTextHeight(AP,AS,4);AH=AM>AF;}AM=Math.min(AM,AF);AK.style.width=AM+"px";if(AG){AH=AK.scrollWidth>AM||AK.scrollHeight>AO;}if(AH){AK.setAttribute("title",AP);}else{AK.setAttribute("title","");}switch(AI){case U.LEFT:AK.style.left="0px";AK.style.textAlign="left";break;case U.MIDDLE:AK.style.left=((AF-AM)>>1)+"px";break;case U.RIGHT:AK.style.right="0px";AK.style.textAlign="right";break;}switch(AL){case p.TOP:AK.style.top="0px";break;case p.MIDDLE:AK.style.top=((AQ-AO)>>1)+"px";break;case p.BOTTOM:AK.style.bottom="0px";break;}},updateTextColorAndAlignment:function(AE,AG,AH){var AI=AE.firstChild,AJ=AI.style,AF=AE.clientWidth,AK=AI.clientWidth,AM=AE.clientHeight,AL=AI.clientHeight;AJ.left="auto";AJ.right="auto";switch(AG){case U.LEFT:AJ.left="0px";break;case U.MIDDLE:AJ.left=((AF-AK)>>1)+"px";break;case U.RIGHT:AJ.right="0px";break;}AJ.top="auto";AJ.bottom="auto";switch(AH){case p.TOP:AJ.top="0px";break;case p.MIDDLE:AJ.top=((AM-AL)>>1)+"px";break;case p.BOTTOM:AJ.bottom="0px";break;}},toggleDisplay:function(AF,AE){if(!AF){return ;}if(AE){AF.style.display="block";}else{AF.style.display="none";}},isTrendLineAvailableForMetric:function(AI,AJ,AM){var AT=false,AQ=mstrmojo.gm.EnumSubtype,AL=m.gm.EnumShape,AR=AI.GMController,AN=AR.chartSubType,AS=AI.model.data.dz,AG=AS.XAxis,AE=AS.YAxis,AH=AS.BreakBy,AK=AS.SliceBy,AO=AM,AF=AR.getChartInfo(),AP=AR.getBreakByAttrsID().length>0||(AF.isABL&&((AG.MetricNames!==undefined)||(AE.MetricNames!==undefined)||(AH.MetricNames!==undefined)||(AK.MetricNames!==undefined)));if(AO===undefined){AO=AR.getOnTheFlyShapeForMetric(AJ);}if(AF.isABL&&AN===AQ.PERCENT){AT=true;}if(AP&&!AF.isBubbleOrScatter&&(AO===AL.BAR||AN===AQ.STACKED||(AN===AQ.AUTO&&AO===AL.AREA))){AT=true;}if(AF.isABL){if(AG.TemplateUnit&&AG.TemplateUnit.length>1){AT=true;}if(AE.TemplateUnit&&AE.TemplateUnit.length>1){AT=true;}if(AG.TemplateUnit===undefined&&AE.TemplateUnit===undefined){AT=true;}}AT=AT||this.isIgnoredMetric(AI,AJ);return !AT;},isTrendLineAvailableForAnyMetric:function(AG){var AF=AG.model.data.gsi.mx,AE;for(AE in AF){if(this.isTrendLineAvailableForMetric(AG,AE)){return true;}}return false;},isIgnoredMetric:function(AH,AF){var AG=AH.GMController,AI,AE;if(AG.bubbleSeriesNum!==undefined){AI=AG.getMetricsOnYAxis();AE=AI.indexOf(AF);if(AE>=AG.bubbleSeriesNum){return true;}AI=AG.getMetricsOnXAxis();AE=AI.indexOf(AF);if(AE>=AG.bubbleSeriesNum){return true;}}return false;},getAxisMetricsInfo:function(AJ){var AE=AJ.model.data.dz,AK=AJ.model.data.gsi.mx,AF,AG,AI=[];if(!AE||!AE.ColorBy||!AK){return AK;}var AH=function(AL){return(AL&&AL.TemplateMetric)||[];};AF=AH(AE.YAxis).concat(AH(AE.XAxis));n.forEach(AK,function(AL){AG=false;n.forEach(AF,function(AM){if(AL.did===AM.id){AG=true;return false;}});if(AG){AI.push(AL);}});return AI;},isInvalidTemplate:function N(AH){if(AH.eg){return false;}var AF=AH.gts;var AE=AF.row.length===0&&AF.col.length===0;n.forEach(AF.row,function(AK){if(AK.otp===-1){AE=true;}});var AJ=AF.col;if(AJ.length>0){var AG,AI=AJ.length-1;for(AG=0;AG<AI;AG++){if(AJ[AG].otp===-1){AE=true;}}}return AE;},isNoData:function(AE){return AE.eg!==undefined;},getInvalidTemplateErrMsg:function(AE){return AE||mstrmojo.desc(12094,"The Graph Matrix requires:")+"\n"+mstrmojo.desc(12095,"- at least one attribute to be placed on the row or column axis")+"\n"+mstrmojo.desc(12096,"- all metrics to be placed on the column axis, below any attributes");},initColorPickerBtnWithGradientDir:function(AF,AG){mstrmojo.func.override({showPickerForCurrentMode:function AE(){this._super();if(this.pickerMode===2&&typeof this.color!=="object"){var AH=this.gradientOrientation,AI=AG.getChartInfo().dirc===mstrmojo.gm.EnumABLDirection.VERTICAL;AH.set("selectedIndex",n.find(AH.items,"id",AI?0:1));}}},AF.colorPicker);},generateToolTipContent:function(AN,AI,AE,AJ,AL,AK,AQ){var AH,AF,AG,AM,AO,AP;for(AH=AN;AH<AI;AH++){AF=AJ[AH];AM=AL[AH];if(AH>AN){AG=AJ[AH-1];AO=AL[AH-1];if(AF.id===AG.id){if(AM===""){continue;}if(AF.fid===AG.fid&&AM.idx===AO.idx){continue;}if(AF.n===""){AK[AK.length-1].v+=L+AM.n;continue;}}}if(AQ){AK.push({n:AF.n,tid:AF.id,v:AM.n});}else{AP=AE===undefined?AF.isRowAttribute:AE;AK.push({n:AF.n,tid:AF.id,v:AM.n,eid:AM.id,tp:AF.otp,axis:AP?1:2,tui:AF.tui,ui:AF.tui,dpt:AF.tui+1,at:AM.at,isRowAttribute:AP,dei:AM.dei,o:AM.o});}}},getAttributeFormCnt:function(AE){var AF;if((AE.fcnt===undefined||AE.fcnt===null)&&AE.fs){AE.fcnt=AE.fs.length||1;}if(AE.fcnt!==undefined&&AE.fcnt!==null){AF=AE.fcnt;}else{if(AE.t===47){AF=1;}else{AF=AE.cs!==undefined?AE.cs:AE.rs;}}return AF;},isTrueForBoolValue:function(AE){return AE===true||AE==="true";},computeTicksForAxis:function(AH,AF){var AG=AH.mOptions,AI,AE={mTicks:[]};if(AF){AI=P.copy(AG);P.copy(AF,AI);}else{AI=AG;}if(AH.mIsPercent){S.call(AH,AE,AI);return AE;}if(AI.mUseLogarithmicScale){O.call(AH,AE,AI);return AE;}if(AH.mGraphMajorType===b.GMT_BUBBLE&&AH.mTripleId.mObjectId===u.DssGraphZBody){AE.mMinTick=AI.mUseMinValue?AI.mAxisMinValue:AH.mMinimum;AE.mMaxTick=AI.mUseMaxValue?AI.mAxisMaxValue:AH.mMaximum;if(AH.mMinTick>=AH.mMaxTick){AE.mMaxTick=AE.mMinTick+1;}return AE;}if(!AI.mUseMaxValue&&!AI.mUseMinValue){q.call(AH,AE,AI);}else{if(AI.mUseMaxValue&&AI.mUseMinValue){C.call(AH,AE,AI);}else{if(AI.mUseMaxValue){E.call(AH,AE,AI);}else{h.call(AH,AE,AI);}}}return AE;},computeTicksForLogScale:function(AG){var AF=AG.mOptions,AE={mTicks:[]};O.call(AG,AE,AF);return AE;},destroyDisposable:function(AE,AF){if(AF){n.removeItem(AE.disposables,AF);AF.destroy();}},handleDestroy:function(AH,AG){if(!AH){return ;}var AI,AF=0,AE=AH.disposables,AJ=(AE&&AE.length)||0;while(AF<AJ){AI=AE[AF];if(!AI.scriptClass||AG.indexOf(AI.scriptClass)<0){this.destroyDisposable(AH,AI);}if(AE.length<AJ){AJ=AE.length;}else{AF++;}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.VisBase","mstrmojo.Widget","mstrmojo.VisUtility","mstrmojo.VisEnum","mstrmojo.chart.model.enums.EnumDSSObjectType","mstrmojo.vi.ui.rw._XtabDE","mstrmojo.vi.ui.rw._HasVisSelections","mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl","mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights","mstrmojo.Button","mstrmojo.models.template.DataInterface","mstrmojo.string","mstrmojo.dom","mstrmojo.array","mstrmojo.DocDataService","mstrmojo.hash","mstrmojo.gm.GMUtility","mstrmojo.func.composite","mstrmojo._colorPalette");var G=mstrmojo.dom,S=mstrmojo.array,F=mstrmojo.chart.model.enums.EnumDSSObjectType,J=mstrmojo.hash,V=mstrmojo.Button.newWebButton,a=mstrmojo.func.composite,L=mstrmojo.emptyFn,X=mstrmojo.VisUtility,d=mstrmojo.VisEnum,E=mstrmojo.gm.GMUtility;var Q={SHARED:0};function Z(){return[{scriptClass:"mstrmojo.Label",cssClass:"dropMsg",text:this.errorMessage+" "+this.errorDetails}];}function I(l){this.raiseEvent({name:"toggleCtrlOverlay",visible:l,controls:Z.call(this)});}function H(){var l=this.parent,m=l&&l.titleBar,n=m&&m.getMenuConfig();if(!n){return ;}n.menus=S.filter(n.menus,function(o){return o.cls!=="uaf";});}function c(){var m=this.model.data,p,o;var l=function(r,t){var q=p.createElement(t),s;if(r instanceof Object){for(s in r){if(r.hasOwnProperty(s)){var u=l(r[s],s);if(u){q.appendChild(u);}}}}else{q.setAttribute("value",r);}return q;},n=function(q){return q.replace(/</g,"&lt;").replace(/"/g,"&quot;");};p=(new DOMParser()).parseFromString("<props><widgetProps><fmt></fmt></widgetProps></props>","text/xml");p.firstChild.firstChild.firstChild.appendChild(l(this.getProperties(),"cvp"));o=(new XMLSerializer()).serializeToString(p);return[{act:"setProperty",nodeKey:m.k,prs:"FormattingWidget",pri:4,v:n(o)}];}function i(n,p){var l=typeof n==="object";if((p===0&&!l)||(p===2&&l)){return false;}for(var m in n){var o=n[m];if(typeof o==="object"&&!i(o,p+1)){return false;}}return true;}mstrmojo.CustomVisBase=mstrmojo.declare(mstrmojo.VisBase,[mstrmojo.vi.ui.rw._XtabDE,mstrmojo.vi.ui.rw._HasVisSelections,mstrmojo.vi.ui.rw.selectors._IsMultiUnitControl,mstrmojo.vi.ui.rw.selectors._BrushesAndHighlights,mstrmojo._colorPalette],{scriptClass:"mstrmojo.CustomVisBase",plotted:false,markupString:'<div id="{@id}" class="custom-vis-layout {@cssClass}" style="position:absolute;font-size:8pt;width:{@width}px;height:{@height}px;z-index:{@zIndex};{@viewportCssText}" mstrattach:click,mousedown,mouseup,mousemove></div>',markupSlots:{containerNode:function(){return this.domNode;},viewport:function(){return this.domNode;}},formatHandlers:{viewport:["background-color","left","top"]},bindings:{gridData:"this.model.data"},externalLibraries:null,cssFiles:null,errorMessage:"Either there is not enough data to display the visualization or the visualization configuration is incomplete.",errorDetails:"",isDynamicTooltip:true,reuseDOMNode:false,dataInterface:null,init:function h(o){if(window.mstrApp&&window.mstrApp.isVI){var n=this.formatHandlers.viewport;if(n){var m=S.indexOf(n,"background-color");if(m>-1){n.splice(m,1);}}}this._super(o);var l=this.cssFiles;if(l){mstrmojo.insertCSSLinks(l);}},plot:mstrmojo.emptyFn,getFilterType:function B(){return this.defn.ins||Q.SHARED;},unrender:function A(l){this.clearCache();this._super(l);},displayError:function b(){I.call(this,true);},renderVisualization:function W(){try{I.call(this,false);this.dataInterface=new mstrmojo.models.template.DataInterface(this.getData());this.plot();this.plotted=true;}catch(l){this.displayError();this.plotted=false;}},getExternalLibraries:function P(){var l=[];S.forEach(this.externalLibraries,function(m){l.push(m);});return l;},postBuildRendering:function O(){var p=this,l,n,o;if(p.waitingForData){return ;}o=p.listenToUpdateColorMap(function(){p.render();if(o&&p.detachUpdateColorMapListener instanceof Function){p.detachUpdateColorMapListener(o);}});H.call(p);n=this._super();var m=this.model.data.egt;if(this.isEmpty()&&(m===undefined||m===d.SERVER_JSON_ERROR_TYPE.AE_ERROR)){if(mstrApp.isExpress){this.addChildren(this.getVisEmptyMsgControls());this.errorMsg.render();}return false;}l=this.getExternalLibraries();if(l){this.requiresExternalScripts(l,function(){p.renderVisualization();});}else{p.renderVisualization();}return n;},redraw:function C(){if(this.reuseDOMNode){if(this.plotted){this.renderVisualization();}return this.plotted;}return false;},moveTooltip:function N(l,r){var q=l.target||G.eventTarget(l.hWin,l.e),o=this,n,m=function m(v){var u,t=v.childNodes;for(u=0;u<t.length;u++){var w=t[u];if(w.nodeName==="title"){return w;}}if(v!==o.domNode){return m(v.parentNode);}return null;},s=m(q);if(s){var p=s.innerHTML||s.textContent;if(p.length){n=p;s.tt=p;s.innerHTML="";}else{if(s.tt!==undefined){n=s.tt;}}}this.richTooltip={posType:mstrmojo.tooltip.POS_TOPLEFT,content:n,top:l.clientY+12,left:l.clientX-12,cssClass:"vi-regular vi-tooltip-A"};this._super(l,r);},isEmpty:function M(){var l=this.model.data;return l.eg!==undefined||l.egt!==undefined;},getVisEmptyMsgControls:function D(){var l=this.model.data.egt;return this.isEmpty()?(((l===undefined||l===d.SERVER_JSON_ERROR_TYPE.AE_ERROR))?[{scriptClass:"mstrmojo.Widget",cssClass:"error-msg",alias:"errorMsg",markupString:X.getVisEmptyMsg("AE_ERROR")}]:Z.call(this)):this._super();},getProperties:function T(){var m=this.model.data,l=m.vp;if(!l){m.vp={cvp:{}};}else{if(!l.cvp){l.cvp={};}}return m.vp.cvp;},getDefaultProperties:function U(){return this.dvp||{};},setDefaultPropertyValues:function g(l){if(l instanceof Object){this.dvp=l;}else{this.dvp={};}},getProperty:function Y(l){var n=this.getProperties(),m=this.getDefaultProperties(),o;o=n[l]===undefined?m[l]:n[l];if(typeof o==="object"){o=J.copy(n[l],m[l]);}return o;},setProperty:function j(v,t,AE){var q=this.getProperties(),x=q[v];if(q&&!J.equals(x,t)){q[v]=t;if(AE&&AE.onPropertyChange instanceof Function){var AC=AE.onPropertyChange(v,t);if(i(AC,0)){J.copy(AC,q);}else{mstrmojo.warn("Results of onPropertyChange() is invalid. It must be an JSON object that contains the properties and values you want to change, and can't have child properties that exceeds two levels.",{},{buttons:[V(mstrmojo.desc(1442,"OK"),mstrmojo.emptyFn)]});}}var AG=!!(AE&&AE.suppressData),u=AE&&AE.requestDefinition,AB=AE&&AE.clientUndoRedoCallback,AD=AB&&(AB instanceof Function),AF=this,z=AF.id,m=AF.parent.id,o=AF.model,AA=o.docModel,w=o.controller,s=c.call(this),p,n,l={},r;var y=function y(AH){return AD?function(){var AJ=mstrmojo.all[z],AI=AJ.getProperties();AI[v]=AH;AB.call(AJ,AH);AJ.getDocModel().selectVIUnit(AJ.parent.id,true);}:L;};if(AG){p=mstrmojo.emptyFn;r=function(){this.submitSilent(s);};}else{p=AA.getSliceCallback({tks:o.data.k});p.success=a([p.success,function(){AA.selectVIUnit(m,true);}]);r=function(){this.submit(s,p,l);};}n=w._getXtabCallback(AF);n.success=a([n.success,function(){AA.selectVIUnit(m,true);}]);if(u){J.copy(mstrmojo.DocDataService.REQUEST_DEFN_DATA,l);}w.cmdMgr.execute({execute:r,urInfo:{silent:AD,callback:n,redo:y(t),undo:y(x)}});}},addThresholdMenuItem:function f(){this.showThreshold=true;},addUseAsFilterMenuItem:function R(){var l=this.parent;if(l&&l.generateToolbar){l.generateToolbar();}},getColorBy:function k(q){if(!q||!this.zonesModel){return null;}var o=this.zonesModel.getColorByAttributes(),n,m=this.dataInterface.data.gts,p=[],l=F.DssTypeAttribute;S.forEach(m.row.concat(m.col),function(r){S.forEach(o,function(s){if((s.otp===l||s.t===l)&&s.id===r.id){p.push(s.id);}});});n=this.model.docModel.getColorBy(p,q);return E.decodeColor(n.color);},getColorByAttInfo:function e(o){function l(z){var x=this,u,r,q,y,s,v,t,w=this.props||{},p=w.attrColorByOpacity||{};z.map(function(AA){r=AA.colorByAttributeIDs;q=AA.colorByElementIDs;y=r&&r.join("|");s=q&&q.join("|");v=p[y]||{};t=v&&v[s];if(t===undefined){t=100;}AA.opacity=t;if(r&&q){u=x.model.docModel.getColorBy(r,q);AA.color=E.decodeColor(u.color);}});}function n(t){var r,q=[],p=this.dataInterface.data.gts;S.forEach(t,function(u){S.forEach(p.row.concat(p.col),function(v){if(v.otp===12&&v.id===u.id){q.push(v);}});});function s(w){var x=[],v=w.length,u,z,y=function(AF,AC){var AH=[],AG,AE,AA=0,AD=AF.length,AB=AC.es.length;for(AG=0;AG<AD;AG++){for(AE=0;AE<AB;AE++){z=AF[AG].text+" "+AC.es[AE].n;AA++;AH.push({comb:AF[AG].comb.concat({eid:AC.es[AE].id,tid:AC.id}),colorByAttributeIDs:AF[AG].colorByAttributeIDs.concat(AC.id),colorByElementIDs:AF[AG].colorByElementIDs.concat(AC.es[AE].id),text:z});}}return AH;};for(u=0;u<v;u++){if(u===0){S.forEach(w[0].es,function(AA){x.push({comb:[{tid:w[0].id,eid:AA.id}],colorByAttributeIDs:[w[0].id],colorByElementIDs:[AA.id],text:AA.n});});}else{x=y(x,w[u]);}}return x;}r=s(q);r.unshift({text:mstrmojo.desc(2461,"All"),color:"#ffffff",opacity:100,comb:[]});return r;}var m=n.call(this,o);l.call(this,m);return m;},applySelection:function K(l){if(!l){return ;}var m=this;this.clearSelections();S.forEach(S.ensureArray(l),function(n){if(n.isSelectAttr){m.addAttributeSelection(n.tid,n.eid,n.name);}else{m.addMetricValueSelection(n);}});this.endSelections();}});}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.BaseVisDropZones","mstrmojo.vi.models.EnumDragSources","mstrmojo.vi.viz.EnumDSSDropZones","mstrmojo.array","mstrmojo.hash","mstrmojo.func");var $ARR=mstrmojo.array,$HASH=mstrmojo.hash,$FUNC=mstrmojo.func,EMPTY_FN=mstrmojo.emptyFn,ENUM_TARGET_POSITION=mstrmojo.vi.models.DropZonesModel.ENUM_TARGET_POSITION,ENUM_DROP_ZONES=mstrmojo.vi.viz.EnumDSSDropZones;var ENUM_ALLOW_ATTRIBUTE_AND_METRIC=0,ENUM_ALLOW_ATTRIBUTE=1,ENUM_ALLOW_METRIC=2,ENUM_ALLOW_ATTRIBUTE_OR_METRIC=3;var DROP_ZONE_MAP=["XAxis","YAxis","BreakBy","SliceBy","ColorBy","SizeBy","AdditionalMetrics","Angle","Grouping","GeoAttribute","Layout","FromItem","ToItem","ItemSize","Latitude","Longitude"];function mapZoneNameToJSONName(name){switch(name){case"Angle":return"AngleBy";case"Grouping":return"Grp";case"GeoAttribute":return"Geo";case"Layout":return"layout";case"FromItem":return"from";case"ToItem":return"to";case"ItemSize":return"itemsz";case"Latitude":return"Lat";case"Longitude":return"Long";}return name;}function isTemplateDropZone(zoneId){return zoneId===-1||zoneId===ENUM_DROP_ZONES.Rows||zoneId===ENUM_DROP_ZONES.Columns;}function getAddItemActions(zone,items,idx,replaceItem,datasetId){var host=this.getHost(),model=host.model,zoneId=zone.id,isTemplate=isTemplateDropZone(zoneId),extras={datasetId:datasetId},actions=[];if(replaceItem){actions.push(isTemplate?model.getRemoveTemplateUnitAction(replaceItem):this.getRemoveDropZoneUnitAction(zone,replaceItem));}if(isTemplate){$ARR.forEach(items,function(item){actions.push(model.getAddTemplateUnitAction(item,datasetId,zoneId,idx));});}else{actions=actions.concat(this.getAddDropZoneUnitsActions(zone,items,idx,extras)||[]);}return actions;}function generateDropZoneItems(dropZones){var length=dropZones&&dropZones.length;if(!length){return null;}var maxLength=DROP_ZONE_MAP.length;if(length>maxLength){throw"ERROR: Defined drop zones exceeds max capacity: "+maxLength+"!";}var me=this,zones=[],zoneNames=[];var getDisabledFn=function(disabledValue){var result=false;try{if(disabledValue){result=eval(disabledValue);}}catch(exception){result=false;}return result;};$ARR.forEach(dropZones,function(zone,index){var zoneName=zone.name,zoneDSSName=DROP_ZONE_MAP[index];if($ARR.indexOf(zoneNames,zoneName)>-1){throw"ERROR: More than one drop zones have same name!";}zoneNames.push(zoneName);zones.push(me.getZone(zoneName,ENUM_DROP_ZONES[zoneDSSName],me.getDZFlatStruct()[mapZoneNameToJSONName(zoneDSSName)],getDisabledFn.call(me,zone.disabled),{title:zone.title,allowSingle:zone.maxCapacity===1}));});return zones;}function getCustomDropZoneIndexByName(zoneName){var index=-1;$ARR.forEach(this.getCustomDropZones(),function(zone,i){if(zone.name===zoneName){index=i;return false;}});return index;}function getAllowedDropItems(zone,dragItems,edge){var me=this,allowObjectType=ENUM_ALLOW_ATTRIBUTE_AND_METRIC,maxCapacity=Number.MAX_VALUE,index=-1;$ARR.forEach(this.getCustomDropZones(),function(zoneDef,i){if(zoneDef.name===zone.n){allowObjectType=zoneDef.allowObjectType;maxCapacity=zoneDef.maxCapacity;index=i;return false;}});if(index===-1){return dragItems;}var isReplacing=this.isReplacing(edge),itemsInZone=this.getDropZoneObjectsByIndex(index),itemsCount=itemsInZone.length;if(!isReplacing&&itemsCount>=maxCapacity){return[];}return $ARR.filter(dragItems,function(item){var isMetric=me.isMetric(item);switch(allowObjectType){case ENUM_ALLOW_ATTRIBUTE:return !isMetric;case ENUM_ALLOW_METRIC:return isMetric;case ENUM_ALLOW_ATTRIBUTE_OR_METRIC:return !itemsCount?true:((itemsCount===1&&isReplacing)||(me.isMetric(itemsInZone[0])===isMetric));}return true;});}function calculateObjectTransition(zone,source,disallowType){var me=this,allowObjectType=zone.allowObjectType;if(allowObjectType!==disallowType&&source.length>0){if(allowObjectType===ENUM_ALLOW_ATTRIBUTE_OR_METRIC&&disallowType===ENUM_ALLOW_ATTRIBUTE&&$ARR.filterOne(this._dropZoneTransitions,function(info){return info.toZoneId===ENUM_DROP_ZONES[DROP_ZONE_MAP[getCustomDropZoneIndexByName.call(me,zone.name)]]&&!me.isMetric(info.obj);})){return ;}var i=Math.min(zone.maxCapacity||Number.MAX_VALUE,source.length);this.transitionObjectsToZone(zone.name,source.splice(0,i));}}mstrmojo.vi.models.CustomVisDropZones=mstrmojo.declare(mstrmojo.vi.models.BaseVisDropZones,null,{scriptClass:"mstrmojo.vi.models.CustomVisDropZones",getDropZones:function getDropZones(){var xtabStructure=this.getHostStructure(),host=this.getHost(),customDropZones=generateDropZoneItems.call(this,this.getCustomDropZones()),zones=xtabStructure?(customDropZones||this._super().zones):[];this.dropZones=zones;return{n:host.defn.ttl,zones:zones};},getAllowDropInfo:function getAllowDropInfo(zone,dragItems,idx,edge,context){dragItems=getAllowedDropItems.call(this,zone,dragItems,edge);return $HASH.copy(this.shouldAllowObjectsInDropZone(zone,dragItems,idx,edge,context),{allowedItems:dragItems.concat(),removeReplaced:edge===ENUM_TARGET_POSITION.ON&&$ARR.find(dragItems,"did",zone.items[idx].did)===-1});},unitsDropped:function unitsDropped(zone,context,dropInfo){var viz=this.getHost(),dragData=context.src.data,actions=context.actions||[],idx=dropInfo.idx,allowedItems=dropInfo.allowedItems,replaceItem=(this.isReplacing(dropInfo.edge)&&dropInfo.removeReplaced)?zone.items[idx]:null,templateActions=getAddItemActions.call(this,zone,allowedItems,this.getDropTargetIndex(zone,dropInfo),replaceItem,dragData.dsid);templateActions=templateActions.concat(this.getActionsForObjectsDropped(zone,allowedItems,this.getDropTargetIndex(zone,dropInfo),replaceItem,{datasetId:dragData.dsid})||[]);this.submitDropZoneUpdates(actions.concat(this.getUpdateTemplateAction(templateActions)),$FUNC.wrapMethods(context.callback,viz.model.docModel.controller._getXtabCallback(viz)));},deleteItems:function deleteItems(zone,items){var me=this,templateActions=[];$ARR.forEach(items,function(item){templateActions.push(isTemplateDropZone(zone.id)?me.getHost().model.getRemoveTemplateUnitAction(item):me.getRemoveDropZoneUnitAction(zone,item));});templateActions=templateActions.concat(this.getActionsForObjectsRemoved(zone,items)||[]);this.submitDropZoneTemplateUpdates(templateActions);},getUnitMenuItems:function getUnitMenuItems(cfg,zone,item,el){this._super(cfg,zone,item,el);this.getDropZoneContextMenuItems(cfg,zone,item,el);},getClearAllUnitsActions:function getClearAllUnitsActions(){return mstrmojo.vi.models.DropZonesModel.prototype.getClearAllUnitsActions.call(this);},transitionDropZones:function transitionDropZones(attributes,metrics){this._dropZoneTransitions=[];this.customDropZonesTransition(attributes,metrics);return this._dropZoneTransitions;},getColorByAttributes:function getColorByAttributes(){var customDZ=this.getCustomDropZones(),zoneItems,me=this;$ARR.forEach(customDZ,function(zone){if(zone.isColorBy===true){zoneItems=me.getDropZoneObjectsByName(zone.name);}});return zoneItems;},getCustomDropZones:EMPTY_FN,getActionsForObjectsDropped:EMPTY_FN,getActionsForObjectsRemoved:EMPTY_FN,getDropZoneContextMenuItems:EMPTY_FN,shouldAllowObjectsInDropZone:EMPTY_FN,getHostStructure:function getHostStructure(){var modelData=this.getHostModel();return modelData&&modelData.gsi;},getDropZoneObjectsByIndex:function getDropZoneItems(index){return this.getDZFlatStruct()[mapZoneNameToJSONName(DROP_ZONE_MAP[index])]||[];},getAddDropZoneObjectsActions:function getAddDropZoneObjectsActions(actions,zoneName,objects,idx,extras){$ARR.insert(actions,undefined,this.getAddDropZoneUnitsActions(this.getZoneModelByName(zoneName),objects||[],idx,extras));},getRemoveDropZoneObjectsActions:function getRemoveDropZoneObjectsActions(actions,zoneName,objects){var me=this;$ARR.forEach($ARR.ensureArray(objects),function(object){actions.push(me.getRemoveDropZoneUnitAction(me.getZoneModelByName(zoneName),object));});},getDropZoneObjectsByName:function getDropZoneObjectsByName(zoneName){return this.getDropZoneObjectsByIndex(getCustomDropZoneIndexByName.call(this,zoneName));},isMetric:function isMetric(object){return object&&object.t===4;},isSameObject:function isSameObject(obj1,obj2){return obj1&&obj2&&(obj1.did||obj1.oid||obj1.id)===(obj2.did||obj2.oid||obj2.id);},isReplacing:function isReplacing(edge){return edge===ENUM_TARGET_POSITION.ON;},isObjectInZone:function isObjectInZone(object,zoneName){var me=this;return $ARR.filter(me.getDropZoneObjectsByName(zoneName),function(dzItem){return me.isSameObject(dzItem,object);}).length>0;},isZoneEmpty:function isZoneEmpty(zoneName){return(this.getDropZoneObjectsByName(zoneName)||[]).length===0;},getZoneModelByName:function getZoneModelByName(zoneName){return this.getZoneModelByZoneId(ENUM_DROP_ZONES[DROP_ZONE_MAP[getCustomDropZoneIndexByName.call(this,zoneName)]]);},getAvatarIconClass:function getAvatarIconClass(){return"viXtab";},getDropZoneName:function getDropZoneName(zone){return zone&&zone.n;},transitionObjectsToZone:function transitionObjectsToZone(zoneName,objects){var dropZoneTransitions=this._dropZoneTransitions,zoneIndex=getCustomDropZoneIndexByName.call(this,zoneName);if(dropZoneTransitions&&zoneIndex!==-1&&objects){$ARR.ensureArray(objects).forEach(function(object){dropZoneTransitions.push({obj:object,toZoneId:ENUM_DROP_ZONES[DROP_ZONE_MAP[zoneIndex]]});});}},customDropZonesTransition:function customDropZonesTransition(attributes,metrics){var me=this,customDropZones=this.getCustomDropZones()||[];customDropZones.forEach(function(zone){calculateObjectTransition.call(me,zone,attributes,ENUM_ALLOW_METRIC);calculateObjectTransition.call(me,zone,metrics,ENUM_ALLOW_ATTRIBUTE);});}});mstrmojo.vi.models.CustomVisDropZones.ENUM_ALLOW_DROP_TYPE={ATTRIBUTE_AND_METRIC:ENUM_ALLOW_ATTRIBUTE_AND_METRIC,ATTRIBUTE:ENUM_ALLOW_ATTRIBUTE,METRIC:ENUM_ALLOW_METRIC,ATTRIBUTE_OR_METRIC:ENUM_ALLOW_ATTRIBUTE_OR_METRIC};}());(function(){mstrmojo.requiresCls("mstrmojo.vi.models.editors.BaseEditorModel","mstrmojo.vi.models.editors.ControlsViewFactory","mstrmojo.vi.models.editors.EditorModel","mstrmojo.models.FormatModel","mstrmojo.CustomVisBase","mstrmojo.ui.CheckList","mstrmojo.gm.GMUtility","mstrmojo.ui.editors.controls.Stepper","mstrmojo.NumGroupStepperContentProvider","mstrmojo.VisUtility","mstrmojo.gm.GMEnums");mstrmojo.requiresClsP("mstrmojo.ui.editors.controls","ComboBox","PreviewButton","CharacterGroup","FillConfigGroup","LineConfigGroup");var c=mstrmojo.emptyFn,Y=mstrmojo.array,L=mstrmojo.hash,l=mstrmojo.VisUtility,I=mstrmojo.gm.GMUtility,j=Y.ensureArray,b=mstrmojo.models.FormatModel.ENUM_PROPERTY_NAMES,W=mstrmojo.ui.editors.controls.CharacterGroup.CTRL_FLAGS,Z=mstrmojo.Button.newWebButton,C=mstrmojo.ui.editors.controls.FillConfigGroup.CTRL_FLAGS,f="30%",g="70%";function d(q,s){var r=null,t;if(typeof s==="number"){Y.forEach(q,function(v,u){if(!t){r=u;}else{if((s-v.value)*(s-t.value)<=0){r=Math.abs(s-v.value)<Math.abs(s-t.value)?u:u-1;return false;}}t=v;});}else{if(typeof s==="string"){Y.forEach(q,function(v,u){if(v.value.toString()===s){r=u;return false;}});}}return r;}function Q(q){return j(q).map(function(r){return{n:r.name,v:r.value};});}function D(v,w,s){var u=this.getHost(),r=this.docModel;if(!s||s.suppressData===undefined){s=L.copy({suppressData:true},s);}u.setProperty(v,w,s);if(s.suppressData){var t=s.callback instanceof Function?s.callback:u.renderVisualization.bind(u);t();var q=this._targetPulldown.selectedIndex;r.selectVIUnit(u.parent.id,true);this._targetPulldown.set("selectedIndex",q);}}function k(u,q,v,r){var t=this.getHost(),s=L.clone(t.getProperty(u))||{};s[q]=v;D.call(this,u,s,r);}function O(r,q){r.set("enabled",!q.disabled);var s=j(q.items);if(s.length>0&&r.getChildControl instanceof Function){s.forEach(function(t){var v=r.getChildControl(t.childName),u=t.disabled;if(v&&u!==undefined){v.set("enabled",!u);}});}}function i(q,t,s,r){q.forEach(function(w,v){w.slot="col"+(v+1)+"Node";});r=L.copy(r,{col1Width:t,col2Width:s,children:q});var u=new mstrmojo.ui.editors.controls.TwoColumnContainer(r);O(u,r);return u;}function h(v){var t=this,s=t.getHost(),q=v.propertyName,r=d.call(this,v.items,s.getProperty(q));var u=this.getPulldown(Q(v.items),function(w){D.call(t,q,w,v.config);},r||0);O(u,v);return u;}function o(r,q){var s={};if(q){r.forEach(function(u,t){var v=q[u.propertyName];if(v==="true"||v===true){s[t]=true;}});}return s;}function X(w){var s=this,r=s.getHost(),q=w.propertyName,u=r.getProperty(q),v=u==="true"?true:(u==="false"?false:w.value);var t=this.getCheckboxAndLabel(v,w.labelText,function(x){D.call(s,q,x.toString(),w.config);});O(t,w);return t;}function m(r,q,v){var w=this,y=w.getHost(),t=r.propertyName,u=j(r.items).map(function(z){return{n:z.labelText,propertyName:z.propertyName};});var x={items:u,multiSelect:r.multiSelect,selectedIndices:o(u,y.getProperty(t)),postselectionChange:function(z){var AC=z.added,AD=this.items[AC?AC[0]:z.removed[0]],AB=!!AC,AA=L.clone(y.getProperty(t))||{};if(this.multiSelect){AA[AD.propertyName]=AB.toString();}else{this.items.forEach(function(AE){AA[AE.propertyName]=(AE===AD?AB:!AB).toString();});}D.call(w,t,AA,r.config);}};L.copy(v,x);var s=new q(x);O(s,r);return s;}function G(q){return m.call(this,q,mstrmojo.ui.ButtonBar,{showIcon:false});}function K(q){return m.call(this,q,mstrmojo.ui.CheckList,{cssClass:"selectors",orientation:q.orientation});}function J(s){var r=this,q=[];Y.forEach(s,function(t){q.push(P.call(r,t));});return q;}function S(q){return new mstrmojo.Label({text:q});}function N(w){var u=this,t=u.getHost(),q=w.propertyName,r=w.config;var s={value:t.getProperty(q),onValid:function(){D.call(u,q,this.value,r);}};var v=new mstrmojo.ui.editors.controls.ValidationTextBox(s);O(v,w);return v;}function p(v){var t=this,s=t.getHost(),q=v.propertyName;var r={provider:new mstrmojo.NumStepperContentProvider({item:{interval:1,value:Number(s.getProperty(q))||v.min||0},min:v.min,max:v.max,container:this,onTraverse:function(){D.call(t,q,this.curVal,v.config);}})};var u=new mstrmojo.ui.editors.controls.Stepper(r);O(u,v);return u;}function E(v){var t=this,s=t.getHost(),q=v.propertyName;var r={selectedValue:s.getProperty(q),items:Q(v.items),isHostedWithin:false,postselectedValueChange:function(w){D.call(t,q,w.value,v.config);}};var u=new mstrmojo.ui.editors.controls.ComboBox(r);O(u,v);return u;}function B(s,r,u,y){var x=this,AA=this.getHost(),v=s.propertyName,t;var w={getChildComp:y,onGroupValueChange:function(AC,AB){k.call(x,v,AC,AB,s.config);},getChildControl:function(AB){return this.getChildComp(AB);}};L.copyProps(["showGradient","showNoFill","showAutomatic"],s,w);t=new r(w);if(r===mstrmojo.ui.editors.controls.LineConfigGroup){var q=t.lineColorAndStyle.lineStyle;q.showNoneOption=t.showNoneOption;q.postInit();}var z=AA.getProperty(v)||{};u.forEach(function(AB){t.setChildValue(AB,z[AB]);});t.iniChildrenComp(u);O(t,s);return t;}function M(r){var q={};L.forEach(r,function(t,s){q[t]=s;});return q;}function A(r,s){var q={};if(r){L.forEach(s,function(u,t){q[u]=r[t];});}return q;}function V(r){var w=this,AA=this.getHost(),q=r&&r.config,t=r.propertyName,y=0,s,u={fontSize:b.FONT_SIZE,fontColor:b.COLOR,fontFamily:b.FONT_FAMILY,fontWeight:b.FONT_WEIGHT,fontItalic:b.FONT_STYLE,fontUnderline:b.UNDERLINE,fontLineThrough:b.LINE_THROUGH};if(r){if(r.showFontFamily!==false){y=y|W.FONT_FAMILY;}if(r.showFontStyle!==false){y=y|W.FONT_STYLE;}if(r.showFontSizeAndColor!==false){y=y|W.FONT_SIZE_AND_COLOR;}if(r.isFontSizeStepper===true){y=y|W.FONT_SIZE_USE_STEPPER;}}var v={visibleControls:y,onGroupValueChange:function(AD,AC){if(AD===b.FONT_SIZE){if(this.visibleControls&W.FONT_SIZE_USE_STEPPER){AC=AC[0];}AC=parseInt(AC,10)+"pt";}k.call(w,t,M(u)[AD],AC,q);},getChildControl:function(AC){return this[AC];}};s=new mstrmojo.ui.editors.controls.CharacterGroup(v);var z=AA.getProperty(t),x=A(z,u),AB=x[b.FONT_SIZE];if(r.isFontSizeStepper&&AB){x[b.FONT_SIZE]=[parseInt(AB,10)];}s.setFormatSource(x);O(s,r);return s;}function F(s){var r="fillColor",q="fillAlpha";return B.call(this,s,mstrmojo.ui.editors.controls.FillConfigGroup,[r,q],function(t){if(t===r){return this.fillColorAndTrans.fillColor;}if(t===q){return this.fillColorAndTrans.fillAlpha.fillAlphaText;}return undefined;});}function T(s){var r="lineColor",q="lineStyle";return B.call(this,s,mstrmojo.ui.editors.controls.LineConfigGroup,[r,q],function(t){if(t===r){return this.lineColorAndStyle.lineColor;}if(t===q){return this.lineColorAndStyle.lineStyle;}return undefined;});}function H(){var AA=this.getHost();function z(AD){function AE(){if(AD===undefined){AD=0;}else{u=AD;}var AF=AC[AD];this.setChildValue(y,AF.color);}this.syncControls(AE);}function AB(){var AF=AA.zonesModel,AD=AF.getCustomDropZones(),AE=[];Y.forEach(AD,function(AH,AG){if(AH.isColorBy===true){AE=AF.dropZones[AG].items;}});return AE;}function w(AD){return AD.map(function(AF,AE){return{n:AF.text,title:AF.text,v:AE};});}var AC=AA.getColorByAttInfo(AB.call(this)),q=w(AC),y="ShapeClr",s="ShapeFillTrans",u,r,v=0,t,x=l.range(1,q.length);t=new mstrmojo.ui.editors.controls.FillConfigGroup({visibleControls:C.FILL_COLOR,onGroupValueChange:function(AI,AH){var AG=[].concat(!u?x:u),AD=AI===y,AF=[],AE=[],AK,AJ;AG.forEach(function(AL){AK=AC[AL];AJ=AK&&AK.comb;AE.push(AJ);if(AD){AF.push(I.encodeColor(AH));AK.color=AH;}});if(AD){AA.updateColorMap(AE,AF);}}});if(t){t.iniChildrenComp([y]);z.call(t,u);}r=this.getPulldown(q,z.bind(t),v||0);return this.getEditorGroup([this.getGroupTitle(mstrmojo.desc(13753,"Shape Color")),r,t]);}function a(u,x,t,w){var s=u.style,v=u.propertyName,q=mstrmojo.vi.models.editors.CustomVisEditorModel.WIDGET_TYPE,r=/^[a-z A-Z\u4e00-\u9fa5:]{1}([\w]|[\u4e00-\u9fa5]|[-.:_]){1,}$/;if(s&&u.style!==q.TWOCOLUMN&&u.style!==q.EDITORGROUP){if(!!v&&t.indexOf(v)!==-1&&x.indexOf(v)===-1){x.push(v);}else{if(!!v&&t.indexOf(v)===-1){t.push(v);}}if(!r.test(v)&&w.indexOf(v)===-1){w.push(v);}return ;}else{if(s&&(u.style===q.TWOCOLUMN||u.style===q.EDITORGROUP)){a(j(u.items),x,t,w);}}Y.forEach(u,function(y){a(y,x,t,w);});}function P(t){switch(t.style){case U.TWOCOLUMN:var r=j(t.items),s=r[0],q=r[1];f=(s&&s.width)||f;g=(q&&q.width)||g;return i.call(this,J.call(this,r),f,g,t);case U.PULLDOWN:return h.call(this,t);case U.LABEL:return S.call(this,t.labelText);case U.BUTTONBAR:return G.call(this,t);case U.CHECKBOXANDLABEL:return X.call(this,t);case U.CHECKLIST:return K.call(this,t);case U.TEXTBOX:return N.call(this,t);case U.STEPPER:return p.call(this,t);case U.COMBOBOX:return E.call(this,t);case U.CHARACTERGROUP:return V.call(this,t);case U.FILLGROUP:return F.call(this,t);case U.LINEGROUP:return T.call(this,t);case U.COLORBYGROUP:return H.call(this,t);}}function n(r){var s=this,q=[];Y.forEach(j(r),function(t){q.push(P.call(s,t));});return q;}function R(u,r){var q=[],s,t=this;Y.forEach(u,function(v){s=j(v.items);switch(v.style){case"EditorGroup":if(s&&s.length){q.push(t.getEditorGroup(n.call(t,s)));}break;default:q.push(P.call(t,v));}});this.replaceChildControls(r,q);}mstrmojo.vi.models.editors.CustomVisEditorModel=mstrmojo.declare(mstrmojo.vi.models.editors.BaseEditorModel,null,{scriptClass:"mstrmojo.vi.models.editors.CustomVisEditorModel",getTargetPulldownItems:function e(v){var s=this._super(v),w,x=this,y=[],q=[],z=[],u=[],AC,AA;w=Q(this.getCustomProperty());Y.forEach(w,function(AD){if(!!AD.v){y=y.concat(AD.v);}});if(!!y.length){a(y,q,z,u);}AC=q&&q.length;AA=u&&u.length;if(AC||AA){var AB="The following property name are repeated: ##.",r="The following property name are invalid: **.",t=(AC&&AA)?AB+r:(AC?AB:r);mstrmojo.warn(mstrmojo.desc(null,t).replace("##",q).replace("**",u),{},{buttons:[Z(mstrmojo.desc(1442,"OK"),mstrmojo.emptyFn)]});}else{if(w.length){s=(j(s)).concat(w);Y.forEach(s,function(AD){if(AD.v){AD.h=R.bind(x,j(AD.v),v);}});}}return s;},getCustomProperty:c});var U=mstrmojo.vi.models.editors.CustomVisEditorModel.WIDGET_TYPE={PULLDOWN:"PullDown",BUTTONBAR:"ButtonBar",CHECKLIST:"CheckList",STEPPER:"Stepper",COMBOBOX:"ComboBox",TEXTBOX:"TextBox",CHECKBOXANDLABEL:"CheckBoxAndLabel",EDITORGROUP:"EditorGroup",TWOCOLUMN:"TwoColumn",LABEL:"Label",CHARACTERGROUP:"CharacterGroup",FILLGROUP:"FillGroup",LINEGROUP:"LineGroup",COLORBYGROUP:"ColorByGroup"};mstrmojo.vi.models.editors.CustomVisEditorModel.ENUM_LINE_STYLE=mstrmojo.gm.EnumCombinedLineStyle;}());